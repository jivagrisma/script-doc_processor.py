.. date: 9699
.. nonce: 4DPjhF
.. section: Windows

Enabled proper Windows styles in python[w].exe manifest.

..

.. bpo: 29080
.. date: 9698
.. nonce: b3qLQT
.. section: Build

Removes hard dependency on hg.exe from PCBuild/build.bat

..

.. bpo: 23903
.. date: 9697
.. nonce: JXJ889
.. section: Build

Added missed names to PC/python3.def.

..

.. bpo: 10656
.. date: 9696
.. nonce: pR8FFU
.. section: Build

Fix out-of-tree building on AIX.  Patch by Tristan Carel and Michael
Haubenwallner.

..

.. bpo: 26359
.. date: 9695
.. nonce: CLz6qy
.. section: Build

Rename --with-optimiations to --enable-optimizations.

..

.. bpo: 28444
.. date: 9694
.. nonce: zkc9nT
.. section: Build

Fix missing extensions modules when cross compiling.

..

.. bpo: 28248
.. date: 9693
.. nonce: KY_-en
.. section: Build

Update Windows build and OS X installers to use OpenSSL 1.0.2j.

..

.. bpo: 28258
.. date: 9692
.. nonce: iKtAHd
.. section: Build

Fixed build with Estonian locale (python-config and distclean targets in
Makefile).  Patch by Arfrever Frehtes Taifersar Arahesis.

..

.. bpo: 26661
.. date: 9691
.. nonce: Z_HNbs
.. section: Build

setup.py now detects system libffi with multiarch wrapper.

..

.. bpo: 28066
.. date: 9690
.. nonce: _3xImV
.. section: Build

Fix the logic that searches build directories for generated include files
when building outside the source tree.

..

.. bpo: 15819
.. date: 9689
.. nonce: QVDr3E
.. section: Build

Remove redundant include search directory option for building outside the
source tree.

..

.. bpo: 27566
.. date: 9688
.. nonce: xDWjEb
.. section: Build

Fix clean target in freeze makefile (patch by Lisa Roach)

..

.. bpo: 27705
.. date: 9687
.. nonce: 8C2Ms3
.. section: Build

Update message in validate_ucrtbase.py

..

.. bpo: 27983
.. date: 9686
.. nonce: jL_1n8
.. section: Build

Cause lack of llvm-profdata tool when using clang as required for PGO
linking to be a configure time error rather than make time when
--with-optimizations is enabled.  Also improve our ability to find the
llvm-profdata tool on MacOS and some Linuxes.

..

.. bpo: 26307
.. date: 9685
.. nonce: Puk2rd
.. section: Build

The profile-opt build now applies PGO to the built-in modules.

..

.. bpo: 26359
.. date: 9684
.. nonce: WXBL-Y
.. section: Build

Add the --with-optimizations configure flag.

..

.. bpo: 27713
.. date: 9683
.. nonce: _3DgXG
.. section: Build

Suppress spurious build warnings when updating importlib's bootstrap files.
Patch by Xiang Zhang

..

.. bpo: 25825
.. date: 9682
.. nonce: JD8aRp
.. section: Build

Correct the references to Modules/python.exp and ld_so_aix, which are
required on AIX.  This updates references to an installation path that was
changed in 3.2a4, and undoes changed references to the build tree that were
made in 3.5.0a1.

..

.. bpo: 27453
.. date: 9681
.. nonce: Pb5DBi
.. section: Build

CPP invocation in configure must use CPPFLAGS. Patch by Chi Hsuan Yen.

..

.. bpo: 27641
.. date: 9680
.. nonce: eGzgCk
.. section: Build

The configure script now inserts comments into the makefile to prevent the
pgen and _freeze_importlib executables from being cross-compiled.

..

.. bpo: 26662
.. date: 9679
.. nonce: XkwRxM
.. section: Build

Set PYTHON_FOR_GEN in configure as the Python program to be used for file
generation during the build.

..

.. bpo: 10910
.. date: 9678
.. nonce: ZdRayb
.. section: Build

Avoid C++ compilation errors on FreeBSD and OS X. Also update FreedBSD
version checks for the original ctype UTF-8 workaround.

..

.. bpo: 28676
.. date: 9677
.. nonce: Wxf6Ds
.. section: Build

Prevent missing 'getentropy' declaration warning on macOS. Patch by Gareth
Rees.


================================================
File: /Misc/NEWS.d/3.5.4.rst
================================================
.. bpo: 30119
.. date: 2017-07-26-15-11-17
.. nonce: DZ6C_S
.. release date: 2017-08-07
.. section: Library

ftplib.FTP.putline() now throws ValueError on commands that contains CR or
LF. Patch by Donghee Na.


================================================
File: /Misc/NEWS.d/3.5.4rc1.rst
================================================
.. bpo: 30730
.. date: 084
.. nonce: rJsyTH
.. original section: Library
.. release date: 2017-07-23
.. section: Security

Prevent environment variables injection in subprocess on Windows.  Prevent
passing other environment variables and command arguments.

..

.. bpo: 30694
.. date: 083
.. nonce: WkMWM_
.. original section: Library
.. section: Security

Upgrade expat copy from 2.2.0 to 2.2.1 to get fixes of multiple security
vulnerabilities including: :cve:`2017-9233` (External entity infinite loop
DoS), :cve:`2016-9063` (Integer overflow, re-fix), :cve:`2016-0718` (Fix
regression bugs from 2.2.0's fix to :cve:`2016-0718`) and :cve:`2012-0876`
(Counter hash flooding with SipHash). Note: the :cve:`2016-5300` (Use
os-specific entropy sources like getrandom) doesn't impact Python, since Python
already gets entropy from the OS to set the expat secret using
``XML_SetHashSalt()``.

..

.. bpo: 30500
.. date: 081
.. nonce: 1VG7R-
.. original section: Library
.. section: Security

Fix urllib.parse.splithost() to correctly parse fragments. For example,
``splithost('//127.0.0.1#@evil.com/')`` now correctly returns the
``127.0.0.1`` host, instead of treating ``@evil.com`` as the host in an
authentication (``login@host``).

..

.. bpo: 29591
.. date: 076
.. nonce: ExKblw
.. original section: Library
.. section: Security

Update expat copy from 2.1.1 to 2.2.0 to get fixes of :cve:`2016-0718` and
:cve:`2016-4472`. See https://sourceforge.net/p/expat/bugs/537/ for more
information.

..

.. bpo: 30876
.. date: 2017-07-11-06-31-32
.. nonce: x35jZX
.. section: Core and Builtins

Relative import from unloaded package now reimports the package instead of
failing with SystemError.  Relative import from non-package now fails with
ImportError rather than SystemError.

..

.. bpo: 30765
.. date: 2017-06-26-14-29-50
.. nonce: Q5iBmf
.. section: Core and Builtins

Avoid blocking in pthread_mutex_lock() when PyThread_acquire_lock() is asked
not to block.

..

.. bpo: 27945
.. date: 100
.. nonce: p29r3O
.. section: Core and Builtins

Fixed various segfaults with dict when input collections are mutated during
searching, inserting or comparing.  Based on patches by Duane Griffin and
Tim Mitchell.

..

.. bpo: 25794
.. date: 099
.. nonce: xfPwqm
.. section: Core and Builtins

Fixed type.__setattr__() and type.__delattr__() for non-interned attribute
names.  Based on patch by Eryk Sun.

..

.. bpo: 29935
.. date: 098
.. nonce: vgjdJo
.. section: Core and Builtins

Fixed error messages in the index() method of tuple, list and deque when
pass indices of wrong type.

..

.. bpo: 28876
.. date: 097
.. nonce: cU-sGT
.. section: Core and Builtins

``bool(range)`` works even if ``len(range)`` raises :exc:`OverflowError`.

..

.. bpo: 29600
.. date: 096
.. nonce: 77wQ6C
.. section: Core and Builtins

Fix wrapping coroutine return values in StopIteration.

..

.. bpo: 29537
.. date: 095
.. nonce: lu1ysY
.. section: Core and Builtins

Restore runtime compatibility with bytecode files generated by CPython 3.5.0
to 3.5.2, and adjust the eval loop to avoid the problems that could be
caused by the malformed variant of the BUILD_MAP_UNPACK_WITH_CALL opcode
that they may contain. Patch by Petr Viktorin, Serhiy Storchaka, and Nick
Coghlan.

..

.. bpo: 28598
.. date: 094
.. nonce: QxbzQn
.. section: Core and Builtins

Support __rmod__ for subclasses of str being called before str.__mod__.
Patch by Martijn Pieters.

..

.. bpo: 29602
.. date: 093
.. nonce: qyyskC
.. section: Core and Builtins

Fix incorrect handling of signed zeros in complex constructor for complex
subclasses and for inputs having a __complex__ method. Patch by Serhiy
Storchaka.

..

.. bpo: 29347
.. date: 092
.. nonce: 1RPPGN
.. section: Core and Builtins

Fixed possibly dereferencing undefined pointers when creating weakref
objects.

..

.. bpo: 29438
.. date: 091
.. nonce: IKxD6I
.. section: Core and Builtins

Fixed use-after-free problem in key sharing dict.

..

.. bpo: 29319
.. date: 090
.. nonce: KLDUZf
.. section: Core and Builtins

Prevent RunMainFromImporter overwriting sys.path[0].

..

.. bpo: 29337
.. date: 089
.. nonce: bjX8AE
.. section: Core and Builtins

Fixed possible BytesWarning when compare the code objects. Warnings could be
emitted at compile time.

..

.. bpo: 29478
.. date: 088
.. nonce: rTQ-qy
.. section: Core and Builtins

If max_line_length=None is specified while using the Compat32 policy, it is
no longer ignored.  Patch by Mircea Cosbuc.

..

.. bpo: 29403
.. date: 2017-07-20-02-29-49
.. nonce: 3RinCV
.. section: Library

Fix ``unittest.mock``'s autospec to not fail on method-bound builtin
functions.  Patch by Aaron Gallagher.

..

.. bpo: 30961
.. date: 2017-07-18-23-47-51
.. nonce: 064jz0
.. section: Library

Fix decrementing a borrowed reference in tracemalloc.

..

.. bpo: 30886
.. date: 2017-07-10-12-14-22
.. nonce: nqQj34
.. section: Library

Fix multiprocessing.Queue.join_thread(): it now waits until the thread
completes, even if the thread was started by the same process which created
the queue.

..

.. bpo: 29854
.. date: 2017-07-07-02-18-57
.. nonce: J8wKb_
.. section: Library

Fix segfault in readline when using readline's history-size option.  Patch
by Nir Soffer.

..

.. bpo: 30807
.. date: 2017-06-29-22-04-44
.. nonce: sLtjY-
.. section: Library

signal.setitimer() may disable the timer when passed a tiny value.
Tiny values (such as 1e-6) are valid non-zero values for setitimer(), which
is specified as taking microsecond-resolution intervals. However, on some
platform, our conversion routine could convert 1e-6 into a zero interval,
therefore disabling the timer instead of (re-)scheduling it.

..

.. bpo: 30441
.. date: 2017-06-29-14-25-14
.. nonce: 3Wh9kc
.. section: Library

Fix bug when modifying os.environ while iterating over it

..

.. bpo: 30532
.. date: 2017-06-26-11-01-59
.. nonce: qTeL1o
.. section: Library

Fix email header value parser dropping folding white space in certain cases.

..

.. bpo: 29169
.. date: 087
.. nonce: 8ypApm
.. section: Library

Update zlib to 1.2.11.

..

.. bpo: 30879
.. date: 086
.. nonce: N3KI-o
.. section: Library

os.listdir() and os.scandir() now emit bytes names when called with
bytes-like argument.

..

.. bpo: 30746
.. date: 085
.. nonce: 7drQI0
.. section: Library

Prohibited the '=' character in environment variable names in
``os.putenv()`` and ``os.spawn*()``.

..

.. bpo: 29755
.. date: 082
.. nonce: diQcY_
.. section: Library

Fixed the lgettext() family of functions in the gettext module. They now
always return bytes.

..

.. bpo: 30645
.. date: 080
.. nonce: oYzbbW
.. section: Library

Fix path calculation in imp.load_package(), fixing it for cases when a
package is only shipped with bytecodes. Patch by Alexandru Ardelean.

..

.. bpo: 23890
.. date: 079
.. nonce: GCFAAZ
.. section: Library

unittest.TestCase.assertRaises() now manually breaks a reference cycle to
not keep objects alive longer than expected.

..

.. bpo: 30149
.. date: 078
.. nonce: hE649r
.. section: Library

inspect.signature() now supports callables with variable-argument parameters
wrapped with partialmethod. Patch by Donghee Na.

..

.. bpo: 29931
.. date: 077
.. nonce: tfcTwK
.. section: Library

Fixed comparison check for ipaddress.ip_interface objects. Patch by Sanjay
Sundaresan.

..

.. bpo: 24484
.. date: 075
.. nonce: vFem8K
.. section: Library

Avoid race condition in multiprocessing cleanup.

..

.. bpo: 28994
.. date: 074
.. nonce: 9vzun1
.. section: Library

The traceback no longer displayed for SystemExit raised in a callback
registered by atexit.

..

.. bpo: 30508
.. date: 073
.. nonce: wNWRS2
.. section: Library

Don't log exceptions if Task/Future "cancel()" method was called.

..

.. bpo: 28556
.. date: 072
.. nonce: mESP7G
.. section: Library

Updates to typing module: Add generic AsyncContextManager, add support for
ContextManager on all versions. Original PRs by Jelle Zijlstra and Ivan
Levkivskyi

..

.. bpo: 29870
.. date: 071
.. nonce: p960Ih
.. section: Library

Fix ssl sockets leaks when connection is aborted in asyncio/ssl
implementation. Patch by Michaël Sghaïer.

..

.. bpo: 29743
.. date: 070
.. nonce: en2P4s
.. section: Library

Closing transport during handshake process leaks open socket. Patch by
Nikolay Kim

..

.. bpo: 27585
.. date: 069
.. nonce: 0Ugqqu
.. section: Library

Fix waiter cancellation in asyncio.Lock. Patch by Mathieu Sornay.

..

.. bpo: 30418
.. date: 068
.. nonce: EwISQm
.. section: Library

On Windows, subprocess.Popen.communicate() now also ignore EINVAL on
stdin.write() if the child process is still running but closed the pipe.

..

.. bpo: 30378
.. date: 067
.. nonce: R_19_5
.. section: Library

Fix the problem that logging.handlers.SysLogHandler cannot handle IPv6
addresses.

..

.. bpo: 29960
.. date: 066
.. nonce: g0wr3r
.. section: Library

Preserve generator state when _random.Random.setstate() raises an exception.
Patch by Bryan Olson.

..

.. bpo: 30414
.. date: 065
.. nonce: jGl1Lb
.. section: Library

multiprocessing.Queue._feed background running thread do not break from main
loop on exception.

..

.. bpo: 30003
.. date: 064
.. nonce: BOl9HE
.. section: Library

Fix handling escape characters in HZ codec.  Based on patch by Ma Lin.

..

.. bpo: 30301
.. date: 063
.. nonce: ywOkjN
.. section: Library

Fix AttributeError when using SimpleQueue.empty() under *spawn* and
*forkserver* start methods.

..

.. bpo: 30329
.. date: 062
.. nonce: EuT36N
.. section: Library

imaplib and poplib now catch the Windows socket WSAEINVAL error (code 10022)
on shutdown(SHUT_RDWR): An invalid operation was attempted. This error
occurs sometimes on SSL connections.

..

.. bpo: 30375
.. date: 061
.. nonce: 9c8qM7
.. section: Library

Warnings emitted when compile a regular expression now always point to the
line in the user code.  Previously they could point into inners of the re
module if emitted from inside of groups or conditionals.

..

.. bpo: 30048
.. date: 060
.. nonce: ELRx8R
.. section: Library

Fixed ``Task.cancel()`` can be ignored when the task is running coroutine
and the coroutine returned without any more ``await``.

..

.. bpo: 29990
.. date: 059
.. nonce: HWV6KE
.. section: Library

Fix range checking in GB18030 decoder.  Original patch by Ma Lin.

..

.. bpo: 26293
.. date: 058
.. nonce: wig0YG
.. section: Library

Change resulted because of zipfile breakage. (See also: bpo-29094)

..

.. bpo: 30243
.. date: 057
.. nonce: RHQt0v
.. section: Library

Removed the __init__ methods of _json's scanner and encoder. Misusing them
could cause memory leaks or crashes.  Now scanner and encoder objects are
completely initialized in the __new__ methods.

..

.. bpo: 30185
.. date: 056
.. nonce: Tiu1n8
.. section: Library

Avoid KeyboardInterrupt tracebacks in forkserver helper process when Ctrl-C
is received.

..

.. bpo: 28556
.. date: 055
.. nonce: 51gjbP
.. section: Library

Various updates to typing module: add typing.NoReturn type, use
WrapperDescriptorType, minor bug-fixes.  Original PRs by Jim
Fasarakis-Hilliard and Ivan Levkivskyi.

..

.. bpo: 30205
.. date: 054
.. nonce: BsxO34
.. section: Library

Fix getsockname() for unbound AF_UNIX sockets on Linux.

..

.. bpo: 30070
.. date: 053
.. nonce: XM_B41
.. section: Library

Fixed leaks and crashes in errors handling in the parser module.

..

.. bpo: 30061
.. date: 052
.. nonce: 2w_dX9
.. section: Library

Fixed crashes in IOBase methods __next__() and readlines() when readline()
or __next__() respectively return non-sizeable object. Fixed possible other
errors caused by not checking results of PyObject_Size(), PySequence_Size(),
or PyMapping_Size().

..

.. bpo: 30068
.. date: 051
.. nonce: n4q47r
.. section: Library

_io._IOBase.readlines will check if it's closed first when hint is present.

..

.. bpo: 29694
.. date: 050
.. nonce: LWKxb1
.. section: Library

Fixed race condition in pathlib mkdir with flags parents=True.  Patch by
Armin Rigo.

..

.. bpo: 29692
.. date: 049
.. nonce: oyWrAE
.. section: Library

Fixed arbitrary unchaining of RuntimeError exceptions in
contextlib.contextmanager.  Patch by Siddharth Velankar.

..

.. bpo: 29998
.. date: 048
.. nonce: poeIKD
.. section: Library

Pickling and copying ImportError now preserves name and path attributes.

..

.. bpo: 29942
.. date: 047
.. nonce: CsGNuT
.. section: Library

Fix a crash in itertools.chain.from_iterable when encountering long runs of
empty iterables.

..

.. bpo: 27863
.. date: 046
.. nonce: pPYHHI
.. section: Library

Fixed multiple crashes in ElementTree caused by race conditions and wrong
types.

..

.. bpo: 28699
.. date: 045
.. nonce: wZztZP
.. section: Library

Fixed a bug in pools in multiprocessing.pool that raising an exception at
the very first of an iterable may swallow the exception or make the program
hang. Patch by Davin Potts and Xiang Zhang.

..

.. bpo: 25803
.. date: 044
.. nonce: CPDR0W
.. section: Library

Avoid incorrect errors raised by Path.mkdir(exist_ok=True) when the OS gives
priority to errors such as EACCES over EEXIST.

..

.. bpo: 29861
.. date: 043
.. nonce: t2ZoRK
.. section: Library

Release references to tasks, their arguments and their results as soon as
they are finished in multiprocessing.Pool.

..

.. bpo: 29884
.. date: 042
.. nonce: kWXR8W
.. section: Library

faulthandler: Restore the old sigaltstack during teardown. Patch by
Christophe Zeitouny.

..

.. bpo: 25455
.. date: 041
.. nonce: ZsahHN
.. section: Library

Fixed crashes in repr of recursive buffered file-like objects.

..

.. bpo: 29800
.. date: 040
.. nonce: d2xASa
.. section: Library

Fix crashes in partial.__repr__ if the keys of partial.keywords are not
strings.  Patch by Michael Seifert.

..

.. bpo: 29742
.. date: 039
.. nonce: 8hqfEO
.. section: Library

get_extra_info() raises exception if get called on closed ssl transport.
Patch by Nikolay Kim.

..

.. bpo: 8256
.. date: 038
.. nonce: jAwGQH
.. section: Library

Fixed possible failing or crashing input() if attributes "encoding" or
"errors" of sys.stdin or sys.stdout are not set or are not strings.

..

.. bpo: 28298
.. date: 037
.. nonce: xfm84U
.. section: Library

Fix a bug that prevented array 'Q', 'L' and 'I' from accepting big intables
(objects that have __int__) as elements.  Patch by Oren Milman.

..

.. bpo: 29615
.. date: 036
.. nonce: OpFKzg
.. section: Library

SimpleXMLRPCDispatcher no longer chains KeyError (or any other exception) to
exception(s) raised in the dispatched methods. Patch by Petr Motejlek.

..

.. bpo: 29704
.. date: 035
.. nonce: WHbx27
.. section: Library

asyncio.subprocess.SubprocessStreamProtocol no longer closes before all
pipes are closed.

..

.. bpo: 29703
.. date: 034
.. nonce: ZdsPCR
.. section: Library

Fix asyncio to support instantiation of new event loops in child processes.

..

.. bpo: 29376
.. date: 033
.. nonce: rrJhJy
.. section: Library

Fix assertion error in threading._DummyThread.is_alive().

..

.. bpo: 29110
.. date: 032
.. nonce: wmE-_T
.. section: Library

Fix file object leak in aifc.open() when file is given as a filesystem path
and is not in valid AIFF format. Patch by Anthony Zhang.

..

.. bpo: 28961
.. date: 031
.. nonce: Rt93vg
.. section: Library

Fix unittest.mock._Call helper: don't ignore the name parameter anymore.
Patch written by Jiajun Huang.

..

.. bpo: 29532
.. date: 030
.. nonce: YCwVQn
.. section: Library

Altering a kwarg dictionary passed to functools.partial() no longer affects
a partial object after creation.

..

.. bpo: 28556
.. date: 029
.. nonce: p6967e
.. section: Library

Various updates to typing module: typing.Counter, typing.ChainMap, improved
ABC caching, etc. Original PRs by Jelle Zijlstra, Ivan Levkivskyi, Manuel
Krebber, and Łukasz Langa.

..

.. bpo: 29100
.. date: 028
.. nonce: LAAERS
.. section: Library

Fix datetime.fromtimestamp() regression introduced in Python 3.6.0: check
minimum and maximum years.

..

.. bpo: 29519
.. date: 027
.. nonce: oGGgZ4
.. section: Library

Fix weakref spewing exceptions during interpreter shutdown when used with a
rare combination of multiprocessing and custom codecs.

..

.. bpo: 29416
.. date: 026
.. nonce: KJGyI_
.. section: Library

Prevent infinite loop in pathlib.Path.mkdir

..

.. bpo: 29444
.. date: 025
.. nonce: cEwgmk
.. section: Library

Fixed out-of-bounds buffer access in the group() method of the match object.
Based on patch by WGH.

..

.. bpo: 29335
.. date: 024
.. nonce: _KC7IK
.. section: Library

Fix subprocess.Popen.wait() when the child process has exited to a stopped
instead of terminated state (ex: when under ptrace).

..

.. bpo: 29290
.. date: 023
.. nonce: XBqptF
.. section: Library

Fix a regression in argparse that help messages would wrap at non-breaking
spaces.

..

.. bpo: 28735
.. date: 022
.. nonce: admHLO
.. section: Library

Fixed the comparison of mock.MagickMock with mock.ANY.

..

.. bpo: 29011
.. date: 021
.. nonce: MI5f2R
.. section: Library

Fix an important omission by adding Deque to the typing module.

..

.. bpo: 29219
.. date: 020
.. nonce: kxui7t
.. section: Library

Fixed infinite recursion in the repr of uninitialized ctypes.CDLL instances.

..

.. bpo: 28969
.. date: 019
.. nonce: j3HJYO
.. section: Library

Fixed race condition in C implementation of functools.lru_cache. KeyError
could be raised when cached function with full cache was simultaneously
called from different threads with the same uncached arguments.

..

.. bpo: 29142
.. date: 018
.. nonce: xo6kAv
.. section: Library

In urllib.request, suffixes in no_proxy environment variable with leading
dots could match related hostnames again (e.g. .b.c matches a.b.c). Patch by
Milan Oberkirch.

..

.. bpo: 30176
.. date: 013
.. nonce: VivmCg
.. section: Documentation

Add missing attribute related constants in curses documentation.

..

.. bpo: 26985
.. date: 012
.. nonce: NB5_9S
.. section: Documentation

Add missing info of code object in inspect documentation.

..

.. bpo: 28929
.. date: 011
.. nonce: Md7kb0
.. section: Documentation

Link the documentation to its source file on GitHub.

..

.. bpo: 25008
.. date: 010
.. nonce: CeIzyU
.. section: Documentation

Document smtpd.py as effectively deprecated and add a pointer to aiosmtpd, a
third-party asyncio-based replacement.

..

.. bpo: 26355
.. date: 009
.. nonce: SDq_8Y
.. section: Documentation

Add canonical header link on each page to corresponding major version of the
documentation. Patch by Matthias Bussonnier.

..

.. bpo: 29349
.. date: 008
.. nonce: PjSo-t
.. section: Documentation

Fix Python 2 syntax in code for building the documentation.

..

.. bpo: 30822
.. date: 2017-07-20-14-29-54
.. nonce: X0wREo
.. section: Tests

Fix regrtest command line parser to allow passing -u extralargefile to run
test_zipfile64.

..

.. bpo: 30383
.. date: 2017-06-27-13-52-43
.. nonce: rCmrv7
.. section: Tests

regrtest: Enhance regrtest and backport features from the master branch.
Add options: --coverage, --testdir, --list-tests (list test files, don't run
them), --list-cases (list test identifiers, don't run them, :issue:`30523`),
--matchfile (load a list of test filters from a text file, :issue:`30540`),
--slowest (alias to --slow).
Enhance output: add timestamp, test result, currently running tests, "Tests
result: xxx" summary with total duration, etc.
Fix reference leak hunting in regrtest, --huntrleaks: regrtest now warms up
caches, create explicitly all internal singletons which are created on
demand to prevent false positives when checking for reference leaks.
(:issue:`30675`).

..

.. bpo: 30357
.. date: 004
.. nonce: n4CPEa
.. section: Tests

test_thread: setUp() now uses support.threading_setup() and
support.threading_cleanup() to wait until threads complete to avoid random
side effects on following tests. Initial patch written by Grzegorz Grzywacz.

..

.. bpo: 28087
.. date: 003
.. nonce: m8dc4R
.. section: Tests

Skip test_asyncore and test_eintr poll failures on macOS. Skip some tests of
select.poll when running on macOS due to unresolved issues with the
underlying system poll function on some macOS versions.

..

.. bpo: 30197
.. date: 002
.. nonce: c5wRfu
.. section: Tests

Enhanced functions swap_attr() and swap_item() in the test.support module.
They now work when delete replaced attribute or item inside the with
statement.  The old value of the attribute or item (or None if it doesn't
exist) now will be assigned to the target of the "as" clause, if there is
one.

..

.. bpo: 29571
.. date: 001
.. nonce: r6Dixr
.. section: Tests

to match the behaviour of the ``re.LOCALE`` flag, test_re.test_locale_flag
now uses ``locale.getpreferredencoding(False)`` to determine the candidate
encoding for the test regex (allowing it to correctly skip the test when the
default locale encoding is a multi-byte encoding)

..

.. bpo: 29243
.. date: 007
.. nonce: WDK4hT
.. section: Build

Prevent unnecessary rebuilding of Python during ``make test``, ``make
install`` and some other make targets when configured with
``--enable-optimizations``.

..

.. bpo: 23404
.. date: 006
.. nonce: PdYVWg
.. section: Build

Don't regenerate generated files based on file modification time anymore:
the action is now explicit. Replace ``make touch`` with ``make regen-all``.

..

.. bpo: 29643
.. date: 005
.. nonce: 4WLIJQ
.. section: Build

Fix ``--enable-optimization`` didn't work.

..

.. bpo: 30687
.. date: 017
.. nonce: 8mqHnu
.. section: Windows

Locate msbuild.exe on Windows when building rather than vcvarsall.bat

..

.. bpo: 29392
.. date: 016
.. nonce: OtqS5t
.. section: Windows

Prevent crash when passing invalid arguments into msvcrt module.

..

.. bpo: 27867
.. date: 015
.. nonce: VMCoJU
.. section: C API

Function PySlice_GetIndicesEx() is replaced with a macro if Py_LIMITED_API
is set to the value between 0x03050400 and 0x03060000 (not including) or
0x03060100 or higher.

..

.. bpo: 29083
.. date: 014
.. nonce: tGTjr_
.. section: C API

Fixed the declaration of some public API functions. PyArg_VaParse() and
PyArg_VaParseTupleAndKeywords() were not available in limited API.
PyArg_ValidateKeywordArguments(), PyArg_UnpackTuple() and Py_BuildValue()
were not available in limited API of version < 3.3 when PY_SSIZE_T_CLEAN is
defined.


================================================
File: /Misc/NEWS.d/3.5.5.rst
================================================
.. bpo: 0
.. date: 2018-02-04
.. no changes: True
.. nonce: G9yme3
.. release date: 2018-02-04
.. section: Library

There were no new changes in version 3.5.5.


================================================
File: /Misc/NEWS.d/3.5.5rc1.rst
================================================
.. bpo: 32551
.. date: 2018-01-16-16-05-37
.. nonce: U0z4W-
.. release date: 2018-01-23
.. section: Security

The ``sys.path[0]`` initialization change for bpo-29139 caused a regression
by revealing an inconsistency in how sys.path is initialized when executing
``__main__`` from a zipfile, directory, or other import location. This is
considered a potential security issue, as it may lead to privileged
processes unexpectedly loading code from user controlled directories in
situations where that was not previously the case.
The interpreter now consistently avoids ever adding the import location's
parent directory to ``sys.path``, and ensures no other ``sys.path`` entries
are inadvertently modified when inserting the import location named on the
command line. (Originally reported as bpo-29723 against Python 3.6rc1, but
it was missed at the time that the then upcoming Python 3.5.4 release would
also be affected)

..

.. bpo: 30657
.. date: 2017-12-01-18-51-03
.. nonce: Fd8kId
.. section: Security

Fixed possible integer overflow in PyBytes_DecodeEscape, :cve:`2017-1000158`.
Original patch by Jay Bosamiya; rebased to Python 3 by Miro Hrončok.

..

.. bpo: 30947
.. date: 2017-09-05-20-34-44
.. nonce: iNMmm4
.. section: Security

Upgrade libexpat embedded copy from version 2.2.1 to 2.2.3 to get security
fixes.

..

.. bpo: 31095
.. date: 2017-08-01-18-48-30
.. nonce: bXWZDb
.. section: Core and Builtins

Fix potential crash during GC caused by ``tp_dealloc`` which doesn't call
``PyObject_GC_UnTrack()``.

..

.. bpo: 32072
.. date: 2017-11-18-21-13-52
.. nonce: nwDV8L
.. section: Library

Fixed issues with binary plists:
Fixed saving bytearrays.
Identical objects will be saved only once.
Equal references will be load as identical objects.
Added support for saving and loading recursive data structures.

..

.. bpo: 31170
.. date: 2017-09-05-20-35-21
.. nonce: QGmJ1t
.. section: Library

expat: Update libexpat from 2.2.3 to 2.2.4. Fix copying of partial
characters for UTF-8 input (libexpat bug 115):
https://github.com/libexpat/libexpat/issues/115


================================================
File: /Misc/NEWS.d/3.6.0.rst
================================================
.. bpo: 0
.. date: 9796
.. no changes: True
.. nonce: F9ENBV
.. release date: 2016-12-23
.. section: Library

No changes since release candidate 2


================================================
File: /Misc/NEWS.d/3.6.0a2.rst
================================================
.. release date: 2016-06-13
.. bpo: 26556
.. date: 9316
.. nonce: v5j2uL
.. original section: Library
.. section: Security

Update expat to 2.1.1, fixes :cve:`2015-1283`.

..

.. bpo: 0
.. date: 9315
.. nonce: PHOAdg
.. original section: Library
.. section: Security

Fix TLS stripping vulnerability in smtplib, :cve:`2016-0772`. Reported by Team
Oststrom.

..

.. bpo: 26839
.. date: 9303
.. nonce: yVvy7R
.. original section: Library
.. section: Security

On Linux, :func:`os.urandom` now calls ``getrandom()`` with
``GRND_NONBLOCK`` to fall back on reading ``/dev/urandom`` if the urandom
entropy pool is not initialized yet. Patch written by Colm Buckley.

..

.. bpo: 27095
.. date: 9332
.. nonce: 92UoyH
.. section: Core and Builtins

Simplified MAKE_FUNCTION and removed MAKE_CLOSURE opcodes. Patch by Demur
Rumed.

..

.. bpo: 27190
.. date: 9331
.. nonce: DHDFeD
.. section: Core and Builtins

Raise NotSupportedError if sqlite3 is older than 3.3.1. Patch by Dave
Sawyer.

..

.. bpo: 27286
.. date: 9330
.. nonce: U8q6B1
.. section: Core and Builtins

Fixed compiling BUILD_MAP_UNPACK_WITH_CALL opcode.  Calling function with
generalized unpacking (PEP 448) and conflicting keyword names could cause
undefined behavior.

..

.. bpo: 27140
.. date: 9329
.. nonce: uc39-1
.. section: Core and Builtins

Added BUILD_CONST_KEY_MAP opcode.

..

.. bpo: 27186
.. date: 9328
.. nonce: EAnCS7
.. section: Core and Builtins

Add support for os.PathLike objects to open() (part of :pep:`519`).

..

.. bpo: 27066
.. date: 9327
.. nonce: SNExZi
.. section: Core and Builtins

Fixed SystemError if a custom opener (for open()) returns a negative number
without setting an exception.

..

.. bpo: 26983
.. date: 9326
.. nonce: A0f3fK
.. section: Core and Builtins

float() now always return an instance of exact float. The deprecation
warning is emitted if __float__ returns an instance of a strict subclass of
float.  In a future versions of Python this can be an error.

..

.. bpo: 27097
.. date: 9325
.. nonce: woRKey
.. section: Core and Builtins

Python interpreter is now about 7% faster due to optimized instruction
decoding.  Based on patch by Demur Rumed.

..

.. bpo: 26647
.. date: 9324
.. nonce: DLSzRi
.. section: Core and Builtins

Python interpreter now uses 16-bit wordcode instead of bytecode. Patch by
Demur Rumed.

..

.. bpo: 23275
.. date: 9323
.. nonce: YGPb_y
.. section: Core and Builtins

Allow assigning to an empty target list in round brackets: () = iterable.

..

.. bpo: 27243
.. date: 9322
.. nonce: U36M4E
.. section: Core and Builtins

Update the __aiter__ protocol: instead of returning an awaitable that
resolves to an asynchronous iterator, the asynchronous iterator should be
returned directly.  Doing the former will trigger a
PendingDeprecationWarning.

..

.. bpo: 0
.. date: 9321
.. nonce: nBpVM1
.. section: Library

Comment out socket (SO_REUSEPORT) and posix (O_SHLOCK, O_EXLOCK) constants
exposed on the API which are not implemented on GNU/Hurd. They would not
work at runtime anyway.

..

.. bpo: 27025
.. date: 9320
.. nonce: ffzxpX
.. section: Library

Generated names for Tkinter widgets are now more meaningful and recognizable.

..

.. bpo: 25455
.. date: 9319
.. nonce: k10GoO
.. section: Library

Fixed crashes in repr of recursive ElementTree.Element and functools.partial
objects.

..

.. bpo: 27294
.. date: 9318
.. nonce: XPCURr
.. section: Library

Improved repr for Tkinter event objects.

..

.. bpo: 20508
.. date: 9317
.. nonce: 3NMbT2
.. section: Library

Improve exception message of IPv{4,6}Network.__getitem__. Patch by Gareth
Rees.

..

.. bpo: 21386
.. date: 9314
.. nonce: DjV72U
.. section: Library

Implement missing IPv4Address.is_global property.  It was documented since
07a5610bae9d.  Initial patch by Roger Luethi.

..

.. bpo: 27029
.. date: 9313
.. nonce: dmycvw
.. section: Library

Removed deprecated support of universal newlines mode from ZipFile.open().

..

.. bpo: 27030
.. date: 9312
.. nonce: p29J7m
.. section: Library

Unknown escapes consisting of ``'\'`` and an ASCII letter in regular
expressions now are errors.  The re.LOCALE flag now can be used only with
bytes patterns.

..

.. bpo: 27186
.. date: 9311
.. nonce: UYiwoh
.. section: Library

Add os.PathLike support to DirEntry (part of :pep:`519`). Initial patch by
Jelle Zijlstra.

..

.. bpo: 20900
.. date: 9310
.. nonce: H5YQPR
.. section: Library

distutils register command now decodes HTTP responses correctly.  Initial
patch by ingrid.

..

.. bpo: 27186
.. date: 9309
.. nonce: Xo4c_F
.. section: Library

Add os.PathLike support to pathlib, removing its provisional status (part of
PEP 519). Initial patch by Dusty Phillips.

..

.. bpo: 27186
.. date: 9308
.. nonce: ZD1wpp
.. section: Library

Add support for os.PathLike objects to os.fsencode() and os.fsdecode() (part
of :pep:`519`).

..

.. bpo: 27186
.. date: 9307
.. nonce: y7YRfj
.. section: Library

Introduce os.PathLike and os.fspath() (part of :pep:`519`).

..

.. bpo: 0
.. date: 9306
.. nonce: iYIeng
.. section: Library

A new version of typing.py provides several new classes and features:
@overload outside stubs, Reversible, DefaultDict, Text, ContextManager,
Type[], NewType(), TYPE_CHECKING, and numerous bug fixes (note that some of
the new features are not yet implemented in mypy or other static analyzers).
Also classes for :pep:`492` (Awaitable, AsyncIterable, AsyncIterator) have been
added (in fact they made it into 3.5.1 but were never mentioned).

..

.. bpo: 25738
.. date: 9305
.. nonce: mED9w4
.. section: Library

Stop http.server.BaseHTTPRequestHandler.send_error() from sending a message
body for 205 Reset Content.  Also, don't send Content header fields in
responses that don't have a body.  Patch by Susumu Koshiba.

..

.. bpo: 21313
.. date: 9304
.. nonce: W30MBr
.. section: Library

Fix the "platform" module to tolerate when sys.version contains truncated
build information.

..

.. bpo: 23883
.. date: 9302
.. nonce: tsZUiM
.. section: Library

Added missing APIs to __all__ to match the documented APIs for the following
modules: cgi, mailbox, mimetypes, plistlib and smtpd. Patches by Jacek
Kołodziej.

..

.. bpo: 27164
.. date: 9301
.. nonce: 6wmjx2
.. section: Library

In the zlib module, allow decompressing raw Deflate streams with a
predefined zdict.  Based on patch by Xiang Zhang.

..

.. bpo: 24291
.. date: 9300
.. nonce: Ac6HvL
.. section: Library

Fix wsgiref.simple_server.WSGIRequestHandler to completely write data to the
client.  Previously it could do partial writes and truncate data.  Also,
wsgiref.handler.ServerHandler can now handle stdout doing partial writes,
but this is deprecated.

..

.. bpo: 21272
.. date: 9299
.. nonce: unScIG
.. section: Library

Use _sysconfigdata.py to initialize distutils.sysconfig.

..

.. bpo: 19611
.. date: 9298
.. nonce: MT-Qga
.. section: Library

:mod:`inspect` now reports the implicit ``.0`` parameters generated by the
compiler for comprehension and generator expression scopes as if they were
positional-only parameters called ``implicit0``. Patch by Jelle Zijlstra.

..

.. bpo: 26809
.. date: 9297
.. nonce: ya7JMb
.. section: Library

Add ``__all__`` to :mod:`string`.  Patch by Emanuel Barry.

..

.. bpo: 26373
.. date: 9296
.. nonce: P6qz6o
.. section: Library

subprocess.Popen.communicate now correctly ignores BrokenPipeError when the
child process dies before .communicate() is called in more/all
circumstances.

..

.. bpo: 0
.. date: 9295
.. nonce: eKchPz
.. section: Library

signal, socket, and ssl module IntEnum constant name lookups now return a
consistent name for values having multiple names.  Ex: signal.Signals(6) now
refers to itself as signal.SIGALRM rather than flipping between that and
signal.SIGIOT based on the interpreter's hash randomization seed.

..

.. bpo: 27167
.. date: 9294
.. nonce: orA_j0
.. section: Library

Clarify the subprocess.CalledProcessError error message text when the child
process died due to a signal.

..

.. bpo: 25931
.. date: 9293
.. nonce: W7h6Am
.. section: Library

Don't define socketserver.Forking* names on platforms such as Windows that
do not support os.fork().

..

.. bpo: 21776
.. date: 9292
.. nonce: 04eQfa
.. section: Library

distutils.upload now correctly handles HTTPError. Initial patch by Claudiu
Popa.

..

.. bpo: 26526
.. date: 9291
.. nonce: ScewjJ
.. section: Library

Replace custom parse tree validation in the parser module with a simple DFA
validator.

..

.. bpo: 27114
.. date: 9290
.. nonce: bGCuAM
.. section: Library

Fix SSLContext._load_windows_store_certs fails with PermissionError

..

.. bpo: 18383
.. date: 9289
.. nonce: jr-b0l
.. section: Library

Avoid creating duplicate filters when using filterwarnings and simplefilter.
Based on patch by Alex Shkop.

..

.. bpo: 23026
.. date: 9288
.. nonce: V2rgYX
.. section: Library

winreg.QueryValueEx() now return an integer for REG_QWORD type.

..

.. bpo: 26741
.. date: 9287
.. nonce: fsbb42
.. section: Library

subprocess.Popen destructor now emits a ResourceWarning warning if the child
process is still running.

..

.. bpo: 27056
.. date: 9286
.. nonce: rk-BBL
.. section: Library

Optimize pickle.load() and pickle.loads(), up to 10% faster to deserialize a
lot of small objects.

..

.. bpo: 21271
.. date: 9285
.. nonce: bHIfFA
.. section: Library

New keyword only parameters in reset_mock call.

..

.. bpo: 5124
.. date: 9284
.. nonce: 4kwBvM
.. section: IDLE

Paste with text selected now replaces the selection on X11. This matches how
paste works on Windows, Mac, most modern Linux apps, and ttk widgets.
Original patch by Serhiy Storchaka.

..

.. bpo: 24750
.. date: 9283
.. nonce: wA-pc9
.. section: IDLE

Switch all scrollbars in IDLE to ttk versions. Where needed, minimal tests
are added to cover changes.

..

.. bpo: 24759
.. date: 9282
.. nonce: 76HB4w
.. section: IDLE

IDLE requires tk 8.5 and availability ttk widgets. Delete now unneeded tk
version tests and code for older versions. Add test for IDLE syntax
colorizer.

..

.. bpo: 27239
.. date: 9281
.. nonce: fToURh
.. section: IDLE

idlelib.macosx.isXyzTk functions initialize as needed.

..

.. bpo: 27262
.. date: 9280
.. nonce: t7ckly
.. section: IDLE

move Aqua unbinding code, which enable context menus, to macosx.

..

.. bpo: 24759
.. date: 9279
.. nonce: ccmySu
.. section: IDLE

Make clear in idlelib.idle_test.__init__ that the directory is a private
implementation of test.test_idle and tool for maintainers.

..

.. bpo: 27196
.. date: 9278
.. nonce: 3yp8TF
.. section: IDLE

Stop 'ThemeChanged' warnings when running IDLE tests. These persisted after
other warnings were suppressed in #20567. Apply Serhiy Storchaka's
update_idletasks solution to four test files. Record this additional advice
in idle_test/README.txt

..

.. bpo: 20567
.. date: 9277
.. nonce: hhT32b
.. section: IDLE

Revise idle_test/README.txt with advice about avoiding tk warning messages
from tests.  Apply advice to several IDLE tests.

..

.. bpo: 24225
.. date: 9276
.. nonce: NxQCka
.. section: IDLE

Update idlelib/README.txt with new file names and event handlers.

..

.. bpo: 27156
.. date: 9275
.. nonce: j1N9br
.. section: IDLE

Remove obsolete code not used by IDLE.

..

.. bpo: 27117
.. date: 9274
.. nonce: YrLPf4
.. section: IDLE

Make colorizer htest and turtledemo work with dark themes. Move code for
configuring text widget colors to a new function.

..

.. bpo: 24225
.. date: 9273
.. nonce: RbyFuV
.. section: IDLE

Rename many ``idlelib/*.py`` and ``idle_test/test_*.py`` files. Edit files to
replace old names with new names when the old name referred to the module
rather than the class it contained. See the issue and IDLE section in What's
New in 3.6 for more.

..

.. bpo: 26673
.. date: 9272
.. nonce: dh0_Ij
.. section: IDLE

When tk reports font size as 0, change to size 10. Such fonts on Linux
prevented the configuration dialog from opening.

..

.. bpo: 21939
.. date: 9271
.. nonce: pWz-OK
.. section: IDLE

Add test for IDLE's percolator. Original patch by Saimadhav Heblikar.

..

.. bpo: 21676
.. date: 9270
.. nonce: hqy6Qh
.. section: IDLE

Add test for IDLE's replace dialog. Original patch by Saimadhav Heblikar.

..

.. bpo: 18410
.. date: 9269
.. nonce: DLSPZo
.. section: IDLE

Add test for IDLE's search dialog. Original patch by Westley Martínez.

..

.. bpo: 21703
.. date: 9268
.. nonce: bEU8sP
.. section: IDLE

Add test for undo delegator.  Patch mostly by Saimadhav Heblikar .

..

.. bpo: 27044
.. date: 9267
.. nonce: 4y7tyM
.. section: IDLE

Add ConfigDialog.remove_var_callbacks to stop memory leaks.

..

.. bpo: 23977
.. date: 9266
.. nonce: miDjj8
.. section: IDLE

Add more asserts to test_delegator.

..

.. bpo: 16484
.. date: 9265
.. nonce: ITzcGg
.. section: Documentation

Change the default PYTHONDOCS URL to "https:", and fix the resulting links
to use lowercase.  Patch by Sean Rodman, test by Kaushik Nadikuditi.

..

.. bpo: 24136
.. date: 9264
.. nonce: MUK0zK
.. section: Documentation

Document the new :pep:`448` unpacking syntax of 3.5.

..

.. bpo: 22558
.. date: 9263
.. nonce: Pk02YC
.. section: Documentation

Add remaining doc links to source code for Python-coded modules. Patch by
Yoni Lavi.

..

.. bpo: 25285
.. date: 9262
.. nonce: 6CxIBo
.. section: Tests

regrtest now uses subprocesses when the -j1 command line option is used:
each test file runs in a fresh child process. Before, the -j1 option was
ignored.

..

.. bpo: 25285
.. date: 9261
.. nonce: ENYqUQ
.. section: Tests

Tools/buildbot/test.bat script now uses -j1 by default to run each test file
in fresh child process.

..

.. bpo: 27064
.. date: 9260
.. nonce: xeY1WF
.. section: Windows

The py.exe launcher now defaults to Python 3. The Windows launcher
``py.exe`` no longer prefers an installed Python 2 version over Python 3 by
default when used interactively.

..

.. bpo: 17500
.. date: 9257
.. nonce: QTZbRV
.. section: Windows

Remove unused and outdated icons. (See also:
https://github.com/python/pythondotorg/issues/945)

..

.. bpo: 27229
.. date: 9259
.. nonce: C2NDch
.. section: Build

Fix the cross-compiling pgen rule for in-tree builds.  Patch by Xavier de
Gaye.

..

.. bpo: 26930
.. date: 9258
.. nonce: Sqz2O3
.. section: Build

Update OS X 10.5+ 32-bit-only installer to build and link with OpenSSL
1.0.2h.

..

.. bpo: 27186
.. date: 9256
.. nonce: Ll8R-t
.. section: C API

Add the PyOS_FSPath() function (part of :pep:`519`).

..

.. bpo: 26282
.. date: 9255
.. nonce: Rp-R6L
.. section: C API

PyArg_ParseTupleAndKeywords() now supports positional-only parameters.

..

.. bpo: 26282
.. date: 9254
.. nonce: DRRV--
.. section: Tools/Demos

Argument Clinic now supports positional-only and keyword parameters in the
same function.


================================================
File: /Misc/NEWS.d/3.6.0a3.rst
================================================
.. release date: 2016-07-11
.. bpo: 27278
.. date: 9361
.. nonce: y_HkGw
.. original section: Library
.. section: Security

Fix os.urandom() implementation using getrandom() on Linux.  Truncate size
to INT_MAX and loop until we collected enough random bytes, instead of
casting a directly Py_ssize_t to int.

..

.. bpo: 22636
.. date: 9357
.. nonce: 3fQW_g
.. original section: Library
.. section: Security

Avoid shell injection problems with ctypes.util.find_library().

..

.. bpo: 27473
.. date: 9385
.. nonce: _nOtTA
.. section: Core and Builtins

Fixed possible integer overflow in bytes and bytearray concatenations.
Patch by Xiang Zhang.

..

.. bpo: 23034
.. date: 9384
.. nonce: GWaUqn
.. section: Core and Builtins

The output of a special Python build with defined COUNT_ALLOCS,
SHOW_ALLOC_COUNT or SHOW_TRACK_COUNT macros is now off by  default.  It can
be re-enabled using the "-X showalloccount" option.  It now outputs to
stderr instead of stdout.

..

.. bpo: 27443
.. date: 9383
.. nonce: 87ZwZ1
.. section: Core and Builtins

__length_hint__() of bytearray iterators no longer return a negative integer
for a resized bytearray.

..

.. bpo: 27007
.. date: 9382
.. nonce: Gg8Um4
.. section: Core and Builtins

The fromhex() class methods of bytes and bytearray subclasses now return an
instance of corresponding subclass.

..

.. bpo: 26844
.. date: 9381
.. nonce: I0wdnY
.. section: Library

Fix error message for imp.find_module() to refer to 'path' instead of
'name'. Patch by Lev Maximov.

..

.. bpo: 23804
.. date: 9380
.. nonce: ipFvxc
.. section: Library

Fix SSL zero-length recv() calls to not block and not raise an error about
unclean EOF.

..

.. bpo: 27466
.. date: 9379
.. nonce: C_3a8E
.. section: Library

Change time format returned by http.cookie.time2netscape, confirming the
netscape cookie format and making it consistent with documentation.

..

.. bpo: 21708
.. date: 9378
.. nonce: RpPYiv
.. section: Library

Deprecated dbm.dumb behavior that differs from common dbm behavior: creating
a database in 'r' and 'w' modes and modifying a database in 'r' mode.

..

.. bpo: 26721
.. date: 9377
.. nonce: L37Y7r
.. section: Library

Change the socketserver.StreamRequestHandler.wfile attribute to implement
BufferedIOBase. In particular, the write() method no longer does partial
writes.

..

.. bpo: 22115
.. date: 9376
.. nonce: vG5UQW
.. section: Library

Added methods trace_add, trace_remove and trace_info in the tkinter.Variable
class.  They replace old methods trace_variable, trace, trace_vdelete and
trace_vinfo that use obsolete Tcl commands and might not work in future
versions of Tcl.  Fixed old tracing methods: trace_vdelete() with wrong mode
no longer break tracing, trace_vinfo() now always returns a list of pairs of
strings, tracing in the "u" mode now works.

..

.. bpo: 26243
.. date: 9375
.. nonce: dBtlhI
.. section: Library

Only the level argument to zlib.compress() is keyword argument now.  The
first argument is positional-only.

..

.. bpo: 27038
.. date: 9374
.. nonce: yGMV4h
.. section: Library

Expose the DirEntry type as os.DirEntry. Code patch by Jelle Zijlstra.

..

.. bpo: 27186
.. date: 9373
.. nonce: OtorpF
.. section: Library

Update os.fspath()/PyOS_FSPath() to check the return value of __fspath__()
to be either str or bytes.

..

.. bpo: 18726
.. date: 9372
.. nonce: eIXHIl
.. section: Library

All optional parameters of the dump(), dumps(), load() and loads() functions
and JSONEncoder and JSONDecoder class constructors in the json module are
now keyword-only.

..

.. bpo: 27319
.. date: 9371
.. nonce: vDl2zm
.. section: Library

Methods selection_set(), selection_add(), selection_remove() and
selection_toggle() of ttk.TreeView now allow passing multiple items as
multiple arguments instead of passing them as a tuple.  Deprecated
undocumented ability of calling the selection() method with arguments.

..

.. bpo: 27079
.. date: 9370
.. nonce: c7d0Ym
.. section: Library

Fixed curses.ascii functions isblank(), iscntrl() and ispunct().

..

.. bpo: 27294
.. date: 9369
.. nonce: 0WSp9y
.. section: Library

Numerical state in the repr for Tkinter event objects is now represented as
a combination of known flags.

..

.. bpo: 27177
.. date: 9368
.. nonce: U6jRnd
.. section: Library

Match objects in the re module now support index-like objects as group
indices.  Based on patches by Jeroen Demeyer and Xiang Zhang.

..

.. bpo: 26754
.. date: 9367
.. nonce: J3n0QW
.. section: Library

Some functions (compile() etc) accepted a filename argument encoded as an
iterable of integers. Now only strings and byte-like objects are accepted.

..

.. bpo: 26536
.. date: 9366
.. nonce: DgLWm-
.. section: Library

socket.ioctl now supports SIO_LOOPBACK_FAST_PATH. Patch by Daniel Stokes.

..

.. bpo: 27048
.. date: 9365
.. nonce: EVe-Bk
.. section: Library

Prevents distutils failing on Windows when environment variables contain
non-ASCII characters

..

.. bpo: 27330
.. date: 9364
.. nonce: GJaFCV
.. section: Library

Fixed possible leaks in the ctypes module.

..

.. bpo: 27238
.. date: 9363
.. nonce: Q6v6Qv
.. section: Library

Got rid of bare excepts in the turtle module.  Original patch by Jelle
Zijlstra.

..

.. bpo: 27122
.. date: 9362
.. nonce: 06t7zN
.. section: Library

When an exception is raised within the context being managed by a
contextlib.ExitStack() and one of the exit stack generators catches and
raises it in a chain, do not re-raise the original exception when exiting,
let the new chained one through.  This avoids the :pep:`479` bug described in
issue25782.

..

.. bpo: 16864
.. date: 9360
.. nonce: W7tJDa
.. section: Library

sqlite3.Cursor.lastrowid now supports REPLACE statement. Initial patch by
Alex LordThorsen.

..

.. bpo: 26386
.. date: 9359
.. nonce: 9L3Ut4
.. section: Library

Fixed ttk.TreeView selection operations with item id's containing spaces.

..

.. bpo: 8637
.. date: 9358
.. nonce: lHiUSA
.. section: Library

Honor a pager set by the env var MANPAGER (in preference to one set by the
env var PAGER).

..

.. bpo: 16182
.. date: 9356
.. nonce: RgFXyr
.. section: Library

Fix various functions in the "readline" module to use the locale encoding,
and fix get_begidx() and get_endidx() to return code point indexes.

..

.. bpo: 27392
.. date: 9355
.. nonce: obfni7
.. section: Library

Add loop.connect_accepted_socket(). Patch by Jim Fulton.

..

.. bpo: 27477
.. date: 9354
.. nonce: iEuL-9
.. section: IDLE

IDLE search dialogs now use ttk widgets.

..

.. bpo: 27173
.. date: 9353
.. nonce: M-fYaV
.. section: IDLE

Add 'IDLE Modern Unix' to the built-in key sets. Make the default key set
depend on the platform. Add tests for the changes to the config module.

..

.. bpo: 27452
.. date: 9352
.. nonce: dLxZ8W
.. section: IDLE

make command line "idle-test> python test_help.py" work. __file__ is
relative when python is started in the file's directory.

..

.. bpo: 27452
.. date: 9351
.. nonce: RtWnyR
.. section: IDLE

add line counter and crc to IDLE configHandler test dump.

..

.. bpo: 27380
.. date: 9350
.. nonce: Q39r9U
.. section: IDLE

IDLE: add query.py with base Query dialog and ttk widgets. Module had
subclasses SectionName, ModuleName, and HelpSource, which are used to get
information from users by configdialog and file =>Load Module. Each subclass
has itw own validity checks.  Using ModuleName allows users to edit bad
module names instead of starting over. Add tests and delete the two files
combined into the new one.

..

.. bpo: 27372
.. date: 9349
.. nonce: k3Wj2V
.. section: IDLE

Test_idle no longer changes the locale.

..

.. bpo: 27365
.. date: 9348
.. nonce: y7ys_A
.. section: IDLE

Allow non-ascii chars in IDLE NEWS.txt, for contributor names.

..

.. bpo: 27245
.. date: 9347
.. nonce: u9aKO1
.. section: IDLE

IDLE: Cleanly delete custom themes and key bindings. Previously, when IDLE
was started from a console or by import, a cascade of warnings was emitted.
Patch by Serhiy Storchaka.

..

.. bpo: 24137
.. date: 9346
.. nonce: v8o-IT
.. section: IDLE

Run IDLE, test_idle, and htest with tkinter default root disabled.  Fix code
and tests that fail with this restriction.  Fix htests to not create a
second and redundant root and mainloop.

..

.. bpo: 27310
.. date: 9345
.. nonce: KiURpC
.. section: IDLE

Fix IDLE.app failure to launch on OS X due to vestigial import.

..

.. bpo: 26754
.. date: 9344
.. nonce: Qm_N79
.. section: C API

PyUnicode_FSDecoder() accepted a filename argument encoded as an iterable of
integers. Now only strings and byte-like objects are accepted.

..

.. bpo: 28066
.. date: 9343
.. nonce: _3xImV
.. section: Build

Fix the logic that searches build directories for generated include files
when building outside the source tree.

..

.. bpo: 27442
.. date: 9342
.. nonce: S2M0cz
.. section: Build

Expose the Android API level that python was built against, in
sysconfig.get_config_vars() as 'ANDROID_API_LEVEL'.

..

.. bpo: 27434
.. date: 9341
.. nonce: 4nRZmn
.. section: Build

The interpreter that runs the cross-build, found in PATH, must now be of the
same feature version (e.g. 3.6) as the source being built.

..

.. bpo: 26930
.. date: 9340
.. nonce: 9JUeSD
.. section: Build

Update Windows builds to use OpenSSL 1.0.2h.

..

.. bpo: 23968
.. date: 9339
.. nonce: 7AuSK9
.. section: Build

Rename the platform directory from plat-$(MACHDEP) to
plat-$(PLATFORM_TRIPLET). Rename the config directory (LIBPL) from
config-$(LDVERSION) to config-$(LDVERSION)-$(PLATFORM_TRIPLET). Install the
platform specific _sysconfigdata module into the platform directory and
rename it to include the ABIFLAGS.

..

.. bpo: 0
.. date: 9338
.. nonce: U46i2u
.. section: Build

Don't use largefile support for GNU/Hurd.

..

.. bpo: 27332
.. date: 9337
.. nonce: OuRZp9
.. section: Tools/Demos

Fixed the type of the first argument of module-level functions generated by
Argument Clinic.  Patch by Petr Viktorin.

..

.. bpo: 27418
.. date: 9336
.. nonce: W2m_8I
.. section: Tools/Demos

Fixed Tools/importbench/importbench.py.

..

.. bpo: 19489
.. date: 9335
.. nonce: jvzuO7
.. section: Documentation

Moved the search box from the sidebar to the header and footer of each page.
Patch by Ammar Askar.

..

.. bpo: 27285
.. date: 9334
.. nonce: wZur0b
.. section: Documentation

Update documentation to reflect the deprecation of ``pyvenv`` and normalize
on the term "virtual environment". Patch by Steve Piercy.

..

.. bpo: 27027
.. date: 9333
.. nonce: 5oRSGL
.. section: Tests

Added test.support.is_android that is True when this is an Android build.


================================================
File: /Misc/NEWS.d/3.6.0a4.rst
================================================
.. bpo: 27704
.. date: 9455
.. nonce: RUxzHf
.. release date: 2016-08-15
.. section: Core and Builtins

Optimized creating bytes and bytearray from byte-like objects and iterables.
Speed up to 3 times for short objects.  Original patch by Naoki Inada.

..

.. bpo: 26823
.. date: 9454
.. nonce: UWORiU
.. section: Core and Builtins

Large sections of repeated lines in tracebacks are now abbreviated as
"[Previous line repeated {count} more times]" by the builtin traceback
rendering. Patch by Emanuel Barry.

..

.. bpo: 27574
.. date: 9453
.. nonce: q73Tss
.. section: Core and Builtins

Decreased an overhead of parsing keyword arguments in functions implemented
with using Argument Clinic.

..

.. bpo: 22557
.. date: 9452
.. nonce: Hta2Rz
.. section: Core and Builtins

Now importing already imported modules is up to 2.5 times faster.

..

.. bpo: 17596
.. date: 9451
.. nonce: XgbA9V
.. section: Core and Builtins

Include <wincrypt.h> to help with Min GW building.

..

.. bpo: 17599
.. date: 9450
.. nonce: noy7o1
.. section: Core and Builtins

On Windows, rename the privately defined REPARSE_DATA_BUFFER structure to
avoid conflicting with the definition from Min GW.

..

.. bpo: 27507
.. date: 9449
.. nonce: 3pX0Be
.. section: Core and Builtins

Add integer overflow check in bytearray.extend().  Patch by Xiang Zhang.

..

.. bpo: 27581
.. date: 9448
.. nonce: KezjNt
.. section: Core and Builtins

Don't rely on wrapping for overflow check in PySequence_Tuple().  Patch by
Xiang Zhang.

..

.. bpo: 1621
.. date: 9447
.. nonce: _FZWTr
.. section: Core and Builtins

Avoid signed integer overflow in list and tuple operations. Patch by Xiang
Zhang.

..

.. bpo: 27419
.. date: 9446
.. nonce: YaGodL
.. section: Core and Builtins

Standard __import__() no longer look up "__import__" in globals or builtins
for importing submodules or "from import".  Fixed a crash if raise a warning
about unabling to resolve package from __spec__ or __package__.

..

.. bpo: 27083
.. date: 9445
.. nonce: F4ZT1C
.. section: Core and Builtins

Respect the PYTHONCASEOK environment variable under Windows.

..

.. bpo: 27514
.. date: 9444
.. nonce: NLbwPG
.. section: Core and Builtins

Make having too many statically nested blocks a SyntaxError instead of
SystemError.

..

.. bpo: 27366
.. date: 9443
.. nonce: VrInsj
.. section: Core and Builtins

Implemented :pep:`487` (Simpler customization of class creation). Upon
subclassing, the __init_subclass__ classmethod is called on the base class.
Descriptors are initialized with __set_name__ after class creation.

..

.. bpo: 26027
.. date: 9442
.. nonce: nfVMKM
.. section: Library

Add :pep:`519`/__fspath__() support to the os and os.path modules. Includes
code from Jelle Zijlstra. (See also: bpo-27524)

..

.. bpo: 27598
.. date: 9441
.. nonce: y7PtEV
.. section: Library

Add Collections to collections.abc. Patch by Ivan Levkivskyi, docs by Neil
Girdhar.

..

.. bpo: 25958
.. date: 9440
.. nonce: X-V4U1
.. section: Library

Support "anti-registration" of special methods from various ABCs, like
__hash__, __iter__ or __len__.  All these (and several more) can be set to
None in an implementation class and the behavior will be as if the method is
not defined at all. (Previously, this mechanism existed only for __hash__,
to make mutable classes unhashable.)  Code contributed by Andrew Barnert and
Ivan Levkivskyi.

..

.. bpo: 16764
.. date: 9439
.. nonce: cPbNjL
.. section: Library

Support keyword arguments to zlib.decompress().  Patch by Xiang Zhang.

..

.. bpo: 27736
.. date: 9438
.. nonce: 8kMhpQ
.. section: Library

Prevent segfault after interpreter re-initialization due to ref count
problem introduced in code for Issue #27038 in 3.6.0a3. Patch by Xiang
Zhang.

..

.. bpo: 25628
.. date: 9437
.. nonce: UcQnHF
.. section: Library

The *verbose* and *rename* parameters for collections.namedtuple are now
keyword-only.

..

.. bpo: 12345
.. date: 9436
.. nonce: nbAEM8
.. section: Library

Add mathematical constant tau to math and cmath. See also :pep:`628`.

..

.. bpo: 26823
.. date: 9435
.. nonce: HcO8tR
.. section: Library

traceback.StackSummary.format now abbreviates large sections of repeated
lines as "[Previous line repeated {count} more times]" (this change then
further affects other traceback display operations in the module). Patch by
Emanuel Barry.

..

.. bpo: 27664
.. date: 9434
.. nonce: 6DJPxw
.. section: Library

Add to concurrent.futures.thread.ThreadPoolExecutor() the ability to specify
a thread name prefix.

..

.. bpo: 27181
.. date: 9433
.. nonce: 8aw9TZ
.. section: Library

Add geometric_mean and harmonic_mean to statistics module.

..

.. bpo: 27573
.. date: 9432
.. nonce: B7XhTs
.. section: Library

code.interact now prints an message when exiting.

..

.. bpo: 6422
.. date: 9431
.. nonce: iBSc45
.. section: Library

Add autorange method to timeit.Timer objects.

..

.. bpo: 27773
.. date: 9430
.. nonce: hMSSeX
.. section: Library

Correct some memory management errors server_hostname in _ssl.wrap_socket().

..

.. bpo: 26750
.. date: 9429
.. nonce: OQn3fr
.. section: Library

unittest.mock.create_autospec() now works properly for subclasses of
property() and other data descriptors.  Removes the never publicly used,
never documented unittest.mock.DescriptorTypes tuple.

..

.. bpo: 26754
.. date: 9428
.. nonce: XZqomf
.. section: Library

Undocumented support of general bytes-like objects as path in compile() and
similar functions is now deprecated.

..

.. bpo: 26800
.. date: 9427
.. nonce: QDcK8u
.. section: Library

Undocumented support of general bytes-like objects as paths in os functions
is now deprecated.

..

.. bpo: 26981
.. date: 9426
.. nonce: yhNTCf
.. section: Library

Add _order_ compatibility shim to enum.Enum for Python 2/3 code bases.

..

.. bpo: 27661
.. date: 9425
.. nonce: 3JZckO
.. section: Library

Added tzinfo keyword argument to datetime.combine.

..

.. bpo: 0
.. date: 9424
.. nonce: Ny9oPv
.. section: Library

In the curses module, raise an error if window.getstr() or window.instr() is
passed a negative value.

..

.. bpo: 27783
.. date: 9423
.. nonce: cR1jXH
.. section: Library

Fix possible usage of uninitialized memory in operator.methodcaller.

..

.. bpo: 27774
.. date: 9422
.. nonce: FDcik1
.. section: Library

Fix possible Py_DECREF on unowned object in _sre.

..

.. bpo: 27760
.. date: 9421
.. nonce: gxMjp4
.. section: Library

Fix possible integer overflow in binascii.b2a_qp.

..

.. bpo: 27758
.. date: 9420
.. nonce: 0NRV03
.. section: Library

Fix possible integer overflow in the _csv module for large record lengths.

..

.. bpo: 27568
.. date: 9419
.. nonce: OnuO9s
.. section: Library

Prevent HTTPoxy attack (:cve:`2016-1000110`). Ignore the HTTP_PROXY variable
when REQUEST_METHOD environment is set, which indicates that the script is
in CGI mode.

..

.. bpo: 7063
.. date: 9418
.. nonce: nXsVKB
.. section: Library

Remove dead code from the "array" module's slice handling. Patch by Chuck.

..

.. bpo: 27656
.. date: 9417
.. nonce: joTscM
.. section: Library

Do not assume sched.h defines any SCHED_* constants.

..

.. bpo: 27130
.. date: 9416
.. nonce: SUxwXZ
.. section: Library

In the "zlib" module, fix handling of large buffers (typically 4 GiB) when
compressing and decompressing.  Previously, inputs were limited to 4 GiB,
and compression and decompression operations did not properly handle results
of 4 GiB.

..

.. bpo: 24773
.. date: 9415
.. nonce: IDW05R
.. section: Library

Implemented :pep:`495` (Local Time Disambiguation).

..

.. bpo: 0
.. date: 9414
.. nonce: lOkwM8
.. section: Library

Expose the EPOLLEXCLUSIVE constant (when it is defined) in the select
module.

..

.. bpo: 27567
.. date: 9413
.. nonce: bYOgyw
.. section: Library

Expose the EPOLLRDHUP and POLLRDHUP constants in the select module.

..

.. bpo: 1621
.. date: 9412
.. nonce: 0nclmI
.. section: Library

Avoid signed int negation overflow in the "audioop" module.

..

.. bpo: 27533
.. date: 9411
.. nonce: iDmKzV
.. section: Library

Release GIL in nt._isdir

..

.. bpo: 17711
.. date: 9410
.. nonce: 47AILJ
.. section: Library

Fixed unpickling by the persistent ID with protocol 0. Original patch by
Alexandre Vassalotti.

..

.. bpo: 27522
.. date: 9409
.. nonce: 8vVz_t
.. section: Library

Avoid an unintentional reference cycle in email.feedparser.

..

.. bpo: 27512
.. date: 9408
.. nonce: FaGwup
.. section: Library

Fix a segfault when os.fspath() called an __fspath__() method that raised an
exception. Patch by Xiang Zhang.

..

.. bpo: 27714
.. date: 9407
.. nonce: bUEDsI
.. section: IDLE

text_textview and test_autocomplete now pass when re-run in the same
process.  This occurs when test_idle fails when run with the -w option but
without -jn.  Fix warning from test_config.

..

.. bpo: 27621
.. date: 9406
.. nonce: BcpOPU
.. section: IDLE

Put query response validation error messages in the query box itself instead
of in a separate messagebox.  Redo tests to match. Add Mac OSX refinements.
Original patch by Mark Roseman.

..

.. bpo: 27620
.. date: 9405
.. nonce: TXRR6x
.. section: IDLE

Escape key now closes Query box as cancelled.

..

.. bpo: 27609
.. date: 9404
.. nonce: MbTuKa
.. section: IDLE

IDLE: tab after initial whitespace should tab, not autocomplete. This fixes
problem with writing docstrings at least twice indented.

..

.. bpo: 27609
.. date: 9403
.. nonce: OBYgv_
.. section: IDLE

Explicitly return None when there are also non-None returns. In a few cases,
reverse a condition and eliminate a return.

..

.. bpo: 25507
.. date: 9402
.. nonce: lxf68d
.. section: IDLE

IDLE no longer runs buggy code because of its tkinter imports. Users must
include the same imports required to run directly in Python.

..

.. bpo: 27173
.. date: 9401
.. nonce: M-fYaV
.. section: IDLE

Add 'IDLE Modern Unix' to the built-in key sets. Make the default key set
depend on the platform. Add tests for the changes to the config module.

..

.. bpo: 27452
.. date: 9400
.. nonce: RtWnyR
.. section: IDLE

add line counter and crc to IDLE configHandler test dump.

..

.. bpo: 25805
.. date: 9399
.. nonce: 9SVxXQ
.. section: Tests

Skip a test in test_pkgutil as needed that doesn't work when ``__name__ ==
__main__``. Patch by SilentGhost.

..

.. bpo: 27472
.. date: 9398
.. nonce: NS3L93
.. section: Tests

Add test.support.unix_shell as the path to the default shell.

..

.. bpo: 27369
.. date: 9397
.. nonce: LG7U2D
.. section: Tests

In test_pyexpat, avoid testing an error message detail that changed in Expat
2.2.0.

..

.. bpo: 27594
.. date: 9396
.. nonce: w3F57B
.. section: Tests

Prevent assertion error when running test_ast with coverage enabled: ensure
code object has a valid first line number. Patch suggested by Ivan
Levkivskyi.

..

.. bpo: 27647
.. date: 9395
.. nonce: -1HUR6
.. section: Windows

Update bundled Tcl/Tk to 8.6.6.

..

.. bpo: 27610
.. date: 9394
.. nonce: O0o0mB
.. section: Windows

Adds :pep:`514` metadata to Windows installer

..

.. bpo: 27469
.. date: 9393
.. nonce: 0GwDkX
.. section: Windows

Adds a shell extension to the launcher so that drag and drop works
correctly.

..

.. bpo: 27309
.. date: 9392
.. nonce: chiOo6
.. section: Windows

Enables proper Windows styles in python[w].exe manifest.

..

.. bpo: 27713
.. date: 9391
.. nonce: _3DgXG
.. section: Build

Suppress spurious build warnings when updating importlib's bootstrap files.
Patch by Xiang Zhang

..

.. bpo: 25825
.. date: 9390
.. nonce: MLbdVU
.. section: Build

Correct the references to Modules/python.exp, which is required on AIX.  The
references were accidentally changed in 3.5.0a1.

..

.. bpo: 27453
.. date: 9389
.. nonce: Pb5DBi
.. section: Build

CPP invocation in configure must use CPPFLAGS. Patch by Chi Hsuan Yen.

..

.. bpo: 27641
.. date: 9388
.. nonce: eGzgCk
.. section: Build

The configure script now inserts comments into the makefile to prevent the
pgen and _freeze_importlib executables from being cross-compiled.

..

.. bpo: 26662
.. date: 9387
.. nonce: XkwRxM
.. section: Build

Set PYTHON_FOR_GEN in configure as the Python program to be used for file
generation during the build.

..

.. bpo: 10910
.. date: 9386
.. nonce: ZdRayb
.. section: Build

Avoid C++ compilation errors on FreeBSD and OS X. Also update FreedBSD
version checks for the original ctype UTF-8 workaround.


================================================
File: /Misc/NEWS.d/3.6.0b1.rst
================================================
.. bpo: 23722
.. date: 9619
.. nonce: C-8boi
.. release date: 2016-09-12
.. section: Core and Builtins

The __class__ cell used by zero-argument super() is now initialized from
type.__new__ rather than __build_class__, so class methods relying on that
will now work correctly when called from metaclass methods during class
creation. Patch by Martin Teichmann.

..

.. bpo: 25221
.. date: 9618
.. nonce: 9YbOxB
.. section: Core and Builtins

Fix corrupted result from PyLong_FromLong(0) when Python is compiled with
NSMALLPOSINTS = 0.

..

.. bpo: 27080
.. date: 9617
.. nonce: Te4Tjb
.. section: Core and Builtins

Implement formatting support for :pep:`515`.  Initial patch by Chris Angelico.

..

.. bpo: 27199
.. date: 9616
.. nonce: GheADD
.. section: Core and Builtins

In tarfile, expose copyfileobj bufsize to improve throughput. Patch by Jason
Fried.

..

.. bpo: 27948
.. date: 9615
.. nonce: Rpw5nq
.. section: Core and Builtins

In f-strings, only allow backslashes inside the braces (where the
expressions are).  This is a breaking change from the 3.6 alpha releases,
where backslashes are allowed anywhere in an f-string.  Also, require that
expressions inside f-strings be enclosed within literal braces, and not
escapes like ``f'\x7b"hi"\x7d'``.

..

.. bpo: 28046
.. date: 9614
.. nonce: liHxFW
.. section: Core and Builtins

Remove platform-specific directories from sys.path.

..

.. bpo: 28071
.. date: 9613
.. nonce: PffE44
.. section: Core and Builtins

Add early-out for differencing from an empty set.

..

.. bpo: 25758
.. date: 9612
.. nonce: yR-YTD
.. section: Core and Builtins

Prevents zipimport from unnecessarily encoding a filename (patch by Eryk
Sun)

..

.. bpo: 25856
.. date: 9611
.. nonce: neCvXl
.. section: Core and Builtins

The __module__ attribute of extension classes and functions now is interned.
This leads to more compact pickle data with protocol 4.

..

.. bpo: 27213
.. date: 9610
.. nonce: VCfkkp
.. section: Core and Builtins

Rework CALL_FUNCTION* opcodes to produce shorter and more efficient
bytecode. Patch by Demur Rumed, design by Serhiy Storchaka, reviewed by
Serhiy Storchaka and Victor Stinner.

..

.. bpo: 26331
.. date: 9609
.. nonce: TdJp8_
.. section: Core and Builtins

Implement tokenizing support for :pep:`515`. Patch by Georg Brandl.

..

.. bpo: 27999
.. date: 9608
.. nonce: 8aacQj
.. section: Core and Builtins

Make "global after use" a SyntaxError, and ditto for nonlocal. Patch by Ivan
Levkivskyi.

..

.. bpo: 28003
.. date: 9607
.. nonce: noeoav
.. section: Core and Builtins

Implement :pep:`525` -- Asynchronous Generators.

..

.. bpo: 27985
.. date: 9606
.. nonce: 0ayJ5k
.. section: Core and Builtins

Implement :pep:`526` -- Syntax for Variable Annotations. Patch by Ivan
Levkivskyi.

..

.. bpo: 26058
.. date: 9605
.. nonce: UR_ojv
.. section: Core and Builtins

Add a new private version to the builtin dict type, incremented at each
dictionary creation and at each dictionary change. Implementation of the PEP
509.

..

.. bpo: 27364
.. date: 9604
.. nonce: 8u_LoD
.. section: Core and Builtins

A backslash-character pair that is not a valid escape sequence now generates
a DeprecationWarning.  Patch by Emanuel Barry.

..

.. bpo: 27350
.. date: 9603
.. nonce: aABzcL
.. section: Core and Builtins

``dict`` implementation is changed like PyPy. It is more compact and preserves
insertion order. (Concept developed by Raymond Hettinger and patch by Inada
Naoki.)

..

.. bpo: 27911
.. date: 9602
.. nonce: 1eaHRd
.. section: Core and Builtins

Remove unnecessary error checks in ``exec_builtin_or_dynamic()``.

..

.. bpo: 27078
.. date: 9601
.. nonce: ZevPQR
.. section: Core and Builtins

Added BUILD_STRING opcode.  Optimized f-strings evaluation.

..

.. bpo: 17884
.. date: 9600
.. nonce: wGy0dr
.. section: Core and Builtins

Python now requires systems with inttypes.h and stdint.h

..

.. bpo: 27961
.. date: 9599
.. nonce: EYS8oe
.. section: Core and Builtins

Require platforms to support ``long long``. Python hasn't compiled without
``long long`` for years, so this is basically a formality.

..

.. bpo: 27355
.. date: 9598
.. nonce: qdIpxm
.. section: Core and Builtins

Removed support for Windows CE.  It was never finished, and Windows CE is no
longer a relevant platform for Python.

..

.. bpo: 0
.. date: 9597
.. nonce: rdhhVw
.. section: Core and Builtins

Implement :pep:`523`.

..

.. bpo: 27870
.. date: 9596
.. nonce: Y0u34u
.. section: Core and Builtins

A left shift of zero by a large integer no longer attempts to allocate large
amounts of memory.

..

.. bpo: 25402
.. date: 9595
.. nonce: naeRHq
.. section: Core and Builtins

In int-to-decimal-string conversion, improve the estimate of the
intermediate memory required, and remove an unnecessarily strict overflow
check. Patch by Serhiy Storchaka.

..

.. bpo: 27214
.. date: 9594
.. nonce: CDh8S4
.. section: Core and Builtins

In long_invert, be more careful about modifying object returned by long_add,
and remove an unnecessary check for small longs. Thanks Oren Milman for
analysis and patch.

..

.. bpo: 27506
.. date: 9593
.. nonce: eK87PI
.. section: Core and Builtins

Support passing the bytes/bytearray.translate() "delete" argument by
keyword.

..

.. bpo: 27812
.. date: 9592
.. nonce: sidcs8
.. section: Core and Builtins

Properly clear out a generator's frame's backreference to the generator to
prevent crashes in frame.clear().

..

.. bpo: 27811
.. date: 9591
.. nonce: T4AuBo
.. section: Core and Builtins

Fix a crash when a coroutine that has not been awaited is finalized with
warnings-as-errors enabled.

..

.. bpo: 27587
.. date: 9590
.. nonce: mbavY2
.. section: Core and Builtins

Fix another issue found by PVS-Studio: Null pointer check after use of 'def'
in _PyState_AddModule(). Initial patch by Christian Heimes.

..

.. bpo: 27792
.. date: 9589
.. nonce: Np6_Hl
.. section: Core and Builtins

The modulo operation applied to ``bool`` and other ``int`` subclasses now
always returns an ``int``. Previously the return type depended on the input
values. Patch by Xiang Zhang.

..

.. bpo: 26984
.. date: 9588
.. nonce: 7--80J
.. section: Core and Builtins

int() now always returns an instance of exact int.

..

.. bpo: 25604
.. date: 9587
.. nonce: UkeHGy
.. section: Core and Builtins

Fix a minor bug in integer true division; this bug could potentially have
caused off-by-one-ulp results on platforms with unreliable ldexp
implementations.

..

.. bpo: 24254
.. date: 9586
.. nonce: 368r1U
.. section: Core and Builtins

Make class definition namespace ordered by default.

..

.. bpo: 27662
.. date: 9585
.. nonce: a8cBpq
.. section: Core and Builtins

Fix an overflow check in ``List_New``: the original code was checking
against ``Py_SIZE_MAX`` instead of the correct upper bound of
``Py_SSIZE_T_MAX``. Patch by Xiang Zhang.

..

.. bpo: 27782
.. date: 9584
.. nonce: C8OBQD
.. section: Core and Builtins

Multi-phase extension module import now correctly allows the ``m_methods``
field to be used to add module level functions to instances of non-module
types returned from ``Py_create_mod``. Patch by Xiang Zhang.

..

.. bpo: 27936
.. date: 9583
.. nonce: AdOann
.. section: Core and Builtins

The round() function accepted a second None argument for some types but not
for others.  Fixed the inconsistency by accepting None for all numeric
types.

..

.. bpo: 27487
.. date: 9582
.. nonce: jeTQNr
.. section: Core and Builtins

Warn if a submodule argument to "python -m" or runpy.run_module() is found
in sys.modules after parent packages are imported, but before the submodule
is executed.

..

.. bpo: 27157
.. date: 9581
.. nonce: Wf_eFE
.. section: Core and Builtins

Make only type() itself accept the one-argument form. Patch by Eryk Sun and
Emanuel Barry.

..

.. bpo: 27558
.. date: 9580
.. nonce: VmltMh
.. section: Core and Builtins

Fix a SystemError in the implementation of "raise" statement. In a brand new
thread, raise a RuntimeError since there is no active exception to reraise.
Patch written by Xiang Zhang.

..

.. bpo: 28008
.. date: 9579
.. nonce: 0DdIrA
.. section: Core and Builtins

Implement :pep:`530` -- asynchronous comprehensions.

..

.. bpo: 27942
.. date: 9578
.. nonce: wCAkW5
.. section: Core and Builtins

Fix memory leak in codeobject.c

..

.. bpo: 28732
.. date: 9577
.. nonce: xkG8k7
.. section: Library

Fix crash in os.spawnv() with no elements in args

..

.. bpo: 28485
.. date: 9576
.. nonce: WuKqKh
.. section: Library

Always raise ValueError for negative compileall.compile_dir(workers=...)
parameter, even when multithreading is unavailable.

..

.. bpo: 28037
.. date: 9575
.. nonce: -3u7zq
.. section: Library

Use sqlite3_get_autocommit() instead of setting Connection->inTransaction
manually.

..

.. bpo: 25283
.. date: 9574
.. nonce: qwQDX2
.. section: Library

Attributes tm_gmtoff and tm_zone are now available on all platforms in the
return values of time.localtime() and time.gmtime().

..

.. bpo: 24454
.. date: 9573
.. nonce: pUTKOA
.. section: Library

Regular expression match object groups are now accessible using __getitem__.
"mo[x]" is equivalent to "mo.group(x)".

..

.. bpo: 10740
.. date: 9572
.. nonce: 8iGFan
.. section: Library

sqlite3 no longer implicitly commit an open transaction before DDL
statements.

..

.. bpo: 17941
.. date: 9571
.. nonce: E9rm_o
.. section: Library

Add a *module* parameter to collections.namedtuple().

..

.. bpo: 22493
.. date: 9570
.. nonce: yDfUrj
.. section: Library

Inline flags now should be used only at the start of the regular expression.
Deprecation warning is emitted if uses them in the middle of the regular
expression.

..

.. bpo: 26885
.. date: 9569
.. nonce: TJ779X
.. section: Library

xmlrpc now supports unmarshalling additional data types used by Apache
XML-RPC implementation for numerics and None.

..

.. bpo: 28070
.. date: 9568
.. nonce: Kot8Hu
.. section: Library

Fixed parsing inline verbose flag in regular expressions.

..

.. bpo: 19500
.. date: 9567
.. nonce: H7q5im
.. section: Library

Add client-side SSL session resumption to the ssl module.

..

.. bpo: 28022
.. date: 9566
.. nonce: 08kTMg
.. section: Library

Deprecate ssl-related arguments in favor of SSLContext. The deprecation
include manual creation of SSLSocket and certfile/keyfile (or similar) in
ftplib, httplib, imaplib, smtplib, poplib and urllib.

..

.. bpo: 28043
.. date: 9565
.. nonce: 588Oy3
.. section: Library

SSLContext has improved default settings: OP_NO_SSLv2, OP_NO_SSLv3,
OP_NO_COMPRESSION, OP_CIPHER_SERVER_PREFERENCE, OP_SINGLE_DH_USE,
OP_SINGLE_ECDH_USE and HIGH ciphers without MD5.

..

.. bpo: 24693
.. date: 9564
.. nonce: a63Shp
.. section: Library

Changed some RuntimeError's in the zipfile module to more appropriate types.
Improved some error messages and debugging output.

..

.. bpo: 17909
.. date: 9563
.. nonce: SMNkt6
.. section: Library

``json.load`` and ``json.loads`` now support binary input encoded as UTF-8,
UTF-16 or UTF-32. Patch by Serhiy Storchaka.

..

.. bpo: 27137
.. date: 9562
.. nonce: frjG8W
.. section: Library

the pure Python fallback implementation of ``functools.partial`` now matches
the behaviour of its accelerated C counterpart for subclassing, pickling and
text representation purposes. Patch by Emanuel Barry and Serhiy Storchaka.

..

.. bpo: 0
.. date: 9561
.. nonce: 81jNns
.. section: Library

Fix possible integer overflows and crashes in the mmap module with unusual
usage patterns.

..

.. bpo: 1703178
.. date: 9560
.. nonce: meb49K
.. section: Library

Fix the ability to pass the --link-objects option to the distutils build_ext
command.

..

.. bpo: 28019
.. date: 9559
.. nonce: KUhBaS
.. section: Library

itertools.count() no longer rounds non-integer step in range between 1.0 and
2.0 to 1.

..

.. bpo: 18401
.. date: 9558
.. nonce: _12WDV
.. section: Library

Pdb now supports the 'readrc' keyword argument to control whether .pdbrc
files should be read.  Patch by Martin Matusiak and Sam Kimbrel.

..

.. bpo: 25969
.. date: 9557
.. nonce: qSPkl-
.. section: Library

Update the lib2to3 grammar to handle the unpacking generalizations added in
3.5.

..

.. bpo: 14977
.. date: 9556
.. nonce: 4MvALg
.. section: Library

mailcap now respects the order of the lines in the mailcap files ("first
match"), as required by RFC 1542.  Patch by Michael Lazar.

..

.. bpo: 28082
.. date: 9555
.. nonce: EICw4d
.. section: Library

Convert re flag constants to IntFlag.

..

.. bpo: 28025
.. date: 9554
.. nonce: YxcZHY
.. section: Library

Convert all ssl module constants to IntEnum and IntFlags. SSLContext
properties now return flags and enums.

..

.. bpo: 23591
.. date: 9553
.. nonce: 7gSXAN
.. section: Library

Add Flag, IntFlag, and auto() to enum module.

..

.. bpo: 433028
.. date: 9552
.. nonce: yGjT0q
.. section: Library

Added support of modifier spans in regular expressions.

..

.. bpo: 24594
.. date: 9551
.. nonce: 9CnFVS
.. section: Library

Validates persist parameter when opening MSI database

..

.. bpo: 17582
.. date: 9550
.. nonce: MXEHxQ
.. section: Library

xml.etree.ElementTree nows preserves whitespaces in attributes (Patch by
Duane Griffin.  Reviewed and approved by Stefan Behnel.)

..

.. bpo: 28047
.. date: 9549
.. nonce: pDu3Fm
.. section: Library

Fixed calculation of line length used for the base64 CTE in the new email
policies.

..

.. bpo: 27576
.. date: 9548
.. nonce: tqZxYv
.. section: Library

Fix call order in OrderedDict.__init__().

..

.. bpo: 0
.. date: 9547
.. nonce: cxHuUo
.. section: Library

email.generator.DecodedGenerator now supports the policy keyword.

..

.. bpo: 28027
.. date: 9546
.. nonce: v39s1z
.. section: Library

Remove undocumented modules from ``Lib/plat-*``: IN, CDROM, DLFCN, TYPES,
CDIO, and STROPTS.

..

.. bpo: 27445
.. date: 9545
.. nonce: wOG0C0
.. section: Library

Don't pass str(_charset) to MIMEText.set_payload(). Patch by Claude Paroz.

..

.. bpo: 24277
.. date: 9544
.. nonce: OgDA28
.. section: Library

The new email API is no longer provisional, and the docs have been
reorganized and rewritten to emphasize the new API.

..

.. bpo: 22450
.. date: 9543
.. nonce: T3Sn_J
.. section: Library

urllib now includes an ``Accept: */*`` header among the default headers.
This makes the results of REST API requests more consistent and predictable
especially when proxy servers are involved.

..

.. bpo: 0
.. date: 9542
.. nonce: PVZStR
.. section: Library

lib2to3.pgen3.driver.load_grammar() now creates a stable cache file between
runs given the same Grammar.txt input regardless of the hash randomization
setting.

..

.. bpo: 28005
.. date: 9541
.. nonce: oJLK1w
.. section: Library

Allow ImportErrors in encoding implementation to propagate.

..

.. bpo: 26667
.. date: 9540
.. nonce: hWs9wA
.. section: Library

Support path-like objects in importlib.util.

..

.. bpo: 27570
.. date: 9539
.. nonce: pU0Zie
.. section: Library

Avoid zero-length memcpy() etc calls with null source pointers in the
"ctypes" and "array" modules.

..

.. bpo: 22233
.. date: 9538
.. nonce: uXSN0R
.. section: Library

Break email header lines *only* on the RFC specified CR and LF characters,
not on arbitrary unicode line breaks.  This also fixes a bug in HTTP header
parsing.

..

.. bpo: 27331
.. date: 9537
.. nonce: akOxfh
.. section: Library

The email.mime classes now all accept an optional policy keyword.

..

.. bpo: 27988
.. date: 9536
.. nonce: VfMzZH
.. section: Library

Fix email iter_attachments incorrect mutation of payload list.

..

.. bpo: 16113
.. date: 9535
.. nonce: jyKRxs
.. section: Library

Add SHA-3 and SHAKE support to hashlib module.

..

.. bpo: 0
.. date: 9534
.. nonce: j7npJi
.. section: Library

Eliminate a tautological-pointer-compare warning in _scproxy.c.

..

.. bpo: 27776
.. date: 9533
.. nonce: dOJcUU
.. section: Library

The :func:`os.urandom` function does now block on Linux 3.17 and newer until
the system urandom entropy pool is initialized to increase the security.
This change is part of the :pep:`524`.

..

.. bpo: 27778
.. date: 9532
.. nonce: gvbf3F
.. section: Library

Expose the Linux ``getrandom()`` syscall as a new :func:`os.getrandom`
function. This change is part of the :pep:`524`.

..

.. bpo: 27691
.. date: 9531
.. nonce: TMYF5_
.. section: Library

Fix ssl module's parsing of GEN_RID subject alternative name fields in X.509
certs.

..

.. bpo: 18844
.. date: 9530
.. nonce: OZnLOi
.. section: Library

Add random.choices().

..

.. bpo: 25761
.. date: 9529
.. nonce: qd--Ta
.. section: Library

Improved error reporting about truncated pickle data in C implementation of
unpickler.  UnpicklingError is now raised instead of AttributeError and
ValueError in some cases.

..

.. bpo: 26798
.. date: 9528
.. nonce: he58yl
.. section: Library

Add BLAKE2 (blake2b and blake2s) to hashlib.

..

.. bpo: 26032
.. date: 9527
.. nonce: v5ByZW
.. section: Library

Optimized globbing in pathlib by using os.scandir(); it is now about 1.5--4
times faster.

..

.. bpo: 25596
.. date: 9526
.. nonce: TFtyjC
.. section: Library

Optimized glob() and iglob() functions in the glob module; they are now
about 3--6 times faster.

..

.. bpo: 27928
.. date: 9525
.. nonce: vG2f6q
.. section: Library

Add scrypt (password-based key derivation function) to hashlib module
(requires OpenSSL 1.1.0).

..

.. bpo: 27850
.. date: 9524
.. nonce: kIVQ0m
.. section: Library

Remove 3DES from ssl module's default cipher list to counter measure sweet32
attack (:cve:`2016-2183`).

..

.. bpo: 27766
.. date: 9523
.. nonce: WI70Tc
.. section: Library

Add ChaCha20 Poly1305 to ssl module's default cipher list. (Required OpenSSL
1.1.0 or LibreSSL).

..

.. bpo: 25387
.. date: 9522
.. nonce: -wsV59
.. section: Library

Check return value of winsound.MessageBeep.

..

.. bpo: 27866
.. date: 9521
.. nonce: FM3-BZ
.. section: Library

Add SSLContext.get_ciphers() method to get a list of all enabled ciphers.

..

.. bpo: 27744
.. date: 9520
.. nonce: 2cVMpG
.. section: Library

Add AF_ALG (Linux Kernel crypto) to socket module.

..

.. bpo: 26470
.. date: 9519
.. nonce: QGu_wo
.. section: Library

Port ssl and hashlib module to OpenSSL 1.1.0.

..

.. bpo: 11620
.. date: 9518
.. nonce: JyL-Po
.. section: Library

Fix support for SND_MEMORY in winsound.PlaySound.  Based on a patch by Tim
Lesher.

..

.. bpo: 11734
.. date: 9517
.. nonce: AQoy-q
.. section: Library

Add support for IEEE 754 half-precision floats to the struct module. Based
on a patch by Eli Stevens.

..

.. bpo: 27919
.. date: 9516
.. nonce: NRqNEW
.. section: Library

Deprecated ``extra_path`` distribution option in distutils packaging.

..

.. bpo: 23229
.. date: 9515
.. nonce: gXhSFh
.. section: Library

Add new ``cmath`` constants: ``cmath.inf`` and ``cmath.nan`` to match
``math.inf`` and ``math.nan``, and also ``cmath.infj`` and ``cmath.nanj`` to
match the format used by complex repr.

..

.. bpo: 27842
.. date: 9514
.. nonce: qlhp0-
.. section: Library

The csv.DictReader now returns rows of type OrderedDict. (Contributed by
Steve Holden.)

..

.. bpo: 0
.. date: 9513
.. nonce: 6TjEgz
.. section: Library

Remove support for passing a file descriptor to os.access. It never worked
but previously didn't raise.

..

.. bpo: 12885
.. date: 9512
.. nonce: r-IV1g
.. section: Library

Fix error when distutils encounters symlink.

..

.. bpo: 27881
.. date: 9511
.. nonce: fkETd9
.. section: Library

Fixed possible bugs when setting sqlite3.Connection.isolation_level. Based
on patch by Xiang Zhang.

..

.. bpo: 27861
.. date: 9510
.. nonce: DBYuo9
.. section: Library

Fixed a crash in sqlite3.Connection.cursor() when a factory creates not a
cursor.  Patch by Xiang Zhang.

..

.. bpo: 19884
.. date: 9509
.. nonce: MO8AWH
.. section: Library

Avoid spurious output on OS X with Gnu Readline.

..

.. bpo: 27706
.. date: 9508
.. nonce: ZY67yu
.. section: Library

Restore deterministic behavior of random.Random().seed() for string seeds
using seeding version 1.  Allows sequences of calls to random() to exactly
match those obtained in Python 2. Patch by Nofar Schnider.

..

.. bpo: 10513
.. date: 9507
.. nonce: tQIQD_
.. section: Library

Fix a regression in Connection.commit().  Statements should not be reset
after a commit.

..

.. bpo: 12319
.. date: 9506
.. nonce: Wc4oUu
.. section: Library

Chunked transfer encoding support added to http.client.HTTPConnection
requests.  The urllib.request.AbstractHTTPHandler class does not enforce a
Content-Length header any more.  If a HTTP request has a file or iterable
body, but no Content-Length header, the library now falls back to use
chunked transfer-encoding.

..

.. bpo: 0
.. date: 9505
.. nonce: cYraeH
.. section: Library

A new version of typing.py from https://github.com/python/typing: -
Collection (only for 3.6) (Issue #27598) - Add FrozenSet to __all__
(upstream #261) - fix crash in _get_type_vars() (upstream #259) - Remove the
dict constraint in ForwardRef._eval_type (upstream #252)

..

.. bpo: 27832
.. date: 9504
.. nonce: hxh6_h
.. section: Library

Make ``_normalize`` parameter to ``Fraction`` constructor keyword-only, so
that ``Fraction(2, 3, 4)`` now raises ``TypeError``.

..

.. bpo: 27539
.. date: 9503
.. nonce: S4L1cq
.. section: Library

Fix unnormalised ``Fraction.__pow__`` result in the case of negative
exponent and negative base.

..

.. bpo: 21718
.. date: 9502
.. nonce: FUJd-7
.. section: Library

cursor.description is now available for queries using CTEs.

..

.. bpo: 27819
.. date: 9501
.. nonce: -A_u1x
.. section: Library

In distutils sdists, simply produce the "gztar" (gzipped tar format)
distributions on all platforms unless "formats" is supplied.

..

.. bpo: 2466
.. date: 9500
.. nonce: VRNlkg
.. section: Library

posixpath.ismount now correctly recognizes mount points which the user does
not have permission to access.

..

.. bpo: 9998
.. date: 9499
.. nonce: SNIoPr
.. section: Library

On Linux, ctypes.util.find_library now looks in LD_LIBRARY_PATH for shared
libraries.

..

.. bpo: 27573
.. date: 9498
.. nonce: yuXLnW
.. section: Library

exit message for code.interact is now configurable.

..

.. bpo: 27930
.. date: 9497
.. nonce: BkOfSi
.. section: Library

Improved behaviour of logging.handlers.QueueListener. Thanks to Paulo
Andrade and Petr Viktorin for the analysis and patch.

..

.. bpo: 6766
.. date: 9496
.. nonce: _zO4cV
.. section: Library

Distributed reference counting added to multiprocessing to support nesting
of shared values / proxy objects.

..

.. bpo: 21201
.. date: 9495
.. nonce: wLCKiA
.. section: Library

Improves readability of multiprocessing error message.  Thanks to Wojciech
Walczak for patch.

..

.. bpo: 0
.. date: 9494
.. nonce: hgCs-W
.. section: Library

asyncio: Add set_protocol / get_protocol to Transports.

..

.. bpo: 27456
.. date: 9493
.. nonce: lI_IE7
.. section: Library

asyncio: Set TCP_NODELAY by default.

..

.. bpo: 15308
.. date: 9492
.. nonce: zZxn8m
.. section: IDLE

Add 'interrupt execution' (^C) to Shell menu. Patch by Roger Serwy, updated
by Bayard Randel.

..

.. bpo: 27922
.. date: 9491
.. nonce: UEtEv9
.. section: IDLE

Stop IDLE tests from 'flashing' gui widgets on the screen.

..

.. bpo: 27891
.. date: 9490
.. nonce: 7W5cAj
.. section: IDLE

Consistently group and sort imports within idlelib modules.

..

.. bpo: 17642
.. date: 9489
.. nonce: B0BNOB
.. section: IDLE

add larger font sizes for classroom projection.

..

.. bpo: 0
.. date: 9488
.. nonce: zWZs6o
.. section: IDLE

Add version to title of IDLE help window.

..

.. bpo: 25564
.. date: 9487
.. nonce: GN0p14
.. section: IDLE

In section on IDLE -- console differences, mention that using exec means
that __builtins__ is defined for each statement.

..

.. bpo: 27821
.. date: 9486
.. nonce: Vzr42u
.. section: IDLE

Fix 3.6.0a3 regression that prevented custom key sets from being selected
when no custom theme was defined.

..

.. bpo: 26900
.. date: 9485
.. nonce: 0erSIc
.. section: C API

Excluded underscored names and other private API from limited API.

..

.. bpo: 26027
.. date: 9484
.. nonce: 5uVb7n
.. section: C API

Add support for path-like objects in PyUnicode_FSConverter() &
PyUnicode_FSDecoder().

..

.. bpo: 27427
.. date: 9483
.. nonce: OGhkYQ
.. section: Tests

Additional tests for the math module. Patch by Francisco Couzo.

..

.. bpo: 27953
.. date: 9482
.. nonce: oP3nuf
.. section: Tests

Skip math and cmath tests that fail on OS X 10.4 due to a poor libm
implementation of tan.

..

.. bpo: 26040
.. date: 9481
.. nonce: RvSU5I
.. section: Tests

Improve test_math and test_cmath coverage and rigour. Patch by Jeff Allen.

..

.. bpo: 27787
.. date: 9480
.. nonce: kf0YAt
.. section: Tests

Call gc.collect() before checking each test for "dangling threads", since
the dangling threads are weak references.

..

.. bpo: 27566
.. date: 9479
.. nonce: xDWjEb
.. section: Build

Fix clean target in freeze makefile (patch by Lisa Roach)

..

.. bpo: 27705
.. date: 9478
.. nonce: 8C2Ms3
.. section: Build

Update message in validate_ucrtbase.py

..

.. bpo: 27976
.. date: 9477
.. nonce: z0CT-3
.. section: Build

Deprecate building _ctypes with the bundled copy of libffi on non-OSX UNIX
platforms.

..

.. bpo: 27983
.. date: 9476
.. nonce: jL_1n8
.. section: Build

Cause lack of llvm-profdata tool when using clang as required for PGO
linking to be a configure time error rather than make time when
``--with-optimizations`` is enabled.  Also improve our ability to find the
llvm-profdata tool on MacOS and some Linuxes.

..

.. bpo: 21590
.. date: 9475
.. nonce: haPolL
.. section: Build

Support for DTrace and SystemTap probes.

..

.. bpo: 26307
.. date: 9474
.. nonce: Puk2rd
.. section: Build

The profile-opt build now applies PGO to the built-in modules.

..

.. bpo: 26359
.. date: 9473
.. nonce: uxKCqR
.. section: Build

Add the --with-optimizations flag to turn on LTO and PGO build support when
available.

..

.. bpo: 27917
.. date: 9472
.. nonce: 8V2esX
.. section: Build

Set platform triplets for Android builds.

..

.. bpo: 25825
.. date: 9471
.. nonce: PwGiUI
.. section: Build

Update references to the $(LIBPL) installation path on AIX. This path was
changed in 3.2a4.

..

.. bpo: 0
.. date: 9470
.. nonce: G27B6T
.. section: Build

Update OS X installer to use SQLite 3.14.1 and XZ 5.2.2.

..

.. bpo: 21122
.. date: 9469
.. nonce: 98ovv8
.. section: Build

Fix LTO builds on OS X.

..

.. bpo: 17128
.. date: 9468
.. nonce: jd3Cll
.. section: Build

Build OS X installer with a private copy of OpenSSL. Also provide a sample
Install Certificates command script to install a set of root certificates
from the third-party certifi module.

..

.. bpo: 27952
.. date: 9467
.. nonce: WX9Ufc
.. section: Tools/Demos

Get Tools/scripts/fixcid.py working with Python 3 and the current "re"
module, avoid invalid Python backslash escapes, and fix a bug parsing
escaped C quote signs.

..

.. bpo: 28065
.. date: 9466
.. nonce: TUW63o
.. section: Windows

Update xz dependency to 5.2.2 and build it from source.

..

.. bpo: 25144
.. date: 9465
.. nonce: iUha52
.. section: Windows

Ensures TargetDir is set before continuing with custom install.

..

.. bpo: 1602
.. date: 9464
.. nonce: 5Kowx0
.. section: Windows

Windows console doesn't input or print Unicode (PEP 528)

..

.. bpo: 27781
.. date: 9463
.. nonce: 21eQH2
.. section: Windows

Change file system encoding on Windows to UTF-8 (PEP 529)

..

.. bpo: 27731
.. date: 9462
.. nonce: U2HSrC
.. section: Windows

Opt-out of MAX_PATH on Windows 10

..

.. bpo: 6135
.. date: 9461
.. nonce: pACuPJ
.. section: Windows

Adds encoding and errors parameters to subprocess.

..

.. bpo: 27959
.. date: 9460
.. nonce: JamSoC
.. section: Windows

Adds oem encoding, alias ansi to mbcs, move aliasmbcs to codec lookup.

..

.. bpo: 27982
.. date: 9459
.. nonce: xrUa9R
.. section: Windows

The functions of the winsound module now accept keyword arguments.

..

.. bpo: 20366
.. date: 9458
.. nonce: s6b-ut
.. section: Windows

Build full text search support into SQLite on Windows.

..

.. bpo: 27756
.. date: 9457
.. nonce: PDAoGy
.. section: Windows

Adds new icons for Python files and processes on Windows. Designs by Cherry
Wang.

..

.. bpo: 27883
.. date: 9456
.. nonce: vyOnxj
.. section: Windows

Update sqlite to 3.14.1.0 on Windows.


================================================
File: /Misc/NEWS.d/3.6.0b2.rst
================================================
.. bpo: 28183
.. date: 9707
.. nonce: MJZeNd
.. release date: 2016-10-10
.. section: Core and Builtins

Optimize and cleanup dict iteration.

..

.. bpo: 26081
.. date: 9706
.. nonce: _x5vjl
.. section: Core and Builtins

Added C implementation of asyncio.Future. Original patch by Yury Selivanov.

..

.. bpo: 28379
.. date: 9705
.. nonce: DuXlco
.. section: Core and Builtins

Added sanity checks and tests for PyUnicode_CopyCharacters(). Patch by Xiang
Zhang.

..

.. bpo: 28376
.. date: 9704
.. nonce: oPD-5D
.. section: Core and Builtins

The type of long range iterator is now registered as Iterator. Patch by Oren
Milman.

..

.. bpo: 28376
.. date: 9703
.. nonce: YEy-uG
.. section: Core and Builtins

Creating instances of range_iterator by calling range_iterator type now is
deprecated.  Patch by Oren Milman.

..

.. bpo: 28376
.. date: 9702
.. nonce: fLeHM2
.. section: Core and Builtins

The constructor of range_iterator now checks that step is not 0. Patch by
Oren Milman.

..

.. bpo: 26906
.. date: 9701
.. nonce: YBjcwI
.. section: Core and Builtins

Resolving special methods of uninitialized type now causes implicit
initialization of the type instead of a fail.

..

.. bpo: 18287
.. date: 9700
.. nonce: k6jffS
.. section: Core and Builtins

PyType_Ready() now checks that tp_name is not NULL. Original patch by Niklas
Koep.

..

.. bpo: 24098
.. date: 9699
.. nonce: XqlP_1
.. section: Core and Builtins

Fixed possible crash when AST is changed in process of compiling it.

..

.. bpo: 28201
.. date: 9698
.. nonce: GWUxAy
.. section: Core and Builtins

Dict reduces possibility of 2nd conflict in hash table when hashes have same
lower bits.

..

.. bpo: 28350
.. date: 9697
.. nonce: 8M5Eg9
.. section: Core and Builtins

String constants with null character no longer interned.

..

.. bpo: 26617
.. date: 9696
.. nonce: Gh5LvN
.. section: Core and Builtins

Fix crash when GC runs during weakref callbacks.

..

.. bpo: 27942
.. date: 9695
.. nonce: ZGuhns
.. section: Core and Builtins

String constants now interned recursively in tuples and frozensets.

..

.. bpo: 21578
.. date: 9694
.. nonce: GI1bhj
.. section: Core and Builtins

Fixed misleading error message when ImportError called with invalid keyword
args.

..

.. bpo: 28203
.. date: 9693
.. nonce: LRn5vp
.. section: Core and Builtins

Fix incorrect type in complex(1.0, {2:3}) error message. Patch by Soumya
Sharma.

..

.. bpo: 28086
.. date: 9692
.. nonce: JsQPMQ
.. section: Core and Builtins

Single var-positional argument of tuple subtype was passed unscathed to the
C-defined function.  Now it is converted to exact tuple.

..

.. bpo: 28214
.. date: 9691
.. nonce: zQF8Em
.. section: Core and Builtins

Now __set_name__ is looked up on the class instead of the instance.

..

.. bpo: 27955
.. date: 9690
.. nonce: HC4pZ4
.. section: Core and Builtins

Fallback on reading /dev/urandom device when the getrandom() syscall fails
with EPERM, for example when blocked by SECCOMP.

..

.. bpo: 28192
.. date: 9689
.. nonce: eR6stU
.. section: Core and Builtins

Don't import readline in isolated mode.

..

.. bpo: 0
.. date: 9688
.. nonce: 9EbOiD
.. section: Core and Builtins

Upgrade internal unicode databases to Unicode version 9.0.0.

..

.. bpo: 28131
.. date: 9687
.. nonce: owq0wW
.. section: Core and Builtins

Fix a regression in zipimport's compile_source().  zipimport should use the
same optimization level as the interpreter.

..

.. bpo: 28126
.. date: 9686
.. nonce: Qf6-uQ
.. section: Core and Builtins

Replace Py_MEMCPY with memcpy(). Visual Studio can properly optimize
memcpy().

..

.. bpo: 28120
.. date: 9685
.. nonce: e5xc1i
.. section: Core and Builtins

Fix dict.pop() for split dictionary when trying to remove a "pending key"
(Not yet inserted in split-table). Patch by Xiang Zhang.

..

.. bpo: 26182
.. date: 9684
.. nonce: jYlqTO
.. section: Core and Builtins

Raise DeprecationWarning when async and await keywords are used as
variable/attribute/class/function name.

..

.. bpo: 27998
.. date: 9683
.. nonce: CPhy4H
.. section: Library

Fixed bytes path support in os.scandir() on Windows. Patch by Eryk Sun.

..

.. bpo: 28317
.. date: 9682
.. nonce: LgHleA
.. section: Library

The disassembler now decodes FORMAT_VALUE argument.

..

.. bpo: 26293
.. date: 9681
.. nonce: 2mjvwX
.. section: Library

Fixed writing ZIP files that starts not from the start of the file.  Offsets
in ZIP file now are relative to the start of the archive in conforming to
the specification.

..

.. bpo: 28380
.. date: 9680
.. nonce: jKPMzH
.. section: Library

unittest.mock Mock autospec functions now properly support assert_called,
assert_not_called, and assert_called_once.

..

.. bpo: 27181
.. date: 9679
.. nonce: SQyDpC
.. section: Library

remove statistics.geometric_mean and defer until 3.7.

..

.. bpo: 28229
.. date: 9678
.. nonce: BKAxcS
.. section: Library

lzma module now supports pathlib.

..

.. bpo: 28321
.. date: 9677
.. nonce: bQ-IIX
.. section: Library

Fixed writing non-BMP characters with binary format in plistlib.

..

.. bpo: 28225
.. date: 9676
.. nonce: 6N28nu
.. section: Library

bz2 module now supports pathlib.  Initial patch by Ethan Furman.

..

.. bpo: 28227
.. date: 9675
.. nonce: 7lUz8i
.. section: Library

gzip now supports pathlib.  Patch by Ethan Furman.

..

.. bpo: 27358
.. date: 9674
.. nonce: t288Iv
.. section: Library

Optimized merging var-keyword arguments and improved error message when
passing a non-mapping as a var-keyword argument.

..

.. bpo: 28257
.. date: 9673
.. nonce: SVD_IH
.. section: Library

Improved error message when passing a non-iterable as a var-positional
argument.  Added opcode BUILD_TUPLE_UNPACK_WITH_CALL.

..

.. bpo: 28322
.. date: 9672
.. nonce: l9hzap
.. section: Library

Fixed possible crashes when unpickle itertools objects from incorrect pickle
data.  Based on patch by John Leitch.

..

.. bpo: 28228
.. date: 9671
.. nonce: 1qBwdM
.. section: Library

imghdr now supports pathlib.

..

.. bpo: 28226
.. date: 9670
.. nonce: nMXiwU
.. section: Library

compileall now supports pathlib.

..

.. bpo: 28314
.. date: 9669
.. nonce: N7YrkN
.. section: Library

Fix function declaration (C flags) for the getiterator() method of
xml.etree.ElementTree.Element.

..

.. bpo: 28148
.. date: 9668
.. nonce: Flzndx
.. section: Library

Stop using localtime() and gmtime() in the time module.
Introduced platform independent _PyTime_localtime API that is similar to
POSIX localtime_r, but available on all platforms.  Patch by Ed Schouten.

..

.. bpo: 28253
.. date: 9667
.. nonce: aLfmhe
.. section: Library

Fixed calendar functions for extreme months: 0001-01 and 9999-12.
Methods itermonthdays() and itermonthdays2() are reimplemented so that they
don't call itermonthdates() which can cause datetime.date under/overflow.

..

.. bpo: 28275
.. date: 9666
.. nonce: EhWIsz
.. section: Library

Fixed possible use after free in the decompress() methods of the
LZMADecompressor and BZ2Decompressor classes. Original patch by John Leitch.

..

.. bpo: 27897
.. date: 9665
.. nonce: I0Ppmx
.. section: Library

Fixed possible crash in sqlite3.Connection.create_collation() if pass
invalid string-like object as a name.  Patch by Xiang Zhang.

..

.. bpo: 18844
.. date: 9664
.. nonce: fQsEdn
.. section: Library

random.choices() now has k as a keyword-only argument to improve the
readability of common cases and come into line with the signature used in
other languages.

..

.. bpo: 18893
.. date: 9663
.. nonce: osiX5c
.. section: Library

Fix invalid exception handling in Lib/ctypes/macholib/dyld.py. Patch by
Madison May.

..

.. bpo: 27611
.. date: 9662
.. nonce: A_ArH_
.. section: Library

Fixed support of default root window in the tkinter.tix module. Added the
master parameter in the DisplayStyle constructor.

..

.. bpo: 27348
.. date: 9661
.. nonce: tDx7Vw
.. section: Library

In the traceback module, restore the formatting of exception messages like
"Exception: None".  This fixes a regression introduced in 3.5a2.

..

.. bpo: 25651
.. date: 9660
.. nonce: 3UhyPo
.. section: Library

Allow false values to be used for msg parameter of subTest().

..

.. bpo: 27778
.. date: 9659
.. nonce: Yyo1aP
.. section: Library

Fix a memory leak in os.getrandom() when the getrandom() is interrupted by a
signal and a signal handler raises a Python exception.

..

.. bpo: 28200
.. date: 9658
.. nonce: 4IEbr7
.. section: Library

Fix memory leak on Windows in the os module (fix path_converter() function).

..

.. bpo: 25400
.. date: 9657
.. nonce: d9Qn0E
.. section: Library

RobotFileParser now correctly returns default values for crawl_delay and
request_rate.  Initial patch by Peter Wirtz.

..

.. bpo: 27932
.. date: 9656
.. nonce: mtgl-6
.. section: Library

Prevent memory leak in win32_ver().

..

.. bpo: 0
.. date: 9655
.. nonce: iPpjqX
.. section: Library

Fix UnboundLocalError in socket._sendfile_use_sendfile.

..

.. bpo: 28075
.. date: 9654
.. nonce: aLiUs9
.. section: Library

Check for ERROR_ACCESS_DENIED in Windows implementation of os.stat().  Patch
by Eryk Sun.

..

.. bpo: 22493
.. date: 9653
.. nonce: Mv_hZf
.. section: Library

Warning message emitted by using inline flags in the middle of regular
expression now contains a (truncated) regex pattern. Patch by Tim Graham.

..

.. bpo: 25270
.. date: 9652
.. nonce: jrZruM
.. section: Library

Prevent codecs.escape_encode() from raising SystemError when an empty
bytestring is passed.

..

.. bpo: 28181
.. date: 9651
.. nonce: NGc4Yv
.. section: Library

Get antigravity over HTTPS. Patch by Kaartic Sivaraam.

..

.. bpo: 25895
.. date: 9650
.. nonce: j92qoQ
.. section: Library

Enable WebSocket URL schemes in urllib.parse.urljoin. Patch by Gergely Imreh
and Markus Holtermann.

..

.. bpo: 28114
.. date: 9649
.. nonce: gmFXsA
.. section: Library

Fix a crash in parse_envlist() when env contains byte strings. Patch by Eryk
Sun.

..

.. bpo: 27599
.. date: 9648
.. nonce: itvm8T
.. section: Library

Fixed buffer overrun in binascii.b2a_qp() and binascii.a2b_qp().

..

.. bpo: 27906
.. date: 9647
.. nonce: TBBXrv
.. section: Library

Fix socket accept exhaustion during high TCP traffic. Patch by Kevin Conway.

..

.. bpo: 28174
.. date: 9646
.. nonce: CV1UdI
.. section: Library

Handle when SO_REUSEPORT isn't properly supported. Patch by Seth Michael
Larson.

..

.. bpo: 26654
.. date: 9645
.. nonce: XtzTE9
.. section: Library

Inspect functools.partial in asyncio.Handle.__repr__. Patch by iceboy.

..

.. bpo: 26909
.. date: 9644
.. nonce: ASiakT
.. section: Library

Fix slow pipes IO in asyncio. Patch by INADA Naoki.

..

.. bpo: 28176
.. date: 9643
.. nonce: sU8R6L
.. section: Library

Fix callbacks race in asyncio.SelectorLoop.sock_connect.

..

.. bpo: 27759
.. date: 9642
.. nonce: qpMDGq
.. section: Library

Fix selectors incorrectly retain invalid file descriptors. Patch by Mark
Williams.

..

.. bpo: 28368
.. date: 9641
.. nonce: fGl9y4
.. section: Library

Refuse monitoring processes if the child watcher has no loop attached. Patch
by Vincent Michel.

..

.. bpo: 28369
.. date: 9640
.. nonce: 8DTANe
.. section: Library

Raise RuntimeError when transport's FD is used with add_reader, add_writer,
etc.

..

.. bpo: 28370
.. date: 9639
.. nonce: 18jBuZ
.. section: Library

Speedup asyncio.StreamReader.readexactly. Patch by Коренберг Марк.

..

.. bpo: 28371
.. date: 9638
.. nonce: U9Zqdk
.. section: Library

Deprecate passing asyncio.Handles to run_in_executor.

..

.. bpo: 28372
.. date: 9637
.. nonce: njcIPk
.. section: Library

Fix asyncio to support formatting of non-python coroutines.

..

.. bpo: 28399
.. date: 9636
.. nonce: QKIqRX
.. section: Library

Remove UNIX socket from FS before binding. Patch by Коренберг Марк.

..

.. bpo: 27972
.. date: 9635
.. nonce: ZK-GFm
.. section: Library

Prohibit Tasks to await on themselves.

..

.. bpo: 28402
.. date: 9634
.. nonce: v9zETJ
.. section: Windows

Adds signed catalog files for stdlib on Windows.

..

.. bpo: 28333
.. date: 9633
.. nonce: KnpeO4
.. section: Windows

Enables Unicode for ps1/ps2 and input() prompts. (Patch by Eryk Sun)

..

.. bpo: 28251
.. date: 9632
.. nonce: tR_AFs
.. section: Windows

Improvements to help manuals on Windows.

..

.. bpo: 28110
.. date: 9631
.. nonce: cnkP5F
.. section: Windows

launcher.msi has different product codes between 32-bit and 64-bit

..

.. bpo: 28161
.. date: 9630
.. nonce: hF91LI
.. section: Windows

Opening CON for write access fails

..

.. bpo: 28162
.. date: 9629
.. nonce: 3FHPVD
.. section: Windows

WindowsConsoleIO readall() fails if first line starts with Ctrl+Z

..

.. bpo: 28163
.. date: 9628
.. nonce: -DUgJw
.. section: Windows

WindowsConsoleIO fileno() passes wrong flags to _open_osfhandle

..

.. bpo: 28164
.. date: 9627
.. nonce: 5MfN0J
.. section: Windows

_PyIO_get_console_type fails for various paths

..

.. bpo: 28137
.. date: 9626
.. nonce: C1uvzY
.. section: Windows

Renames Windows path file to ._pth

..

.. bpo: 28138
.. date: 9625
.. nonce: pNdv64
.. section: Windows

Windows ._pth file should allow import site

..

.. bpo: 28426
.. date: 9624
.. nonce: zPwvbI
.. section: C API

Deprecated undocumented functions PyUnicode_AsEncodedObject(),
PyUnicode_AsDecodedObject(), PyUnicode_AsDecodedUnicode() and
PyUnicode_AsEncodedUnicode().

..

.. bpo: 28258
.. date: 9623
.. nonce: iKtAHd
.. section: Build

Fixed build with Estonian locale (python-config and distclean targets in
Makefile).  Patch by Arfrever Frehtes Taifersar Arahesis.

..

.. bpo: 26661
.. date: 9622
.. nonce: Z_HNbs
.. section: Build

setup.py now detects system libffi with multiarch wrapper.

..

.. bpo: 15819
.. date: 9621
.. nonce: QVDr3E
.. section: Build

Remove redundant include search directory option for building outside the
source tree.

..

.. bpo: 28217
.. date: 9620
.. nonce: Y37OKV
.. section: Tests

Adds _testconsole module to test console input.


================================================
File: /Misc/NEWS.d/3.6.0b3.rst
================================================
.. bpo: 28128
.. date: 9744
.. nonce: Lc2sFu
.. release date: 2016-10-31
.. section: Core and Builtins

Deprecation warning for invalid str and byte escape sequences now prints
better information about where the error occurs. Patch by Serhiy Storchaka
and Eric Smith.

..

.. bpo: 28509
.. date: 9743
.. nonce: _Fa4Uq
.. section: Core and Builtins

dict.update() no longer allocate unnecessary large memory.

..

.. bpo: 28426
.. date: 9742
.. nonce: E_quyK
.. section: Core and Builtins

Fixed potential crash in PyUnicode_AsDecodedObject() in debug build.

..

.. bpo: 28517
.. date: 9741
.. nonce: ExPkm9
.. section: Core and Builtins

Fixed of-by-one error in the peephole optimizer that caused keeping
unreachable code.

..

.. bpo: 28214
.. date: 9740
.. nonce: 6ECJox
.. section: Core and Builtins

Improved exception reporting for problematic __set_name__ attributes.

..

.. bpo: 23782
.. date: 9739
.. nonce: lonDzj
.. section: Core and Builtins

Fixed possible memory leak in _PyTraceback_Add() and exception loss in
PyTraceBack_Here().

..

.. bpo: 28471
.. date: 9738
.. nonce: Vd5pv7
.. section: Core and Builtins

Fix "Python memory allocator called without holding the GIL" crash in
socket.setblocking.

..

.. bpo: 27517
.. date: 9737
.. nonce: 1CYM8A
.. section: Library

LZMA compressor and decompressor no longer raise exceptions if given empty
data twice.  Patch by Benjamin Fogle.

..

.. bpo: 28549
.. date: 9736
.. nonce: ShnM2y
.. section: Library

Fixed segfault in curses's addch() with ncurses6.

..

.. bpo: 28449
.. date: 9735
.. nonce: 5JK6ES
.. section: Library

tarfile.open() with mode "r" or "r:" now tries to open a tar file with
compression before trying to open it without compression.  Otherwise it had
50% chance failed with ignore_zeros=True.

..

.. bpo: 23262
.. date: 9734
.. nonce: 6EVB7N
.. section: Library

The webbrowser module now supports Firefox 36+ and derived browsers.  Based
on patch by Oleg Broytman.

..

.. bpo: 27939
.. date: 9733
.. nonce: mTfADV
.. section: Library

Fixed bugs in tkinter.ttk.LabeledScale and tkinter.Scale caused by
representing the scale as float value internally in Tk.  tkinter.IntVar now
works if float value is set to underlying Tk variable.

..

.. bpo: 18844
.. date: 9732
.. nonce: oif1-H
.. section: Library

The various ways of specifying weights for random.choices() now produce the
same result sequences.

..

.. bpo: 28255
.. date: 9731
.. nonce: _ZH4wm
.. section: Library

calendar.TextCalendar().prmonth() no longer prints a space at the start of
new line after printing a month's calendar.  Patch by Xiang Zhang.

..

.. bpo: 20491
.. date: 9730
.. nonce: ObgnQ2
.. section: Library

The textwrap.TextWrapper class now honors non-breaking spaces. Based on
patch by Kaarle Ritvanen.

..

.. bpo: 28353
.. date: 9729
.. nonce: sKGbLL
.. section: Library

os.fwalk() no longer fails on broken links.

..

.. bpo: 28430
.. date: 9728
.. nonce: 4MiEYT
.. section: Library

Fix iterator of C implemented asyncio.Future doesn't accept non-None value
is passed to it.send(val).

..

.. bpo: 27025
.. date: 9727
.. nonce: foAViS
.. section: Library

Generated names for Tkinter widgets now start by the "!" prefix for
readability.

..

.. bpo: 25464
.. date: 9726
.. nonce: HDUTCu
.. section: Library

Fixed HList.header_exists() in tkinter.tix module by addin a workaround to
Tix library bug.

..

.. bpo: 28488
.. date: 9725
.. nonce: TgO112
.. section: Library

shutil.make_archive() no longer adds entry "./" to ZIP archive.

..

.. bpo: 25953
.. date: 9724
.. nonce: EKKJAQ
.. section: Library

re.sub() now raises an error for invalid numerical group reference in
replacement template even if the pattern is not found in the string.  Error
message for invalid group reference now includes the group index and the
position of the reference. Based on patch by SilentGhost.

..

.. bpo: 18219
.. date: 9723
.. nonce: 1ANQN1
.. section: Library

Optimize csv.DictWriter for large number of columns. Patch by Mariatta
Wijaya.

..

.. bpo: 28448
.. date: 9722
.. nonce: 5bduWe
.. section: Library

Fix C implemented asyncio.Future didn't work on Windows.

..

.. bpo: 28480
.. date: 9721
.. nonce: 9lHw6m
.. section: Library

Fix error building socket module when multithreading is disabled.

..

.. bpo: 24452
.. date: 9720
.. nonce: m9Kyg3
.. section: Library

Make webbrowser support Chrome on Mac OS X.

..

.. bpo: 20766
.. date: 9719
.. nonce: 4kvCzx
.. section: Library

Fix references leaked by pdb in the handling of SIGINT handlers.

..

.. bpo: 28492
.. date: 9718
.. nonce: pFRLQE
.. section: Library

Fix how StopIteration exception is raised in _asyncio.Future.

..

.. bpo: 28500
.. date: 9717
.. nonce: NINKzZ
.. section: Library

Fix asyncio to handle async gens GC from another thread.

..

.. bpo: 26923
.. date: 9716
.. nonce: 8dh3AV
.. section: Library

Fix asyncio.Gather to refuse being cancelled once all children are done.
Patch by Johannes Ebke.

..

.. bpo: 26796
.. date: 9715
.. nonce: TZyAfJ
.. section: Library

Don't configure the number of workers for default threadpool executor.
Initial patch by Hans Lawrenz.

..

.. bpo: 28544
.. date: 9714
.. nonce: KD1oFP
.. section: Library

Implement asyncio.Task in C.

..

.. bpo: 28522
.. date: 9713
.. nonce: XHMQa7
.. section: Windows

Fixes mishandled buffer reallocation in getpathp.c

..

.. bpo: 28444
.. date: 9712
.. nonce: zkc9nT
.. section: Build

Fix missing extensions modules when cross compiling.

..

.. bpo: 28208
.. date: 9711
.. nonce: DtoP1i
.. section: Build

Update Windows build and OS X installers to use SQLite 3.14.2.

..

.. bpo: 28248
.. date: 9710
.. nonce: KY_-en
.. section: Build

Update Windows build and OS X installers to use OpenSSL 1.0.2j.

..

.. bpo: 26944
.. date: 9709
.. nonce: ChZ_BO
.. section: Tests

Fix test_posix for Android where 'id -G' is entirely wrong or missing the
effective gid.

..

.. bpo: 28409
.. date: 9708
.. nonce: Q2IlxJ
.. section: Tests

regrtest: fix the parser of command line arguments.


================================================
File: /Misc/NEWS.d/3.6.0b4.rst
================================================
.. bpo: 28532
.. date: 9778
.. nonce: KEYJny
.. release date: 2016-11-21
.. section: Core and Builtins

Show sys.version when -V option is supplied twice.

..

.. bpo: 27100
.. date: 9777
.. nonce: poVjXq
.. section: Core and Builtins

The with-statement now checks for __enter__ before it checks for __exit__.
This gives less confusing error messages when both methods are missing.
Patch by Jonathan Ellington.

..

.. bpo: 28746
.. date: 9776
.. nonce: r5MXdB
.. section: Core and Builtins

Fix the set_inheritable() file descriptor method on platforms that do not
have the ioctl FIOCLEX and FIONCLEX commands.

..

.. bpo: 26920
.. date: 9775
.. nonce: 1URwGb
.. section: Core and Builtins

Fix not getting the locale's charset upon initializing the interpreter, on
platforms that do not have langinfo.

..

.. bpo: 28648
.. date: 9774
.. nonce: z7B52W
.. section: Core and Builtins

Fixed crash in Py_DecodeLocale() in debug build on Mac OS X when decode
astral characters.  Patch by Xiang Zhang.

..

.. bpo: 19398
.. date: 9773
.. nonce: RYbEGH
.. section: Core and Builtins

Extra slash no longer added to sys.path components in case of empty
compile-time PYTHONPATH components.

..

.. bpo: 28665
.. date: 9772
.. nonce: v4nx86
.. section: Core and Builtins

Improve speed of the STORE_DEREF opcode by 40%.

..

.. bpo: 28583
.. date: 9771
.. nonce: F-QAx1
.. section: Core and Builtins

PyDict_SetDefault didn't combine split table when needed. Patch by Xiang
Zhang.

..

.. bpo: 27243
.. date: 9770
.. nonce: 61E6K5
.. section: Core and Builtins

Change PendingDeprecationWarning -> DeprecationWarning. As it was agreed in
the issue, __aiter__ returning an awaitable should result in
PendingDeprecationWarning in 3.5 and in DeprecationWarning in 3.6.

..

.. bpo: 26182
.. date: 9769
.. nonce: a8JXK2
.. section: Core and Builtins

Fix a refleak in code that raises DeprecationWarning.

..

.. bpo: 28721
.. date: 9768
.. nonce: BO9BUF
.. section: Core and Builtins

Fix asynchronous generators aclose() and athrow() to handle
StopAsyncIteration propagation properly.

..

.. bpo: 28752
.. date: 9767
.. nonce: Q-4oRE
.. section: Library

Restored the __reduce__() methods of datetime objects.

..

.. bpo: 28727
.. date: 9766
.. nonce: ubZP_b
.. section: Library

Regular expression patterns, _sre.SRE_Pattern objects created by
re.compile(), become comparable (only x==y and x!=y operators). This change
should fix the issue #18383: don't duplicate warning filters when the
warnings module is reloaded (thing usually only done in unit tests).

..

.. bpo: 20572
.. date: 9765
.. nonce: lGXaH9
.. section: Library

The subprocess.Popen.wait method's undocumented endtime parameter now raises
a DeprecationWarning.

..

.. bpo: 25659
.. date: 9764
.. nonce: lE2IlT
.. section: Library

In ctypes, prevent a crash calling the from_buffer() and from_buffer_copy()
methods on abstract classes like Array.

..

.. bpo: 19717
.. date: 9763
.. nonce: HXCAIz
.. section: Library

Makes Path.resolve() succeed on paths that do not exist. Patch by Vajrasky
Kok

..

.. bpo: 28563
.. date: 9762
.. nonce: iweEiw
.. section: Library

Fixed possible DoS and arbitrary code execution when handle plural form
selections in the gettext module.  The expression parser now supports exact
syntax supported by GNU gettext.

..

.. bpo: 28387
.. date: 9761
.. nonce: 1clJu7
.. section: Library

Fixed possible crash in _io.TextIOWrapper deallocator when the garbage
collector is invoked in other thread.  Based on patch by Sebastian Cufre.

..

.. bpo: 28600
.. date: 9760
.. nonce: wMVrjN
.. section: Library

Optimize loop.call_soon.

..

.. bpo: 28613
.. date: 9759
.. nonce: sqUPrv
.. section: Library

Fix get_event_loop() return the current loop if called from
coroutines/callbacks.

..

.. bpo: 28634
.. date: 9758
.. nonce: YlRydz
.. section: Library

Fix asyncio.isfuture() to support unittest.Mock.

..

.. bpo: 26081
.. date: 9757
.. nonce: 2Y8-a9
.. section: Library

Fix refleak in _asyncio.Future.__iter__().throw.

..

.. bpo: 28639
.. date: 9756
.. nonce: WUPo1o
.. section: Library

Fix inspect.isawaitable to always return bool Patch by Justin Mayfield.

..

.. bpo: 28652
.. date: 9755
.. nonce: f5M8FG
.. section: Library

Make loop methods reject socket kinds they do not support.

..

.. bpo: 28653
.. date: 9754
.. nonce: S5bA9i
.. section: Library

Fix a refleak in functools.lru_cache.

..

.. bpo: 28703
.. date: 9753
.. nonce: CRLTJc
.. section: Library

Fix asyncio.iscoroutinefunction to handle Mock objects.

..

.. bpo: 28704
.. date: 9752
.. nonce: EFWBII
.. section: Library

Fix create_unix_server to support Path-like objects (PEP 519).

..

.. bpo: 28720
.. date: 9751
.. nonce: Fsz-Lf
.. section: Library

Add collections.abc.AsyncGenerator.

..

.. bpo: 28513
.. date: 9750
.. nonce: L3joAz
.. section: Documentation

Documented command-line interface of zipfile.

..

.. bpo: 28666
.. date: 9749
.. nonce: RtTk-4
.. section: Tests

Now test.support.rmtree is able to remove unwritable or unreadable
directories.

..

.. bpo: 23839
.. date: 9748
.. nonce: zsT_L9
.. section: Tests

Various caches now are cleared before running every test file.

..

.. bpo: 10656
.. date: 9747
.. nonce: pR8FFU
.. section: Build

Fix out-of-tree building on AIX.  Patch by Tristan Carel and Michael
Haubenwallner.

..

.. bpo: 26359
.. date: 9746
.. nonce: CLz6qy
.. section: Build

Rename --with-optimiations to --enable-optimizations.

..

.. bpo: 28676
.. date: 9745
.. nonce: Wxf6Ds
.. section: Build

Prevent missing 'getentropy' declaration warning on macOS. Patch by Gareth
Rees.


================================================
File: /Misc/NEWS.d/3.6.0rc1.rst
================================================
.. bpo: 23722
.. date: 9790
.. nonce: e8BH5h
.. release date: 2016-12-06
.. section: Core and Builtins

Rather than silently producing a class that doesn't support zero-argument
``super()`` in methods, failing to pass the new ``__classcell__`` namespace
entry up to ``type.__new__`` now results in a ``DeprecationWarning`` and a
class that supports zero-argument ``super()``.

..

.. bpo: 28797
.. date: 9789
.. nonce: _A0_Z5
.. section: Core and Builtins

Modifying the class __dict__ inside the __set_name__ method of a descriptor
that is used inside that class no longer prevents calling the __set_name__
method of other descriptors.

..

.. bpo: 28782
.. date: 9788
.. nonce: foJV_E
.. section: Core and Builtins

Fix a bug in the implementation ``yield from`` when checking if the next
instruction is YIELD_FROM. Regression introduced by WORDCODE (issue #26647).

..

.. bpo: 27030
.. date: 9787
.. nonce: 88FOrz
.. section: Library

Unknown escapes in re.sub() replacement template are allowed again.  But
they still are deprecated and will be disabled in 3.7.

..

.. bpo: 28835
.. date: 9786
.. nonce: Fv7Dr1
.. section: Library

Fix a regression introduced in warnings.catch_warnings(): call
warnings.showwarning() if it was overridden inside the context manager.

..

.. bpo: 27172
.. date: 9785
.. nonce: mVKfLT
.. section: Library

To assist with upgrades from 2.7, the previously documented deprecation of
``inspect.getfullargspec()`` has been reversed. This decision may be
revisited again after the Python 2.7 branch is no longer officially
supported.

..

.. bpo: 26273
.. date: 9784
.. nonce: ilNIWN
.. section: Library

Add new :const:`socket.TCP_CONGESTION` (Linux 2.6.13) and
:const:`socket.TCP_USER_TIMEOUT` (Linux 2.6.37) constants. Patch written by
Omar Sandoval.

..

.. bpo: 24142
.. date: 9783
.. nonce: IrZnFs
.. section: Library

Reading a corrupt config file left configparser in an invalid state.
Original patch by Florian Höch.

..

.. bpo: 28843
.. date: 9782
.. nonce: O7M0LE
.. section: Library

Fix asyncio C Task to handle exceptions __traceback__.

..

.. bpo: 28808
.. date: 9781
.. nonce: A03X6r
.. section: C API

PyUnicode_CompareWithASCIIString() now never raises exceptions.

..

.. bpo: 23722
.. date: 9780
.. nonce: 6HX6fk
.. section: Documentation

The data model reference and the porting section in the What's New guide now
cover the additional ``__classcell__`` handling needed for custom
metaclasses to fully support :pep:`487` and zero-argument ``super()``.

..

.. bpo: 28023
.. date: 9779
.. nonce: 4gzSGp
.. section: Tools/Demos

Fix python-gdb.py didn't support new dict implementation.


================================================
File: /Misc/NEWS.d/3.6.0rc2.rst
================================================
.. bpo: 28147
.. date: 9795
.. nonce: CnK_xf
.. release date: 2016-12-16
.. section: Core and Builtins

Fix a memory leak in split-table dictionaries: setattr() must not convert
combined table into split table. Patch written by INADA Naoki.

..

.. bpo: 28990
.. date: 9794
.. nonce: m8xRMJ
.. section: Core and Builtins

Fix asyncio SSL hanging if connection is closed before handshake is
completed. (Patch by HoHo-Ho)

..

.. bpo: 28770
.. date: 9793
.. nonce: N9GQsz
.. section: Tools/Demos

Fix python-gdb.py for fastcalls.

..

.. bpo: 28896
.. date: 9792
.. nonce: ymAbmH
.. section: Windows

Deprecate WindowsRegistryFinder.

..

.. bpo: 28898
.. date: 9791
.. nonce: YGUd_i
.. section: Build

Prevent gdb build errors due to HAVE_LONG_LONG redefinition.


================================================
File: /Misc/NEWS.d/3.6.1.rst
================================================
.. bpo: 29723
.. date: 9895
.. nonce: M5omgP
.. release date: 2017-03-21
.. section: Core and Builtins

The ``sys.path[0]`` initialization change for bpo-29139 caused a regression
by revealing an inconsistency in how sys.path is initialized when executing
``__main__`` from a zipfile, directory, or other import location. The
interpreter now consistently avoids ever adding the import location's parent
directory to ``sys.path``, and ensures no other ``sys.path`` entries are
inadvertently modified when inserting the import location named on the
command line.

..

.. bpo: 27593
.. date: 9894
.. nonce: nk7Etn
.. section: Build

fix format of git information used in sys.version

..

.. bpo: 0
.. date: 9893
.. nonce: usKKNQ
.. section: Build

Fix incompatible comment in python.h


================================================
File: /Misc/NEWS.d/3.6.1rc1.rst
================================================
.. bpo: 28893
.. date: 9892
.. nonce: WTKnpj
.. release date: 2017-03-04
.. section: Core and Builtins

Set correct __cause__ for errors about invalid awaitables returned from
__aiter__ and __anext__.

..

.. bpo: 29683
.. date: 9891
.. nonce: G5iS-P
.. section: Core and Builtins

Fixes to memory allocation in _PyCode_SetExtra.  Patch by Brian Coleman.

..

.. bpo: 29684
.. date: 9890
.. nonce: wTgEoh
.. section: Core and Builtins

Fix minor regression of PyEval_CallObjectWithKeywords. It should raise
TypeError when kwargs is not a dict.  But it might cause segv when args=NULL
and kwargs is not a dict.

..

.. bpo: 28598
.. date: 9889
.. nonce: QxbzQn
.. section: Core and Builtins

Support __rmod__ for subclasses of str being called before str.__mod__.
Patch by Martijn Pieters.

..

.. bpo: 29607
.. date: 9888
.. nonce: 7NvBA1
.. section: Core and Builtins

Fix stack_effect computation for CALL_FUNCTION_EX. Patch by Matthieu
Dartiailh.

..

.. bpo: 29602
.. date: 9887
.. nonce: qyyskC
.. section: Core and Builtins

Fix incorrect handling of signed zeros in complex constructor for complex
subclasses and for inputs having a __complex__ method. Patch by Serhiy
Storchaka.

..

.. bpo: 29347
.. date: 9886
.. nonce: 1RPPGN
.. section: Core and Builtins

Fixed possibly dereferencing undefined pointers when creating weakref
objects.

..

.. bpo: 29438
.. date: 9885
.. nonce: IKxD6I
.. section: Core and Builtins

Fixed use-after-free problem in key sharing dict.

..

.. bpo: 29319
.. date: 9884
.. nonce: KLDUZf
.. section: Core and Builtins

Prevent RunMainFromImporter overwriting sys.path[0].

..

.. bpo: 29337
.. date: 9883
.. nonce: bjX8AE
.. section: Core and Builtins

Fixed possible BytesWarning when compare the code objects. Warnings could be
emitted at compile time.

..

.. bpo: 29327
.. date: 9882
.. nonce: XXQarW
.. section: Core and Builtins

Fixed a crash when pass the iterable keyword argument to sorted().

..

.. bpo: 29034
.. date: 9881
.. nonce: 7-uEDT
.. section: Core and Builtins

Fix memory leak and use-after-free in os module (path_converter).

..

.. bpo: 29159
.. date: 9880
.. nonce: gEn_kP
.. section: Core and Builtins

Fix regression in bytes(x) when x.__index__() raises Exception.

..

.. bpo: 28932
.. date: 9879
.. nonce: QnLx8A
.. section: Core and Builtins

Do not include <sys/random.h> if it does not exist.

..

.. bpo: 25677
.. date: 9878
.. nonce: RWhZrb
.. section: Core and Builtins

Correct the positioning of the syntax error caret for indented blocks.
Based on patch by Michael Layzell.

..

.. bpo: 29000
.. date: 9877
.. nonce: K6wQ-3
.. section: Core and Builtins

Fixed bytes formatting of octals with zero padding in alternate form.

..

.. bpo: 26919
.. date: 9876
.. nonce: Cm7MSa
.. section: Core and Builtins

On Android, operating system data is now always encoded/decoded to/from
UTF-8, instead of the locale encoding to avoid inconsistencies with
os.fsencode() and os.fsdecode() which are already using UTF-8.

..

.. bpo: 28991
.. date: 9875
.. nonce: lGA0FK
.. section: Core and Builtins

functools.lru_cache() was susceptible to an obscure reentrancy bug
triggerable by a monkey-patched len() function.

..

.. bpo: 28739
.. date: 9874
.. nonce: w1fvhk
.. section: Core and Builtins

f-string expressions are no longer accepted as docstrings and by
ast.literal_eval() even if they do not include expressions.

..

.. bpo: 28512
.. date: 9873
.. nonce: i-pv6d
.. section: Core and Builtins

Fixed setting the offset attribute of SyntaxError by
PyErr_SyntaxLocationEx() and PyErr_SyntaxLocationObject().

..

.. bpo: 28918
.. date: 9872
.. nonce: SFVuPz
.. section: Core and Builtins

Fix the cross compilation of xxlimited when Python has been built with
Py_DEBUG defined.

..

.. bpo: 28731
.. date: 9871
.. nonce: oNF59u
.. section: Core and Builtins

Optimize _PyDict_NewPresized() to create correct size dict. Improve speed of
dict literal with constant keys up to 30%.

..

.. bpo: 29169
.. date: 9870
.. nonce: 8ypApm
.. section: Library

Update zlib to 1.2.11.

..

.. bpo: 29623
.. date: 9869
.. nonce: D3-NP2
.. section: Library

Allow use of path-like object as a single argument in ConfigParser.read().
Patch by David Ellis.

..

.. bpo: 28963
.. date: 9868
.. nonce: tPl8dq
.. section: Library

Fix out of bound iteration in asyncio.Future.remove_done_callback
implemented in C.

..

.. bpo: 29704
.. date: 9867
.. nonce: r-kWqv
.. section: Library

asyncio.subprocess.SubprocessStreamProtocol no longer closes before all
pipes are closed.

..

.. bpo: 29271
.. date: 9866
.. nonce: y8Vj2v
.. section: Library

Fix Task.current_task and Task.all_tasks implemented in C to accept None
argument as their pure Python implementation.

..

.. bpo: 29703
.. date: 9865
.. nonce: ZdsPCR
.. section: Library

Fix asyncio to support instantiation of new event loops in child processes.

..

.. bpo: 29376
.. date: 9864
.. nonce: rrJhJy
.. section: Library

Fix assertion error in threading._DummyThread.is_alive().

..

.. bpo: 28624
.. date: 9863
.. nonce: 43TJib
.. section: Library

Add a test that checks that cwd parameter of Popen() accepts PathLike
objects.  Patch by Sayan Chowdhury.

..

.. bpo: 28518
.. date: 9862
.. nonce: o-Q2Nw
.. section: Library

Start a transaction implicitly before a DML statement. Patch by Aviv
Palivoda.

..

.. bpo: 29532
.. date: 9861
.. nonce: YCwVQn
.. section: Library

Altering a kwarg dictionary passed to functools.partial() no longer affects
a partial object after creation.

..

.. bpo: 29110
.. date: 9860
.. nonce: wmE-_T
.. section: Library

Fix file object leak in aifc.open() when file is given as a filesystem path
and is not in valid AIFF format. Patch by Anthony Zhang.

..

.. bpo: 28556
.. date: 9859
.. nonce: p6967e
.. section: Library

Various updates to typing module: typing.Counter, typing.ChainMap, improved
ABC caching, etc. Original PRs by Jelle Zijlstra, Ivan Levkivskyi, Manuel
Krebber, and Łukasz Langa.

..

.. bpo: 29100
.. date: 9858
.. nonce: LAAERS
.. section: Library

Fix datetime.fromtimestamp() regression introduced in Python 3.6.0: check
minimum and maximum years.

..

.. bpo: 29519
.. date: 9857
.. nonce: oGGgZ4
.. section: Library

Fix weakref spewing exceptions during interpreter shutdown when used with a
rare combination of multiprocessing and custom codecs.

..

.. bpo: 29416
.. date: 9856
.. nonce: KJGyI_
.. section: Library

Prevent infinite loop in pathlib.Path.mkdir

..

.. bpo: 29444
.. date: 9855
.. nonce: cEwgmk
.. section: Library

Fixed out-of-bounds buffer access in the group() method of the match object.
Based on patch by WGH.

..

.. bpo: 29335
.. date: 9854
.. nonce: _KC7IK
.. section: Library

Fix subprocess.Popen.wait() when the child process has exited to a stopped
instead of terminated state (ex: when under ptrace).

..

.. bpo: 29290
.. date: 9853
.. nonce: XBqptF
.. section: Library

Fix a regression in argparse that help messages would wrap at non-breaking
spaces.

..

.. bpo: 28735
.. date: 9852
.. nonce: admHLO
.. section: Library

Fixed the comparison of mock.MagickMock with mock.ANY.

..

.. bpo: 29316
.. date: 9851
.. nonce: OeOQw5
.. section: Library

Restore the provisional status of typing module, add corresponding note to
documentation. Patch by Ivan L.

..

.. bpo: 29219
.. date: 9850
.. nonce: kxui7t
.. section: Library

Fixed infinite recursion in the repr of uninitialized ctypes.CDLL instances.

..

.. bpo: 29011
.. date: 9849
.. nonce: MI5f2R
.. section: Library

Fix an important omission by adding Deque to the typing module.

..

.. bpo: 28969
.. date: 9848
.. nonce: j3HJYO
.. section: Library

Fixed race condition in C implementation of functools.lru_cache. KeyError
could be raised when cached function with full cache was simultaneously
called from different threads with the same uncached arguments.

..

.. bpo: 29142
.. date: 9847
.. nonce: xo6kAv
.. section: Library

In urllib.request, suffixes in no_proxy environment variable with leading
dots could match related hostnames again (e.g. .b.c matches a.b.c). Patch by
Milan Oberkirch.

..

.. bpo: 28961
.. date: 9846
.. nonce: Rt93vg
.. section: Library

Fix unittest.mock._Call helper: don't ignore the name parameter anymore.
Patch written by Jiajun Huang.

..

.. bpo: 29203
.. date: 9845
.. nonce: kN5S6v
.. section: Library

functools.lru_cache() now respects :pep:`468` and preserves the order of
keyword arguments.  f(a=1, b=2) is now cached separately from f(b=2, a=1)
since both calls could potentially give different results.

..

.. bpo: 15812
.. date: 9844
.. nonce: R1U-Ec
.. section: Library

inspect.getframeinfo() now correctly shows the first line of a context.
Patch by Sam Breese.

..

.. bpo: 29094
.. date: 9843
.. nonce: 460ZQo
.. section: Library

Offsets in a ZIP file created with extern file object and modes "w" and "x"
now are relative to the start of the file.

..

.. bpo: 29085
.. date: 9842
.. nonce: bm3gkx
.. section: Library

Allow random.Random.seed() to use high quality OS randomness rather than the
pid and time.

..

.. bpo: 29061
.. date: 9841
.. nonce: YKq0Ba
.. section: Library

Fixed bug in secrets.randbelow() which would hang when given a negative
input.  Patch by Brendan Donegan.

..

.. bpo: 29079
.. date: 9840
.. nonce: g4YLix
.. section: Library

Prevent infinite loop in pathlib.resolve() on Windows

..

.. bpo: 13051
.. date: 9839
.. nonce: YzC1Te
.. section: Library

Fixed recursion errors in large or resized curses.textpad.Textbox.  Based on
patch by Tycho Andersen.

..

.. bpo: 29119
.. date: 9838
.. nonce: Ov69fr
.. section: Library

Fix weakrefs in the pure python version of collections.OrderedDict
move_to_end() method. Contributed by Andra Bogildea.

..

.. bpo: 9770
.. date: 9837
.. nonce: WJJnwP
.. section: Library

curses.ascii predicates now work correctly with negative integers.

..

.. bpo: 28427
.. date: 9836
.. nonce: vUd-va
.. section: Library

old keys should not remove new values from WeakValueDictionary when
collecting from another thread.

..

.. bpo: 28923
.. date: 9835
.. nonce: naVULD
.. section: Library

Remove editor artifacts from Tix.py.

..

.. bpo: 29055
.. date: 9834
.. nonce: -r_9jc
.. section: Library

Neaten-up empty population error on random.choice() by suppressing the
upstream exception.

..

.. bpo: 28871
.. date: 9833
.. nonce: cPMXCJ
.. section: Library

Fixed a crash when deallocate deep ElementTree.

..

.. bpo: 19542
.. date: 9832
.. nonce: 5tCkaK
.. section: Library

Fix bugs in WeakValueDictionary.setdefault() and WeakValueDictionary.pop()
when a GC collection happens in another thread.

..

.. bpo: 20191
.. date: 9831
.. nonce: Q7uZCS
.. section: Library

Fixed a crash in resource.prlimit() when passing a sequence that doesn't own
its elements as limits.

..

.. bpo: 28779
.. date: 9830
.. nonce: t-mjED
.. section: Library

multiprocessing.set_forkserver_preload() would crash the forkserver process
if a preloaded module instantiated some multiprocessing objects such as
locks.

..

.. bpo: 28847
.. date: 9829
.. nonce: J7d3nG
.. section: Library

dbm.dumb now supports reading read-only files and no longer writes the index
file when it is not changed.

..

.. bpo: 26937
.. date: 9828
.. nonce: c9kgiA
.. section: Library
