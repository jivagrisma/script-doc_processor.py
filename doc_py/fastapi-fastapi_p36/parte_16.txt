<div class="termy">

```console
// Maak een omgevingsvariabele MY_NAME in de regel voor deze programma-aanroep
$ MY_NAME="Wade Wilson" python main.py

// Nu kan het de omgevingsvariabele lezen

Hello Wade Wilson from Python

// De omgevingsvariabelen bestaan daarna niet meer
$ python main.py

Hello World from Python
```

</div>

/// tip

Je kunt er meer over lezen op <a href="https://12factor.net/config" class="external-link" target="_blank">The Twelve-Factor App: Config</a>.

///

## Types en Validatie

Deze omgevingsvariabelen kunnen alleen **tekstuele gegevens** verwerken, omdat ze extern zijn aan Python, compatibel moeten zijn met andere programma's en de rest van het systeem (zelfs met verschillende besturingssystemen, zoals Linux, Windows en macOS).

Dat betekent dat **elke waarde** die in Python uit een omgevingsvariabele wordt gelezen **een `str` zal zijn** en dat elke conversie naar een ander type of elke validatie in de code moet worden uitgevoerd.

Meer informatie over het gebruik van omgevingsvariabelen voor het verwerken van **applicatie instellingen** vind je in de [Geavanceerde gebruikershandleiding - Instellingen en Omgevingsvariabelen](./advanced/settings.md){.internal-link target=_blank}.

## `PATH` Omgevingsvariabele

Er is een **speciale** omgevingsvariabele met de naam **`PATH`**, die door de besturingssystemen (Linux, macOS, Windows) wordt gebruikt om programma's te vinden die uitgevoerd kunnen worden.

De waarde van de variabele `PATH` is een lange string die bestaat uit mappen die gescheiden worden door een dubbele punt `:` op Linux en macOS en door een puntkomma `;` op Windows.

De omgevingsvariabele `PATH` zou er bijvoorbeeld zo uit kunnen zien:

//// tab | Linux, macOS

```plaintext
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
```

Dit betekent dat het systeem naar programma's zoekt in de mappen:

* `/usr/local/bin`
* `/usr/bin`
* `/bin`
* `/usr/sbin`
* `/sbin`

////

//// tab | Windows

```plaintext
C:\Program Files\Python312\Scripts;C:\Program Files\Python312;C:\Windows\System32
```

Dit betekent dat het systeem naar programma's zoekt in de mappen:

* `C:\Program Files\Python312\Scripts`
* `C:\Program Files\Python312`
* `C:\Windows\System32`

////

Wanneer je een **opdracht** in de terminal typt, **zoekt** het besturingssysteem naar het programma in **elk van de mappen** die vermeld staan in de omgevingsvariabele `PATH`.

Wanneer je bijvoorbeeld `python` in de terminal typt, zoekt het besturingssysteem naar een programma met de naam `python` in de **eerste map** in die lijst.

Zodra het gevonden wordt, zal het dat programma **gebruiken**. Anders blijft het in de **andere mappen** zoeken.

### Python installeren en `PATH` bijwerken

Wanneer je Python installeert, word je mogelijk gevraagd of je de omgevingsvariabele `PATH` wilt bijwerken.

//// tab | Linux, macOS

Stel dat je Python installeert en het komt terecht in de map `/opt/custompython/bin`.

Als je kiest om de `PATH` omgevingsvariabele bij te werken, zal het installatieprogramma `/opt/custompython/bin` toevoegen aan de `PATH` omgevingsvariabele.

Dit zou er zo uit kunnen zien:

```plaintext
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/custompython/bin
```

Op deze manier zal het systeem, wanneer je `python` in de terminal typt, het Python-programma in `/opt/custompython/bin` (de laatste map) vinden en dat gebruiken.

////

//// tab | Windows

Stel dat je Python installeert en het komt terecht in de map `C:\opt\custompython\bin`.

Als je kiest om de `PATH` omgevingsvariabele bij te werken, zal het installatieprogramma `C:\opt\custompython\bin` toevoegen aan de `PATH` omgevingsvariabele.

```plaintext
C:\Program Files\Python312\Scripts;C:\Program Files\Python312;C:\Windows\System32;C:\opt\custompython\bin
```

Op deze manier zal het systeem, wanneer je `python` in de terminal typt, het Python-programma in `C:\opt\custompython\bin` (de laatste map) vinden en dat gebruiken.

////

Dus als je typt:

<div class="termy">

```console
$ python
```

</div>

//// tab | Linux, macOS

Zal het systeem het `python`-programma in `/opt/custompython/bin` **vinden** en uitvoeren.

Het zou ongeveer hetzelfde zijn als het typen van:

<div class="termy">

```console
$ /opt/custompython/bin/python
```

</div>

////

//// tab | Windows

Zal het systeem het `python`-programma in `C:\opt\custompython\bin\python` **vinden** en uitvoeren.

Het zou ongeveer hetzelfde zijn als het typen van:

<div class="termy">

```console
$ C:\opt\custompython\bin\python
```

</div>

////

Deze informatie is handig wanneer je meer wilt weten over [virtuele omgevingen](virtual-environments.md){.internal-link target=_blank}.

## Conclusion

Hiermee heb je basiskennis van wat **omgevingsvariabelen** zijn en hoe je ze in Python kunt gebruiken.

Je kunt er ook meer over lezen op de <a href="https://en.wikipedia.org/wiki/Environment_variable" class="external-link" target="_blank">Wikipedia over omgevingsvariabelen</a>.

In veel gevallen is het niet direct duidelijk hoe omgevingsvariabelen nuttig zijn en hoe je ze moet toepassen. Maar ze blijven in veel verschillende scenario's opduiken als je aan het ontwikkelen bent, dus het is goed om er meer over te weten.

Je hebt deze informatie bijvoorbeeld nodig in de volgende sectie, over [Virtuele Omgevingen](virtual-environments.md).


================================================
File: /docs/nl/docs/features.md
================================================
# Functionaliteit

## FastAPI functionaliteit

**FastAPI** biedt je het volgende:

### Gebaseerd op open standaarden

* <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank"><strong>OpenAPI</strong></a> voor het maken van API's, inclusief declaraties van <abbr title="ook bekend als: endpoints, routess">pad</abbr><abbr title="ook bekend als HTTP-methoden, zoals POST, GET, PUT, DELETE">bewerkingen</abbr>, parameters, request bodies, beveiliging, enz.
* Automatische datamodel documentatie met <a href="https://json-schema.org/" class="external-link" target="_blank"><strong>JSON Schema</strong></a> (aangezien OpenAPI zelf is gebaseerd op JSON Schema).
* Ontworpen op basis van deze standaarden, na zorgvuldig onderzoek. In plaats van achteraf deze laag er bovenop te bouwen.
* Dit maakt het ook mogelijk om automatisch **clientcode te genereren** in verschillende programmeertalen.

### Automatische documentatie

Interactieve API-documentatie en verkenning van webgebruikersinterfaces. Aangezien dit framework is gebaseerd op OpenAPI, zijn er meerdere documentatie opties mogelijk, waarvan er standaard 2 zijn inbegrepen.

* <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank"><strong>Swagger UI</strong></a>, met interactieve interface, maakt het mogelijk je API rechtstreeks vanuit de browser aan te roepen en te testen.

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* Alternatieve API-documentatie met <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank"><strong>ReDoc</strong></a>.

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### Gewoon Moderne Python

Het is allemaal gebaseerd op standaard **Python type** declaraties (dankzij Pydantic). Je hoeft dus geen nieuwe syntax te leren. Het is gewoon standaard moderne Python.

Als je een opfriscursus van 2 minuten nodig hebt over het gebruik van Python types (zelfs als je FastAPI niet gebruikt), bekijk dan deze korte tutorial: [Python Types](python-types.md){.internal-link target=_blank}.

Je schrijft gewoon standaard Python met types:

```Python
from datetime import date

from pydantic import BaseModel

# Declareer een variabele als een str
# en krijg editorondersteuning in de functie
def main(user_id: str):
    return user_id


# Een Pydantic model
class User(BaseModel):
    id: int
    name: str
    joined: date
```

Vervolgens kan je het op deze manier gebruiken:

```Python
my_user: User = User(id=3, name="John Doe", joined="2018-07-19")

second_user_data = {
    "id": 4,
    "name": "Mary",
    "joined": "2018-11-30",
}

my_second_user: User = User(**second_user_data)
```

/// info

`**second_user_data` betekent:

Geef de sleutels (keys) en waarden (values) van de `second_user_data` dict direct door als sleutel-waarden argumenten, gelijk aan: `User(id=4, name=‚ÄúMary‚Äù, joined=‚Äú2018-11-30‚Äù)`

///

### Editor-ondersteuning

Het gehele framework is ontworpen om eenvoudig en intu√Øtief te zijn in gebruik. Alle beslissingen zijn getest op meerdere code-editors nog voordat het daadwerkelijke ontwikkelen begon, om zo de beste ontwikkelervaring te garanderen.

Uit enqu√™tes onder Python ontwikkelaars blijkt maar al te duidelijk dat "(automatische) code aanvulling" <a href="https://www.jetbrains.com/research/python-developers-survey-2017/#tools-and-features" class="external-link" target="_blank">een van de meest gebruikte functionaliteiten is</a>.

Het hele **FastAPI** framework is daarop gebaseerd. Automatische code aanvulling werkt overal.

Je hoeft zelden terug te vallen op de documentatie.

Zo kan je editor je helpen:

* in <a href="https://code.visualstudio.com/" class="external-link" target="_blank">Visual Studio Code</a>:

![editor ondersteuning](https://fastapi.tiangolo.com/img/vscode-completion.png)

* in <a href="https://www.jetbrains.com/pycharm/" class="external-link" target="_blank">PyCharm</a>:

![editor ondersteuning](https://fastapi.tiangolo.com/img/pycharm-completion.png)

Je krijgt autocomletion die je voorheen misschien zelfs voor onmogelijk had gehouden. Zoals bijvoorbeeld de `price` key in een JSON body (die genest had kunnen zijn) die afkomstig is van een request.

Je hoeft niet langer de verkeerde keys in te typen, op en neer te gaan tussen de documentatie, of heen en weer te scrollen om te checken of je `username` of toch `user_name` had gebruikt.

### Kort

Dit framework heeft voor alles verstandige **standaardinstellingen**, met overal optionele configuraties. Alle parameters kunnen worden verfijnd zodat het past bij wat je nodig hebt, om zo de API te kunnen defini√´ren die jij nodig hebt.

Maar standaard werkt alles **‚Äúgewoon‚Äù**.

### Validatie

* Validatie voor de meeste (of misschien wel alle?) Python **datatypes**, inclusief:
    * JSON objecten (`dict`).
    * JSON array (`list`) die itemtypes defini√´ren.
    * String (`str`) velden, die min en max lengtes hebben.
    * Getallen (`int`, `float`) met min en max waarden, enz.

* Validatie voor meer exotische typen, zoals:
    * URL.
    * E-mail.
    * UUID.
    * ...en anderen.

Alle validatie wordt uitgevoerd door het beproefde en robuuste **Pydantic**.

### Beveiliging en authenticatie

Beveiliging en authenticatie is ge√Øntegreerd. Zonder compromissen te doen naar databases of datamodellen.

Alle beveiligingsschema's gedefinieerd in OpenAPI, inclusief:

* HTTP Basic.
* **OAuth2** (ook met **JWT tokens**). Bekijk de tutorial over [OAuth2 with JWT](tutorial/security/oauth2-jwt.md){.internal-link target=_blank}.
* API keys in:
    * Headers.
    * Query parameters.
    * Cookies, enz.

Plus alle beveiligingsfuncties van Starlette (inclusief **sessiecookies**).

Gebouwd als een herbruikbare tool met componenten die makkelijk te integreren zijn in en met je systemen, datastores, relationele en NoSQL databases, enz.

### Dependency Injection

FastAPI bevat een uiterst eenvoudig, maar uiterst krachtig <abbr title='ook bekend als "componenten", "bronnen", "diensten", "aanbieders"'><strong>Dependency Injection</strong></abbr> systeem.

* Zelfs dependencies kunnen dependencies hebben, waardoor een hi√´rarchie of **‚Äúgraph‚Äù van dependencies** ontstaat.
* Allemaal **automatisch afgehandeld** door het framework.
* Alle dependencies kunnen data nodig hebben van request, de vereiste **padoperaties veranderen** en automatische documentatie verstrekken.
* **Automatische validatie** zelfs voor *padoperatie* parameters gedefinieerd in dependencies.
* Ondersteuning voor complexe gebruikersauthenticatiesystemen, **databaseverbindingen**, enz.
* **Geen compromisen** met databases, gebruikersinterfaces, enz. Maar eenvoudige integratie met ze allemaal.

### Ongelimiteerde "plug-ins"

Of anders gezegd, je hebt ze niet nodig, importeer en gebruik de code die je nodig hebt.

Elke integratie is ontworpen om eenvoudig te gebruiken (met afhankelijkheden), zodat je een ‚Äúplug-in" kunt maken in 2 regels code, met dezelfde structuur en syntax die wordt gebruikt voor je *padbewerkingen*.

### Getest

* 100% <abbr title="De hoeveelheid code die automatisch wordt getest">van de code is getest</abbr>.
* 100% <abbr title="Python type annotaties, hiermee kunnen je editor en externe tools je beter ondersteunen">type geannoteerde</abbr> codebase.
* Wordt gebruikt in productietoepassingen.

## Starlette functies

**FastAPI** is volledig verenigbaar met (en gebaseerd op) <a href="https://www.starlette.io/" class="external-link" target="_blank"><strong>Starlette</strong></a>.

`FastAPI` is eigenlijk een subklasse van `Starlette`. Dus als je Starlette al kent of gebruikt, zal de meeste functionaliteit op dezelfde manier werken.

Met **FastAPI** krijg je alle functies van **Starlette** (FastAPI is gewoon Starlette op stero√Øden):

* Zeer indrukwekkende prestaties. Het is <a href="https://github.com/encode/starlette#performance" class="external-link" target="_blank">een van de snelste Python frameworks, vergelijkbaar met **NodeJS** en **Go**</a>.
* **WebSocket** ondersteuning.
* Taken in de achtergrond tijdens het proces.
* Opstart- en afsluit events.
* Test client gebouwd op HTTPX.
* **CORS**, GZip, Statische bestanden, Streaming reacties.
* **Sessie en Cookie** ondersteuning.
* 100% van de code is getest.
* 100% type geannoteerde codebase.

## Pydantic functionaliteit

**FastAPI** is volledig verenigbaar met (en gebaseerd op) Pydantic. Dus alle extra <a href="https://docs.pydantic.dev/" class="external-link" target="_blank"><strong>Pydantic</strong></a> code die je nog hebt werkt ook.

Inclusief externe pakketten die ook gebaseerd zijn op Pydantic, zoals <abbr title="Object-Relational Mapper">ORM</abbr>s, <abbr title="Object-Document Mapper">ODM</abbr>s voor databases.

Dit betekent ook dat je in veel gevallen het object dat je van een request krijgt **direct naar je database** kunt sturen, omdat alles automatisch wordt gevalideerd.

Hetzelfde geldt ook andersom, in veel gevallen kun je dus het object dat je krijgt van de database **direct doorgeven aan de client**.

Met **FastAPI** krijg je alle functionaliteit van **Pydantic** (omdat FastAPI is gebaseerd op Pydantic voor alle dataverwerking):

* **Geen brainfucks**:
    * Je hoeft geen nieuwe microtaal voor schemadefinities te leren.
    * Als je bekend bent Python types, weet je hoe je Pydantic moet gebruiken.
* Werkt goed samen met je **<abbr title=‚ÄúIntegrated Development Environment, vergelijkbaar met een code editor‚Äù>IDE</abbr>/<abbr title=‚ÄúEen programma dat controleert op fouten in de code‚Äù>linter</abbr>/hersenen**:
    * Doordat pydantic's datastructuren enkel instanties zijn van klassen, die je definieert, werkt automatische aanvulling, linting, mypy en je intu√Øtie allemaal goed met je gevalideerde data.
* Valideer **complexe structuren**:
    * Gebruik van hi√´rarchische Pydantic modellen, Python `typing`'s `List` en `Dict`, enz.
    * Met validators kunnen complexe dataschema's duidelijk en eenvoudig worden gedefinieerd, gecontroleerd en gedocumenteerd als JSON Schema.
    * Je kunt diep **geneste JSON** objecten laten valideren en annoteren.
* **Uitbreidbaar**:
    * Met Pydantic kunnen op maat gemaakte datatypen worden gedefinieerd of je kunt validatie uitbreiden met methoden op een model dat is ingericht met de decorator validator.
* 100% van de code is getest.


================================================
File: /docs/nl/docs/index.md
================================================
# FastAPI

<style>
.md-content .md-typeset h1 { display: none; }
</style>

<p align="center">
  <a href="https://fastapi.tiangolo.com"><img src="https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png" alt="FastAPI"></a>
</p>
<p align="center">
    <em>FastAPI framework, zeer goede prestaties, eenvoudig te leren, snel te programmeren, klaar voor productie</em>
</p>
<p align="center">
<a href="https://github.com/fastapi/fastapi/actions?query=workflow%3ATest+event%3Apush+branch%3Amaster" target="_blank">
    <img src="https://github.com/fastapi/fastapi/workflows/Test/badge.svg?event=push&branch=master" alt="Test">
</a>
<a href="https://coverage-badge.samuelcolvin.workers.dev/redirect/fastapi/fastapi" target="_blank">
    <img src="https://coverage-badge.samuelcolvin.workers.dev/fastapi/fastapi.svg" alt="Coverage">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://img.shields.io/pypi/v/fastapi?color=%2334D058&label=pypi%20package" alt="Package version">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://img.shields.io/pypi/pyversions/fastapi.svg?color=%2334D058" alt="Supported Python versions">
</a>
</p>

---

**Documentatie**: <a href="https://fastapi.tiangolo.com" target="_blank">https://fastapi.tiangolo.com</a>

**Broncode**: <a href="https://github.com/fastapi/fastapi" target="_blank">https://github.com/tiangolo/fastapi</a>

---

FastAPI is een modern, snel (zeer goede prestaties), web framework voor het bouwen van API's in Python, gebruikmakend van standaard Python type-hints.

De belangrijkste kenmerken zijn:

* **Snel**: Zeer goede prestaties, vergelijkbaar met **NodeJS** en **Go** (dankzij Starlette en Pydantic). [Een van de snelste beschikbare Python frameworks](#prestaties).
* **Snel te programmeren**: Verhoog de snelheid om functionaliteit te ontwikkelen met ongeveer 200% tot 300%. *
* **Minder bugs**: Verminder ongeveer 40% van de door mensen (ontwikkelaars) veroorzaakte fouten. *
* **Intu√Øtief**: Buitengewoon goede ondersteuning voor editors. <abbr title="ook bekend als automatisch aanvullen, automatisch aanvullen, IntelliSense">Overal automische code aanvulling</abbr>. Minder tijd kwijt aan debuggen.
* **Eenvoudig**: Ontworpen om gemakkelijk te gebruiken en te leren. Minder tijd nodig om documentatie te lezen.
* **Kort**: Minimaliseer codeduplicatie. Elke parameterdeclaratie ondersteunt meerdere functionaliteiten. Minder bugs.
* **Robust**: Code gereed voor productie. Met automatische interactieve documentatie.
* **Standards-based**: Gebaseerd op (en volledig verenigbaar met) open standaarden voor API's: <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> (voorheen bekend als Swagger) en <a href="https://json-schema.org/" class="external-link" target="_blank">JSON Schema</a>.

<small>* schatting op basis van testen met een intern ontwikkelteam en bouwen van productieapplicaties.</small>

## Sponsors

<!-- sponsors -->

{% if sponsors %}
{% for sponsor in sponsors.gold -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor -%}
{%- for sponsor in sponsors.silver -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor %}
{% endif %}

<!-- /sponsors -->

<a href="https://fastapi.tiangolo.com/fastapi-people/#sponsors" class="external-link" target="_blank">Overige sponsoren</a>

## Meningen

"_[...] Ik gebruik **FastAPI** heel vaak tegenwoordig. [...] Ik ben van plan om het te gebruiken voor alle **ML-services van mijn team bij Microsoft**. Sommige van deze worden ge√Øntegreerd in het kernproduct van **Windows** en sommige **Office**-producten._"

<div style="text-align: right; margin-right: 10%;">Kabir Khan - <strong>Microsoft</strong> <a href="https://github.com/fastapi/fastapi/pull/26" target="_blank"><small>(ref)</small></a></div>

---

"_We hebben de **FastAPI** library gebruikt om een **REST** server te maken die bevraagd kan worden om **voorspellingen** te maken. [voor Ludwig]_"

<div style="text-align: right; margin-right: 10%;">Piero Molino, Yaroslav Dudin en Sai Sumanth Miryala - <strong>Uber</strong> <a href="https://eng.uber.com/ludwig-v0-2/" target="_blank"><small>(ref)</small></a></div>

---

"_**Netflix** is verheugd om een open-source release aan te kondigen van ons **crisismanagement**-orkestratieframework: **Dispatch**! [gebouwd met **FastAPI**]_"

<div style="text-align: right; margin-right: 10%;">Kevin Glisson, Marc Vilanova, Forest Monsen - <strong>Netflix</strong> <a href="https://netflixtechblog.com/introducing-dispatch-da4b8a2a8072" target="_blank"><small>(ref)</small></a></div>

---

"_Ik ben super enthousiast over **FastAPI**. Het is zo leuk!_"

<div style="text-align: right; margin-right: 10%;">Brian Okken - <strong><a href="https://pythonbytes.fm/episodes/show/123/time-to-right-the-py-wrongs?time_in_sec=855" target="_blank">Python Bytes</a> podcast presentator</strong> <a href="https://twitter.com/brianokken/status/1112220079972728832" target="_blank"><small>(ref)</small></a></div>

---

"_Wat je hebt gebouwd ziet er echt super solide en gepolijst uit. In veel opzichten is het wat ik wilde dat **Hug** kon zijn - het is echt inspirerend om iemand dit te zien bouwen._"

<div style="text-align: right; margin-right: 10%;">Timothy Crosley - <strong><a href="https://github.com/hugapi/hug" target="_blank">Hug</a> creator</strong> <a href="https://news.ycombinator.com/item?id=19455465" target="_blank"><small>(ref)</small></a></div>

---

"Wie ge√Ønteresseerd is in een **modern framework** voor het bouwen van REST API's, bekijkt best eens **FastAPI** [...] Het is snel, gebruiksvriendelijk en gemakkelijk te leren [...]_"

"_We zijn overgestapt naar **FastAPI** voor onze **API's** [...] Het gaat jou vast ook bevallen [...]_"

<div style="text-align: right; margin-right: 10%;">Ines Montani - Matthew Honnibal - <strong><a href="https://explosion.ai" target="_blank">Explosion AI</a> oprichters - <a href="https://spacy.io" target="_blank">spaCy</a> ontwikkelaars</strong> <a href="https://twitter.com/_inesmontani/status/1144173225322143744" target="_blank"><small>(ref)</small></a> - <a href="https://twitter.com/honnibal/status/1144031421859655680" target="_blank"><small>(ref)</small></a></div>

---

"_Wie een Python API wil bouwen voor productie, kan ik ten stelligste **FastAPI** aanraden. Het is **prachtig ontworpen**, **eenvoudig te gebruiken** en **gemakkelijk schaalbaar**, het is een **cruciale component** geworden in onze strategie om API's centraal te zetten, en het vereenvoudigt automatisering en diensten zoals onze Virtual TAC Engineer._"

<div style="text-align: right; margin-right: 10%;">Deon Pillsbury - <strong>Cisco</strong> <a href="https://www.linkedin.com/posts/deonpillsbury_cisco-cx-python-activity-6963242628536487936-trAp/" target="_blank"><small>(ref)</small></a></div>

---

## **Typer**, de FastAPI van CLIs

<a href="https://typer.tiangolo.com" target="_blank"><img src="https://typer.tiangolo.com/img/logo-margin/logo-margin-vector.svg" style="width: 20%;"></a>

Als je een <abbr title="Command Line Interface">CLI</abbr>-app bouwt die in de terminal moet worden gebruikt in plaats van een web-API, gebruik dan <a href="https://typer.tiangolo.com/ " class="external-link" target="_blank">**Typer**</a>.

**Typer** is het kleine broertje van FastAPI. En het is bedoeld als de **FastAPI van CLI's**. Ô∏è

## Vereisten

FastAPI staat op de schouders van reuzen:

* <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> voor de webonderdelen.
* <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> voor de datadelen.

## Installatie

<div class="termy">

```console
$ pip install "fastapi[standard]"

---> 100%
```

</div>

**Opmerking**: Zet `"fastapi[standard]"` tussen aanhalingstekens om ervoor te zorgen dat het werkt in alle terminals.

## Voorbeeld

### Cre√´er het

* Maak het bestand `main.py` aan met daarin:

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

<details markdown="1">
<summary>Of maak gebruik van <code>async def</code>...</summary>

Als je code gebruik maakt van `async` / `await`, gebruik dan `async def`:

```Python hl_lines="9  14"
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
async def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

**Opmerking**:

Als je het niet weet, kijk dan in het gedeelte _"Heb je haast?"_ over <a href="https://fastapi.tiangolo.com/async/#in-a-hurry" target="_blank">`async` en `await` in de documentatie</a>.

</details>

### Voer het uit

Run de server met:

<div class="termy">

```console
$ fastapi dev main.py

 ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ FastAPI CLI - Development mode ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ
 ‚îÇ                                                     ‚îÇ
 ‚îÇ  Serving at: http://127.0.0.1:8000                  ‚îÇ
 ‚îÇ                                                     ‚îÇ
 ‚îÇ  API docs: http://127.0.0.1:8000/docs               ‚îÇ
 ‚îÇ                                                     ‚îÇ
 ‚îÇ  Running in development mode, for production use:   ‚îÇ
 ‚îÇ                                                     ‚îÇ
 ‚îÇ  fastapi run                                        ‚îÇ
 ‚îÇ                                                     ‚îÇ
 ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ

INFO:     Will watch for changes in these directories: ['/home/user/code/awesomeapp']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [2248755] using WatchFiles
INFO:     Started server process [2248757]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

</div>

<details markdown="1">
<summary>Over het commando <code>fastapi dev main.py</code>...</summary>

Het commando `fastapi dev` leest het `main.py` bestand, detecteert de **FastAPI** app, en start een server met <a href="https://www.uvicorn.org" class="external-link" target="_blank">Uvicorn</a>.

Standaard zal dit commando `fastapi dev` starten met "auto-reload" geactiveerd voor ontwikkeling op het lokale systeem.

Je kan hier meer over lezen in de <a href="https://fastapi.tiangolo.com/fastapi-cli/" target="_blank">FastAPI CLI documentatie</a>.

</details>

### Controleer het

Open je browser op <a href="http://127.0.0.1:8000/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1:8000/items/5?q=somequery</a>.

Je zult een JSON response zien:

```JSON
{"item_id": 5, "q": "somequery"}
```

Je hebt een API gemaakt die:

* HTTP verzoeken kan ontvangen op de _paden_ `/` en `/items/{item_id}`.
* Beide _paden_ hebben `GET` <em>operaties</em> (ook bekend als HTTP _methoden_).
* Het _pad_ `/items/{item_id}` heeft een _pad parameter_ `item_id` dat een `int` moet zijn.
* Het _pad_ `/items/{item_id}` heeft een optionele `str` _query parameter_ `q`.

### Interactieve API documentatie

Ga naar <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

Je ziet de automatische interactieve API documentatie (verstrekt door <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### Alternatieve API documentatie

Ga vervolgens naar <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

Je ziet de automatische interactieve API documentatie (verstrekt door <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## Voorbeeld upgrade

Pas nu het bestand `main.py` aan om de body van een `PUT` request te ontvangen.

Dankzij Pydantic kunnen we de body declareren met standaard Python types.

```Python hl_lines="4  9-12  25-27"
from typing import Union

from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()


class Item(BaseModel):
    name: str
    price: float
    is_offer: Union[bool, None] = None


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}


@app.put("/items/{item_id}")
def update_item(item_id: int, item: Item):
    return {"item_name": item.name, "item_id": item_id}
```

De `fastapi dev` server zou automatisch moeten herladen.

### Interactieve API documentatie upgrade

Ga nu naar <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

* De interactieve API-documentatie wordt automatisch bijgewerkt, inclusief de nieuwe body:

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* Klik op de knop "Try it out", hiermee kan je de parameters invullen en direct met de API interacteren:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-04-swagger-03.png)

* Klik vervolgens op de knop "Execute", de gebruikersinterface zal communiceren met jouw API, de parameters verzenden, de resultaten ophalen en deze op het scherm tonen:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-05-swagger-04.png)

### Alternatieve API documentatie upgrade

Ga vervolgens naar <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

* De alternatieve documentatie zal ook de nieuwe queryparameter en body weergeven:

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### Samenvatting

Samengevat declareer je **eenmalig** de types van parameters, body, etc. als functieparameters.

Dat doe je met standaard moderne Python types.

Je hoeft geen nieuwe syntax te leren, de methods of klassen van een specifieke bibliotheek, etc.

Gewoon standaard **Python**.

Bijvoorbeeld, voor een `int`:

```Python
item_id: int
```

of voor een complexer `Item` model:

```Python
item: Item
```

...en met die ene verklaring krijg je:

* Editor ondersteuning, inclusief:
    * Code aanvulling.
    * Type validatie.
* Validatie van data:
    * Automatische en duidelijke foutboodschappen wanneer de data ongeldig is.
    * Validatie zelfs voor diep geneste JSON objecten.
* <abbr title="ook bekend als: serialisatie, parsing, marshalling">Conversie</abbr> van invoergegevens: afkomstig van het netwerk naar Python-data en -types. Zoals:
    * JSON.
    * Pad parameters.
    * Query parameters.
    * Cookies.
    * Headers.
    * Formulieren.
    * Bestanden.
* <abbr title="ook bekend als: serialisatie, parsing, marshalling">Conversie</abbr> van uitvoergegevens: converstie van Python-data en -types naar netwerkgegevens (zoals JSON):
    * Converteer Python types (`str`, `int`, `float`, `bool`, `list`, etc).
    * `datetime` objecten.
    * `UUID` objecten.
    * Database modellen.
    * ...en nog veel meer.
* Automatische interactieve API-documentatie, inclusief 2 alternatieve gebruikersinterfaces:
    * Swagger UI.
    * ReDoc.

---

Terugkomend op het vorige code voorbeeld, **FastAPI** zal:

* Valideren dat er een `item_id` bestaat in het pad voor `GET` en `PUT` verzoeken.
* Valideren dat het `item_id` van het type `int` is voor `GET` en `PUT` verzoeken.
    * Wanneer dat niet het geval is, krijgt de cli√´nt een nuttige, duidelijke foutmelding.
* Controleren of er een optionele query parameter is met de naam `q` (zoals in `http://127.0.0.1:8000/items/foo?q=somequery`) voor `GET` verzoeken.
    * Aangezien de `q` parameter werd gedeclareerd met `= None`, is deze optioneel.
    * Zonder de `None` declaratie zou deze verplicht zijn (net als bij de body in het geval met `PUT`).
* Voor `PUT` verzoeken naar `/items/{item_id}`, lees de body als JSON:
    * Controleer of het een verplicht attribuut `naam` heeft en dat dat een `str` is.
    * Controleer of het een verplicht attribuut `price` heeft en dat dat een`float` is.
    * Controleer of het een optioneel attribuut `is_offer` heeft, dat een `bool` is wanneer het aanwezig is.
    * Dit alles werkt ook voor diep geneste JSON objecten.
* Converteer automatisch van en naar JSON.
* Documenteer alles met OpenAPI, dat gebruikt kan worden door:
    * Interactieve documentatiesystemen.
    * Automatische client code generatie systemen, voor vele talen.
* Biedt 2 interactieve documentatie-webinterfaces aan.

---

Dit was nog maar een snel overzicht, maar je zou nu toch al een idee moeten hebben over hoe het allemaal werkt.

Probeer deze regel te veranderen:

```Python
    return {"item_name": item.name, "item_id": item_id}
```

...van:

```Python
        ... "item_name": item.name ...
```

...naar:

```Python
        ... "item_price": item.price ...
```

...en zie hoe je editor de attributen automatisch invult en hun types herkent:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

Voor een vollediger voorbeeld met meer mogelijkheden, zie de <a href="https://fastapi.tiangolo.com/tutorial/">Tutorial - Gebruikershandleiding</a>.

**Spoiler alert**: de tutorial - gebruikershandleiding bevat:

* Declaratie van **parameters** op andere plaatsen zoals: **headers**, **cookies**, **formuliervelden** en **bestanden**.
* Hoe stel je **validatie restricties** in zoals `maximum_length` of een `regex`.
* Een zeer krachtig en eenvoudig te gebruiken **<abbr title="ook bekend als componenten, middelen, verstrekkers, diensten, injectables">Dependency Injection</abbr>** systeem.
* Beveiliging en authenticatie, inclusief ondersteuning voor **OAuth2** met **JWT-tokens** en **HTTP Basic** auth.
* Meer geavanceerde (maar even eenvoudige) technieken voor het declareren van **diep geneste JSON modellen** (dankzij Pydantic).
* **GraphQL** integratie met <a href="https://strawberry.rocks" class="external-link" target="_blank">Strawberry</a> en andere packages.
* Veel extra functies (dankzij Starlette) zoals:
    * **WebSockets**
    * uiterst gemakkelijke tests gebaseerd op HTTPX en `pytest`
    * **CORS**
    * **Cookie Sessions**
    * ...en meer.

## Prestaties

Onafhankelijke TechEmpower benchmarks tonen **FastAPI** applicaties draaiend onder Uvicorn aan als <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">een van de snelste Python frameworks beschikbaar</a>, alleen onder Starlette en Uvicorn zelf (intern gebruikt door FastAPI). (*)

Zie de sectie <a href="https://fastapi.tiangolo.com/benchmarks/" class="internal-link" target="_blank">Benchmarks</a> om hier meer over te lezen.

## Afhankelijkheden

FastAPI maakt gebruik van Pydantic en Starlette.

### `standard` Afhankelijkheden

Wanneer je FastAPI installeert met `pip install "fastapi[standard]"`, worden de volgende `standard` optionele afhankelijkheden ge√Ønstalleerd:

Gebruikt door Pydantic:

* <a href="https://github.com/JoshData/python-email-validator" target="_blank"><code>email_validator</code></a> - voor email validatie.

Gebruikt door Starlette:

* <a href="https://www.python-httpx.org" target="_blank"><code>httpx</code></a> - Vereist indien je de `TestClient` wil gebruiken.
* <a href="https://jinja.palletsprojects.com" target="_blank"><code>jinja2</code></a> - Vereist als je de standaard templateconfiguratie wil gebruiken.
* <a href="https://github.com/Kludex/python-multipart" target="_blank"><code>python-multipart</code></a> - Vereist indien je <abbr title="het omzetten van de string die uit een HTTP verzoek komt in Python data">"parsen"</abbr> van formulieren wil ondersteunen met `requests.form()`.

Gebruikt door FastAPI / Starlette:

* <a href="https://www.uvicorn.org" target="_blank"><code>uvicorn</code></a> - voor de server die jouw applicatie laadt en bedient.
* `fastapi-cli` - om het `fastapi` commando te voorzien.

### Zonder `standard` Afhankelijkheden

Indien je de optionele `standard` afhankelijkheden niet wenst te installeren, kan je installeren met `pip install fastapi` in plaats van `pip install "fastapi[standard]"`.

### Bijkomende Optionele Afhankelijkheden

Er zijn nog een aantal bijkomende afhankelijkheden die je eventueel kan installeren.

Bijkomende optionele afhankelijkheden voor Pydantic:

* <a href="https://docs.pydantic.dev/latest/usage/pydantic_settings/" target="_blank"><code>pydantic-settings</code></a> - voor het beheren van settings.
* <a href="https://docs.pydantic.dev/latest/usage/types/extra_types/extra_types/" target="_blank"><code>pydantic-extra-types</code></a> - voor extra data types die gebruikt kunnen worden met Pydantic.

Bijkomende optionele afhankelijkheden voor FastAPI:

* <a href="https://github.com/ijl/orjson" target="_blank"><code>orjson</code></a> - Vereist indien je `ORJSONResponse` wil gebruiken.
* <a href="https://github.com/esnme/ultrajson" target="_blank"><code>ujson</code></a> - Vereist indien je `UJSONResponse` wil gebruiken.

## Licentie

Dit project is gelicenseerd onder de voorwaarden van de MIT licentie.


================================================
File: /docs/nl/docs/python-types.md
================================================
# Introductie tot Python Types

Python biedt ondersteuning voor optionele "type hints" (ook wel "type annotaties" genoemd).

Deze **"type hints"** of annotaties zijn een speciale syntax waarmee het <abbr title="bijvoorbeeld: str, int, float, bool">type</abbr> van een variabele kan worden gedeclareerd.

Door types voor je variabelen te declareren, kunnen editors en hulpmiddelen je beter ondersteunen.

Dit is slechts een **korte tutorial/opfrisser** over Python type hints. Het behandelt enkel het minimum dat nodig is om ze te gebruiken met **FastAPI**... en dat is relatief weinig.

**FastAPI** is helemaal gebaseerd op deze type hints, ze geven veel voordelen.

Maar zelfs als je **FastAPI** nooit gebruikt, heb je er baat bij om er iets over te leren.

/// note

Als je een Python expert bent en alles al weet over type hints, sla dan dit hoofdstuk over.

///

## Motivatie

Laten we beginnen met een eenvoudig voorbeeld:

{* ../../docs_src/python_types/tutorial001.py *}


Het aanroepen van dit programma leidt tot het volgende resultaat:

```
John Doe
```

De functie voert het volgende uit:

* Neem een `first_name` en een `last_name`
* Converteer de eerste letter van elk naar een hoofdletter met `title()`.
``
* <abbr title="Voegt ze samen, als √©√©n. Met de inhoud van de een na de ander.">Voeg samen</abbr> met een spatie in het midden.

{* ../../docs_src/python_types/tutorial001.py hl[2] *}


### Bewerk het

Dit is een heel eenvoudig programma.

Maar stel je nu voor dat je het vanaf nul zou moeten maken.

Op een gegeven moment zou je aan de definitie van de functie zijn begonnen, je had de parameters klaar...

Maar dan moet je ‚Äúdie methode die de eerste letter naar hoofdletters converteert‚Äù aanroepen.

Was het `upper`? Was het `uppercase`? `first_uppercase`? `capitalize`?

Dan roep je de hulp in van je oude programmeursvriend, (automatische) code aanvulling in je editor.

Je typt de eerste parameter van de functie, `first_name`, dan een punt (`.`) en drukt dan op `Ctrl+Spatie` om de aanvulling te activeren.

Maar helaas krijg je niets bruikbaars:

<img src="/img/python-types/image01.png">

### Types toevoegen

Laten we een enkele regel uit de vorige versie aanpassen.

We zullen precies dit fragment, de parameters van de functie, wijzigen van:

```Python
    first_name, last_name
```

naar:

```Python
    first_name: str, last_name: str
```

Dat is alles.

Dat zijn de "type hints":

{* ../../docs_src/python_types/tutorial002.py hl[1] *}


Dit is niet hetzelfde als het declareren van standaardwaarden zoals bij:

```Python
    first_name="john", last_name="doe"
```

Het is iets anders.

We gebruiken dubbele punten (`:`), geen gelijkheidstekens (`=`).

Het toevoegen van type hints verandert normaal gesproken niet wat er gebeurt in je programma t.o.v. wat er zonder type hints zou gebeuren.

Maar stel je voor dat je weer bezig bent met het maken van een functie, maar deze keer met type hints.

Op hetzelfde moment probeer je de automatische aanvulling te activeren met `Ctrl+Spatie` en je ziet:

<img src="/img/python-types/image02.png">

Nu kun je de opties bekijken en er doorheen scrollen totdat je de optie vindt die ‚Äúeen belletje doet rinkelen‚Äù:

<img src="/img/python-types/image03.png">

### Meer motivatie

Bekijk deze functie, deze heeft al type hints:

{* ../../docs_src/python_types/tutorial003.py hl[1] *}


Omdat de editor de types van de variabelen kent, krijgt u niet alleen aanvulling, maar ook controles op fouten:

<img src="/img/python-types/image04.png">

Nu weet je hoe je het moet oplossen, converteer `age` naar een string met `str(age)`:

{* ../../docs_src/python_types/tutorial004.py hl[2] *}


## Types declareren

Je hebt net de belangrijkste plek om type hints te declareren gezien. Namelijk als functieparameters.

Dit is ook de belangrijkste plek waar je ze gebruikt met **FastAPI**.

### Eenvoudige types

Je kunt alle standaard Python types declareren, niet alleen `str`.

Je kunt bijvoorbeeld het volgende gebruiken:

* `int`
* `float`
* `bool`
* `bytes`

{* ../../docs_src/python_types/tutorial005.py hl[1] *}


### Generieke types met typeparameters

Er zijn enkele datastructuren die andere waarden kunnen bevatten, zoals `dict`, `list`, `set` en `tuple` en waar ook de interne waarden hun eigen type kunnen hebben.

Deze types die interne types hebben worden ‚Äú**generieke**‚Äù types genoemd. Het is mogelijk om ze te declareren, zelfs met hun interne types.

Om deze types en de interne types te declareren, kun je de standaard Python module `typing` gebruiken. Deze module is speciaal gemaakt om deze type hints te ondersteunen.

#### Nieuwere versies van Python

De syntax met `typing` is **verenigbaar** met alle versies, van Python 3.6 tot aan de nieuwste, inclusief Python 3.9, Python 3.10, enz.

Naarmate Python zich ontwikkelt, worden **nieuwere versies**, met verbeterde ondersteuning voor deze type annotaties, beschikbaar. In veel gevallen hoef je niet eens de `typing` module te importeren en te gebruiken om de type annotaties te declareren.

Als je een recentere versie van Python kunt kiezen voor je project, kun je profiteren van die extra eenvoud.

In alle documentatie staan voorbeelden die compatibel zijn met elke versie van Python (als er een verschil is).

Bijvoorbeeld ‚Äú**Python 3.6+**‚Äù betekent dat het compatibel is met Python 3.6 of hoger (inclusief 3.7, 3.8, 3.9, 3.10, etc). En ‚Äú**Python 3.9+**‚Äù betekent dat het compatibel is met Python 3.9 of hoger (inclusief 3.10, etc).

Als je de **laatste versies van Python** kunt gebruiken, gebruik dan de voorbeelden voor de laatste versie, die hebben de **beste en eenvoudigste syntax**, bijvoorbeeld ‚Äú**Python 3.10+**‚Äù.

#### List

Laten we bijvoorbeeld een variabele defini√´ren als een `list` van `str`.

//// tab | Python 3.9+

Declareer de variabele met dezelfde dubbele punt (`:`) syntax.

Als type, vul `list` in.

Doordat de list een type is dat enkele interne types bevat, zet je ze tussen vierkante haakjes:

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial006_py39.py!}
```

////

//// tab | Python 3.8+

Van `typing`, importeer `List` (met een hoofdletter `L`):

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial006.py!}
```

Declareer de variabele met dezelfde dubbele punt (`:`) syntax.

Zet als type de `List` die je hebt ge√Ømporteerd uit `typing`.

Doordat de list een type is dat enkele interne types bevat, zet je ze tussen vierkante haakjes:

```Python hl_lines="4"
{!> ../../docs_src/python_types/tutorial006.py!}
```

////

/// info

De interne types tussen vierkante haakjes worden ‚Äútypeparameters‚Äù genoemd.

In dit geval is `str` de typeparameter die wordt doorgegeven aan `List` (of `list` in Python 3.9 en hoger).

///

Dat betekent: ‚Äúde variabele `items` is een `list`, en elk van de items in deze list is een `str`‚Äù.

/// tip

Als je Python 3.9 of hoger gebruikt, hoef je `List` niet te importeren uit `typing`, je kunt in plaats daarvan hetzelfde reguliere `list` type gebruiken.

///

Door dat te doen, kan je editor ondersteuning bieden, zelfs tijdens het verwerken van items uit de list:

<img src="/img/python-types/image05.png">

Zonder types is dat bijna onmogelijk om te bereiken.

Merk op dat de variabele `item` een van de elementen is in de lijst `items`.

Toch weet de editor dat het een `str` is, en biedt daar vervolgens ondersteuning voor aan.

#### Tuple en Set

Je kunt hetzelfde doen om `tuple`s en `set`s te declareren:

//// tab | Python 3.9+

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial007_py39.py!}
```

////

//// tab | Python 3.8+

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial007.py!}
```

////

Dit betekent:

* De variabele `items_t` is een `tuple` met 3 items, een `int`, nog een `int`, en een `str`.
* De variabele `items_s` is een `set`, en elk van de items is van het type `bytes`.

#### Dict

Om een `dict` te defini√´ren, geef je 2 typeparameters door, gescheiden door komma's.

De eerste typeparameter is voor de sleutels (keys) van de `dict`.

De tweede typeparameter is voor de waarden  (values) van het `dict`:

//// tab | Python 3.9+

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial008_py39.py!}
```

////

//// tab | Python 3.8+

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial008.py!}
```

////

Dit betekent:

* De variabele `prices` is een `dict`:
    * De sleutels van dit `dict` zijn van het type `str` (bijvoorbeeld de naam van elk item).
    * De waarden van dit `dict` zijn van het type `float` (bijvoorbeeld de prijs van elk item).

#### Union

Je kunt een variable declareren die van **verschillende types** kan zijn, bijvoorbeeld een `int` of een `str`.

In Python 3.6 en hoger (inclusief Python 3.10) kun je het `Union`-type van `typing` gebruiken en de mogelijke types die je wilt accepteren, tussen de vierkante haakjes zetten.

In Python 3.10 is er ook een **nieuwe syntax** waarin je de mogelijke types kunt scheiden door een <abbr title='ook wel "bitwise of operator" genoemd, maar die betekenis is hier niet relevant'>verticale balk (`|`)</abbr>.

//// tab | Python 3.10+

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial008b_py310.py!}
```

////

//// tab | Python 3.8+

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial008b.py!}
```

////

In beide gevallen betekent dit dat `item` een `int` of een `str` kan zijn.

#### Mogelijk `None`

Je kunt declareren dat een waarde een type kan hebben, zoals `str`, maar dat het ook `None` kan zijn.

In Python 3.6 en hoger (inclusief Python 3.10) kun je het declareren door `Optional` te importeren en te gebruiken vanuit de `typing`-module.

```Python hl_lines="1  4"
{!../../docs_src/python_types/tutorial009.py!}
```

Door `Optional[str]` te gebruiken in plaats van alleen `str`, kan de editor je helpen fouten te detecteren waarbij je ervan uit zou kunnen gaan dat een waarde altijd een `str` is, terwijl het in werkelijkheid ook `None` zou kunnen zijn.

`Optional[EenType]` is eigenlijk een snelkoppeling voor `Union[EenType, None]`, ze zijn equivalent.

Dit betekent ook dat je in Python 3.10 `EenType | None` kunt gebruiken:

//// tab | Python 3.10+

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial009_py310.py!}
```

////

//// tab | Python 3.8+

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial009.py!}
```

////

//// tab | Python 3.8+ alternative

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial009b.py!}
```

////

#### Gebruik van `Union` of `Optional`

Als je een Python versie lager dan 3.10 gebruikt, is dit een tip vanuit mijn **subjectieve** standpunt:

* üö® Vermijd het gebruik van `Optional[EenType]`.
* Gebruik in plaats daarvan **`Union[EenType, None]`** ‚ú®.

Beide zijn gelijkwaardig en onderliggend zijn ze hetzelfde, maar ik zou `Union` aanraden in plaats van `Optional` omdat het woord ‚Äú**optional**‚Äù lijkt te impliceren dat de waarde optioneel is, en het eigenlijk betekent ‚Äúhet kan `None` zijn‚Äù, zelfs als het niet optioneel is en nog steeds vereist is.

Ik denk dat `Union[SomeType, None]` explicieter is over wat het betekent.

Het gaat alleen om de woorden en naamgeving. Maar die naamgeving kan invloed hebben op hoe jij en je teamgenoten over de code denken.

Laten we als voorbeeld deze functie nemen:

{* ../../docs_src/python_types/tutorial009c.py hl[1,4] *}


De parameter `name` is gedefinieerd als `Optional[str]`, maar is **niet optioneel**, je kunt de functie niet aanroepen zonder de parameter:

```Python
say_hi()  # Oh, nee, dit geeft een foutmelding! üò±
```

De `name` parameter is **nog steeds vereist** (niet *optioneel*) omdat het geen standaardwaarde heeft. Toch accepteert `name` `None` als waarde:

```Python
say_hi(name=None)  # Dit werkt, None is geldig üéâ
```

Het goede nieuws is dat als je eenmaal Python 3.10 gebruikt, je je daar geen zorgen meer over hoeft te maken, omdat je dan gewoon `|` kunt gebruiken om unions van types te defini√´ren:

{* ../../docs_src/python_types/tutorial009c_py310.py hl[1,4] *}


Dan hoef je je geen zorgen te maken over namen als `Optional` en `Union`. üòé

#### Generieke typen

De types die typeparameters in vierkante haakjes gebruiken, worden **Generieke types** of **Generics** genoemd, bijvoorbeeld:

//// tab | Python 3.10+

Je kunt dezelfde ingebouwde types gebruiken als generics (met vierkante haakjes en types erin):

* `list`
* `tuple`
* `set`
* `dict`

Hetzelfde als bij Python 3.8, uit de `typing`-module:

* `Union`
* `Optional` (hetzelfde als bij Python 3.8)
* ...en anderen.

In Python 3.10 kun je , als alternatief voor de generieke `Union` en `Optional`, de <abbr title='ook wel "bitwise or operator" genoemd, maar die betekenis is hier niet relevant'>verticale lijn (`|`)</abbr> gebruiken om unions van typen te voorzien, dat is veel beter en eenvoudiger.

////

//// tab | Python 3.9+

Je kunt dezelfde ingebouwde types gebruiken als generieke types (met vierkante haakjes en types erin):

* `list`
* `tuple`
* `set`
* `dict`

En hetzelfde als met Python 3.8, vanuit de `typing`-module:

* `Union`
* `Optional`
* ...en anderen.

////

//// tab | Python 3.8+

* `List`
* `Tuple`
* `Set`
* `Dict`
* `Union`
* `Optional`
* ...en anderen.

////

### Klassen als types

Je kunt een klasse ook declareren als het type van een variabele.

Stel dat je een klasse `Person` hebt, met een naam:

{* ../../docs_src/python_types/tutorial010.py hl[1:3] *}


Vervolgens kun je een variabele van het type `Persoon` declareren:

{* ../../docs_src/python_types/tutorial010.py hl[6] *}


Dan krijg je ook nog eens volledige editorondersteuning:

<img src="/img/python-types/image06.png">

Merk op dat dit betekent dat "`one_person` een **instantie** is van de klasse `Person`".

Dit betekent niet dat `one_person` de **klasse** is met de naam `Person`.

## Pydantic modellen

<a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> is een Python-pakket voor het uitvoeren van datavalidatie.

Je declareert de "vorm" van de data als klassen met attributen.

Elk attribuut heeft een type.

Vervolgens maak je een instantie van die klasse met een aantal waarden en het valideert de waarden, converteert ze naar het juiste type (als dat het geval is) en geeft je een object met alle data terug.

Daarnaast krijg je volledige editorondersteuning met dat resulterende object.

Een voorbeeld uit de offici√´le Pydantic-documentatie:

//// tab | Python 3.10+

```Python
{!> ../../docs_src/python_types/tutorial011_py310.py!}
```

////

//// tab | Python 3.9+

```Python
{!> ../../docs_src/python_types/tutorial011_py39.py!}
```

////

//// tab | Python 3.8+

```Python
{!> ../../docs_src/python_types/tutorial011.py!}
```

////

/// info

Om meer te leren over <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic, bekijk de documentatie</a>.

///

**FastAPI** is volledig gebaseerd op Pydantic.

Je zult veel meer van dit alles in de praktijk zien in de [Tutorial - Gebruikershandleiding](tutorial/index.md){.internal-link target=_blank}.

/// tip

Pydantic heeft een speciaal gedrag wanneer je `Optional` of `Union[EenType, None]` gebruikt zonder een standaardwaarde, je kunt er meer over lezen in de Pydantic-documentatie over <a href="https://docs.pydantic.dev/2.3/usage/models/#required-fields" class="external-link" target="_blank">Verplichte optionele velden</a>.

///

## Type Hints met Metadata Annotaties

Python heeft ook een functie waarmee je **extra <abbr title="Data over de data, in dit geval informatie over het type, bijvoorbeeld een beschrijving.">metadata</abbr>** in deze type hints kunt toevoegen met behulp van `Annotated`.

//// tab | Python 3.9+

In Python 3.9 is `Annotated` onderdeel van de standaardpakket, dus je kunt het importeren vanuit `typing`.

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial013_py39.py!}
```

////

//// tab | Python 3.8+

In versies lager dan Python 3.9 importeer je `Annotated` vanuit `typing_extensions`.

Het wordt al ge√Ønstalleerd met **FastAPI**.

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial013.py!}
```

////

Python zelf doet niets met deze `Annotated` en voor editors en andere hulpmiddelen is het type nog steeds een `str`.

Maar je kunt deze ruimte in `Annotated` gebruiken om **FastAPI** te voorzien van extra metadata over hoe je wilt dat je applicatie zich gedraagt.

Het belangrijkste om te onthouden is dat **de eerste *typeparameter*** die je doorgeeft aan `Annotated` het **werkelijke type** is. De rest is gewoon metadata voor andere hulpmiddelen.

Voor nu hoef je alleen te weten dat `Annotated` bestaat en dat het standaard Python is. üòé

Later zul je zien hoe **krachtig** het kan zijn.

/// tip

Het feit dat dit **standaard Python** is, betekent dat je nog steeds de **best mogelijke ontwikkelaarservaring** krijgt in je editor, met de hulpmiddelen die je gebruikt om je code te analyseren en te refactoren, enz. ‚ú®

Daarnaast betekent het ook dat je code zeer verenigbaar zal zijn met veel andere Python-hulpmiddelen en -pakketten. üöÄ

///

## Type hints in **FastAPI**

**FastAPI** maakt gebruik van type hints om verschillende dingen te doen.

Met **FastAPI** declareer je parameters met type hints en krijg je:

* **Editor ondersteuning**.
* **Type checks**.

...en **FastAPI** gebruikt dezelfde declaraties om:

* **Vereisten te defin√Øeren **: van request pad parameters, query parameters, headers, bodies, dependencies, enz.
* **Data te converteren**: van de request naar het vereiste type.
* **Data te valideren**: afkomstig van elke request:
    * **Automatische foutmeldingen** te genereren die naar de client worden geretourneerd wanneer de data ongeldig is.
* De API met OpenAPI te **documenteren**:
    * die vervolgens wordt gebruikt door de automatische interactieve documentatie gebruikersinterfaces.

Dit klinkt misschien allemaal abstract. Maak je geen zorgen. Je ziet dit allemaal in actie in de [Tutorial - Gebruikershandleiding](tutorial/index.md){.internal-link target=_blank}.

Het belangrijkste is dat door standaard Python types te gebruiken, op √©√©n plek (in plaats van meer klassen, decorators, enz. toe te voegen), **FastAPI** een groot deel van het werk voor je doet.

/// info

Als je de hele tutorial al hebt doorgenomen en terug bent gekomen om meer te weten te komen over types, is een goede bron <a href="https://mypy.readthedocs.io/en/latest/cheat_sheet_py3.html" class="external-link" target="_blank">het "cheat sheet" van `mypy`</a>.

///


================================================
File: /docs/pl/mkdocs.yml
================================================
INHERIT: ../en/mkdocs.yml


================================================
File: /docs/pl/docs/features.md
================================================
# Cechy

## Cechy FastAPI

**FastAPI** zapewnia Ci nastƒôpujƒÖce korzy≈õci:

### Oparcie o standardy open

* <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank"><strong>OpenAPI</strong></a> do tworzenia API, w tym deklaracji <abbr title="znane r√≥wnie≈º jako: paths, endpoints, routes">≈õcie≈ºek</abbr> <abbr title="znane r√≥wnie≈º jako metody HTTP, takie jak POST, GET, PUT, DELETE">operacji</abbr>, parametr√≥w, <abbr title="po angielsku: body requests">cia≈Ç zapyta≈Ñ</abbr>, bezpiecze≈Ñstwa, itp.
* Automatyczna dokumentacja modelu danych za pomocƒÖ <a href="https://json-schema.org/" class="external-link" target="_blank"><strong>JSON Schema</strong></a> (poniewa≈º OpenAPI bazuje na JSON Schema).
* Zaprojektowane z my≈õlƒÖ o zgodno≈õci z powy≈ºszymi standardami zamiast dodawania ich obs≈Çugi po fakcie.
* Mo≈ºliwo≈õƒá automatycznego **generowania kodu klienta** w wielu jƒôzykach.

### Automatyczna dokumentacja

Interaktywna dokumentacja i webowe interfejsy do eksploracji API. Z racji tego, ≈ºe framework bazuje na OpenAPI, istnieje wiele opcji, z czego 2 sƒÖ domy≈õlnie do≈ÇƒÖczone.

* <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank"><strong>Swagger UI</strong></a>, z interaktywnym interfejsem - odpytuj i testuj swoje API bezpo≈õrednio z przeglƒÖdarki.

![Swagger UI interakcja](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* Alternatywna dokumentacja API z <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank"><strong>ReDoc</strong></a>.

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### Nowoczesny Python

Wszystko opiera siƒô na standardowych deklaracjach typu **Python 3.8** (dziƒôki Pydantic). Brak nowej sk≈Çadni do uczenia. Po prostu standardowy, wsp√≥≈Çczesny Python.

Je≈õli potrzebujesz szybkiego przypomnienia jak u≈ºywaƒá deklaracji typ√≥w w Pythonie (nawet je≈õli nie u≈ºywasz FastAPI), sprawd≈∫ kr√≥tki samouczek: [Python Types](python-types.md){.internal-link target=_blank}.

Wystarczy, ≈ºe napiszesz standardowe deklaracje typ√≥w Pythona:

```Python
from datetime import date

from pydantic import BaseModel

# Zadeklaruj parametr jako str
# i uzyskaj wsparcie edytora wewnƒÖtrz funkcji
def main(user_id: str):
    return user_id


# Model Pydantic
class User(BaseModel):
    id: int
    name: str
    joined: date
```

A one bƒôdƒÖ mog≈Çy zostaƒá p√≥≈∫niej u≈ºyte w nastƒôpujƒÖcy spos√≥b:

```Python
my_user: User = User(id=3, name="John Doe", joined="2018-07-19")

second_user_data = {
    "id": 4,
    "name": "Mary",
    "joined": "2018-11-30",
}

my_second_user: User = User(**second_user_data)
```

/// info

`**second_user_data` oznacza:

Przeka≈º klucze i warto≈õci s≈Çownika `second_user_data` bezpo≈õrednio jako argumenty klucz-warto≈õƒá, co jest r√≥wnoznaczne z: `User(id=4, name="Mary", joined="2018-11-30")`

///

### Wsparcie edytora

Ca≈Çy framework zosta≈Ç zaprojektowany tak, aby by≈Ç ≈Çatwy i intuicyjny w u≈ºyciu. Wszystkie pomys≈Çy zosta≈Çy przetestowane na wielu edytorach jeszcze przed rozpoczƒôciem procesu tworzenia, aby zapewniƒá najlepsze wra≈ºenia programistyczne.

Ostatnia ankieta <abbr title="coroczna ankieta przeprowadza w ≈õrodowisku programist√≥w jƒôzyka Python">Python developer survey</abbr> jasno wskazuje, ≈ºe <a href="https://www.jetbrains.com/research/python-developers-survey-2017/#tools-and-features" class="external-link" target="_blank">najczƒô≈õciej u≈ºywanƒÖ funkcjonalno≈õciƒÖ jest autouzupe≈Çnianie w edytorze</a>.

Ca≈Ça struktura frameworku **FastAPI** jest na tym oparta. Autouzupe≈Çnianie dzia≈Ça wszƒôdzie.

Rzadko bƒôdziesz musia≈Ç wracaƒá do dokumentacji.

Oto, jak tw√≥j edytor mo≈ºe Ci pom√≥c:

* <a href="https://code.visualstudio.com/" class="external-link" target="_blank">Visual Studio Code</a>:

![wsparcie edytora](https://fastapi.tiangolo.com/img/vscode-completion.png)

* <a href="https://www.jetbrains.com/pycharm/" class="external-link" target="_blank">PyCharm</a>:

![wsparcie edytora](https://fastapi.tiangolo.com/img/pycharm-completion.png)

Otrzymasz uzupe≈Çnienie nawet w miejscach, w kt√≥rych normalnie uzupe≈Çnienia nie ma. Na przyk≈Çad klucz "price" w tre≈õci JSON (kt√≥ry m√≥g≈Ç byƒá zagnie≈ºd≈ºony), kt√≥ry pochodzi z zapytania.

Koniec z wpisywaniem b≈Çƒôdnych nazw kluczy, przechodzeniem tam i z powrotem w dokumentacji lub przewijaniem w g√≥rƒô i w d√≥≈Ç, aby sprawdziƒá, czy w ko≈Ñcu u≈ºy≈Çe≈õ nazwy `username` czy `user_name`.

### Zwiƒôz≈Ço≈õƒá

Wszystko posiada sensowne **domy≈õlne warto≈õci**. Wszƒôdzie znajdziesz opcjonalne konfiguracje. Wszystkie parametry mo≈ºesz dostroiƒá, aby zrobiƒá to co potrzebujesz do zdefiniowania API.

Ale domy≈õlnie wszystko **"po prostu dzia≈Ça"**.

### Walidacja

* Walidacja wiƒôkszo≈õci (lub wszystkich?) **typ√≥w danych** Pythona, w tym:
    * Obiekt√≥w JSON (`dict`).
    * Tablic JSON (`list`) ze zdefiniowanym typem element√≥w.
    * P√≥l tekstowych (`str`) z okre≈õleniem minimalnej i maksymalnej d≈Çugo≈õci.
    * Liczb (`int`, `float`) z warto≈õciami minimalnymi, maksymalnymi, itp.

* Walidacja bardziej egzotycznych typ√≥w danych, takich jak:
    * URL.
    * Email.
    * UUID.
    * ...i inne.

Ca≈Ça walidacja jest obs≈Çugiwana przez ugruntowanƒÖ i solidnƒÖ bibliotekƒô **Pydantic**.

### Bezpiecze≈Ñstwo i uwierzytelnianie

Bezpiecze≈Ñstwo i uwierzytelnianie jest zintegrowane. Bez ≈ºadnych kompromis√≥w z bazami czy modelami danych.

Wszystkie schematy bezpiecze≈Ñstwa zdefiniowane w OpenAPI, w tym:

* Podstawowy protok√≥≈Ç HTTP.
* **OAuth2** (r√≥wnie≈º z **tokenami JWT**). Sprawd≈∫ samouczek [OAuth2 with JWT](tutorial/security/oauth2-jwt.md){.internal-link target=_blank}.
* Klucze API w:
    * Nag≈Ç√≥wkach.
    * Parametrach zapyta≈Ñ.
    * Ciasteczkach, itp.

Plus wszystkie funkcje bezpiecze≈Ñstwa Starlette (w≈ÇƒÖczajƒÖc w to **<abbr title="po angielsku: session cookies">ciasteczka sesyjne</abbr>**).

Wszystko zbudowane jako narzƒôdzia i komponenty wielokrotnego u≈ºytku, kt√≥re mo≈ºna ≈Çatwo zintegrowaƒá z systemami, magazynami oraz bazami danych - relacyjnymi, NoSQL, itp.

### Wstrzykiwanie Zale≈ºno≈õci

FastAPI zawiera niezwykle ≈Çatwy w u≈ºyciu, ale niezwykle potƒô≈ºny system <abbr title='Po angielsku: Dependency Injection. Znane r√≥wnie≈º jako "components", "resources", "services", "providers"'><strong>Wstrzykiwania Zale≈ºno≈õci</strong></abbr>.

* Nawet zale≈ºno≈õci mogƒÖ mieƒá zale≈ºno≈õci, tworzƒÖc hierarchiƒô lub **"graf" zale≈ºno≈õci**.
* Wszystko jest **obs≈Çugiwane automatycznie** przez framework.
* Wszystkie zale≈ºno≈õci mogƒÖ wymagaƒá danych w ≈ºƒÖdaniach oraz rozszerzaƒá ograniczenia i automatycznƒÖ dokumentacjƒô **<abbr title="po angielsku: path operations">operacji na ≈õcie≈ºce</abbr>**.
* **Automatyczna walidacja** parametr√≥w *operacji na ≈õcie≈ºce* zdefiniowanych w zale≈ºno≈õciach.
* Obs≈Çuga z≈Ço≈ºonych system√≥w uwierzytelniania u≈ºytkownik√≥w, **po≈ÇƒÖcze≈Ñ z bazami danych**, itp.
* Bazy danych, front end, itp. **bez kompromis√≥w**, ale wciƒÖ≈º ≈Çatwe do integracji.

### Nieograniczone "wtyczki"

Lub ujmujƒÖc to inaczej - brak potrzeby wtyczek. Importuj i u≈ºywaj kod, kt√≥ry potrzebujesz.

Ka≈ºda integracja zosta≈Ça zaprojektowana tak, aby by≈Ça tak prosta w u≈ºyciu (z zale≈ºno≈õciami), ≈ºe mo≈ºesz utworzyƒá "wtyczkƒô" dla swojej aplikacji w 2 liniach kodu, u≈ºywajƒÖc tej samej struktury i sk≈Çadni, kt√≥re sƒÖ u≈ºywane w *operacjach na ≈õcie≈ºce*.

### Testy

* 100% <abbr title="Ilo≈õƒá kodu, kt√≥ry jest automatycznie testowany">pokrycia kodu testami</abbr>.
* 100% <abbr title="Deklaracje typ√≥w Python - dziƒôki nim tw√≥j edytor i zewnƒôtrzne narzƒôdzia mogƒÖ zapewniƒá Ci lepsze wsparcie ">adnotacji typ√≥w</abbr>.
* U≈ºywany w aplikacjach produkcyjnych.

## Cechy Starlette

**FastAPI** jest w pe≈Çni kompatybilny z (oraz bazuje na) <a href="https://www.starlette.io/" class="external-link" target="_blank"><strong>Starlette</strong></a>. Tak wiƒôc ka≈ºdy dodatkowy kod Starlette, kt√≥ry posiadasz, r√≥wnie≈º bƒôdzie dzia≈Ça≈Ç.

`FastAPI` jest w rzeczywisto≈õci podklasƒÖ `Starlette`, wiƒôc je≈õli ju≈º znasz lub u≈ºywasz Starlette, wiƒôkszo≈õƒá funkcji bƒôdzie dzia≈Çaƒá w ten sam spos√≥b.

Dziƒôki **FastAPI** otrzymujesz wszystkie funkcje **Starlette** (poniewa≈º FastAPI to po prostu Starlette na sterydach):

* Bardzo imponujƒÖca wydajno≈õƒá. Jest to <a href="https://github.com/encode/starlette#performance" class="external-link" target="_blank">jeden z najszybszych dostƒôpnych framework√≥w Pythona, na r√≥wni z **NodeJS** i **Go**</a>.
* Wsparcie dla **WebSocket**.
* <abbr title='Zadania wykonywane w tle, bez zatrzymywania ≈ºƒÖda≈Ñ, w tym samym procesie. Po angielsku: In-process background tasks'>Zadania w tle</abbr>.
* Eventy startup i shutdown.
* Klient testowy zbudowany na bazie biblioteki `requests`.
* **CORS**, GZip, pliki statyczne, streamy.
* Obs≈Çuga **sesji i ciasteczek**.
* 100% pokrycie testami.
* 100% adnotacji typ√≥w.

## Cechy Pydantic

**FastAPI** jest w pe≈Çni kompatybilny z (oraz bazuje na) <a href="https://docs.pydantic.dev/" class="external-link" target="_blank"><strong>Pydantic</strong></a>. Tak wiƒôc ka≈ºdy dodatkowy kod Pydantic, kt√≥ry posiadasz, r√≥wnie≈º bƒôdzie dzia≈Ça≈Ç.

WliczajƒÖc w to zewnƒôtrzne biblioteki, r√≥wnie≈º oparte o Pydantic, takie jak <abbr title="Mapowanie obiektowo-relacyjne. Po angielsku: Object-Relational Mapper">ORM</abbr>, <abbr title="Object-Document Mapper">ODM</abbr> dla baz danych.

Oznacza to, ≈ºe w wielu przypadkach mo≈ºesz przekazaƒá ten sam obiekt, kt√≥ry otrzymasz z ≈ºƒÖdania **bezpo≈õrednio do bazy danych**, poniewa≈º wszystko jest walidowane automatycznie.

Dzia≈Ça to r√≥wnie≈º w drugƒÖ stronƒô, w wielu przypadkach mo≈ºesz po prostu przekazaƒá obiekt otrzymany z bazy danych **bezpo≈õrednio do klienta**.

Dziƒôki **FastAPI** otrzymujesz wszystkie funkcje **Pydantic** (poniewa≈º FastAPI bazuje na Pydantic do obs≈Çugi wszystkich danych):

* **Bez prania m√≥zgu**:
    * Brak nowego mikrojƒôzyka do definiowania schematu, kt√≥rego trzeba siƒô nauczyƒá.
    * Je≈õli znasz adnotacje typ√≥w Pythona to wiesz jak u≈ºywaƒá Pydantic.
* Dobrze wsp√≥≈Çpracuje z Twoim **<abbr title='Skr√≥t od "Integrated Development Environment", podobne do edytora kodu'>IDE</abbr>/<abbr title="Program, kt√≥ry sprawdza Tw√≥j kod pod kƒÖtem b≈Çƒôd√≥w">linterem</abbr>/m√≥zgiem**:
    * Poniewa≈º struktury danych Pydantic to po prostu instancje klas, kt√≥re definiujesz; autouzupe≈Çnianie, linting, mypy i twoja intuicja powinny dzia≈Çaƒá poprawnie z Twoimi zwalidowanymi danymi.
* Walidacja **z≈Ço≈ºonych struktur**:
    * Wykorzystanie hierarchicznych modeli Pydantic, Pythonowego modu≈Çu `typing` zawierajƒÖcego `List`, `Dict`, itp.
    * Walidatory umo≈ºliwiajƒÖ jasne i ≈Çatwe definiowanie, sprawdzanie z≈Ço≈ºonych struktur danych oraz dokumentowanie ich jako JSON Schema.
    * Mo≈ºesz mieƒá g≈Çƒôboko **zagnie≈ºd≈ºone obiekty JSON** i wszystkie je poddaƒá walidacji i adnotowaƒá.
* **Rozszerzalno≈õƒá**:
    * Pydantic umo≈ºliwia zdefiniowanie niestandardowych typ√≥w danych lub rozszerzenie walidacji o metody na modelu, na kt√≥rych u≈ºyty jest dekorator walidatora.
* 100% pokrycie testami.


================================================
File: /docs/pl/docs/help-fastapi.md
================================================
# Pom√≥≈º FastAPI - Uzyskaj pomoc

Czy podoba Ci siƒô **FastAPI**?

Czy chcia≈Çby≈õ pom√≥c FastAPI, jego u≈ºytkownikom i autorowi?

Mo≈ºe napotka≈Çe≈õ na trudno≈õci z **FastAPI** i potrzebujesz pomocy?

Istnieje kilka bardzo ≈Çatwych sposob√≥w, aby pom√≥c (czasami wystarczy jedno lub dwa klikniƒôcia).

Istnieje r√≥wnie≈º kilka sposob√≥w uzyskania pomocy.

## Zapisz siƒô do newslettera

Mo≈ºesz zapisaƒá siƒô do rzadkiego [newslettera o **FastAPI i jego przyjacio≈Çach**](newsletter.md){.internal-link target=_blank}, aby byƒá na bie≈ºƒÖco z:

* Aktualno≈õciami o FastAPI i przyjacio≈Çach üöÄ
* Przewodnikami üìù
* Funkcjami ‚ú®
* Prze≈Çomowymi zmianami üö®
* Poradami i sztuczkami ‚úÖ

## ≈öled≈∫ FastAPI na Twitterze

<a href="https://twitter.com/fastapi" class="external-link" target="_blank">≈öled≈∫ @fastapi na **Twitterze**</a> aby byƒá na bie≈ºƒÖco z najnowszymi wiadomo≈õciami o **FastAPI**. üê¶

## Dodaj gwiazdkƒô **FastAPI** na GitHubie

Mo≈ºesz "dodaƒá gwiazdkƒô" FastAPI na GitHubie (klikajƒÖc przycisk gwiazdki w prawym g√≥rnym rogu): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. ‚≠êÔ∏è

DodajƒÖc gwiazdkƒô, inni u≈ºytkownicy bƒôdƒÖ mogli ≈Çatwiej znale≈∫ƒá projekt i zobaczyƒá, ≈ºe by≈Ç ju≈º przydatny dla innych.

## Obserwuj repozytorium GitHub w poszukiwaniu nowych wyda≈Ñ

Mo≈ºesz "obserwowaƒá" FastAPI na GitHubie (klikajƒÖc przycisk "obserwuj" w prawym g√≥rnym rogu): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. üëÄ

Wybierz opcjƒô "Tylko wydania".

Dziƒôki temu bƒôdziesz otrzymywaƒá powiadomienia (na sw√≥j adres e-mail) za ka≈ºdym razem, gdy pojawi siƒô nowe wydanie (nowa wersja) **FastAPI** z poprawkami b≈Çƒôd√≥w i nowymi funkcjami.

## Skontaktuj siƒô z autorem

Mo≈ºesz skontaktowaƒá siƒô <a href="https://tiangolo.com" class="external-link" target="_blank">ze mnƒÖ (Sebasti√°n Ram√≠rez / `tiangolo`)</a>, autorem.

Mo≈ºesz:

* <a href="https://github.com/tiangolo" class="external-link" target="_blank">≈öledziƒá mnie na **GitHubie**</a>.
    * Zobacz inne projekty open source, kt√≥re stworzy≈Çem, a mogƒÖ byƒá dla Ciebie pomocne.
    * ≈öled≈∫ mnie, aby dostaƒá powiadomienie, gdy utworzƒô nowy projekt open source.
* <a href="https://twitter.com/tiangolo" class="external-link" target="_blank">≈öledziƒá mnie na **Twitterze**</a> lub na <a href="https://fosstodon.org/@tiangolo" class="external-link" target="_blank">Mastodonie</a>.
    * Napisz mi, w jaki spos√≥b korzystasz z FastAPI (uwielbiam o tym czytaƒá).
    * Dowiedz siƒô, gdy og≈Çoszƒô co≈õ nowego lub wypuszczƒô nowe narzƒôdzia.
    * Mo≈ºesz tak≈ºe <a href="https://twitter.com/fastapi" class="external-link" target="_blank">≈õledziƒá @fastapi na Twitterze</a> (to oddzielne konto).
* <a href="https://www.linkedin.com/in/tiangolo/" class="external-link" target="_blank">NawiƒÖ≈º ze mnƒÖ kontakt na **Linkedinie**</a>.
    * Dowiedz siƒô, gdy og≈Çoszƒô co≈õ nowego lub wypuszczƒô nowe narzƒôdzia (chocia≈º czƒô≈õciej korzystam z Twittera ü§∑‚Äç‚ôÇ).
* Czytaj moje posty (lub ≈õled≈∫ mnie) na <a href="https://dev.to/tiangolo" class="external-link" target="_blank">**Dev.to**</a> lub na <a href="https://medium.com/@tiangolo" class="external-link" target="_blank">**Medium**</a>.
    * Czytaj o innych pomys≈Çach, artyku≈Çach i dowiedz siƒô o narzƒôdziach, kt√≥re stworzy≈Çem.
    * ≈öled≈∫ mnie, by wiedzieƒá gdy opublikujƒô co≈õ nowego.

## Napisz tweeta o **FastAPI**

<a href="https://twitter.com/compose/tweet?text=I'm loving @fastapi because... https://github.com/fastapi/fastapi" class="external-link" target="_blank">Napisz tweeta o **FastAPI**</a> i powiedz czemu Ci siƒô podoba. üéâ

Uwielbiam czytaƒá w jaki spos√≥b **FastAPI** jest u≈ºywane, co Ci siƒô w nim podoba≈Ço, w jakim projekcie/firmie go u≈ºywasz itp.

## G≈Çosuj na FastAPI

* <a href="https://www.slant.co/options/34241/~fastapi-review" class="external-link" target="_blank">G≈Çosuj na **FastAPI** w Slant</a>.
* <a href="https://alternativeto.net/software/fastapi/" class="external-link" target="_blank">G≈Çosuj na **FastAPI** w AlternativeTo</a>.
* <a href="https://stackshare.io/pypi-fastapi" class="external-link" target="_blank">Powiedz, ≈ºe u≈ºywasz **FastAPI** na StackShare</a>.

## Pomagaj innym, odpowiadajƒÖc na ich pytania na GitHubie

Mo≈ºesz spr√≥bowaƒá pom√≥c innym, odpowiadajƒÖc w:

* <a href="https://github.com/fastapi/fastapi/discussions/categories/questions?discussions_q=category%3AQuestions+is%3Aunanswered" class="external-link" target="_blank">Dyskusjach na GitHubie</a>
* <a href="https://github.com/fastapi/fastapi/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Aquestion+-label%3Aanswered+" class="external-link" target="_blank">Problemach na GitHubie</a>

W wielu przypadkach mo≈ºesz ju≈º znaƒá odpowied≈∫ na te pytania. ü§ì

Je≈õli pomo≈ºesz wielu ludziom, mo≈ºesz zostaƒá oficjalnym [Ekspertem FastAPI](fastapi-people.md#fastapi-experts){.internal-link target=_blank}. üéâ

Pamiƒôtaj tylko o najwa≈ºniejszym: bƒÖd≈∫ ≈ºyczliwy. Ludzie przychodzƒÖ sfrustrowani i w wielu przypadkach nie zadajƒÖ pyta≈Ñ w najlepszy spos√≥b, ale mimo to postaraj siƒô byƒá dla nich jak najbardziej ≈ºyczliwy. ü§ó

Chcia≈Çbym, by spo≈Çeczno≈õƒá **FastAPI** by≈Ça ≈ºyczliwa i przyjazna. Nie akceptuj prze≈õladowania ani braku szacunku wobec innych. Dbajmy o siebie nawzajem.

---

Oto, jak pom√≥c innym z pytaniami (w dyskusjach lub problemach):

### Zrozum pytanie

* Upewnij siƒô, czy rozumiesz **cel** i przypadek u≈ºycia osoby pytajƒÖcej.

* Nastƒôpnie sprawd≈∫, czy pytanie (wiƒôkszo≈õƒá to pytania) jest **jasne**.

* W wielu przypadkach zadane pytanie dotyczy rozwiƒÖzania wymy≈õlonego przez u≈ºytkownika, ale mo≈ºe istnieƒá **lepsze** rozwiƒÖzanie. Je≈õli dok≈Çadnie zrozumiesz problem i przypadek u≈ºycia, byƒá mo≈ºe bƒôdziesz m√≥g≈Ç zaproponowaƒá lepsze **alternatywne rozwiƒÖzanie**.

* Je≈õli nie rozumiesz pytania, popro≈õ o wiƒôcej **szczeg√≥≈Ç√≥w**.

### Odtw√≥rz problem

W wiƒôkszo≈õci przypadk√≥w problem wynika z **autorskiego kodu** osoby pytajƒÖcej.

Czƒôsto pytajƒÖcy umieszczajƒÖ tylko fragment kodu, niewystarczajƒÖcy do **odtworzenia problemu**.

* Mo≈ºesz poprosiƒá ich o dostarczenie <a href="https://stackoverflow.com/help/minimal-reproducible-example" class="external-link" target="_blank">minimalnego, odtwarzalnego przyk≈Çadu</a>, kt√≥ry mo≈ºesz **skopiowaƒá i wkleiƒá** i uruchomiƒá lokalnie, aby zobaczyƒá ten sam b≈ÇƒÖd lub zachowanie, kt√≥re widzƒÖ, lub lepiej zrozumieƒá ich przypadki u≈ºycia.

* Je≈õli jeste≈õ wyjƒÖtkowo pomocny, mo≈ºesz spr√≥bowaƒá **stworzyƒá taki przyk≈Çad** samodzielnie, opierajƒÖc siƒô tylko na opisie problemu. Miej na uwadze, ≈ºe mo≈ºe to zajƒÖƒá du≈ºo czasu i lepiej mo≈ºe byƒá najpierw poprosiƒá ich o wyja≈õnienie problemu.

### Proponuj rozwiƒÖzania

* Po zrozumieniu pytania mo≈ºesz podaƒá im mo≈ºliwƒÖ **odpowied≈∫**.

* W wielu przypadkach lepiej zrozumieƒá ich **podstawowy problem lub przypadek u≈ºycia**, poniewa≈º mo≈ºe istnieƒá lepszy spos√≥b rozwiƒÖzania ni≈º to, co pr√≥bujƒÖ zrobiƒá.

### Popro≈õ o zamkniƒôcie

Je≈õli odpowiedzƒÖ, jest du≈ºa szansa, ≈ºe rozwiƒÖza≈Çe≈õ ich problem, gratulacje, **jeste≈õ bohaterem**! ü¶∏

* Je≈õli Twoja odpowied≈∫ rozwiƒÖza≈Ça problem, mo≈ºesz poprosiƒá o:

    * W Dyskusjach na GitHubie: oznaczenie komentarza jako **odpowied≈∫**.
    * W Problemach na GitHubie: **zamkniƒôcie** problemu.

## Obserwuj repozytorium na GitHubie

Mo≈ºesz "obserwowaƒá" FastAPI na GitHubie (klikajƒÖc przycisk "obserwuj" w prawym g√≥rnym rogu): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. üëÄ

Je≈õli wybierzesz "Obserwuj" zamiast "Tylko wydania", otrzymasz powiadomienia, gdy kto≈õ utworzy nowy problem lub pytanie. Mo≈ºesz r√≥wnie≈º okre≈õliƒá, ≈ºe chcesz byƒá powiadamiany tylko o nowych problemach, dyskusjach, PR-ach itp.

Nastƒôpnie mo≈ºesz spr√≥bowaƒá pom√≥c rozwiƒÖzaƒá te problemy.

## Zadawaj pytania

Mo≈ºesz <a href="https://github.com/fastapi/fastapi/discussions/new?category=questions" class="external-link" target="_blank">utworzyƒá nowe pytanie</a> w repozytorium na GitHubie, na przyk≈Çad aby:

* Zadaƒá **pytanie** lub zapytaƒá o **problem**.
* Zaproponowaƒá nowƒÖ **funkcjƒô**.

**Uwaga**: je≈õli to zrobisz, poproszƒô Ciƒô r√≥wnie≈º o pomoc innym. üòâ

## PrzeglƒÖdaj Pull Requesty

Mo≈ºesz pom√≥c mi w przeglƒÖdaniu pull request√≥w autorstwa innych os√≥b.

Jak wcze≈õniej wspomnia≈Çem, postaraj siƒô byƒá jak najbardziej ≈ºyczliwy. ü§ó

---

Oto, co warto mieƒá na uwadze podczas oceny pull requestu:

### Zrozum problem

* Najpierw upewnij siƒô, ≈ºe **rozumiesz problem**, kt√≥ry pr√≥buje rozwiƒÖzaƒá pull request. Mo≈ºe byƒá osadzony w wiƒôkszym kontek≈õcie w GitHubowej dyskusji lub problemie.

* Jest te≈º du≈ºa szansa, ≈ºe pull request nie jest konieczny, poniewa≈º problem mo≈ºna rozwiƒÖzaƒá w **inny spos√≥b**. Wtedy mo≈ºesz to zasugerowaƒá lub o to zapytaƒá.

### Nie martw siƒô stylem

* Nie przejmuj siƒô zbytnio rzeczami takimi jak style wiadomo≈õci commit√≥w, przy wcielaniu pull requesta ≈ÇƒÖczƒô commity i modyfikujƒô opis sumarycznego commita rƒôcznie.

* Nie przejmuj siƒô r√≥wnie≈º stylem kodu, automatyczne narzƒôdzia w repozytorium sprawdzajƒÖ to samodzielnie.

A je≈õli istnieje jaka≈õ konkretna potrzeba dotyczƒÖca stylu lub sp√≥jno≈õci, sam poproszƒô o zmiany lub dodam commity z takimi zmianami.

### Sprawd≈∫ kod

* Przeczytaj kod, zastan√≥w siƒô czy ma sens, **uruchom go lokalnie** i potwierd≈∫ czy faktycznie rozwiƒÖzuje problem.

* Nastƒôpnie dodaj **komentarz** z informacjƒÖ o tym, ≈ºe sprawdzi≈Çe≈õ kod, dziƒôki temu bƒôdƒô mia≈Ç pewno≈õƒá, ≈ºe faktycznie go sprawdzi≈Çe≈õ.

/// info

Niestety, nie mogƒô ≈õlepo ufaƒá PR-om, nawet je≈õli majƒÖ kilka zatwierdze≈Ñ.

Kilka razy zdarzy≈Ço siƒô, ≈ºe PR-y mia≈Çy 3, 5 lub wiƒôcej zatwierdze≈Ñ (prawdopodobnie dlatego, ≈ºe opis obiecuje rozwiƒÖzanie wa≈ºnego problemu), ale gdy sam sprawdzi≈Çem danego PR-a, okaza≈Ç siƒô byƒá zbugowany lub nie rozwiƒÖzywa≈Ç problemu, kt√≥ry rzekomo mia≈Ç rozwiƒÖzywaƒá. üòÖ

Dlatego tak wa≈ºne jest, aby≈õ faktycznie przeczyta≈Ç i uruchomi≈Ç kod oraz napisa≈Ç w komentarzu, ≈ºe to zrobi≈Çe≈õ. ü§ì

///

* Je≈õli PR mo≈ºna upro≈õciƒá w jaki≈õ spos√≥b, mo≈ºesz o to poprosiƒá, ale nie ma potrzeby byƒá zbyt wybrednym, mo≈ºe byƒá wiele subiektywnych punkt√≥w widzenia (a ja te≈º bƒôdƒô mia≈Ç sw√≥j üôà), wiƒôc lepiej ≈ºeby≈õ skupi≈Ç siƒô na kluczowych rzeczach.

### Testy

* Pom√≥≈º mi sprawdziƒá, czy PR ma **testy**.

* Sprawd≈∫, czy testy **nie przechodzƒÖ** przed PR. üö®

* Nastƒôpnie sprawd≈∫, czy testy **przechodzƒÖ** po PR. ‚úÖ

* Wiele PR-√≥w nie ma test√≥w, mo≈ºesz **przypomnieƒá** im o dodaniu test√≥w, a nawet **zaproponowaƒá** samemu jakie≈õ testy. To jedna z rzeczy, kt√≥re poch≈ÇaniajƒÖ najwiƒôcej czasu i mo≈ºesz w tym bardzo pom√≥c.

* Nastƒôpnie skomentuj r√≥wnie≈º to, czego spr√≥bowa≈Çe≈õ, wtedy bƒôdƒô wiedzia≈Ç, ≈ºe to sprawdzi≈Çe≈õ. ü§ì

## Utw√≥rz Pull Request

Mo≈ºesz [wnie≈õƒá wk≈Çad](contributing.md){.internal-link target=_blank} do kodu ≈∫r√≥d≈Çowego za pomocƒÖ Pull Requestu, na przyk≈Çad:

* Naprawiƒá liter√≥wkƒô, kt√≥rƒÖ znalaz≈Çe≈õ w dokumentacji.
* Podzieliƒá siƒô artyku≈Çem, filmem lub podcastem, kt√≥ry stworzy≈Çe≈õ lub znalaz≈Çe≈õ na temat FastAPI, <a href="https://github.com/fastapi/fastapi/edit/master/docs/en/data/external_links.yml" class="external-link" target="_blank">edytujƒÖc ten plik</a>.
    * Upewnij siƒô, ≈ºe dodajesz sw√≥j link na poczƒÖtku odpowiedniej sekcji.
* Pom√≥c w [t≈Çumaczeniu dokumentacji](contributing.md#translations){.internal-link target=_blank} na Tw√≥j jƒôzyk.
    * Mo≈ºesz r√≥wnie≈º pom√≥c w weryfikacji t≈Çumacze≈Ñ stworzonych przez innych.
* Zaproponowaƒá nowe sekcje dokumentacji.
* Naprawiƒá istniejƒÖcy problem/b≈ÇƒÖd.
    * Upewnij siƒô, ≈ºe dodajesz testy.
* Dodaƒá nowƒÖ funkcjƒô.
    * Upewnij siƒô, ≈ºe dodajesz testy.
    * Upewnij siƒô, ≈ºe dodajesz dokumentacjƒô, je≈õli jest to istotne.

## Pom√≥≈º w utrzymaniu FastAPI

Pom√≥≈º mi utrzymaƒá **FastAPI**! ü§ì

Jest wiele pracy do zrobienia, a w wiƒôkszo≈õci przypadk√≥w **TY** mo≈ºesz to zrobiƒá.

G≈Ç√≥wne zadania, kt√≥re mo≈ºesz wykonaƒá teraz to:

* [Pom√≥c innym z pytaniami na GitHubie](#pomagaj-innym-odpowiadajac-na-ich-pytania-na-githubie){.internal-link target=_blank} (zobacz sekcjƒô powy≈ºej).
* [Oceniaƒá Pull Requesty](#przegladaj-pull-requesty){.internal-link target=_blank} (zobacz sekcjƒô powy≈ºej).

Te dwie czynno≈õci **zajmujƒÖ najwiƒôcej czasu**. To g≈Ç√≥wna praca zwiƒÖzana z utrzymaniem FastAPI.

Je≈õli mo≈ºesz mi w tym pom√≥c, **pomo≈ºesz mi utrzymaƒá FastAPI** i zapewnisz ≈ºe bƒôdzie **rozwijaƒá siƒô szybciej i lepiej**. üöÄ

## Do≈ÇƒÖcz do czatu

Do≈ÇƒÖcz do üë• <a href="https://discord.gg/VQjSZaeJmf" class="external-link" target="_blank">serwera czatu na Discordzie</a> üë• i spƒôdzaj czas z innymi w spo≈Çeczno≈õci FastAPI.

/// tip | Wskaz√≥wka

Je≈õli masz pytania, zadaj je w <a href="https://github.com/fastapi/fastapi/discussions/new?category=questions" class="external-link" target="_blank">Dyskusjach na GitHubie</a>, jest du≈ºo wiƒôksza szansa, ≈ºe otrzymasz pomoc od [Ekspert√≥w FastAPI](fastapi-people.md#fastapi-experts){.internal-link target=_blank}.

U≈ºywaj czatu tylko do innych og√≥lnych rozm√≥w.

///

### Nie zadawaj pyta≈Ñ na czacie

Miej na uwadze, ≈ºe poniewa≈º czaty pozwalajƒÖ na bardziej "swobodnƒÖ rozmowƒô", ≈Çatwo jest zadawaƒá pytania, kt√≥re sƒÖ zbyt og√≥lne i trudniejsze do odpowiedzi, wiƒôc mo≈ºesz nie otrzymaƒá odpowiedzi.

Na GitHubie szablon poprowadzi Ciƒô do napisania odpowiedniego pytania, dziƒôki czemu ≈Çatwiej uzyskasz dobrƒÖ odpowied≈∫, a nawet rozwiƒÖ≈ºesz problem samodzielnie, zanim zapytasz. Ponadto na GitHubie mogƒô siƒô upewniƒá, ≈ºe zawsze odpowiadam na wszystko, nawet je≈õli zajmuje to trochƒô czasu. Osobi≈õcie nie mogƒô tego zrobiƒá z systemami czatu. üòÖ

Rozm√≥w w systemach czatu nie mo≈ºna tak ≈Çatwo przeszukiwaƒá, jak na GitHubie, wiƒôc pytania i odpowiedzi mogƒÖ zaginƒÖƒá w rozmowie. A tylko te na GitHubie liczƒÖ siƒô do zostania [Ekspertem FastAPI](fastapi-people.md#fastapi-experts){.internal-link target=_blank}, wiƒôc najprawdopodobniej otrzymasz wiƒôcej uwagi na GitHubie.

Z drugiej strony w systemach czatu sƒÖ tysiƒÖce u≈ºytkownik√≥w, wiƒôc jest du≈ºa szansa, ≈ºe znajdziesz tam kogo≈õ do rozmowy, prawie w ka≈ºdej chwili. üòÑ

## Wspieraj autora

Mo≈ºesz r√≥wnie≈º finansowo wesprzeƒá autora (mnie) poprzez <a href="https://github.com/sponsors/tiangolo" class="external-link" target="_blank">sponsoring na GitHubie</a>.

Tam mo≈ºesz postawiƒá mi kawƒô ‚òïÔ∏è aby podziƒôkowaƒá. üòÑ

Mo≈ºesz tak≈ºe zostaƒá srebrnym lub z≈Çotym sponsorem FastAPI. üèÖüéâ

## Wspieraj narzƒôdzia, kt√≥re napƒôdzajƒÖ FastAPI

Jak widzia≈Çe≈õ w dokumentacji, FastAPI stoi na ramionach gigant√≥w, Starlette i Pydantic.

Mo≈ºesz r√≥wnie≈º wesprzeƒá:

* <a href="https://github.com/sponsors/samuelcolvin" class="external-link" target="_blank">Samuel Colvin (Pydantic)</a>
* <a href="https://github.com/sponsors/encode" class="external-link" target="_blank">Encode (Starlette, Uvicorn)</a>

---

Dziƒôkujƒô! üöÄ


================================================
File: /docs/pl/docs/index.md
================================================
# FastAPI

<style>
.md-content .md-typeset h1 { display: none; }
</style>

<p align="center">
  <a href="https://fastapi.tiangolo.com"><img src="https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png" alt="FastAPI"></a>
</p>
<p align="center">
    <em>FastAPI to szybki, prosty w nauce i gotowy do u≈ºycia w produkcji framework</em>
</p>
<p align="center">
<a href="https://github.com/fastapi/fastapi/actions?query=workflow%3ATest" target="_blank">
    <img src="https://github.com/fastapi/fastapi/workflows/Test/badge.svg" alt="Test">
</a>
<a href="https://codecov.io/gh/fastapi/fastapi" target="_blank">
    <img src="https://img.shields.io/codecov/c/github/fastapi/fastapi?color=%2334D058" alt="Coverage">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://img.shields.io/pypi/v/fastapi?color=%2334D058&label=pypi%20package" alt="Package version">
</a>
</p>

---

**Dokumentacja**: <a href="https://fastapi.tiangolo.com" target="_blank">https://fastapi.tiangolo.com</a>

**Kod ≈ºr√≥d≈Çowy**: <a href="https://github.com/fastapi/fastapi" target="_blank">https://github.com/fastapi/fastapi</a>

---

FastAPI to nowoczesny, wydajny framework webowy do budowania API z u≈ºyciem Pythona bazujƒÖcy na standardowym typowaniu Pythona.

Kluczowe cechy:

* **Wydajno≈õƒá**: FastAPI jest bardzo wydajny, na r√≥wni z **NodeJS** oraz **Go** (dziƒôki Starlette i Pydantic). [Jeden z najszybszych dostƒôpnych framework√≥w Pythonowych](#wydajnosc).
* **Szybko≈õƒá kodowania**: Przy≈õpiesza szybko≈õƒá pisania nowych funkcjonalno≈õci o oko≈Ço 200% do 300%. *
* **Mniejsza ilo≈õƒá b≈Çƒôd√≥w**: Zmniejsza ilo≈õƒá ludzkich (dewelopera) b≈Çƒôdy o oko≈Ço 40%. *
* **Intuicyjno≈õƒá**: Wspania≈Çe wsparcie dla edytor√≥w kodu. Dostƒôpne wszƒôdzie <abbr title="znane jako auto-complete, autocompletion, IntelliSense">automatyczne uzupe≈Çnianie</abbr> kodu. Kr√≥tszy czas debugowania.
* **≈Åatwo≈õƒá**: Zaprojektowany by byƒá prosty i ≈Çatwy do nauczenia. Mniej czasu spƒôdzonego na czytanie dokumentacji.
* **Kompaktowo≈õƒá**: Minimalizacja powtarzajƒÖcego siƒô kodu. Wiele funkcjonalno≈õci dla ka≈ºdej deklaracji parametru. Mniej b≈Çƒôd√≥w.
* **Solidno≈õƒá**: Kod gotowy dla ≈õrodowiska produkcyjnego. Wraz z automatycznƒÖ interaktywnƒÖ dokumentacjƒÖ.
* **BazujƒÖcy na standardach**: Oparty na (i w pe≈Çni kompatybilny z) otwartych standardach API: <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> (wcze≈õniej znane jako Swagger) oraz <a href="https://json-schema.org/" class="external-link" target="_blank">JSON Schema</a>.

<small>* oszacowania bazowane na testach wykonanych przez wewnƒôtrzny zesp√≥≈Ç deweloper√≥w, budujƒÖcych aplikacie u≈ºywane na ≈õrodowisku produkcyjnym.</small>

## Sponsorzy

<!-- sponsors -->

{% if sponsors %}
{% for sponsor in sponsors.gold -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor -%}
{%- for sponsor in sponsors.silver -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor %}
{% endif %}

<!-- /sponsors -->

<a href="https://fastapi.tiangolo.com/fastapi-people/#sponsors" class="external-link" target="_blank">Inni sponsorzy</a>

## Opinie

"_[...] I'm using **FastAPI** a ton these days. [...] I'm actually planning to use it for all of my team's **ML services at Microsoft**. Some of them are getting integrated into the core **Windows** product and some **Office** products._"

<div style="text-align: right; margin-right: 10%;">Kabir Khan - <strong>Microsoft</strong> <a href="https://github.com/fastapi/fastapi/pull/26" target="_blank"><small>(ref)</small></a></div>

---

"_We adopted the **FastAPI** library to spawn a **REST** server that can be queried to obtain **predictions**. [for Ludwig]_"

<div style="text-align: right; margin-right: 10%;">Piero Molino, Yaroslav Dudin, and Sai Sumanth Miryala - <strong>Uber</strong> <a href="https://eng.uber.com/ludwig-v0-2/" target="_blank"><small>(ref)</small></a></div>

---

"_**Netflix** is pleased to announce the open-source release of our **crisis management** orchestration framework: **Dispatch**! [built with **FastAPI**]_"

<div style="text-align: right; margin-right: 10%;">Kevin Glisson, Marc Vilanova, Forest Monsen - <strong>Netflix</strong> <a href="https://netflixtechblog.com/introducing-dispatch-da4b8a2a8072" target="_blank"><small>(ref)</small></a></div>

---

"_I‚Äôm over the moon excited about **FastAPI**. It‚Äôs so fun!_"

<div style="text-align: right; margin-right: 10%;">Brian Okken - <strong><a href="https://pythonbytes.fm/episodes/show/123/time-to-right-the-py-wrongs?time_in_sec=855" target="_blank">Python Bytes</a> podcast host</strong> <a href="https://twitter.com/brianokken/status/1112220079972728832" target="_blank"><small>(ref)</small></a></div>

---

"_Honestly, what you've built looks super solid and polished. In many ways, it's what I wanted **Hug** to be - it's really inspiring to see someone build that._"

<div style="text-align: right; margin-right: 10%;">Timothy Crosley - <strong><a href="https://github.com/hugapi/hug" target="_blank">Hug</a> creator</strong> <a href="https://news.ycombinator.com/item?id=19455465" target="_blank"><small>(ref)</small></a></div>

---

"_If you're looking to learn one **modern framework** for building REST APIs, check out **FastAPI** [...] It's fast, easy to use and easy to learn [...]_"

"_We've switched over to **FastAPI** for our **APIs** [...] I think you'll like it [...]_"

<div style="text-align: right; margin-right: 10%;">Ines Montani - Matthew Honnibal - <strong><a href="https://explosion.ai" target="_blank">Explosion AI</a> founders - <a href="https://spacy.io" target="_blank">spaCy</a> creators</strong> <a href="https://twitter.com/_inesmontani/status/1144173225322143744" target="_blank"><small>(ref)</small></a> - <a href="https://twitter.com/honnibal/status/1144031421859655680" target="_blank"><small>(ref)</small></a></div>

---

## **Typer**, FastAPI aplikacji konsolowych

<a href="https://typer.tiangolo.com" target="_blank"><img src="https://typer.tiangolo.com/img/logo-margin/logo-margin-vector.svg" style="width: 20%;"></a>

Je≈ºeli tworzysz aplikacje <abbr title="aplikacja z interfejsem konsolowym">CLI</abbr>, kt√≥ra ma byƒá u≈ºywana w terminalu zamiast API, sprawd≈∫ <a href="https://typer.tiangolo.com/" class="external-link" target="_blank">**Typer**</a>.

**Typer** to m≈Çodsze rodze≈Ñstwo FastAPI. Jego celem jest pozostanie **FastAPI aplikacji konsolowych** . ‚å®Ô∏è üöÄ

## Wymagania

FastAPI oparty jest na:

* <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> dla czƒô≈õci webowej.
* <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> dla czƒô≈õci obs≈ÇugujƒÖcych dane.

## Instalacja

<div class="termy">

```console
$ pip install fastapi

---> 100%
```

</div>

Na serwerze produkcyjnym bƒôdziesz tak≈ºe potrzebowa≈Ç serwera ASGI, np. <a href="https://www.uvicorn.org" class="external-link" target="_blank">Uvicorn</a> lub <a href="https://github.com/pgjones/hypercorn" class="external-link" target="_blank">Hypercorn</a>.

<div class="termy">

```console
$ pip install "uvicorn[standard]"

---> 100%
```

</div>

## Przyk≈Çad

### Stw√≥rz

* Utw√≥rz plik o nazwie `main.py` z:

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

<details markdown="1">
<summary>Albo u≈ºyj <code>async def</code>...</summary>

Je≈ºeli tw√≥j kod korzysta z `async` / `await`, u≈ºyj `async def`:

```Python hl_lines="9  14"
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
async def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

**Przypis**:

Je≈ºeli nie znasz, sprawd≈∫ sekcjƒô _"In a hurry?"_ o <a href="https://fastapi.tiangolo.com/async/#in-a-hurry" target="_blank">`async` i `await` w dokumentacji</a>.

</details>

### Uruchom

Uruchom serwer u≈ºywajƒÖc:

<div class="termy">

```console
$ uvicorn main:app --reload

INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [28720]
INFO:     Started server process [28722]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

</div>

<details markdown="1">
<summary>O komendzie <code>uvicorn main:app --reload</code>...</summary>
Komenda `uvicorn main:app` odnosi siƒô do:

* `main`: plik `main.py` ("modu≈Ç" w Pythonie).
* `app`: obiekt stworzony w `main.py` w lini `app = FastAPI()`.
* `--reload`: spraw by serwer resetowa≈Ç siƒô po ka≈ºdej zmianie w kodzie. U≈ºywaj tego tylko w ≈õrodowisku deweloperskim.

</details>

### Wypr√≥buj

Otw√≥rz link <a href="http://127.0.0.1:8000/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1:8000/items/5?q=somequery</a> w przeglƒÖdarce.

Zobaczysz nastƒôpujƒÖcƒÖ odpowied≈∫ JSON:

```JSON
{"item_id": 5, "q": "somequery"}
```

W≈Ça≈õnie stworzy≈Çe≈õ API kt√≥re:

* Otrzymuje ≈ºƒÖdania HTTP w _≈õcie≈ºce_ `/` i `/items/{item_id}`.
* Obie _≈õcie≈ºki_ u≈ºywajƒÖ <em>operacji</em> `GET` (znane tak≈ºe jako _metody_ HTTP).
* _≈öcie≈ºka_ `/items/{item_id}` ma _parametr ≈õcie≈ºki_ `item_id` kt√≥ry powinien byƒá obiektem typu `int`.
* _≈öcie≈ºka_ `/items/{item_id}` ma opcjonalny _parametr zapytania_ typu `str` o nazwie `q`.

### Interaktywna dokumentacja API

Otw√≥rz teraz stronƒô <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

Zobaczysz automatycznƒÖ interaktywnƒÖ dokumentacjƒô API (dostarczonƒÖ z pomocƒÖ <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### Alternatywna dokumentacja API

Otw√≥rz teraz <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

Zobaczysz alternatywnƒÖ, lecz wciƒÖ≈º automatycznƒÖ dokumentacjƒô (wygenerowanƒÖ z pomocƒÖ <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## Aktualizacja przyk≈Çadu

Zmodyfikuj teraz plik `main.py`, aby otrzmywa≈Ç tre≈õƒá (body) ≈ºƒÖdania `PUT`.

Zadeklaruj tre≈õƒá ≈ºƒÖdania, u≈ºywajƒÖc standardowych typ√≥w w Pythonie dziƒôki Pydantic.

```Python hl_lines="4  9-12  25-27"
from typing import Union

from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()


class Item(BaseModel):
    name: str
    price: float
    is_offer: Union[bool, None] = None


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}


@app.put("/items/{item_id}")
def update_item(item_id: int, item: Item):
    return {"item_name": item.name, "item_id": item_id}
```

Serwer powinien prze≈Çadowaƒá siƒô automatycznie (poniewa≈º doda≈Çe≈õ `--reload` do komendy `uvicorn` powy≈ºej).

### Zaktualizowana interaktywna dokumentacja API

Wejd≈∫ teraz na <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

* Interaktywna dokumentacja API zaktualizuje sie automatycznie, tak≈ºe z nowƒÖ tre≈õciƒÖ ≈ºƒÖdania (body):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* Kliknij przycisk "Try it out" (wypr√≥buj), pozwoli Ci to wype≈Çniƒá parametry i bezpo≈õrednio u≈ºyƒá API:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-04-swagger-03.png)

* Kliknij potem przycisk "Execute" (wykonaj), interfejs u≈ºytkownika po≈ÇƒÖczy siƒô z API, wy≈õle parametry, otrzyma odpowied≈∫ i wy≈õwietli jƒÖ na ekranie:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-05-swagger-04.png)

### Zaktualizowana alternatywna dokumentacja API

Otw√≥rz teraz <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

* Alternatywna dokumentacja r√≥wnie≈º poka≈ºe zaktualizowane parametry i tre≈õƒá ≈ºƒÖdania (body):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### Podsumowanie

PodsumowujƒÖc, musia≈Çe≈õ zadeklarowaƒá typy parametr√≥w, tre≈õci ≈ºƒÖdania (body) itp. tylko **raz**, i sƒÖ one dostƒôpne jako parametry funkcji.

Robisz to tak samo jak ze standardowymi typami w Pythonie.

Nie musisz sie uczyƒá ≈ºadnej nowej sk≈Çadni, metod lub klas ze specyficznych bibliotek itp.

Po prostu standardowy **Python**.

Na przyk≈Çad, dla danych typu `int`:

```Python
item_id: int
```

albo dla bardziej z≈Ço≈ºonego obiektu `Item`:

```Python
item: Item
```

...i z pojedy≈ÑczƒÖ deklaracjƒÖ otrzymujesz:

* Wsparcie edytor√≥w kodu, wliczajƒÖc:
    * Auto-uzupe≈Çnianie.
    * Sprawdzanie typ√≥w.
* Walidacja danych:
    * Automatyczne i przejrzyste b≈Çƒôdy gdy dane sƒÖ niepoprawne.
    * Walidacja nawet dla g≈Çƒôboko zagnie≈ºd≈ºonych obiekt√≥w JSON.
* <abbr title="znane r√≥wnie≈º jako: serializacja, przetwarzanie, marshalling">Konwersja</abbr> danych wej≈õciowych: przychodzƒÖcych z sieci na Pythonowe typy. Pozwala na przetwarzanie danych:
    * JSON.
    * Parametr√≥w ≈õcie≈ºki.
    * Parametr√≥w zapytania.
    * Dane cookies.
    * Dane nag≈Ç√≥wk√≥w (headers).
    * Formularze.
    * Pliki.
* <abbr title="znane r√≥wnie≈º jako: serializacja, przetwarzanie, marshalling">Konwersja</abbr> danych wyj≈õciowych: wychodzƒÖcych z Pythona do sieci (jako JSON):
    * Przetwarzanie Pythonowych typ√≥w (`str`, `int`, `float`, `bool`, `list`, itp).
    * Obiekty `datetime`.
    * Obiekty `UUID`.
    * Modele baz danych.
    * ...i wiele wiƒôcej.
* Automatyczne interaktywne dokumentacje API, wliczajƒÖc 2 alternatywne interfejsy u≈ºytkownika:
    * Swagger UI.
    * ReDoc.

---

WracajƒÖc do poprzedniego przyk≈Çadu, **FastAPI** :

* Potwierdzi, ≈ºe w ≈õcie≈ºce jest `item_id` dla ≈ºƒÖda≈Ñ `GET` i `PUT`.
* Potwierdzi, ≈ºe `item_id` jest typu `int` dla ≈ºƒÖda≈Ñ `GET` i `PUT`.
    * Je≈ºeli nie jest, odbiorca zobaczy przydatnƒÖ, przejrzystƒÖ wiadomo≈õƒá z b≈Çƒôdem.
* Sprawdzi czy w ≈õcie≈ºce jest opcjonalny parametr zapytania `q` (np. `http://127.0.0.1:8000/items/foo?q=somequery`) dla ≈ºƒÖdania `GET`.
    * Jako ≈ºe parametr `q` jest zadeklarowany jako `= None`, jest on opcjonalny.
    * Gdyby tego `None` nie by≈Ço, parametr ten by≈Çby wymagany (tak jak tre≈õƒá ≈ºƒÖdania w ≈ºƒÖdaniu `PUT`).
* Dla ≈ºƒÖdania `PUT` z ≈õcie≈ºkƒÖ `/items/{item_id}`, odczyta tre≈õƒá ≈ºƒÖdania jako JSON:
    * Sprawdzi czy posiada wymagany atrybut `name`, kt√≥ry powinien byƒá typu `str`.
    * Sprawdzi czy posiada wymagany atrybut `price`, kt√≥ry musi byƒá typu `float`.
    * Sprawdzi czy posiada opcjonalny atrybut `is_offer`, kt√≥ry (je≈ºeli obecny) powinien byƒá typu `bool`.
    * To wszystko bƒôdzie r√≥wnie≈º dzia≈Çaƒá dla g≈Çƒôboko zagnie≈ºd≈ºonych obiekt√≥w JSON.
* Automatycznie konwertuje z i do JSON.
* Dokumentuje wszystko w OpenAPI, kt√≥re mo≈ºe byƒá u≈ºywane przez:
    * Interaktywne systemy dokumentacji.
    * Systemy automatycznego generowania kodu klienckiego, dla wielu jƒôzyk√≥w.
* Dostarczy bezpo≈õrednio 2 interaktywne dokumentacje webowe.

---

To dopiero poczƒÖtek, ale ju≈º masz mniej-wiƒôcej pojƒôcie jak to wszystko dzia≈Ça.

Spr√≥buj zmieniƒá linijkƒô:

```Python
    return {"item_name": item.name, "item_id": item_id}
```

...z:

```Python
        ... "item_name": item.name ...
```

...na:

```Python
        ... "item_price": item.price ...
```

...i zobacz jak edytor kodu automatycznie uzupe≈Çni atrybuty i bƒôdzie zna≈Ç ich typy:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

Dla bardziej kompletnych przyk≈Çad√≥w posiadajƒÖcych wiƒôcej funkcjonalno≈õci, zobacz <a href="https://fastapi.tiangolo.com/tutorial/">Tutorial - User Guide</a>.

**Uwaga Spoiler**: tutorial - user guide zawiera:

* Deklaracje **parametr√≥w** z innych miejsc takich jak: **nag≈Ç√≥wki**, **pliki cookies**, **formularze** i **pliki**.
* Jak ustawiƒá **ograniczenia walidacyjne** takie jak `maksymalna d≈Çugo≈õƒá` lub `regex`.
* Potƒô≈ºny i ≈Çatwy w u≈ºyciu system **<abbr title="znane jako komponenty, resources, providers, services, injectables">Dependency Injection</abbr>**.
* Zabezpieczenia i autentykacja, wliczajƒÖc wsparcie dla **OAuth2** z **tokenami JWT** oraz autoryzacjƒÖ **HTTP Basic**.
* Bardziej zaawansowane (ale r√≥wnie proste) techniki deklarowania **g≈Çƒôboko zagnie≈ºd≈ºonych modeli JSON** (dziƒôki Pydantic).
* Wiele dodatkowych funkcji (dziƒôki Starlette) takie jak:
    * **WebSockety**
    * **GraphQL**
    * bardzo proste testy bazujƒÖce na HTTPX oraz `pytest`
    * **CORS**
    * **Sesje cookie**
    * ...i wiƒôcej.

## Wydajno≈õƒá

Niezale≈ºne benchmarki TechEmpower pokazujƒÖ, ≈ºe **FastAPI** (uruchomiony na serwerze Uvicorn) <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">jest jednym z najszybszych dostƒôpnych Pythonowych framework√≥w</a>, zaraz po Starlette i Uvicorn (u≈ºywanymi wewnƒÖtrznie przez FastAPI). (*)

Aby dowiedzieƒá siƒô o tym wiƒôcej, zobacz sekcjƒô <a href="https://fastapi.tiangolo.com/benchmarks/" class="internal-link" target="_blank">Benchmarks</a>.

## Opcjonalne zale≈ºno≈õci

U≈ºywane przez Pydantic:

* <a href="https://github.com/JoshData/python-email-validator" target="_blank"><code>email-validator</code></a> - dla walidacji adres√≥w email.

U≈ºywane przez Starlette:

* <a href="https://www.python-httpx.org" target="_blank"><code>httpx</code></a> - Wymagane je≈ºeli chcesz korzystaƒá z `TestClient`.
* <a href="https://github.com/Tinche/aiofiles" target="_blank"><code>aiofiles</code></a> - Wymagane je≈ºeli chcesz korzystaƒá z `FileResponse` albo `StaticFiles`.
* <a href="https://jinja.palletsprojects.com" target="_blank"><code>jinja2</code></a> - Wymagane je≈ºeli chcesz u≈ºywaƒá domy≈õlnej konfiguracji szablon√≥w.
* <a href="https://github.com/Kludex/python-multipart" target="_blank"><code>python-multipart</code></a> - Wymagane je≈ºelich chcesz wsparcie <abbr title="przetwarzania stringa kt√≥rzy przychodzi z ≈ºƒÖdaniem HTTP na dane u≈ºywane przez Pythona">"parsowania"</abbr> formularzy, u≈ºywajƒÖc `request.form()`.
* <a href="https://pythonhosted.org/itsdangerous/" target="_blank"><code>itsdangerous</code></a> - Wymagany dla wsparcia `SessionMiddleware`.
* <a href="https://pyyaml.org/wiki/PyYAMLDocumentation" target="_blank"><code>pyyaml</code></a> - Wymagane dla wsparcia `SchemaGenerator` z Starlette (z FastAPI prawdopodobnie tego nie potrzebujesz).
* <a href="https://graphene-python.org/" target="_blank"><code>graphene</code></a> - Wymagane dla wsparcia `GraphQLApp`.

U≈ºywane przez FastAPI / Starlette:

* <a href="https://www.uvicorn.org" target="_blank"><code>uvicorn</code></a> - jako serwer, kt√≥ry ≈Çaduje i obs≈Çuguje TwojƒÖ aplikacjƒô.
* <a href="https://github.com/ijl/orjson" target="_blank"><code>orjson</code></a> - Wymagane je≈ºeli chcesz u≈ºywaƒá `ORJSONResponse`.
* <a href="https://github.com/esnme/ultrajson" target="_blank"><code>ujson</code></a> - Wymagane je≈ºeli chcesz korzystaƒá z `UJSONResponse`.

Mo≈ºesz zainstalowaƒá wszystkie te aplikacje przy pomocy `pip install fastapi[all]`.

## Licencja

Ten projekt jest na licencji MIT.


================================================
File: /docs/pl/docs/tutorial/first-steps.md
================================================
# Pierwsze kroki

Najprostszy plik FastAPI mo≈ºe wyglƒÖdaƒá tak:

{* ../../docs_src/first_steps/tutorial001.py *}

Skopiuj to do pliku `main.py`.

Uruchom serwer:

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
<span style="color: green;">INFO</span>:     Started reloader process [28720]
<span style="color: green;">INFO</span>:     Started server process [28722]
<span style="color: green;">INFO</span>:     Waiting for application startup.
<span style="color: green;">INFO</span>:     Application startup complete.
```

</div>

/// note

Polecenie `uvicorn main:app` odnosi siƒô do:

* `main`: plik `main.py` ("modu≈Ç" Python).
* `app`: obiekt utworzony w pliku `main.py` w lini `app = FastAPI()`.
* `--reload`: sprawia, ≈ºe serwer uruchamia siƒô ponownie po zmianie kodu. U≈ºywany tylko w trakcie tworzenia oprogramowania.

///

Na wyj≈õciu znajduje siƒô linia z czym≈õ w rodzaju:

```hl_lines="4"
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

Ta linia pokazuje adres URL, pod kt√≥rym Twoja aplikacja jest obs≈Çugiwana, na Twoim lokalnym komputerze.

### Sprawd≈∫ to

Otw√≥rz w swojej przeglƒÖdarce <a href="http://127.0.0.1:8000" class="external-link" target="_blank">http://127.0.0.1:8000</a>.

Zobaczysz odpowied≈∫ w formacie JSON:

```JSON
{"message": "Hello World"}
```

### Interaktywna dokumentacja API

Przejd≈∫ teraz do <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

Zobaczysz automatycznƒÖ i interaktywnƒÖ dokumentacjƒô API (dostarczonƒÖ przez <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### Alternatywna dokumentacja API

Teraz przejd≈∫ do <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

Zobaczysz alternatywnƒÖ automatycznie wygenerowanƒÖ dokumentacjƒô API (dostarczonƒÖ przez <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

### OpenAPI

**FastAPI** generuje "schemat" z ca≈Çym Twoim API przy u≈ºyciu standardu **OpenAPI** s≈Çu≈ºƒÖcego do definiowania API.

#### Schema

"Schema" jest definicjƒÖ lub opisem czego≈õ. Nie jest to kod, kt√≥ry go implementuje, ale po prostu abstrakcyjny opis.

#### API "Schema"

W typ przypadku, <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> to specyfikacja, kt√≥ra dyktuje spos√≥b definiowania schematu interfejsu API.

Definicja schematu zawiera ≈õcie≈ºki API, mo≈ºliwe parametry, kt√≥re sƒÖ przyjmowane przez endpointy, itp.

#### "Schemat" danych

Termin "schemat" mo≈ºe r√≥wnie≈º odnosiƒá siƒô do wyglƒÖdu niekt√≥rych danych, takich jak zawarto≈õƒá JSON.

W takim przypadku bƒôdzie to oznaczaƒá atrybuty JSON, ich typy danych itp.

#### OpenAPI i JSON Schema

OpenAPI definiuje API Schema dla Twojego API, kt√≥ry zawiera definicje (lub "schematy") danych wysy≈Çanych i odbieranych przez Tw√≥j interfejs API przy u≈ºyciu **JSON Schema**, standardu dla schemat√≥w danych w formacie JSON.

#### Sprawd≈∫ `openapi.json`

Je≈õli jeste≈õ ciekawy, jak wyglƒÖda surowy schemat OpenAPI, FastAPI automatycznie generuje JSON Schema z opisami wszystkich Twoich API.

Mo≈ºesz to zobaczyƒá bezpo≈õrednio pod adresem: <a href="http://127.0.0.1:8000/openapi.json" class="external-link" target="_blank">http://127.0.0.1:8000/openapi.json</a>.

Zobaczysz JSON zaczynajƒÖcy siƒô od czego≈õ takiego:

```JSON
{
    "openapi": "3.0.2",
    "info": {
        "title": "FastAPI",
        "version": "0.1.0"
    },
    "paths": {
        "/items/": {
            "get": {
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {



...
```

#### Do czego s≈Çu≈ºy OpenAPI

Schemat OpenAPI jest tym, co zasila dwa do≈ÇƒÖczone interaktywne systemy dokumentacji.

IstniejƒÖ dziesiƒÖtki alternatyw, wszystkie oparte na OpenAPI. Mo≈ºesz ≈Çatwo dodaƒá dowolnƒÖ z nich do swojej aplikacji zbudowanej za pomocƒÖ **FastAPI**.

Mo≈ºesz go r√≥wnie≈º u≈ºyƒá do automatycznego generowania kodu dla klient√≥w, kt√≥rzy komunikujƒÖ siƒô z Twoim API. Na przyk≈Çad aplikacje frontendowe, mobilne lub IoT.

## Przypomnijmy, krok po kroku

### Krok 1: zaimportuj `FastAPI`

{* ../../docs_src/first_steps/tutorial001.py hl[1] *}

`FastAPI` jest klasƒÖ, kt√≥ra zapewnia wszystkie funkcjonalno≈õci Twojego API.

/// note | Szczeg√≥≈Çy techniczne

`FastAPI` jest klasƒÖ, kt√≥ra dziedziczy bezpo≈õrednio z `Starlette`.

Oznacza to, ≈ºe mo≈ºesz korzystaƒá ze wszystkich funkcjonalno≈õci <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> r√≥wnie≈º w `FastAPI`.

///

### Krok 2: utw√≥rz instancjƒô `FastAPI`

{*../../docs_src/first_steps/tutorial001.py hl[3] *}

Zmienna `app` bƒôdzie tutaj "instancjƒÖ" klasy `FastAPI`.

Bƒôdzie to g≈Ç√≥wny punkt interakcji przy tworzeniu ca≈Çego interfejsu API.

Ta zmienna `app` jest tƒÖ samƒÖ zmiennƒÖ, do kt√≥rej odnosi siƒô `uvicorn` w poleceniu:

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

Je≈õli stworzysz swojƒÖ aplikacjƒô, np.:

{* ../../docs_src/first_steps/tutorial002.py hl[3] *}

I umie≈õcisz to w pliku `main.py`, to bƒôdziesz m√≥g≈Ç tak wywo≈Çaƒá `uvicorn`:

<div class="termy">

```console
$ uvicorn main:my_awesome_api --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

### Krok 3: wykonaj *operacjƒô na ≈õcie≈ºce*

#### ≈öcie≈ºka

"≈öcie≈ºka" tutaj odnosi siƒô do ostatniej czƒô≈õci adresu URL, zaczynajƒÖc od pierwszego `/`.

Wiƒôc, w adresie URL takim jak:

```
https://example.com/items/foo
```

...≈õcie≈ºkƒÖ bƒôdzie:

```
/items/foo
```

/// info

"≈öcie≈ºka" jest zazwyczaj nazywana "path", "endpoint" lub "route'.

///

Podczas budowania API, "≈õcie≈ºka" jest g≈Ç√≥wnym sposobem na oddzielenie "odpowiedzialno≈õci" i ‚Äûzasob√≥w‚Äù.

#### Operacje

"Operacje" tutaj odnoszƒÖ siƒô do jednej z "metod" HTTP.

Jedna z:

* `POST`
* `GET`
* `PUT`
* `DELETE`

...i te bardziej egzotyczne:

* `OPTIONS`
* `HEAD`
* `PATCH`
* `TRACE`

W protokole HTTP mo≈ºna komunikowaƒá siƒô z ka≈ºdƒÖ ≈õcie≈ºkƒÖ za pomocƒÖ jednej (lub wiƒôcej) "metod".

---

Podczas tworzenia API zwykle u≈ºywasz tych metod HTTP do wykonania okre≈õlonej akcji.

Zazwyczaj u≈ºywasz:

* `POST`: do tworzenia danych.
* `GET`: do odczytywania danych.
* `PUT`: do aktualizacji danych.
* `DELETE`: do usuwania danych.

Tak wiƒôc w OpenAPI ka≈ºda z metod HTTP nazywana jest "operacjƒÖ".

Bƒôdziemy je r√≥wnie≈º nazywali "**operacjami**".

#### Zdefiniuj *dekorator operacji na ≈õcie≈ºce*

{* ../../docs_src/first_steps/tutorial001.py hl[6] *}

`@app.get("/")` m√≥wi **FastAPI** ≈ºe funkcja poni≈ºej odpowiada za obs≈Çugƒô ≈ºƒÖda≈Ñ, kt√≥re trafiajƒÖ do:

* ≈õcie≈ºki `/`
* u≈ºywajƒÖc <abbr title="metoda HTTP GET">operacji <code>get</code></abbr>

/// info | `@decorator` Info

Sk≈Çadnia `@something` jest w Pythonie nazywana "dekoratorem".

Umieszczasz to na szczycie funkcji. Jak ≈ÇadnƒÖ ozdobnƒÖ czapkƒô (chyba stƒÖd wziƒô≈Ça siƒô nazwa).

"Dekorator" przyjmuje funkcjƒô znajdujƒÖcƒÖ siƒô poni≈ºej jego i co≈õ z niƒÖ robi.

W naszym przypadku dekorator m√≥wi **FastAPI**, ≈ºe poni≈ºsza funkcja odpowiada **≈õcie≈ºce** `/` z **operacjƒÖ** `get`.

Jest to "**dekorator operacji na ≈õcie≈ºce**".

///

Mo≈ºesz r√≥wnie≈º u≈ºyƒá innej operacji:

* `@app.post()`
* `@app.put()`
* `@app.delete()`

Oraz tych bardziej egzotycznych:

* `@app.options()`
* `@app.head()`
* `@app.patch()`
* `@app.trace()`

/// tip

Mo≈ºesz dowolnie u≈ºywaƒá ka≈ºdej operacji (metody HTTP).

**FastAPI** nie narzuca ≈ºadnego konkretnego znaczenia.

Informacje tutaj sƒÖ przedstawione jako wskaz√≥wka, a nie wym√≥g.

Na przyk≈Çad, u≈ºywajƒÖc GraphQL, normalnie wykonujesz wszystkie akcje u≈ºywajƒÖc tylko operacji `POST`.

///

### Krok 4: zdefiniuj **funkcjƒô obs≈ÇugujƒÖcƒÖ ≈õcie≈ºkƒô**

To jest nasza "**funkcja obs≈ÇugujƒÖca ≈õcie≈ºkƒô**":

* **≈õcie≈ºka**: to `/`.
* **operacja**: to `get`.
* **funkcja**: to funkcja poni≈ºej "dekoratora" (poni≈ºej `@app.get("/")`).

{* ../../docs_src/first_steps/tutorial001.py hl[7] *}

Jest to funkcja Python.

Zostanie ona wywo≈Çana przez **FastAPI** za ka≈ºdym razem, gdy otrzyma ≈ºƒÖdanie do adresu URL "`/`" przy u≈ºyciu operacji `GET`.

W tym przypadku jest to funkcja "asynchroniczna".

---

Mo≈ºesz r√≥wnie≈º zdefiniowaƒá to jako normalnƒÖ funkcjƒô zamiast `async def`:

{* ../../docs_src/first_steps/tutorial003.py hl[7] *}

/// note

Je≈õli nie znasz r√≥≈ºnicy, sprawd≈∫ [Async: *"In a hurry?"*](../async.md#in-a-hurry){.internal-link target=_blank}.

///

### Krok 5: zwr√≥ƒá zawarto≈õƒá

{* ../../docs_src/first_steps/tutorial001.py hl[8] *}

Mo≈ºesz zwr√≥ciƒá `dict`, `list`, pojedynczƒÖ warto≈õƒá jako `str`, `int`, itp.

Mo≈ºesz r√≥wnie≈º zwr√≥ciƒá modele Pydantic (wiƒôcej o tym p√≥≈∫niej).

Istnieje wiele innych obiekt√≥w i modeli, kt√≥re zostanƒÖ automatycznie skonwertowane do formatu JSON (w tym ORM itp.). Spr√≥buj u≈ºyƒá swoich ulubionych, jest bardzo prawdopodobne, ≈ºe sƒÖ ju≈º obs≈Çugiwane.

## Podsumowanie

* Zaimportuj `FastAPI`.
* Stw√≥rz instancjƒô `app`.
* Dodaj **dekorator operacji na ≈õcie≈ºce** (taki jak `@app.get("/")`).
* Napisz **funkcjƒô obs≈ÇugujƒÖcƒÖ ≈õcie≈ºkƒô** (takƒÖ jak `def root(): ...` powy≈ºej).
* Uruchom serwer deweloperski (`uvicorn main:app --reload`).


================================================
File: /docs/pl/docs/tutorial/index.md
================================================
# Samouczek

Ten samouczek poka≈ºe Ci, krok po kroku, jak u≈ºywaƒá wiƒôkszo≈õci funkcji **FastAPI**.

Ka≈ºda czƒô≈õƒá korzysta z poprzednich, ale jest jednocze≈õnie osobnym tematem. Mo≈ºesz przej≈õƒá bezpo≈õrednio do ka≈ºdego rozdzia≈Çu, je≈õli szukasz rozwiƒÖzania konkretnego problemu.

Samouczek jest tak zbudowany, ≈ºeby s≈Çu≈ºy≈Ç jako punkt odniesienia w przysz≈Ço≈õci.

Mo≈ºesz wracaƒá i sprawdzaƒá dok≈Çadnie to czego potrzebujesz.

## Wykonywanie kodu

Wszystkie fragmenty kodu mogƒÖ byƒá skopiowane bezpo≈õrednio i u≈ºyte (sƒÖ poprawnymi i przetestowanymi plikami).

≈ªeby wykonaƒá ka≈ºdy przyk≈Çad skopiuj kod to pliku `main.py` i uruchom `uvicorn` za pomocƒÖ:

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
<span style="color: green;">INFO</span>:     Started reloader process [28720]
<span style="color: green;">INFO</span>:     Started server process [28722]
<span style="color: green;">INFO</span>:     Waiting for application startup.
<span style="color: green;">INFO</span>:     Application startup complete.
```

</div>

**BARDZO zalecamy** pisanie bƒÖd≈∫ kopiowanie kodu, edycjƒô, a nastƒôpnie wykonywanie go lokalnie.

U≈ºycie w Twoim edytorze jest tym, co pokazuje prawdziwe korzy≈õci z FastAPI, pozwala zobaczyƒá jak ma≈Ço kodu musisz napisaƒá, wszystkie funkcje, takie jak kontrola typ√≥w, <abbr title="auto-complete, autocompletion, IntelliSense">automatyczne uzupe≈Çnianie</abbr>, itd.

---

## Instalacja FastAPI

Jako pierwszy krok zainstaluj FastAPI.

Na potrzeby samouczka mo≈ºesz zainstalowaƒá r√≥wnie≈º wszystkie opcjonalne biblioteki:

<div class="termy">

```console
$ pip install "fastapi[all]"

---> 100%
```

</div>

...wliczajƒÖc w to `uvicorn`, kt√≥ry bƒôdzie s≈Çu≈ºy≈Ç jako serwer wykonujacy Tw√≥j kod.

/// note

Mo≈ºesz r√≥wnie≈º wykonaƒá instalacjƒô "krok po kroku".

Prawdopodobnie zechcesz to zrobiƒá, kiedy bƒôdziesz wdra≈ºaƒá swojƒÖ aplikacjƒô w ≈õrodowisku produkcyjnym:

```
pip install fastapi
```

Zainstaluj te≈º `uvicorn`, kt√≥ry bƒôdzie s≈Çu≈ºy≈Ç jako serwer:

```
pip install "uvicorn[standard]"
```

Tak samo mo≈ºesz zainstalowaƒá wszystkie dodatkowe biblioteki, kt√≥rych chcesz u≈ºyƒá.

///

## Zaawansowany poradnik

Jest te≈º **Zaawansowany poradnik**, kt√≥ry mo≈ºesz przeczytaƒá po lekturze tego **Samouczka**.

**Zaawansowany poradnik** opiera siƒô na tym samouczku, u≈ºywa tych samych pojƒôƒá, ≈ºeby pokazaƒá Ci kilka dodatkowych funkcji.

Najpierw jednak  powiniene≈õ przeczytaƒá **Samouczek** (czytasz go teraz).

Ten rozdzia≈Ç jest zaprojektowany tak, ≈ºe mo≈ºesz stworzyƒá kompletnƒÖ aplikacjƒô u≈ºywajƒÖc tylko informacji tutaj zawartych, a nastƒôpnie rozszerzaƒá jƒÖ na r√≥≈ºne sposoby, w zale≈ºno≈õci od potrzeb, u≈ºywajƒÖc kilku dodatkowych pomys≈Ç√≥w z **Zaawansowanego poradnika**.


================================================
File: /docs/pt/mkdocs.yml
================================================
INHERIT: ../en/mkdocs.yml


================================================
File: /docs/pt/docs/alternatives.md
================================================
# Alternativas, Inspira√ß√£o e Compara√ß√µes

O que inspirou o **FastAPI**, como ele se compara √†s alternativas e o que FastAPI aprendeu delas.

## Introdu√ß√£o

**FastAPI** n√£o poderia existir se n√£o fosse pelos trabalhos anteriores de outras pessoas.

Houveram tantas ferramentas criadas que ajudaram a inspirar sua cria√ß√£o.

Tenho evitado criar um novo framework por anos. Primeiramente tentei resolver todos os recursos cobertos pelo **FastAPI** utilizando muitos frameworks diferentes, plug-ins e ferramentas.

Mas em algum ponto, n√£o houve outra op√ß√£o sen√£o criar algo que fornecesse todos esses recursos, pegando as melhores id√©ias de ferramentas anteriores, e combinando eles da melhor forma poss√≠vel, utilizando recursos da linguagem que n√£o estavam dispon√≠veis antes (_Type Hints_ no Python 3.6+).

## Ferramentas anteriores

### <a href="https://www.djangoproject.com/" class="external-link" target="_blank">Django</a>

√â o framework mais popular e largamente confi√°vel. √â utilizado para construir sistemas como o _Instagram_.

√â bem acoplado com banco de dados relacional (como MySQL ou PostgreSQL), ent√£o, tendo um banco de dados NoSQL (como Couchbase, MongoDB, Cassandra etc) como a principal ferramenta de armazenamento n√£o √© muito f√°cil.

Foi criado para gerar HTML no _backend_, n√£o para criar APIs utilizando um _frontend_ moderno (como React, Vue.js e Angular) ou por outros sistemas (como dispositivos <abbr title="Internet das Coisas">IoT</abbr>) comunicando com ele.

### <a href="https://www.django-rest-framework.org/" class="external-link" target="_blank">Django REST Framework</a>

Django REST framework foi criado para ser uma caixa de ferramentas flex√≠vel para constru√ß√£o de APIs web utilizando Django por baixo, para melhorar suas capacidades de API.

Ele √© utilizado por muitas companhias incluindo Mozilla, Red Hat e Eventbrite.

Ele foi um dos primeiros exemplos de **documenta√ß√£o autom√°tica de API**, e essa foi especificamente uma das primeiras id√©ias que inspirou "a busca por" **FastAPI**.

/// note | Nota

Django REST Framework foi criado por Tom Christie. O mesmo criador de Starlette e Uvicorn, nos quais **FastAPI** √© baseado.

///

/// check | **FastAPI** inspirado para

Ter uma documenta√ß√£o autom√°tica da API em interface web.

///

### <a href="https://flask.palletsprojects.com" class="external-link" target="_blank">Flask</a>

Flask √© um "microframework", n√£o inclui integra√ß√£o com banco de dados nem muitas das coisas que v√™m por padr√£o no Django.

Sua simplicidade e flexibilidade permitem fazer coisas como utilizar bancos de dados NoSQL como principal sistema de armazenamento de dados.

Por ser t√£o simples, √© relativamente intuitivo de aprender, embora a documenta√ß√£o esteja de forma mais t√©cnica em alguns pontos.

Ele √© comumente utilizado por outras aplica√ß√µes que n√£o necessariamente precisam de banco de dados, gerenciamento de usu√°rios, ou algum dos muitos recursos que j√° vem instalados no Django. Embora muitos desses recursos possam ser adicionados com plug-ins.

Esse desacoplamento de partes, e sendo um "microframework" que pode ser extendido para cobrir exatamente o que √© necess√°rio era um recurso chave que eu queria manter.

Dada a simplicidade do Flask, parecia uma √≥tima op√ß√£o para constru√ß√£o de APIs. A pr√≥xima coisa a procurar era um "Django REST Framework" para Flask.

/// check | **FastAPI** inspirado para

Ser um microframework. Fazer ele f√°cil para misturar e combinar com ferramentas e partes necess√°rias.

Ser simples e com sistema de roteamento f√°cil de usar.

///

### <a href="https://requests.readthedocs.io" class="external-link" target="_blank">Requests</a>

**FastAPI** n√£o √© uma alternativa para **Requests**. O escopo deles √© muito diferente.

Na verdade √© comum utilizar Requests *dentro* de uma aplica√ß√£o FastAPI.

Ainda assim, FastAPI pegou alguma inspira√ß√£o do Requests.

**Requests** √© uma biblioteca para interagir com APIs (como um cliente), enquanto **FastAPI** √© uma biblioteca para *construir* APIs (como um servidor).

Eles est√£o, mais ou menos, em pontas opostas, um complementando o outro.

Requests tem um projeto muito simples e intuitivo, f√°cil de usar, com padr√µes sens√≠veis. Mas ao mesmo tempo, √© muito poderoso e customiz√°vel.

√â por isso que, como dito no site oficial:

> Requests √© um dos pacotes Python mais baixados de todos os tempos

O jeito de usar √© muito simples. Por exemplo, para fazer uma requisi√ß√£o `GET`, voc√™ deveria escrever:

```Python
response = requests.get("http://example.com/some/url")
```

A contra-parte da aplica√ß√£o FastAPI, *rota de opera√ß√£o*, poderia parecer como:

```Python hl_lines="1"
@app.get("/some/url")
def read_url():
    return {"message": "Hello World"}
```

Veja as similaridades em `requests.get(...)` e `@app.get(...)`.

/// check | **FastAPI** inspirado para

* Ter uma API simples e intuitiva.
* Utilizar nomes de m√©todos HTTP (opera√ß√µes) diretamente, de um jeito direto e intuitivo.
* Ter padr√µes sens√≠veis, mas customiza√ß√µes poderosas.

///

### <a href="https://swagger.io/" class="external-link" target="_blank">Swagger</a> / <a href="https://github.com/OAI/OpenAPI-Specification/" class="external-link" target="_blank">OpenAPI</a>

O principal recurso que eu queria do Django REST Framework era a documenta√ß√£o autom√°tica da API.

Ent√£o eu descobri que existia um padr√£o para documentar APIs, utilizando JSON (ou YAML, uma extens√£o do JSON) chamado Swagger.

E tinha uma interface web para APIs Swagger j√° criada. Ent√£o, sendo capaz de gerar documenta√ß√£o Swagger para uma API poderia permitir utilizar essa interface web automaticamente.

Em algum ponto, Swagger foi dado para a Funda√ß√£o Linux, e foi renomeado OpenAPI.

Isso acontece porqu√™ quando algu√©m fala sobre a vers√£o 2.0 √© comum dizer "Swagger", e para a vers√£o 3+, "OpenAPI".

/// check | **FastAPI** inspirado para

Adotar e usar um padr√£o aberto para especifica√ß√µes API, ao inv√©s de algum esquema customizado.

E integrar ferramentas de interface para usu√°rios baseado nos padr√µes:

* <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>
* <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>

Esses dois foram escolhidos por serem bem populares e est√°veis, mas fazendo uma pesquisa r√°pida, voc√™ pode encontrar d√∫zias de interfaces alternativas adicionais para OpenAPI (assim voc√™ poder√° utilizar com **FastAPI**).

///

### Flask REST frameworks

Existem v√°rios Flask REST frameworks, mas depois de investir tempo e trabalho investigando eles, eu descobri que muitos est√£o descontinuados ou abandonados, com alguns tendo quest√µes que fizeram eles inadequados.

### <a href="https://marshmallow.readthedocs.io/en/3.0/" class="external-link" target="_blank">Marshmallow</a>

Um dos principais recursos necess√°rios em sistemas API √© "<abbr title="tamb√©m chamado _ marshalling, convers√£o">serializa√ß√£o</abbr>" de dados, que √© pegar dados do c√≥digo (Python) e converter eles em alguma coisa que possa ser enviado atrav√©s da rede. Por exemplo, converter um objeto contendo dados de um banco de dados em um objeto JSON. Converter objetos `datetime` em strings etc.

Outro grande recurso necess√°rio nas APIs √© valida√ß√£o de dados, certificando que os dados s√£o v√°lidos, dados certos par√¢metros. Por exemplo, algum campo √© `int`, e n√£o alguma string aleat√≥ria. Isso √© especialmente √∫til para dados que est√£o chegando.

Sem um sistema de valida√ß√£o de dados, voc√™ teria que realizar todas as verifica√ß√µes manualmente, no c√≥digo.

Esses recursos s√£o o que Marshmallow foi constru√≠do para fornecer. Ele √© uma √≥tima biblioteca, e eu j√° utilizei muito antes.

Mas ele foi criado antes da exist√™ncia do _type hints_ do Python. Ent√£o, para definir todo o <abbr title="defini√ß√£o de como os dados devem ser formados">_schema_</abbr> voc√™ precisa utilizar espec√≠ficas ferramentas e classes fornecidas pelo Marshmallow.

/// check | **FastAPI** inspirado para

Usar c√≥digo para definir "schemas" que forne√ßam, automaticamente, tipos de dados e valida√ß√£o.

///

### <a href="https://webargs.readthedocs.io/en/latest/" class="external-link" target="_blank">Webargs</a>

Outro grande recurso necess√°rio pelas APIs √© a <abbr title="ler e converter para dados Python">an√°lise</abbr> de dados vindos de requisi√ß√µes.

Webargs √© uma ferramente feita para fornecer o que est√° no topo de v√°rios frameworks, inclusive Flask.

Ele utiliza Marshmallow por baixo para valida√ß√£o de dados. E ele foi criado pelos mesmos desenvolvedores.

Ele √© uma grande ferramenta e eu tamb√©m a utilizei muito, antes de ter o **FastAPI**.

/// info

Webargs foi criado pelos mesmos desenvolvedores do Marshmallow.

///

/// check | **FastAPI** inspirado para

Ter valida√ß√£o autom√°tica de dados vindos de requisi√ß√µes.

///

### <a href="https://apispec.readthedocs.io/en/stable/" class="external-link" target="_blank">APISpec</a>

Marshmallow e Webargs fornecem valida√ß√£o, an√°lise e serializa√ß√£o como plug-ins.

Mas a documenta√ß√£o ainda est√° faltando. Ent√£o APISpec foi criado.

APISpec tem plug-ins para muitos frameworks (e tem um plug-in para Starlette tamb√©m).

O jeito como ele funciona √© que voc√™ escreve a defini√ß√£o do _schema_ usando formato YAML dentro da _docstring_ de cada fun√ß√£o controlando uma rota.

E ele gera _schemas_ OpenAPI.

√â assim como funciona no Flask, Starlette, Responder etc.

Mas ent√£o, n√≥s temos novamente o problema de ter uma micro-sintaxe, dentro de uma string Python (um grande YAML).

O editor n√£o poder√° ajudar muito com isso. E se n√≥s modificarmos os par√¢metros dos _schemas_ do Marshmallow e esquecer de modificar tamb√©m aquela _docstring_ YAML, o _schema_ gerado pode ficar obsoleto.

/// info

APISpec foi criado pelos mesmos desenvolvedores do Marshmallow.

///

/// check | **FastAPI** inspirado para

Dar suporte a padr√µes abertos para APIs, OpenAPI.

///

### <a href="https://flask-apispec.readthedocs.io/en/latest/" class="external-link" target="_blank">Flask-apispec</a>

√â um plug-in Flask, que amarra junto Webargs, Marshmallow e APISpec.

Ele utiliza a informa√ß√£o do Webargs e Marshmallow para gerar automaticamente _schemas_ OpenAPI, usando APISpec.

√â uma grande ferramenta, mas muito subestimada. Ela deveria ser um pouco mais popular do que muitos outros plug-ins Flask. √â de ser esperado que sua documenta√ß√£o seja bem concisa e abstrata.

Isso resolveu o problema de ter que escrever YAML (outra sintaxe) dentro das _docstrings_ Python.

Essa combina√ß√£o de Flask, Flask-apispec com Marshmallow e Webargs foi meu _backend stack_ favorito at√© construir o **FastAPI**.

Usando essa combina√ß√£o levou a cria√ß√£o de v√°rios geradores Flask _full-stack_. H√° muitas _stacks_ que eu (e v√°rios times externos) estou utilizando at√© agora:

* <a href="https://github.com/tiangolo/full-stack" class="external-link" target="_blank">https://github.com/tiangolo/full-stack</a>
* <a href="https://github.com/tiangolo/full-stack-flask-couchbase" class="external-link" target="_blank">https://github.com/tiangolo/full-stack-flask-couchbase</a>
* <a href="https://github.com/tiangolo/full-stack-flask-couchdb" class="external-link" target="_blank">https://github.com/tiangolo/full-stack-flask-couchdb</a>

E esses mesmos geradores _full-stack_ foram a base dos [Geradores de Projetos **FastAPI**](project-generation.md){.internal-link target=_blank}.

/// info

Flask-apispec foi criado pelos mesmos desenvolvedores do Marshmallow.

///

/// check | **FastAPI** inspirado para

Gerar _schema_ OpenAPI automaticamente, a partir do mesmo c√≥digo que define serializa√ß√£o e valida√ß√£o.

///

### <a href="https://nestjs.com/" class="external-link" target="_blank">NestJS</a> (and <a href="https://angular.io/" class="external-link" target="_blank">Angular</a>)

NestJS, que n√£o √© nem Python, √© um framework NodeJS JavaScript (TypeScript) inspirado pelo Angular.

Ele alcan√ßa de uma forma similar ao que pode ser feito com o Flask-apispec.

Ele tem um sistema de inje√ß√£o de depend√™ncia integrado, inspirado pelo Angular 2. √â necess√°rio fazer o pr√©-registro dos "injet√°veis" (como todos os sistemas de inje√ß√£o de depend√™ncia que conhe√ßo), ent√£o, adicionando verbosidade e repeti√ß√£o de c√≥digo.

Como os par√¢metros s√£o descritos com tipos TypeScript (similar aos _type hints_ do Python), o suporte ao editor √© muito bom.

Mas como os dados TypeScript n√£o s√£o preservados ap√≥s a compila√ß√£o para o JavaScript, ele n√£o pode depender dos tipos para definir a valida√ß√£o, serializa√ß√£o e documenta√ß√£o ao mesmo tempo. Devido a isso e a algumas decis√µes de projeto, para pegar a valida√ß√£o, serializa√ß√£o e gera√ß√£o autom√°tica do _schema_, √© necess√°rio adicionar decoradores em muitos lugares. Ent√£o, ele se torna muito verboso.

Ele tamb√©m n√£o controla modelos aninhados muito bem. Ent√£o, se o corpo JSON na requisi√ß√£o for um objeto JSON que cont√©m campos internos que cont√©m objetos JSON aninhados, ele n√£o consegue ser validado e documentado apropriadamente.

/// check | **FastAPI** inspirado para

Usar tipos Python para ter um √≥timo suporte do editor.

Ter um sistema de inje√ß√£o de depend√™ncia poderoso. Achar um jeito de minimizar repeti√ß√£o de c√≥digo.

///

### <a href="https://sanic.readthedocs.io/en/latest/" class="external-link" target="_blank">Sanic</a>

Ele foi um dos primeiros frameworks Python extremamente r√°pido baseado em `asyncio`. Ele foi feito para ser muito similar ao Flask.

/// note | Detalhes t√©cnicos

Ele utiliza <a href="https://github.com/MagicStack/uvloop" class="external-link" target="_blank">`uvloop`</a> ao inv√©s do '_loop_' `asyncio` padr√£o do Python. √â isso que deixa ele t√£o r√°pido.

Ele claramente inspirou Uvicorn e Starlette, que s√£o atualmente mais r√°pidos que o Sanic em testes de performance abertos.

///

/// check | **FastAPI** inspirado para

Achar um jeito de ter uma performance insana.

√â por isso que o **FastAPI** √© baseado em Starlette, para que ele seja o framework mais r√°pido dispon√≠vel (performance testada por terceiros).

///

### <a href="https://falconframework.org/" class="external-link" target="_blank">Falcon</a>

Falcon √© outro framework Python de alta performance, e √© projetado para ser minimalista, e funciona como funda√ß√£o de outros frameworks como Hug.

Ele usa o padr√£o anterior para frameworks web Python (WSGI) que √© s√≠ncrono, ent√£o ele n√£o pode controlar _WebSockets_ e outros casos de uso. No entanto, ele tamb√©m tem uma boa performance.

Ele √© projetado para ter fun√ß√µes que recebem dois par√¢metros, uma "requisi√ß√£o" e uma "resposta". Ent√£o voc√™ "l√™" as partes da requisi√ß√£o, e "escreve" partes para a resposta. Devido ao seu design, n√£o √© poss√≠vel declarar par√¢metros de requisi√ß√£o e corpos com _type hints_ Python padr√£o como par√¢metros de fun√ß√µes.

Ent√£o, valida√ß√£o de dados, serializa√ß√£o e documenta√ß√£o tem que ser feitos no c√≥digo, n√£o automaticamente. Ou eles ter√£o que ser implementados como um framework acima do Falcon, como o Hug. Essa mesma distin√ß√£o acontece em outros frameworks que s√£o inspirados pelo design do Falcon, tendo um objeto de requisi√ß√£o e um objeto de resposta como par√¢metros.

/// check | **FastAPI** inspirado para

Achar jeitos de conseguir melhor performance.

Juntamente com Hug (como Hug √© baseado no Falcon) inspirou **FastAPI** para declarar um par√¢metro de `resposta` nas fun√ß√µes.

Embora no FastAPI seja opcional, √© utilizado principalmente para configurar cabe√ßalhos, cookies e c√≥digos de status alternativos.

///

### <a href="https://moltenframework.com/" class="external-link" target="_blank">Molten</a>

Eu descobri Molten nos primeiros est√°gios da constru√ß√£o do **FastAPI**. E ele tem umas id√©ias bem similares:

* Baseado em _type hints_ Python.
* Valida√ß√£o e documenta√ß√£o desses tipos.
* Sistema de inje√ß√£o de depend√™ncia.

Ele n√£o utiliza valida√ß√£o de dados, serialliza√ß√£o e documenta√ß√£o de bibliotecas de terceiros como o Pydantic, ele tem seu pr√≥rpio. Ent√£o, essas defini√ß√µes de tipo de dados n√£o podem ser reutilizados t√£o facilmente.

Ele exige um pouco mais de verbosidade nas configura√ß√µes. E como √© baseado no WSGI (ao inv√©s de ASGI), ele n√£o √© projetado para ter a vantagem da alta performance fornecida por ferramentas como Uvicorn, Starlette e Sanic.

O sistema de inje√ß√£o de depend√™ncia exige pr√©-registro das depend√™ncias e as depend√™ncias s√£o resolvidas baseadas nos tipos declarados. Ent√£o, n√£o √© poss√≠vel declarar mais do que um "componente" que fornece um certo tipo.

Rotas s√£o declaradas em um √∫nico lugar, usando fun√ß√µes declaradas em outros lugares (ao inv√©s de usar decoradores que possam ser colocados diretamente acima da fun√ß√£o que controla o _endpoint_). Isso √© mais perto de como o Django faz isso do que como Flask (e Starlette) faz. Ele separa no c√≥digo coisas que s√£o relativamente amarradas.

/// check | **FastAPI** inspirado para

Definir valida√ß√µes extras para tipos de dados usando valores "padr√£o" de atributos dos modelos. Isso melhora o suporte do editor, e n√£o estava dispon√≠vel no Pydantic antes.

Isso na verdade inspirou a atualiza√ß√£o de partes do Pydantic, para dar suporte ao mesmo estilo de declara√ß√£o da valida√ß√£o (toda essa funcionalidade j√° est√° dispon√≠vel no Pydantic).

///

### <a href="https://github.com/hugapi/hug" class="external-link" target="_blank">Hug</a>

Hug foi um dos primeiros frameworks a implementar a declara√ß√£o de tipos de par√¢metros usando Python _type hints_. Isso foi uma √≥tima id√©ia que inspirou outras ferramentas a fazer o mesmo.

Ele usou tipos customizados em suas declara√ß√µes ao inv√©s dos tipos padr√£o Python, mas mesmo assim foi um grande passo.

Ele tamb√©m foi um dos primeiros frameworks a gerar um _schema_ customizado declarando a API inteira em JSON.

Ele n√£o era baseado em um padr√£o como OpenAPI e JSON Schema. Ent√£o n√£o poderia ter intera√ß√£o direta com outras ferramentas, como Swagger UI. Mas novamente, era uma id√©ia muito inovadora.

Hug tinha um incomum, interessante recurso: usando o mesmo framework, √© poss√≠vel criar tanto APIs como CLIs.

Como √© baseado nos padr√µes anteriores de frameworks web s√≠ncronos (WSGI), ele n√£o pode controlar _Websockets_ e outras coisas, embora ele ainda tenha uma alta performance tamb√©m.

/// info

Hug foi criado por Timothy Crosley, o mesmo criador do  <a href="https://github.com/timothycrosley/isort" class="external-link" target="_blank">`isort`</a>, uma grande ferramenta para ordena√ß√£o autom√°tica de _imports_ em arquivos Python.

///

/// check | Id√©ias inspiradas para o **FastAPI**

Hug inspirou partes do APIStar, e foi uma das ferramentas que eu achei mais promissora, ao lado do APIStar.

Hug ajudou a inspirar o **FastAPI** a usar _type hints_ do Python para declarar par√¢metros, e para gerar um _schema_ definindo a API automaticamente.

Hug inspirou **FastAPI** a declarar um par√¢metro de `resposta` em fun√ß√µes para definir cabe√ßalhos e cookies.

///

### <a href="https://github.com/encode/apistar" class="external-link" target="_blank">APIStar</a> (<= 0.5)

Antes de decidir construir **FastAPI** eu encontrei o servidor **APIStar**. Tinha quase tudo que eu estava procurando e tinha um grande projeto.

Ele foi uma das primeiras implementa√ß√µes de um framework usando Python _type hints_ para declarar par√¢metros e requisi√ß√µes que eu nunca vi (antes no NestJS e Molten). Eu encontrei ele mais ou menos na mesma √©poca que o Hug. Mas o APIStar utilizava o padr√£o OpenAPI.

Ele tinha valida√ß√£o de dados autom√°tica, serializa√ß√£o de dados e gera√ß√£o de _schema_ OpenAPI baseado nos mesmos _type hints_ em v√°rios locais.

Defini√ß√µes de _schema_ de corpo n√£o utilizavam os mesmos Python _type hints_ como Pydantic, ele era um pouco mais similar ao Marshmallow, ent√£o, o suporte ao editor n√£o seria t√£o bom, ainda assim, APIStar era a melhor op√ß√£o dispon√≠vel.

Ele obteve as melhores performances em testes na √©poca (somente batido por Starlette).

A princ√≠pio, ele n√£o tinha uma interface web com documenta√ß√£o autom√°tica da API, mas eu sabia que poderia adicionar o Swagger UI a ele.

Ele tinha um sistema de inje√ß√£o de depend√™ncia. Ele exigia pr√©-registro dos componentes, como outras ferramentas j√° discutidas acima. Mas ainda era um grande recurso.

Eu nunca fui capaz de usar ele num projeto inteiro, por n√£o ter integra√ß√£o de seguran√ßa, ent√£o, eu n√£o pude substituir todos os recursos que eu tinha com os geradores _full-stack_ baseados no Flask-apispec. Eu tive em minha gaveta de projetos a id√©ia de criar um _pull request_ adicionando essa funcionalidade.

Mas ent√£o, o foco do projeto mudou.

Ele n√£o era mais um framework web API, como o criador precisava focar no Starlette.

Agora APIStar √© um conjunto de ferramentas para validar especifica√ß√µes OpenAPI, n√£o um framework web.

/// info

APIStar foi criado por Tom Christie. O mesmo cara que criou:

* Django REST Framework
* Starlette (no qual **FastAPI** √© baseado)
* Uvicorn (usado por Starlette e **FastAPI**)

///

/// check | **FastAPI** inspirado para

Existir.

A id√©ia de declarar m√∫ltiplas coisas (valida√ß√£o de dados, serializa√ß√£o e documenta√ß√£o) com os mesmos tipos Python, que ao mesmo tempo fornecesse grande suporte ao editor, era algo que eu considerava uma brilhante id√©ia.

E ap√≥s procurar por um logo tempo por um framework similar e testar muitas alternativas diferentes, APIStar foi a melhor op√ß√£o dispon√≠vel.

Ent√£o APIStar parou de existir como um servidor e Starlette foi criado, e foi uma nova melhor funda√ß√£o para tal sistema. Essa foi a inspira√ß√£o final para construir **FastAPI**.

Eu considero **FastAPI** um "sucessor espiritual" para o APIStar, evoluindo e melhorando os recursos, sistema de tipagem e outras partes, baseado na aprendizagem de todas essas ferramentas acima.

///

## Usados por **FastAPI**

### <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a>

Pydantic √© uma biblioteca para definir valida√ß√£o de dados, serializa√ß√£o e documenta√ß√£o (usando JSON Schema) baseado nos Python _type hints_.

Isso faz dele extremamente intuitivo.

Ele √© compar√°vel ao Marshmallow. Embora ele seja mais r√°pido que Marshmallow em testes de performance. E ele √© baseado nos mesmos Python _type hints_, o suporte ao editor √© √≥timo.

/// check | **FastAPI** usa isso para

Controlar toda a valida√ß√£o de dados, serializa√ß√£o de dados e modelo de documenta√ß√£o autom√°tica (baseado no JSON Schema).

**FastAPI** ent√£o pega dados do JSON Schema e coloca eles no OpenAPI, √† parte de todas as outras coisas que ele faz.

///

### <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a>

Starlette √© um framework/caixa de ferramentas <abbr title="O novo padr√£o para constru√ß√£o de Python web ass√≠ncrono">ASGI</abbr> peso leve, o que √© ideal para construir servi√ßos ass√≠ncronos de alta performance.

Ele √© muito simples e intuitivo. √â projetado para ser extens√≠vel facilmente, e ter componentes modulares.

Ele tem:

* Performance seriamente impressionante.
* Suporte a WebSocket.
* Suporte a GraphQL.
* Tarefas de processamento interno por tr√°s dos panos.
* Eventos de inicializa√ß√£o e encerramento.
* Cliente de testes constru√≠do com HTTPX.
* Respostas CORS, GZip, Arquivos Est√°ticos, Streaming.
* Suporte para Sess√£o e Cookie.
* 100% coberto por testes.
* C√≥digo base 100% anotado com tipagem.
* Depend√™ncias complexas Zero.

Starlette √© atualmente o mais r√°pido framework Python testado. Somente ultrapassado pelo Uvicorn, que n√£o √© um framework, mas um servidor.

Starlette fornece toda a funcionalidade b√°sica de um microframework web.

Mas ele n√£o fornece valida√ß√£o de dados autom√°tica, serializa√ß√£o e documenta√ß√£o.

Essa √© uma das principais coisas que **FastAPI** adiciona no topo, tudo baseado em Python _type hints_ (usando Pydantic). Isso, mais o sistema de inje√ß√£o de depend√™ncia, utilidades de seguran√ßa, gera√ß√£o de _schema_ OpenAPI, etc.

/// note | Detalhes T√©cnicos

ASGI √© um novo "padr√£o" sendo desenvolvido pelos membros do time central do Django. Ele ainda n√£o est√° como "Padr√£o Python" (PEP), embora eles estejam em processo de fazer isso.

No entanto, ele j√° est√° sendo utilizado como "padr√£o" por diversas ferramentas. Isso melhora enormemente a interoperabilidade, como voc√™ poderia trocar Uvicorn por qualquer outro servidor ASGI (como Daphne ou Hypercorn), ou voc√™ poderia adicionar ferramentas compat√≠veis com ASGI, como `python-socketio`.

///

/// check | **FastAPI** usa isso para

Controlar todas as partes web centrais. Adiciona recursos no topo.

A classe `FastAPI` em si herda `Starlette`.

Ent√£o, qualquer coisa que voc√™ faz com Starlette, voc√™ pode fazer diretamente com **FastAPI**, pois ele √© basicamente um Starlette com ester√≥ides.

///

### <a href="https://www.uvicorn.org/" class="external-link" target="_blank">Uvicorn</a>

Uvicorn √© um servidor ASGI peso leve, constru√≠do com uvloop e httptools.

Ele n√£o √© um framework web, mas sim um servidor. Por exemplo, ele n√£o fornece ferramentas para roteamento por rotas. Isso √© algo que um framework como Starlette (ou **FastAPI**) poderia fornecer por cima.

Ele √© o servidor recomendado para Starlette e **FastAPI**.

/// check | **FastAPI** recomenda isso para

O principal servidor web para rodar aplica√ß√µes **FastAPI**.

Voc√™ pode combinar ele com o Gunicorn, para ter um servidor multi-processos ass√≠ncrono.

Verifique mais detalhes na se√ß√£o [Deployment](deployment/index.md){.internal-link target=_blank}.

///

## Performance e velocidade

Para entender, comparar e ver a diferen√ßa entre Uvicorn, Starlette e FastAPI, verifique a se√ß√£o sobre [Benchmarks](benchmarks.md){.internal-link target=_blank}.


================================================
File: /docs/pt/docs/async.md
================================================
# Concorr√™ncia e async / await

Detalhes sobre a sintaxe `async def` para *fun√ß√µes de opera√ß√£o de rota* e alguns conceitos de c√≥digo ass√≠ncrono, concorr√™ncia e paralelismo.

## Com pressa?

<abbr title="muito longo; n√£o li"><strong>TL;DR:</strong></abbr>

Se voc√™ estiver utilizando bibliotecas de terceiros que dizem para voc√™ chamar as fun√ß√µes com `await`, como:

```Python
results = await some_library()
```

Ent√£o, declare sua *fun√ß√£o de opera√ß√£o de rota* com `async def` como:

```Python hl_lines="2"
@app.get('/')
async def read_results():
    results = await some_library()
    return results
```

/// note

Voc√™ s√≥ pode usar `await` dentro de fun√ß√µes criadas com `async def`.

///

---

Se voc√™ est√° usando biblioteca de terceiros que se comunica com alguma coisa (um banco de dados, uma API, sistema de arquivos etc) e n√£o tem suporte para utilizar `await` (esse √© atualmente o caso para a maioria das bibliotecas de banco de dados), ent√£o declare suas *fun√ß√µes de opera√ß√£o de rota* normalmente, com apenas `def`, como:

```Python hl_lines="2"
@app.get('/')
def results():
    results = some_library()
    return results
```

---

Se sua aplica√ß√£o (de alguma forma) n√£o tem que se comunicar com nada mais e tem que esperar que o respondam, use `async def`.

---

Se voc√™ simplesmente n√£o sabe, use apenas `def`.

---

**Note**: Voc√™ pode misturar `def` e `async def` nas suas *fun√ß√µes de opera√ß√£o de rota* tanto quanto necess√°rio e definir cada fun√ß√£o usando a melhor op√ß√£o para voc√™. FastAPI ir√° fazer a coisa certa com elas.

De qualquer forma, em ambos os casos acima, FastAPI ir√° trabalhar assincronamente e ser extremamente r√°pido.

Seguindo os passos acima, ele ser√° capaz de fazer algumas otimiza√ß√µes de performance.

## Detalhes T√©cnicos

Vers√µes modernas de Python tem suporte para **"c√≥digo ass√≠ncrono"** usando algo chamado **"corrotinas"**, com sintaxe **`async` e `await`**.

Vamos ver aquela frase por partes na se√ß√£o abaixo:

* **C√≥digo ass√≠ncrono**
* **`async` e `await`**
* **Corrotinas**

## C√≥digo ass√≠ncrono

C√≥digo ass√≠ncrono apenas significa que a linguagem üí¨ tem um jeito de dizer para o computador / programa ü§ñ que em certo ponto, ele ü§ñ ter√° que esperar por *algo* para finalizar em outro lugar. Vamos dizer que esse *algo* seja chamado "arquivo lento" üìù.

Ent√£o, durante esse tempo, o computador pode ir e fazer outro trabalho, enquanto o "arquivo lento" üìù termine.

Ent√£o o computador / programa ü§ñ ir√° voltar toda hora que tiver uma chance porqu√™ ele ainda est√° esperando o "arquivo lento", ou ele ü§ñ nunca ir√° terminar todo o trabalho que tem at√© esse ponto. E ele ü§ñ ir√° ver se alguma das tarefas que estava esperando j√° terminaram, fazendo o que quer que tinham que fazer.

Depois, ele ü§ñ pega a primeira tarefa para finalizar (vamos dizer, nosso "arquivo lento" üìù) e continua o que ele tem que fazer com isso.

Esse "esperar por algo" normalmente se refere a opera√ß√µes <abbr title="Entrada e Sa√≠da">I/O</abbr> que s√£o relativamente "lentas" (comparadas a velocidade do processador e da mem√≥ria RAM), como esperar por:

* dados do cliente para serem enviados atrav√©s da rede
* dados enviados pelo seu programa para serem recebidos pelo clente atrav√©s da rede
* conte√∫do de um arquivo no disco pra ser lido pelo sistema e entregar ao seu programa
* conte√∫do que seu programa deu ao sistema para ser escrito no disco
* uma opera√ß√£o remota API
* uma opera√ß√£o no banco de dados para finalizar
* uma solicita√ß√£o no banco de dados esperando o retorno do resultado
* etc.

Enquanto o tempo de execu√ß√£o √© consumido mais pela espera das opera√ß√µes <abbr title="Entrada e Sa√≠da">I/O</abbr>, essas opera√ß√µes s√£o chamadas de opera√ß√µes "limitadas por I/O".

Isso √© chamado de "ass√≠ncrono" porqu√™ o computador / programa n√£o tem que ser "sincronizado" com a tarefa lenta, esperando pelo exato momento que a tarefa finalize, enquanto n√£o faz nada, para ser capaz de pegar o resultado da tarefa e dar continuidade ao trabalho.

Ao inv√©s disso, sendo um sistema "ass√≠ncrono", uma vez finalizada, a tarefa pode esperar um pouco (alguns microssegundos) para que o computador / programa finalize o que quer que esteja fazendo,e ent√£o volte para pegar o resultado e continue trabalhando com ele.

Para "s√≠ncrono" (contr√°rio de "ass√≠ncrono") tamb√©m √© utilizado o termo "sequencial", porqu√™ o computador / programa segue todos os passos, na sequ√™ncia, antes de trocar para uma tarefa diferente, mesmo se alguns passos envolvam esperar.

### Concorr√™ncia e hamb√∫rgueres

Essa id√©ia de c√≥digo **ass√≠ncrono** descrito acima √© algo √†s vezes chamado de **"concorr√™ncia"**. E √© diferente de **"paralelismo"**.

**Concorr√™ncia** e **paralelismo** ambos s√£o relacionados a "diferentes coisas acontecendo mais ou menos ao mesmo tempo".

Mas os detalhes entre *concorr√™ncia* e *paralelismo* s√£o bem diferentes.

Para ver essa diferen√ßa, imagine a seguinte hist√≥ria sobre hamb√∫rgueres:

### Hamb√∫rgueres concorrentes

Voc√™ vai com seu _crush_ :heart_eyes: na lanchonete, fica na fila enquanto o caixa pega os pedidos das pessoas na sua frente.

Ent√£o chega a sua vez, voc√™ pede dois saborosos hamb√∫rgueres para voc√™ e seu _crush_ :heart_eyes:.

Voc√™ paga.

O caixa diz alguma coisa para o cara na cozinha para que ele tenha que preparar seus hamb√∫rgueres (mesmo embora ele esteja preparando os lanches dos outros clientes).

O caixa te entrega seu n√∫mero de chamada.

Enquanto voc√™ espera, voc√™ vai com seu _crush_ :heart_eyes: e pega uma mesa, senta e conversa com seu _crush_ :heart_eyes: por um bom tempo (como seus hamb√∫rgueres s√£o muito saborosos, leva um tempo para serem preparados).

Enquanto voc√™ est√° sentado na mesa com seu _crush_ :heart_eyes:, esperando os hamb√∫rgueres, voc√™ pode gastar o tempo admirando como lindo, maravilhoso e esperto √© seu _crush_ :heart_eyes:.

Enquanto espera e conversa com seu _crush_ :heart_eyes:, de tempos em tempos, voc√™ verifica o n√∫mero de chamada exibido no balc√£o para ver se j√° √© sua vez.

Ent√£o a certo ponto, √© finalmente sua vez. Voc√™ vai no balc√£o, pega seus hamb√∫rgueres e volta para a mesa.

Voc√™ e seu _crush_ :heart_eyes: comem os hamb√∫rgueres e aproveitam o tempo.

---

Imagine que voc√™ seja o computador  / programa nessa hist√≥ria.

Enquanto voc√™ est√° na fila, tranquilo, esperando por sua vez, n√£o est√° fazendo nada "produtivo". Mas a fila √© r√°pida porqu√™ o caixa s√≥ est√° pegando os pedidos, ent√£o est√° tudo bem.

Ent√£o, quando √© sua vez, voc√™ faz o trabalho "produtivo" de verdade, voc√™ processa o menu, decide o que quer, pega a escolha de seu _crush_ :heart_eyes:, paga, verifica se entregou o valor correto em dinheiro ou cart√£o de cr√©dito, verifica se foi cobrado corretamente, verifica se seu pedido est√° correto etc.

Mas ent√£o, embora voc√™ ainda n√£o tenha os hamb√∫rgueres, seu trabalho no caixa est√° "pausado", porqu√™ voc√™ tem que esperar seus hamb√∫rgueres estarem prontos.

Mas enquanto voc√™ se afasta do balc√£o e senta na mesa com o n√∫mero da sua chamada, voc√™ pode trocar sua aten√ß√£o para seu _crush_ :heart_eyes:, e "trabalhar" nisso. Ent√£o voc√™ est√° novamente fazendo algo muito "produtivo", como flertar com seu _crush_ :heart_eyes:.

Ent√£o o caixa diz que "seus hamb√∫rgueres est√£o prontos" colocando seu n√∫mero no balc√£o, mas voc√™ n√£o corre que nem um maluco imediatamente quando o n√∫mero exibido √© o seu. Voc√™ sabe que ningu√©m ir√° roubar seus hamb√∫rgueres porqu√™ voc√™ tem o n√∫mero de chamada, e os outros tem os n√∫meros deles.

Ent√£o voc√™ espera que seu _crush_ :heart_eyes: termine a hist√≥ria que estava contando (terminar o trabalho atual / tarefa sendo processada), sorri gentilmente e diz que voc√™ est√° indo buscar os hamb√∫rgueres.

Ent√£o voc√™ vai no balc√£o, para a tarefa inicial que agora est√° finalizada, pega os hamb√∫rgueres, e leva para a mesa. Isso finaliza esse passo / tarefa da intera√ß√£o com o balc√£o. Agora √© criada uma nova tarefa, "comer hamb√∫rgueres", mas a tarefa anterior, "pegar os hamb√∫rgueres" j√° est√° finalizada.

### Hamb√∫rgueres paralelos

Voc√™ vai com seu _crush_ :heart_eyes: em uma lanchonete paralela.

Voc√™ fica na fila enquanto alguns (vamos dizer 8) caixas pegam os pedidos das pessoas na sua frente.

Todo mundo antes de voc√™ est√° esperando pelos hamb√∫rgueres estarem prontos antes de deixar o caixa porqu√™ cada um dos 8 caixas vai e prepara o hamb√∫rguer antes de pegar o pr√≥ximo pedido.

Ent√£o √© finalmente sua vez, e pede 2 hamb√∫rgueres muito saborosos para voc√™ e seu _crush_ :heart_eyes:.

Voc√™ paga.

O caixa vai para a cozinha.

Voc√™ espera, na frente do balc√£o, para que ningu√©m pegue seus hamb√∫rgueres antes de voc√™, j√° que n√£o tem n√∫meros de chamadas.

Enquanto voc√™ e seu _crush_ :heart_eyes: est√£o ocupados n√£o permitindo que ningu√©m passe a frente e pegue seus hamb√∫rgueres assim que estiverem prontos, voc√™ n√£o pode dar aten√ß√£o ao seu _crush_ :heart_eyes:.

Isso √© trabalho "s√≠ncrono", voc√™ est√° "sincronizado" com o caixa / cozinheiro. Voc√™ tem que esperar e estar l√° no exato momento que o caixa / cozinheiro terminar os hamb√∫rgueres e d√°-los a voc√™, ou ent√£o, outro algu√©m pode peg√°-los.

Ent√£o seu caixa / cozinheiro finalmente volta com seus hamb√∫rgueres, depois de um longo tempo esperando por eles em frente ao balc√£o.

Voc√™ pega seus hamb√∫rgueres e vai para a mesa com seu _crush_ :heart_eyes:.

Voc√™s comem os hamb√∫rgueres, e o trabalho est√° terminado.

N√£o houve muita conversa ou flerte j√° que a maior parte do tempo foi gasto esperando os lanches na frente do balc√£o.

---

Nesse cen√°rio dos hamb√∫rgueres paralelos, voc√™ √© um computador / programa com dois processadores (voc√™ e seu _crush_ :heart_eyes:), ambos esperando e dedicando a aten√ß√£o de estar "esperando no balc√£o" por um bom tempo.

A lanchonete paralela tem 8 processadores (caixas / cozinheiros). Enquanto a lanchonete dos hamb√∫rgueres concorrentes tinham apenas 2 (um caixa e um cozinheiro).

Ainda assim, a √∫ltima experi√™ncia n√£o foi a melhor.

---

Essa poderia ser a hist√≥ria paralela equivalente aos hamb√∫rgueres.

Para um exemplo "mais real", imagine um banco.

At√© recentemente, a maioria dos bancos tinha muitos caixas e uma grande fila.

Todos os caixas fazendo todo o trabalho, um cliente ap√≥s o outro.

E voc√™ tinha que esperar na fila por um longo tempo ou poderia perder a vez.

Voc√™ provavelmente n√£o gostaria de levar seu _crush_ :heart_eyes: com voc√™ para um rolezinho no banco.

### Conclus√£o dos hamb√∫rgueres

Nesse cen√°rio dos "hamb√∫rgueres com seu _crush_ :heart_eyes:", como tem muita espera, faz mais sentido ter um sistema concorrente.

Esse √© o caso da maioria das aplica√ß√µes web.

Geralmente s√£o muitos usu√°rios, e seu servidor est√° esperando pelas suas conex√µes n√£o t√£o boas para enviar as requisi√ß√µes.

E ent√£o esperando novamente pelas respostas voltarem.

Essa "espera" √© medida em microssegundos, e ainda assim, somando tudo, √© um monte de espera no final.

Por isso que faz muito mais sentido utilizar c√≥digo ass√≠ncrono para APIs web.

A maioria dos frameworks Python existentes mais populares (incluindo Flask e Django) foram criados antes que os novos recursos ass√≠ncronos existissem em Python. Ent√£o, os meios que eles podem ser colocados em produ√ß√£o para suportar execu√ß√£o paralela mais a forma antiga de execu√ß√£o ass√≠ncrona n√£o s√£o t√£o poderosos quanto as novas capacidades.

Mesmo embora a especifica√ß√£o principal para web ass√≠ncrono em Python (ASGI) foi desenvolvida no Django, para adicionar suporte para WebSockets.

Esse tipo de assincronicidade √© o que fez NodeJS popular (embora NodeJS n√£o seja paralelo) e que essa seja a for√ßa do Go como uma linguagem de programa.

E esse √© o mesmo n√≠vel de performance que voc√™ tem com o **FastAPI**.

E como voc√™ pode ter paralelismo e sincronicidade ao mesmo tempo, voc√™ tem uma maior performance do que a maioria dos frameworks NodeJS testados e lado a lado com Go, que √© uma linguagem compilada pr√≥xima ao C <a href="https://www.techempower.com/benchmarks/#section=data-r17&hw=ph&test=query&l=zijmkf-1" class="external-link" target="_blank">(tudo gra√ßas ao Starlette)</a>.

### Concorr√™ncia √© melhor que paralelismo?

N√£o! Essa n√£o √© a moral da hist√≥ria.

Concorr√™ncia √© diferente de paralelismo. E √© melhor em cen√°rios **espec√≠ficos** que envolvam um monte de espera. Por isso, geralmente √© muito melhor do que paralelismo para desenvolvimento de aplica√ß√µes web. Mas n√£o para tudo.

Ent√£o, para equilibrar tudo, imagine a seguinte historinha:

> Voc√™ tem que limpar uma grande casa suja.

*Sim, essa √© toda a hist√≥ria*.

---

N√£o h√° espera em lugar algum, apenas um monte de trabalho para ser feito, em m√∫ltiplos c√¥modos da casa.

Voc√™ poderia ter chamadas como no exemplo dos hamb√∫rgueres, primeiro a sala de estar, ent√£o a cozinha, mas voc√™ n√£o est√° esperando por nada, apenas limpar e limpar, as chamadas n√£o afetariam em nada.

Levaria o mesmo tempo para finalizar com ou sem chamadas (concorr√™ncia) e voc√™ teria feito o mesmo tanto de trabalho.

Mas nesse caso, se voc√™ trouxesse os 8 ex-caixas / cozinheiros / agora-faxineiros, e cada um deles (mais voc√™) pudessem dividir a casa para limp√°-la, voc√™s fariam toda a limpeza em **paralelo**, com a ajuda extra, e terminariam muito mais cedo.

Nesse cen√°rio, cada um dos faxineiros (incluindo voc√™) poderia ser um processador, fazendo a sua parte do trabalho.

E a maior parte do tempo de execu√ß√£o √© tomada por trabalho (ao inv√©s de ficar esperando), e o trabalho em um computador √© feito pela <abbr title="Unidade de Processamento Central">CPU</abbr>, que podem gerar problemas que s√£o chamados de "limite de CPU".

---

Exemplos comuns de limite de CPU s√£o coisas que exigem processamento matem√°tico complexo.

Por exemplo:

* **Processamento de √°udio** ou **imagem**
* **Vis√£o do Computador**: uma imagem √© composta por milh√µes de pixels, cada pixel tem 3 valores (cores, processamento que normalmente exige alguma computa√ß√£o em todos esses pixels ao mesmo tempo)

* **Machine Learning**: Normalmente exige muita multiplica√ß√£o de matrizes e vetores. Pense numa grande folha de papel com n√∫meros e multiplicando todos eles juntos e ao mesmo tempo.

* **Deep Learning**: Esse √© um subcampo do Machine Learning, ent√£o o mesmo se aplica. A diferen√ßa √© que n√£o h√° apenas uma grande folha de papel com n√∫meros para multiplicar, mas um grande conjunto de folhas de papel, e em muitos casos, voc√™ utiliza um processador especial para construir e/ou usar modelos.

### Concorr√™ncia + Paralelismo: Web + Machine learning

Com **FastAPI** voc√™ pode levar a vantagem da concorr√™ncia que √© muito comum para desenvolvimento web (o mesmo atrativo de NodeJS).

Mas voc√™ tamb√©m pode explorar os benef√≠cios do paralelismo e multiprocessamento (tendo m√∫ltiplos processadores rodando em paralelo) para trabalhos pesados que geram **limite de CPU** como aqueles em sistemas de Machine Learning.

Isso, mais o simples fato que Python √© a principal linguagem para **Data Science**, Machine Learning e especialmente Deep Learning, faz do FastAPI uma √≥tima escolha para APIs web e aplica√ß√µes com Data Science / Machine Learning (entre muitas outras).

Para ver como alcan√ßar esse paralelismo em produ√ß√£o veja a se√ß√£o sobre [Deployment](deployment/index.md){.internal-link target=_blank}.

## `async` e `await`

Vers√µes modernas do Python tem um modo muito intuitivo para definir c√≥digo ass√≠ncrono. Isso faz parecer normal o c√≥digo "sequencial" e fazer o "esperar" para voc√™ nos momentos certos.

Quando tem uma opera√ß√£o que exigir√° espera antes de dar os resultados e tem suporte para esses recursos Python, voc√™ pode escrever assim:

```Python
burgers = await get_burgers(2)
```

A chave aqui √© o `await`. Ele diz ao Python que ele tem que esperar por `get_burgers(2)` para finalizar suas coisas antes de armazenar os resultados em `burgers`. Com isso, o Python saber√° que ele pode ir e fazer outras coisas nesse meio tempo (como receber outra requisi√ß√£o).

Para o `await` funcionar, tem que estar dentro de uma fun√ß√£o que suporte essa assincronicidade. Para fazer isso, apenas declare a fun√ß√£o com `async def`:

```Python hl_lines="1"
async def get_burgers(number: int):
    # Fazer alguma coisa ass√≠ncrona para criar os hamb√∫rgueres
    return burgers
```

...ao inv√©s de `def`:

```Python hl_lines="2"
# Isso n√£o √© ass√≠ncrono
def get_sequential_burgers(number: int):
    # Faz alguma coisa sequencial para criar os hamb√∫rgueres
    return burgers
```

Com `async def`, o Python sabe que, dentro dessa fun√ß√£o, tem que estar ciente das express√µes `await`, e que isso pode "pausar" a execu√ß√£o dessa fun√ß√£o, e poder√° fazer outra coisa antes de voltar.

Quando voc√™ quiser chamar uma fun√ß√£o `async def`, voc√™ tem que "esperar". Ent√£o, isso n√£o funcionar√°:

```Python
# Isso n√£o ir√° funcionar, porqu√™ get_burgers foi definido com: async def
burgers = get_burgers(2)
```

---

Ent√£o, se voc√™ est√° usando uma biblioteca que diz que voc√™ pode cham√°-la com `await`, voc√™ precisa criar as *fun√ß√µes de opera√ß√£o de rota* com `async def`, como em:

```Python hl_lines="2 3"
@app.get('/burgers')
async def read_burgers():
    burgers = await get_burgers(2)
    return burgers
```

### Mais detalhes t√©cnicos

Voc√™ deve ter observado que `await` pode ser usado somente dentro de fun√ß√µes definidas com `async def`.

Mas ao mesmo tempo, fun√ß√µes definidas com `async def` tem que ser aguardadas. Ent√£o, fun√ß√µes com `async def` pdem ser chamadas somente dentro de fun√ß√µes definidas com `async def` tamb√©m.

Ent√£o, sobre o ovo e a galinha, como voc√™ chama a primeira fun√ß√£o async?

Se voc√™ estivar trabalhando com **FastAPI** n√£o ter√° que se preocupar com isso, porqu√™ essa "primeira" fun√ß√£o ser√° a sua *fun√ß√£o de opera√ß√£o de rota*, e o FastAPI saber√° como fazer a coisa certa.

Mas se voc√™ quiser usar `async` / `await` sem FastAPI, <a href="https://docs.python.org/3/library/asyncio-task.html#coroutine" class="external-link" target="_blank">verifique a documenta√ß√£o oficial Python</a>.

### Outras formas de c√≥digo ass√≠ncrono

Esse estilo de usar `async` e `await` √© relativamente novo na linguagem.

Mas ele faz o trabalho com c√≥digo ass√≠ncrono muito mais f√°cil.

Essa mesma sintaxe (ou quase a mesma) foi tamb√©m inclu√≠da recentemente em vers√µes modernas do JavaScript (no navegador e NodeJS).

Mas antes disso, controlar c√≥digo ass√≠ncrono era bem mais complexo e dif√≠cil.

Nas vers√µes anteriores do Python, voc√™ poderia utilizar threads ou <a href="http://www.gevent.org/" class="external-link" target="_blank">Gevent</a>. Mas o c√≥digo √© um pouco mais complexo de entender, debugar, e pensar sobre.

Nas vers√µes anteriores do NodeJS / Navegador JavaScript, voc√™ poderia utilizar "callbacks". O que leva ao  <a href="http://callbackhell.com/" class="external-link" target="_blank">inferno do callback</a>.

## Corrotinas

**Corrotina** √© apenas um jeito bonitinho para a coisa que √© retornada de uma fun√ß√£o `async def`. O Python sabe que √© uma fun√ß√£o que pode come√ßar e terminar em algum ponto, mas que pode ser pausada internamente tamb√©m, sempre que tiver um `await` dentro dela.

Mas toda essa funcionalidade de c√≥digo ass√≠ncrono com `async` e `await` √© muitas vezes resumida como "corrotina". √â compar√°vel ao principal recurso chave do Go, a "Gorotina".

## Conclus√£o

Vamos ver a mesma frase com o conte√∫do cima:

> Vers√µes modernas do Python tem suporte para **"c√≥digo ass√≠ncrono"** usando algo chamado **"corrotinas"**, com sintaxe **`async` e `await`**.

Isso pode fazer mais sentido agora.

Tudo isso √© o que deixa o FastAPI poderoso (atrav√©s do Starlette) e que o faz ter uma performance impressionante.

## Detalhes muito t√©cnicos

/// warning

Voc√™ pode provavelmente pular isso.

Esses s√£o detalhes muito t√©cnicos de como **FastAPI** funciona por baixo do cap√¥.

Se voc√™ tem algum conhecimento t√©cnico (corrotinas, threads, blocking etc) e est√° curioso sobre como o FastAPI controla o `async def` vs normal `def`, v√° em frente.

///

### Fun√ß√µes de opera√ß√£o de rota

Quando voc√™ declara uma *fun√ß√£o de opera√ß√£o de rota* com `def` normal ao inv√©s de `async def`, ela √© rodada em uma threadpool externa que ent√£o √© aguardada, ao inv√©s de ser chamada diretamente (ela poderia bloquear o servidor).

Se voc√™ est√° chegando de outro framework ass√≠ncrono que n√£o faz o trabalho descrito acima e voc√™ est√° acostumado a definir triviais *fun√ß√µes de opera√ß√£o de rota* com simples `def` para ter um m√≠nimo ganho de performance (cerca de 100 nanosegundos), por favor observe que no **FastAPI** o efeito pode ser bem o oposto. Nesses casos, √© melhor usar `async def` a menos que suas *fun√ß√µes de opera√ß√£o de rota* utilizem c√≥digo que performem bloqueamento <abbr title="Input/Output: disco lendo ou escrevendo, comunica√ß√µes de rede.">IO</abbr>.

Ainda, em ambas as situa√ß√µes, as chances s√£o que o **FastAPI** ser√° [ainda mais r√°pido](index.md#performance){.internal-link target=_blank} do que (ou ao menos compar√°vel a) seus frameworks antecessores.

### Depend√™ncias

O mesmo se aplica para as depend√™ncias. Se uma depend√™ncia tem as fun√ß√µes com padr√£o `def` ao inv√©s de `async def`, ela √© rodada no threadpool externo.

### Sub-depend√™ncias

Voc√™ pode ter m√∫ltiplas depend√™ncias e sub-depend√™ncias exigindo uma a outra (como par√¢metros de defini√ß√µes de fun√ß√µes), algumas delas podem ser criadas com `async def` e algumas com `def` normal. Isso ainda poderia funcionar, e aquelas criadas com `def` podem ser chamadas em uma thread externa ao inv√©s de serem "aguardadas".

### Outras fun√ß√µes de utilidade

Qualquer outra fun√ß√£o de utilidade que voc√™ chame diretamente pode ser criada com `def` normal ou `async def` e o FastAPI n√£o ir√° afetar o modo como voc√™ a chama.

Isso est√° em contraste √†s fun√ß√µes que o FastAPI chama para voc√™: *fun√ß√µes de opera√ß√£o de rota* e depend√™ncias.

Se sua fun√ß√£o de utilidade √© uma fun√ß√£o normal com `def`, ela ser√° chamada diretamente (como voc√™ a escreve no c√≥digo), n√£o em uma threadpool, se a fun√ß√£o √© criada com `async def` ent√£o voc√™ deve esperar por essa fun√ß√£o quando voc√™ cham√°-la no seu c√≥digo.

---

Novamente, esses s√£o detalhes muito t√©cnicos que provavelmente possam ser √∫teis caso voc√™ esteja procurando por eles.

Caso contr√°rio, voc√™ deve ficar bem com as dicas da se√ß√£o acima: <a href="#in-a-hurry">Com pressa?</a>.


================================================
File: /docs/pt/docs/benchmarks.md
================================================
# Compara√ß√µes

As compara√ß√µes independentes da TechEmpower mostram as aplica√ß√µes **FastAPI** rodando com Uvicorn como <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">um dos _frameworks_ Python mais r√°pidos dispon√≠veis</a>, somente atr√°s dos pr√≥prios Starlette e Uvicorn (utilizados internamente pelo FastAPI). (*)

Mas quando se checa _benchmarks_ e compara√ß√µes voc√™ deveria ter o seguinte em mente.

## Compara√ß√µes e velocidade

Ao verificar os _benchmarks_, √© comum observar algumas ferramentas de diferentes tipos comparadas como equivalentes.

Especificamente, observa-se Uvicorn, Starlette e FastAPI comparados juntos (entre muitas outras ferramentas).

Quanto mais simples o problema resolvido pela ferramenta, melhor a performance que ela ter√°. E a maioria dos _benchmarks_ n√£o testam as caracter√≠sticas adicionais fornecidas pela ferramenta.

A hierarquia segue assim:

* **Uvicorn**: um servidor ASGI
    * **Starlette**: (utiliza Uvicorn) um _microframework web_
        * **FastAPI**: (utiliza Starlette) um _microframework_ de API com v√°rios recursos adicionais para constru√ß√£o de APIs, com valida√ß√£o de dados, etc.

* **Uvicorn**:
    * Ter√° a melhor performance, j√° que ele n√£o tem muito c√≥digo extra al√©m do servidor em si.
    * Voc√™ n√£o conseguiria escrever uma aplica√ß√£o em Uvicorn diretamente. Isso significa que seu c√≥digo deveria conter, mais ou menos, todo o c√≥digo fornecido pelo Starlette (ou **FastAPI**). E se voc√™ fizesse isso, sua aplica√ß√£o final poderia ter a mesma sobrecarga que utilizar um _framework_ que minimiza o c√≥digo e _bugs_ da sua aplica√ß√£o.
    * Se voc√™ quer fazer compara√ß√µes com o Uvicorn, compare com Daphne, Hypercorn, uWSGI, etc. Servidores de Aplica√ß√£o.
* **Starlette**:
    * Ter√° a melhor performance, depois do Uvicorn. De fato, Starlette utiliza Uvicorn para rodar. Ent√£o, ele provavelmente ser√° "mais lento" que Uvicorn por ter que executar mais c√≥digo.
    * Mas ele fornece a voc√™ as ferramentas para construir aplica√ß√µes _web_ simples, com roteamento baseado em caminhos, etc.
    * Se voc√™ quer fazer compara√ß√µes com o Starlette, compare com Sanic, Flask, Django, etc. _Frameworks Web_ (ou _microframeworks_).
* **FastAPI**:
    * Do mesmo modo que Starlette utiliza Uvicorn e n√£o pode ser mais r√°pido que ele, **FastAPI** utiliza o Starlette, ent√£o n√£o tem como ser mais r√°pido do que o Starlette.
    * FastAPI fornece mais recursos acima do Starlette. Recursos que voc√™ quase sempre precisar√° quando construir APIs, como valida√ß√£o de dados e serializa√ß√£o. E utilizando eles, voc√™ ter√° uma documenta√ß√£o autom√°tica de gra√ßa (a documenta√ß√£o autom√°tica nem sequer adiciona peso para rodar as aplica√ß√µes, ela √© gerada na inicializa√ß√£o).
    * Se voc√™ nunca utilizou FastAPI mas utilizou diretamente o Starlette (ou outra ferramenta, como Sanic, Flask, Responder, etc) voc√™ teria que implementar toda valida√ß√£o de dados e serializa√ß√£o por conta. Ent√£o, sua aplica√ß√£o final poderia ainda ter a mesma sobrecarga como se fosse desenvolvida com FastAPI. Em muitos casos, a valida√ß√£o de dados e serializa√ß√£o √© o maior peda√ßo de c√≥digo escrito em aplica√ß√µes.
    * Ent√£o, ao utilizar o FastAPI voc√™ estar√° economizando tempo de desenvolvimento, evitar√° _bugs_, linhas de c√≥digo, e voc√™ provavelmente ter√° a mesma performance (ou melhor) do que n√£o utiliz√°-lo (j√° que voc√™ teria que implementar tudo isso em seu c√≥digo).
    * Se voc√™ quer fazer compara√ß√µes com o FastAPI, compare com um _framework_  (ou conjunto de ferramentas) para aplica√ß√µes _web_ que forne√ßa valida√ß√£o de dados, serializa√ß√£o e documenta√ß√£o, como Flask-apispec, NestJS, Molten, etc. _Frameworks_ com valida√ß√£o de dados autom√°tica, serializa√ß√£o e documenta√ß√£o integradas.


================================================
File: /docs/pt/docs/environment-variables.md
================================================
# Vari√°veis de Ambiente

/// tip | Dica

Se voc√™ j√° sabe o que s√£o "vari√°veis de ambiente" e como us√°-las, pode pular esta se√ß√£o.

///

Uma vari√°vel de ambiente (tamb√©m conhecida como "**env var**") √© uma vari√°vel que existe **fora** do c√≥digo Python, no **sistema operacional**, e pode ser lida pelo seu c√≥digo Python (ou por outros programas tamb√©m).

Vari√°veis de ambiente podem ser √∫teis para lidar com **configura√ß√µes** do aplicativo, como parte da **instala√ß√£o** do Python, etc.

## Criar e Usar Vari√°veis de Ambiente

Voc√™ pode **criar** e usar vari√°veis de ambiente no **shell (terminal)**, sem precisar do Python:

//// tab | Linux, macOS, Windows Bash

<div class="termy">

```console
// Voc√™ pode criar uma vari√°vel de ambiente MY_NAME com
$ export MY_NAME="Wade Wilson"

// Ent√£o voc√™ pode us√°-la com outros programas, como
$ echo "Hello $MY_NAME"

Hello Wade Wilson
```

</div>

////

//// tab | Windows PowerShell

<div class="termy">

```console
// Criar uma vari√°vel de ambiente MY_NAME
$ $Env:MY_NAME = "Wade Wilson"

// Us√°-la com outros programas, como
$ echo "Hello $Env:MY_NAME"

Hello Wade Wilson
```

</div>

////

## Ler Vari√°veis de Ambiente no Python

Voc√™ tamb√©m pode criar vari√°veis de ambiente **fora** do Python, no terminal (ou com qualquer outro m√©todo) e depois **l√™-las no Python**.

Por exemplo, voc√™ poderia ter um arquivo `main.py` com:

```Python hl_lines="3"
import os

name = os.getenv("MY_NAME", "World")
print(f"Hello {name} from Python")
```

/// tip | Dica

O segundo argumento para <a href="https://docs.python.org/3.8/library/os.html#os.getenv" class="external-link" target="_blank">`os.getenv()`</a> √© o valor padr√£o a ser retornado.

Se n√£o for fornecido, √© `None` por padr√£o, Aqui fornecemos `"World"` como o valor padr√£o a ser usado.

///

Ent√£o voc√™ poderia chamar esse programa Python:

//// tab | Linux, macOS, Windows Bash

<div class="termy">

```console
// Aqui ainda n√£o definimos a vari√°vel de ambiente
$ python main.py

// Como n√£o definimos a vari√°vel de ambiente, obtemos o valor padr√£o

Hello World from Python

// Mas se criarmos uma vari√°vel de ambiente primeiro
$ export MY_NAME="Wade Wilson"

// E ent√£o chamar o programa novamente
$ python main.py

// Agora ele pode ler a vari√°vel de ambiente

Hello Wade Wilson from Python
```

</div>

////

//// tab | Windows PowerShell

<div class="termy">

```console
// Aqui ainda n√£o definimos a vari√°vel de ambiente
$ python main.py

// Como n√£o definimos a vari√°vel de ambiente, obtemos o valor padr√£o

Hello World from Python

// Mas se criarmos uma vari√°vel de ambiente primeiro
$ $Env:MY_NAME = "Wade Wilson"

// E ent√£o chamar o programa novamente
$ python main.py

// Agora ele pode ler a vari√°vel de ambiente

Hello Wade Wilson from Python
```

</div>

////

Como as vari√°veis de ambiente podem ser definidas fora do c√≥digo, mas podem ser lidas pelo c√≥digo e n√£o precisam ser armazenadas (com vers√£o no `git`) com o restante dos arquivos, √© comum us√°-las para configura√ß√µes ou **defini√ß√µes**.

Voc√™ tamb√©m pode criar uma vari√°vel de ambiente apenas para uma **invoca√ß√£o espec√≠fica do programa**, que s√≥ est√° dispon√≠vel para aquele programa e apenas pela dura√ß√£o dele.

Para fazer isso, crie-a na mesma linha, antes do pr√≥prio programa:

<div class="termy">

```console
// Criar uma vari√°vel de ambiente MY_NAME para esta chamada de programa
$ MY_NAME="Wade Wilson" python main.py

// Agora ele pode ler a vari√°vel de ambiente

Hello Wade Wilson from Python

// A vari√°vel de ambiente n√£o existe mais depois
$ python main.py

Hello World from Python
```

</div>

/// tip | Dica

Voc√™ pode ler mais sobre isso em <a href="https://12factor.net/config" class="external-link" target="_blank">The Twelve-Factor App: Config</a>.

///

## Tipos e Valida√ß√£o

Essas vari√°veis de ambiente s√≥ podem lidar com **strings de texto**, pois s√£o externas ao Python e precisam ser compat√≠veis com outros programas e com o resto do sistema (e at√© mesmo com diferentes sistemas operacionais, como Linux, Windows, macOS).

Isso significa que **qualquer valor** lido em Python de uma vari√°vel de ambiente **ser√° uma `str`**, e qualquer convers√£o para um tipo diferente ou qualquer valida√ß√£o precisa ser feita no c√≥digo.

Voc√™ aprender√° mais sobre como usar vari√°veis de ambiente para lidar com **configura√ß√µes do aplicativo** no [Guia do Usu√°rio Avan√ßado - Configura√ß√µes e Vari√°veis de Ambiente](./advanced/settings.md){.internal-link target=_blank}.

## Vari√°vel de Ambiente `PATH`

Existe uma vari√°vel de ambiente **especial** chamada **`PATH`** que √© usada pelos sistemas operacionais (Linux, macOS, Windows) para encontrar programas para executar.

O valor da vari√°vel `PATH` √© uma longa string composta por diret√≥rios separados por dois pontos `:` no Linux e macOS, e por ponto e v√≠rgula `;` no Windows.

Por exemplo, a vari√°vel de ambiente `PATH` poderia ter esta apar√™ncia:

//// tab | Linux, macOS

```plaintext
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
```

Isso significa que o sistema deve procurar programas nos diret√≥rios:

* `/usr/local/bin`
* `/usr/bin`
* `/bin`
* `/usr/sbin`
* `/sbin`

////

//// tab | Windows

```plaintext
C:\Program Files\Python312\Scripts;C:\Program Files\Python312;C:\Windows\System32
```

Isso significa que o sistema deve procurar programas nos diret√≥rios:

* `C:\Program Files\Python312\Scripts`
* `C:\Program Files\Python312`
* `C:\Windows\System32`

////

Quando voc√™ digita um **comando** no terminal, o sistema operacional **procura** o programa em **cada um dos diret√≥rios** listados na vari√°vel de ambiente `PATH`.

Por exemplo, quando voc√™ digita `python` no terminal, o sistema operacional procura um programa chamado `python` no **primeiro diret√≥rio** dessa lista.

Se ele o encontrar, ent√£o ele o **usar√°**. Caso contr√°rio, ele continua procurando nos **outros diret√≥rios**.

### Instalando o Python e Atualizando o `PATH`

Durante a instala√ß√£o do Python, voc√™ pode ser questionado sobre a atualiza√ß√£o da vari√°vel de ambiente `PATH`.

//// tab | Linux, macOS

Vamos supor que voc√™ instale o Python e ele fique em um diret√≥rio `/opt/custompython/bin`.

Se voc√™ concordar em atualizar a vari√°vel de ambiente `PATH`, o instalador adicionar√° `/opt/custompython/bin` para a vari√°vel de ambiente `PATH`.

Poderia parecer assim:

```plaintext
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/custompython/bin
```

Dessa forma, ao digitar `python` no terminal, o sistema encontrar√° o programa Python em `/opt/custompython/bin` (√∫ltimo diret√≥rio) e o utilizar√°.

////

//// tab | Windows

Digamos que voc√™ instala o Python e ele acaba em um diret√≥rio `C:\opt\custompython\bin`.

Se voc√™ disser sim para atualizar a vari√°vel de ambiente `PATH`, o instalador adicionar√° `C:\opt\custompython\bin` √† vari√°vel de ambiente `PATH`.

```plaintext
C:\Program Files\Python312\Scripts;C:\Program Files\Python312;C:\Windows\System32;C:\opt\custompython\bin
```

Dessa forma, quando voc√™ digitar `python` no terminal, o sistema encontrar√° o programa Python em `C:\opt\custompython\bin` (o √∫ltimo diret√≥rio) e o utilizar√°.

////

Ent√£o, se voc√™ digitar:

<div class="termy">

```console
$ python
```

</div>

//// tab | Linux, macOS

O sistema **encontrar√°** o programa `python` em `/opt/custompython/bin` e o executar√°.

Seria aproximadamente equivalente a digitar:

<div class="termy">

```console
$ /opt/custompython/bin/python
```

</div>

////

//// tab | Windows

O sistema **encontrar√°** o programa `python` em `C:\opt\custompython\bin\python` e o executar√°.

Seria aproximadamente equivalente a digitar:

<div class="termy">

```console
$ C:\opt\custompython\bin\python
```

</div>

////

Essas informa√ß√µes ser√£o √∫teis ao aprender sobre [Ambientes Virtuais](virtual-environments.md){.internal-link target=_blank}.

## Conclus√£o

Com isso, voc√™ deve ter uma compreens√£o b√°sica do que s√£o **vari√°veis ‚Äã‚Äãde ambiente** e como us√°-las em Python.

Voc√™ tamb√©m pode ler mais sobre elas na <a href="https://en.wikipedia.org/wiki/Environment_variable" class="external-link" target="_blank">Wikipedia para Vari√°veis ‚Äã‚Äãde Ambiente</a>.

Em muitos casos, n√£o √© muito √≥bvio como as vari√°veis ‚Äã‚Äãde ambiente seriam √∫teis e aplic√°veis ‚Äã‚Äãimediatamente. Mas elas continuam aparecendo em muitos cen√°rios diferentes quando voc√™ est√° desenvolvendo, ent√£o √© bom saber sobre elas.

Por exemplo, voc√™ precisar√° dessas informa√ß√µes na pr√≥xima se√ß√£o, sobre [Ambientes Virtuais](virtual-environments.md).


================================================
File: /docs/pt/docs/fastapi-cli.md
================================================
# FastAPI CLI

**FastAPI CLI** √© uma interface por linha de comando do `fastapi` que voc√™ pode usar para rodar sua app FastAPI, gerenciar seu projeto FastAPI e mais.

Quando voc√™ instala o FastAPI (ex.: com `pip install fastapi`), isso inclui um pacote chamado `fastapi-cli`. Esse pacote disponibiliza o comando `fastapi` no terminal.

Para rodar seu app FastAPI em desenvolvimento, voc√™ pode usar o comando `fastapi dev`:

<div class="termy">

```console
$ <font color="#4E9A06">fastapi</font> dev <u style="text-decoration-style:single">main.py</u>
<font color="#3465A4">INFO    </font> Using path <font color="#3465A4">main.py</font>
<font color="#3465A4">INFO    </font> Resolved absolute path <font color="#75507B">/home/user/code/awesomeapp/</font><font color="#AD7FA8">main.py</font>
<font color="#3465A4">INFO    </font> Searching for package file structure from directories with <font color="#3465A4">__init__.py</font> files
<font color="#3465A4">INFO    </font> Importing from <font color="#75507B">/home/user/code/</font><font color="#AD7FA8">awesomeapp</font>

 ‚ï≠‚îÄ <font color="#8AE234"><b>Python module file</b></font> ‚îÄ‚ïÆ
 ‚îÇ                      ‚îÇ
 ‚îÇ  üêç main.py          ‚îÇ
 ‚îÇ                      ‚îÇ
 ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ

<font color="#3465A4">INFO    </font> Importing module <font color="#4E9A06">main</font>
<font color="#3465A4">INFO    </font> Found importable FastAPI app

 ‚ï≠‚îÄ <font color="#8AE234"><b>Importable FastAPI app</b></font> ‚îÄ‚ïÆ
 ‚îÇ                          ‚îÇ
 ‚îÇ  <span style="background-color:#272822"><font color="#FF4689">from</font></span><span style="background-color:#272822"><font color="#F8F8F2"> main </font></span><span style="background-color:#272822"><font color="#FF4689">import</font></span><span style="background-color:#272822"><font color="#F8F8F2"> app</font></span><span style="background-color:#272822">  </span>  ‚îÇ
 ‚îÇ                          ‚îÇ
 ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ

<font color="#3465A4">INFO    </font> Using import string <font color="#8AE234"><b>main:app</b></font>

 <span style="background-color:#C4A000"><font color="#2E3436">‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ FastAPI CLI - Development mode ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ                                                     ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ  Serving at: http://127.0.0.1:8000                  ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ                                                     ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ  API docs: http://127.0.0.1:8000/docs               ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ                                                     ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ  Running in development mode, for production use:   ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ                                                     ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ  </font></span><span style="background-color:#C4A000"><font color="#555753"><b>fastapi run</b></font></span><span style="background-color:#C4A000"><font color="#2E3436">                                        ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚îÇ                                                     ‚îÇ</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ</font></span>

<font color="#4E9A06">INFO</font>:     Will watch for changes in these directories: [&apos;/home/user/code/awesomeapp&apos;]
<font color="#4E9A06">INFO</font>:     Uvicorn running on <b>http://127.0.0.1:8000</b> (Press CTRL+C to quit)
<font color="#4E9A06">INFO</font>:     Started reloader process [<font color="#34E2E2"><b>2265862</b></font>] using <font color="#34E2E2"><b>WatchFiles</b></font>
<font color="#4E9A06">INFO</font>:     Started server process [<font color="#06989A">2265873</font>]
<font color="#4E9A06">INFO</font>:     Waiting for application startup.
<font color="#4E9A06">INFO</font>:     Application startup complete.
```

</div>

Aquele commando por linha de programa chamado `fastapi` √© o **FastAPI CLI**.

O FastAPI CLI recebe o caminho do seu programa Python, detecta automaticamente a vari√°vel com o FastAPI (comumente nomeada `app`) e como import√°-la, e ent√£o a serve.

Para produ√ß√£o voc√™ usaria `fastapi run` no lugar. üöÄ

Internamente, **FastAPI CLI** usa <a href="https://www.uvicorn.org" class="external-link" target="_blank">Uvicorn</a>, um servidor ASGI de alta performance e pronto para produ√ß√£o. üòé

## `fastapi dev`

Quando voc√™ roda `fastapi dev`, isso vai executar em modo de desenvolvimento.

Por padr√£o, teremos o **recarregamento autom√°tico** ativo, ent√£o o programa ir√° recarregar o servidor automaticamente toda vez que voc√™ fizer mudan√ßas no seu c√≥digo. Isso usa muitos recursos e pode ser menos est√°vel. Voc√™ deve apenas us√°-lo em modo de desenvolvimento.

O servidor de desenvolvimento escutar√° no endere√ßo de IP `127.0.0.1` por padr√£o, este √© o IP que sua m√°quina usa para se comunicar com ela mesma (`localhost`).

## `fastapi run`

Quando voc√™ rodar `fastapi run`, isso executar√° em modo de produ√ß√£o por padr√£o.

Este modo ter√° **recarregamento autom√°tico desativado** por padr√£o.

Isso ir√° escutar no endere√ßo de IP `0.0.0.0`, o que significa todos os endere√ßos IP dispon√≠veis, dessa forma o programa estar√° acess√≠vel publicamente para qualquer um que consiga se comunicar com a m√°quina. Isso √© como voc√™ normalmente roda em produ√ß√£o em um cont√™iner, por exemplo.

Em muitos casos voc√™ pode ter (e deveria ter) um "proxy de sa√≠da" tratando HTTPS no topo, isso depender√° de como voc√™ far√° o deploy da sua aplica√ß√£o, seu provedor pode fazer isso pra voc√™ ou talvez seja necess√°rio fazer voc√™ mesmo.

/// tip

Voc√™ pode aprender mais sobre em [documenta√ß√£o de deployment](deployment/index.md){.internal-link target=_blank}.

///


================================================
File: /docs/pt/docs/features.md
================================================
# Recursos

## Recursos do FastAPI

**FastAPI** te oferece o seguinte:

### Baseado em padr√µes abertos

* <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank"><strong>OpenAPI</strong></a> para cria√ß√£o de APIs, incluindo declara√ß√µes de <abbr title="tamb√©m conhecido como m√©todos HTTP, como POST, GET, PUT, DELETE">opera√ß√µes</abbr> de <abbr title="tamb√©m conhecido como: endpoints, routes">caminho</abbr>, par√¢metros, requisi√ß√µes de corpo, seguran√ßa etc.
* Modelo de documenta√ß√£o autom√°tica com <a href="https://json-schema.org/" class="external-link" target="_blank"><strong>JSON Schema</strong></a> (j√° que o OpenAPI em si √© baseado no JSON Schema).
* Projetado em cima desses padr√µes ap√≥s um estudo meticuloso, em vez de uma reflex√£o breve.
* Isso tamb√©m permite o uso de **gera√ß√£o de c√≥digo do cliente** automaticamente em muitas linguagens.

### Documenta√ß√£o autom√°tica

Documenta√ß√£o interativa da API e navega√ß√£o _web_ da interface de usu√°rio. Como o _framework_ √© baseado no OpenAPI, h√° v√°rias op√ß√µes, 2 inclu√≠das por padr√£o.

* <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank"><strong>Swagger UI</strong></a>, com navega√ß√£o interativa, chame e teste sua API diretamente do navegador.

![Intera√ß√£o Swagger UI](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* Documenta√ß√£o alternativa da API com <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank"><strong>ReDoc</strong></a>.

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### Apenas Python moderno

Tudo √© baseado no padr√£o das declara√ß√µes de **tipos do Python 3.8** (gra√ßas ao Pydantic). Nenhuma sintaxe nova para aprender. Apenas o padr√£o moderno do Python.

Se voc√™ precisa refrescar a mem√≥ria rapidamente sobre como usar tipos do Python (mesmo que voc√™ n√£o use o FastAPI), confira esse r√°pido tutorial: [Tipos do Python](python-types.md){.internal-link target=_blank}.

Voc√™ escreve Python padr√£o com tipos:

```Python
from datetime import date

from pydantic import BaseModel

# Declare uma vari√°vel como str
# e obtenha suporte do editor dentro da fun√ß√£o
def main(user_id: str):
    return user_id


# Um modelo do Pydantic
class User(BaseModel):
    id: int
    name: str
    joined: date
```

Que ent√£o pode ser usado como:

```Python
my_user: User = User(id=3, name="John Doe", joined="2018-07-19")

second_user_data = {
    "id": 4,
    "name": "Mary",
    "joined": "2018-11-30",
}

my_second_user: User = User(**second_user_data)
```

/// info

`**second_user_data` quer dizer:

Passe as chaves e valores do dicion√°rio `second_user_data` diretamente como argumentos chave-valor, equivalente a: `User(id=4, name="Mary", joined="2018-11-30")`

///

### Suporte de editores

Todo o _framework_ foi projetado para ser f√°cil e intuitivo de usar, todas as decis√µes foram testadas em v√°rios editores antes do in√≠cio do desenvolvimento, para garantir a melhor experi√™ncia de desenvolvimento.

Na √∫ltima pesquisa do desenvolvedor Python ficou claro <a href="https://www.jetbrains.com/research/python-developers-survey-2017/#tools-and-features" class="external-link" target="_blank">que o recurso mais utilizado √© o "auto completar"</a>.

Todo o _framework_ **FastAPI** √© feito para satisfazer isso. Auto completa√ß√£o funciona em todos os lugares.

Voc√™ raramente precisar√° voltar √† documenta√ß√£o.

Aqui est√° como o editor poder√° te ajudar:

* no <a href="https://code.visualstudio.com/" class="external-link" target="_blank">Visual Studio Code</a>:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

* no <a href="https://www.jetbrains.com/pycharm/" class="external-link" target="_blank">PyCharm</a>:

![editor support](https://fastapi.tiangolo.com/img/pycharm-completion.png)

Voc√™ ter√° completa√ß√£o do seu c√≥digo que voc√™ poderia considerar imposs√≠vel antes. Como por exemplo, a chave `price` dentro do corpo JSON (que poderia ter sido aninhado) que vem de uma requisi√ß√£o.

Sem a necessidade de digitar nomes de chaves erroneamente, ir e voltar entre documenta√ß√µes, ou rolar pela p√°gina para descobrir se voc√™ utilizou `username` or `user_name`.

### Breve

H√° **padr√µes** sens√≠veis para tudo, com configura√ß√µes adicionais em todos os lugares. Todos os par√¢metros podem ser regulados para fazer o que voc√™ precisa e para definir a API que voc√™ necessita.

Por padr√£o, tudo **"simplesmente funciona"**.

### Valida√ß√£o

* Valida√ß√£o para a maioria dos (ou todos?) **tipos de dados** do Python, incluindo:
    * objetos JSON (`dict`).
    * arrays JSON (`list`), definindo tipos dos itens.
    * campos String (`str`), definindo tamanho m√≠nimo e m√°ximo.
    * Numbers (`int`, `float`) com valores m√≠nimos e m√°ximos, etc.

* Valida√ß√£o de tipos mais ex√≥ticos, como:
    * URL.
    * Email.
    * UUID.
    * ...e outros.

Toda a valida√ß√£o √© controlada pelo robusto e bem estabelecido **Pydantic**.

### Seguran√ßa e autentica√ß√£o

Seguran√ßa e autentica√ß√£o integradas. Sem nenhum compromisso com bancos de dados ou modelos de dados.

Todos os esquemas de seguran√ßas definidos no OpenAPI, incluindo:

* HTTP Basic.
* **OAuth2** (tamb√©m com **tokens JWT**). Confira o tutorial em [OAuth2 com JWT](tutorial/security/oauth2-jwt.md){.internal-link target=_blank}.
* Chaves de API em:
    * Headers.
    * par√¢metros da Query.
    * Cookies etc.

Al√©m disso, todos os recursos de seguran√ßas do Starlette (incluindo **cookies de sess√£o**).

Tudo constru√≠do como ferramentas e componentes reutiliz√°veis que s√£o f√°ceis de integrar com seus sistemas, armazenamento de dados, banco de dados relacionais e n√£o-relacionais etc.

### Inje√ß√£o de depend√™ncia

FastAPI inclui um sistema de <abbr title='tamb√©m conhecido como "components", "resources", "services", "providers"'><strong>inje√ß√£o de depend√™ncia</strong></abbr> extremamente f√°cil de usar, mas extremamente poderoso.

* Mesmo depend√™ncias podem ter depend√™ncias, criando uma hierarquia ou **"grafo" de depend√™ncias**.
* Tudo **automaticamente controlado** pelo _framework_.
* Todas as depend√™ncias podem pedir dados das requisi√ß√µes e **ampliar** as restri√ß√µes e documenta√ß√£o autom√°tica da **opera√ß√£o de caminho**.
* **Valida√ß√£o autom√°tica** mesmo para par√¢metros da *opera√ß√£o de caminho* definidos em depend√™ncias.
* Suporte para sistemas de autentica√ß√£o complexos, **conex√µes com banco de dados** etc.
* **Sem comprometer** os bancos de dados, _frontends_ etc. Mas f√°cil integra√ß√£o com todos eles.

### "Plug-ins" ilimitados

Ou, de outra forma, sem a necessidade deles, importe e use o c√≥digo que precisar.

Qualquer integra√ß√£o √© projetada para ser t√£o simples de usar (com depend√™ncias) que voc√™ pode criar um "plug-in" para suas aplica√ß√µes com 2 linhas de c√≥digo usando a mesma estrutura e sintaxe para as suas *opera√ß√µes de caminho*.

### Testado

* 100% <abbr title="A quantidade de c√≥digo que √© testada automaticamente">de cobertura de testes</abbr>.
* 100% do c√≥digo utiliza <abbr title="Type annotations do Python, com isso seu editor e ferramentas externas podem te dar um suporte melhor">type annotations</abbr>.
* Usado para aplica√ß√µes em produ√ß√£o.

## Recursos do Starlette

**FastAPI** √© totalmente compat√≠vel com (e baseado no) <a href="https://www.starlette.io/" class="external-link" target="_blank"><strong>Starlette</strong></a>. Ent√£o, qualquer c√≥digo adicional Starlette que voc√™ tiver, tamb√©m funcionar√°.

`FastAPI` √© na verdade uma sub-classe do `Starlette`. Ent√£o, se voc√™ j√° conhece ou usa Starlette, a maioria das funcionalidades se comportar√° da mesma forma.

Com **FastAPI**, voc√™ ter√° todos os recursos do **Starlette** (j√° que FastAPI √© apenas um Starlette com ester√≥ides):

* Desempenho realmente impressionante. √â <a href="https://github.com/encode/starlette#performance" class="external-link" target="_blank">um dos _frameworks_ Python dispon√≠veis mais r√°pidos, a par com o **NodeJS** e **Go**</a>.
* Suporte a **WebSocket**.
* Suporte a **GraphQL**.
* Tarefas em processo _background_.
* Eventos na inicializa√ß√£o e encerramento.
* Cliente de testes constru√≠do sobre HTTPX.
* Respostas em **CORS**, GZip, Static Files, Streaming.
* Suporte a **Session e Cookie**.
* 100% de cobertura de testes.
* 100% do c√≥digo utilizando _type annotations_.

## Recursos do Pydantic

**FastAPI** √© totalmente compat√≠vel com (e baseado no) <a href="https://docs.pydantic.dev/" class="external-link" target="_blank"><strong>Pydantic</strong></a>. Ent√£o, qualquer c√≥digo Pydantic adicional que voc√™ tiver, tamb√©m funcionar√°.

Incluindo bibliotecas externas tamb√©m baseadas no Pydantic, como <abbr title="Object-Relational Mapper">ORM</abbr>s e <abbr title="Object-Document Mapper">ODM</abbr>s para bancos de dados.

Isso tamb√©m significa que em muitos casos voc√™ poder√° passar o mesmo objeto que voc√™ receber de uma requisi√ß√£o **diretamente para o banco de dados**, j√° que tudo √© validado automaticamente.

O mesmo se aplica no sentido inverso, em muitos casos voc√™ poder√° simplesmente passar o objeto que voc√™ recebeu do banco de dados **diretamente para o cliente**.

Com **FastAPI** voc√™ ter√° todos os recursos do **Pydantic** (j√° que FastAPI utiliza o Pydantic para todo o controle dos dados):

* **Sem pegadinhas**:
    * Sem novas defini√ß√µes de esquema de micro-linguagem para aprender.
    * Se voc√™ conhece os tipos do Python, voc√™ sabe como usar o Pydantic.
* Vai bem com o/a seu/sua **<abbr title="Ambiente de Desenvolvimento Integrado, similar a um editor de c√≥digo">IDE</abbr>/<abbr title="Um programa que confere erros de c√≥digo">linter</abbr>/c√©rebro**:
    * Como as estruturas de dados do Pydantic s√£o apenas inst√¢ncias de classes que voc√™ define, a auto completa√ß√£o, _linting_, _mypy_ e a sua intui√ß√£o devem funcionar corretamente com seus dados validados.
* Valida **estruturas complexas**:
    * Use modelos hier√°rquicos do Pydantic, `List` e `Dict` do `typing` do Python, etc.
    * Validadores permitem que esquemas de dados complexos sejam limpos e facilmente definidos, conferidos e documentados como JSON Schema.
    * Voc√™ pode ter **JSONs aninhados** profundamente e t√™-los todos validados e anotados.
* **Extens√≠vel**:
    * Pydantic permite que tipos de dados personalizados sejam definidos ou voc√™ pode estender a valida√ß√£o com m√©todos em um modelo decorado com seu decorador de validador.
* 100% de cobertura de testes.


================================================
File: /docs/pt/docs/help-fastapi.md
================================================
# Ajuda FastAPI - Obter Ajuda

Voc√™ gosta do **FastAPI**?

Voc√™ gostaria de ajudar o FastAPI, outros us√°rios, e o autor?

Ou voc√™ gostaria de obter ajuda relacionada ao **FastAPI**??

Existem m√©todos muito simples de ajudar (A maioria das ajudas podem ser feitas com um ou dois cliques).

E tamb√©m existem v√°rios modos de se conseguir ajuda.

## Inscreva-se na newsletter

Voc√™ pode se inscrever (pouco frequente) [**FastAPI e amigos** newsletter](newsletter.md){.internal-link target=_blank} para receber atualiza√ß√µes:

* Not√≠cias sobre FastAPI e amigos üöÄ
* Tutoriais üìù
* Recursos ‚ú®
* Mudan√ßas de √∫ltima hora üö®
* Truques e dicas ‚úÖ

## Siga o FastAPI no twitter

<a href="https://twitter.com/fastapi" class="external-link" target="_blank">Siga @fastapi no **Twitter**</a> para receber as √∫ltimas not√≠cias sobre o **FastAPI**. üê¶

## Favorite o **FastAPI** no GitHub

Voc√™ pode "favoritar" o FastAPI no GitHub (clicando na estrela no canto superior direito): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. ‚≠êÔ∏è

Favoritando, outros usu√°rios poder√£o encontrar mais facilmente e ver√£o que j√° foi √∫til para muita gente.

## Acompanhe novos updates no repositorio do GitHub

Voc√™ pode "acompanhar" (watch) o FastAPI no GitHub (clicando no bot√£o com um "olho" no canto superior direito): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. üëÄ

Podendo selecionar apenas "Novos Updates".

Fazendo isto, ser√£o enviadas notifica√ß√µes (em seu email) sempre que tiver novos updates (uma nova vers√£o) com corre√ß√µes de bugs e novos recursos no **FastAPI**

## Conect-se com o autor

Voc√™ pode se conectar <a href="https://tiangolo.com" class="external-link" target="_blank">comigo (Sebasti√°n Ram√≠rez / `tiangolo`)</a>, o autor.

Voc√™ pode:

* <a href="https://github.com/tiangolo" class="external-link" target="_blank">Me siga no **GitHub**</a>.
    * Ver tamb√©m outros projetos Open Source criados por mim que podem te ajudar.
    * Me seguir para saber quando um novo projeto Open Source for criado.
* <a href="https://twitter.com/tiangolo" class="external-link" target="_blank">Me siga no **Twitter**</a>.
    * Me dizer o motivo pelo o qual voc√™ est√° usando o FastAPI(Adoro ouvir esse tipo de coment√°rio).
    * Saber quando eu soltar novos an√∫ncios ou novas ferramentas.
    * Tamb√©m √© possivel <a href="https://twitter.com/fastapi" class="external-link" target="_blank">seguir o @fastapi no Twitter</a> (uma conta aparte).
* <a href="https://www.linkedin.com/in/tiangolo/" class="external-link" target="_blank">Conect-se comigo no **Linkedin**</a>.
    * Saber quando eu fizer novos an√∫ncios ou novas ferramentas (apesar de que uso o twitter com mais frequ√™ncia ü§∑‚Äç‚ôÇ).
* Ler meus artigos (ou me seguir) no <a href="https://dev.to/tiangolo" class="external-link" target="_blank">**Dev.to**</a> ou no <a href="https://medium.com/@tiangolo" class="external-link" target="_blank">**Medium**</a>.
    * Ficar por dentro de novas ideias, artigos, e ferramentas criadas por mim.
    * Me siga para saber quando eu publicar algo novo.

## Tweete sobre **FastAPI**

<a href="https://twitter.com/compose/tweet?text=I'm loving @fastapi because... https://github.com/fastapi/fastapi" class="external-link" target="_blank">Tweete sobre o **FastAPI**</a> e compartilhe comigo e com os outros o porque de gostar do FastAPI. üéâ

Adoro ouvir sobre como o **FastAPI** √© usado, o que voc√™ gosta nele, em qual projeto/empresa est√° sendo usado, etc.

## Vote no FastAPI

* <a href="https://www.slant.co/options/34241/~fastapi-review" class="external-link" target="_blank">Vote no **FastAPI** no Slant</a>.
* <a href="https://alternativeto.net/software/fastapi/" class="external-link" target="_blank">Vote no **FastAPI** no AlternativeTo</a>.

## Responda perguntas no GitHub

Voc√™ pode acompanhar as <a href="https://github.com/fastapi/fastapi/issues" class="external-link" target="_blank">perguntas existentes</a> e tentar ajudar outros,            . ü§ì

Ajudando a responder as quest√µes de varias pessoas, voc√™ pode se tornar um [Expert em FastAPI](fastapi-people.md#especialistas){.internal-link target=_blank} oficial. üéâ

## Acompanhe o reposit√≥rio do GitHub

Voc√™ pode "acompanhar" (watch) o FastAPI no GitHub (clicando no "olho" no canto superior direito): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. üëÄ

Se voc√™ selecionar "Acompanhando" (Watching) em vez de "Apenas Lan√ßamentos" (Releases only) voc√™ receber√° notifica√ß√µes quando algu√©m tiver uma nova pergunta.

Assim podendo tentar ajudar a resolver essas quest√µes.

## Fa√ßa perguntas

√â poss√≠vel <a href="https://github.com/fastapi/fastapi/issues/new/choose" class="external-link" target="_blank">criar uma nova pergunta</a> no reposit√≥rio do GitHub, por exemplo:

* Fa√ßa uma **pergunta** ou pergunte sobre um **problema**.
* Sugira novos **recursos**.

**Nota**: Se voc√™ fizer uma pergunta, ent√£o eu gostaria de pedir que voc√™ tamb√©m ajude os outros com suas respectivas perguntas. üòâ

## Crie um Pull Request

√â poss√≠vel [contribuir](contributing.md){.internal-link target=_blank} no c√≥digo fonte fazendo Pull Requests, por exemplo:

* Para corrigir um erro de digita√ß√£o que voc√™ encontrou na documenta√ß√£o.
* Para compartilhar um artigo, video, ou podcast criados por voc√™ sobre o FastAPI <a href="https://github.com/fastapi/fastapi/edit/master/docs/en/data/external_links.yml" class="external-link" target="_blank">editando este arquivo</a>.
    * N√£o se esque√ßa de adicionar o link no come√ßo da se√ß√£o correspondente.
* Para ajudar [traduzir a documenta√ß√£o](contributing.md#traducoes){.internal-link target=_blank} para sua lingua.
    * Tamb√©m √© possivel revisar as tradu√ß√µes j√° existentes.
* Para propor novas se√ß√µes na documenta√ß√£o.
* Para corrigir um bug/quest√£o.
* Para adicionar um novo recurso.

## Entre no chat

Entre no üë• <a href="https://discord.gg/VQjSZaeJmf" class="external-link" target="_blank">server de conversa do Discord</a> üë• e conhe√ßa novas pessoas da comunidade
do FastAPI.

/// tip | Dica

Para perguntas, pergunte nas <a href="https://github.com/fastapi/fastapi/issues/new/choose" class="external-link" target="_blank">quest√µes do GitHub</a>, l√° tem um chance maior de voc√™ ser ajudado sobre o FastAPI [FastAPI Experts](fastapi-people.md#especialistas){.internal-link target=_blank}.

Use o chat apenas para outro tipo de assunto.

///

### N√£o fa√ßa perguntas no chat

Tenha em mente que os chats permitem uma "conversa mais livre", dessa forma √© muito f√°cil fazer perguntas que s√£o muito gen√©ricas e difice√≠s de responder, assim voc√™ pode acabar n√£o sendo respondido.

Nas quest√µes do GitHub o template ir√° te guiar para que voc√™ fa√ßa a sua pergunta de um jeito mais correto, fazendo com que voc√™ receba respostas mais completas, e at√© mesmo que voc√™ mesmo resolva o problema antes de perguntar. E no GitHub eu garanto que sempre irei responder todas as perguntas, mesmo que leve um tempo. Eu pessoalmente n√£o consigo fazer isso via chat. üòÖ

Conversas no chat n√£o s√£o t√£o f√°ceis de serem encontrados quanto no GitHub, ent√£o quest√µes e respostas podem se perder dentro da conversa. E apenas as que est√£o nas quest√µes do GitHub contam para voc√™ se tornar um [Expert em FastAPI](fastapi-people.md#especialistas){.internal-link target=_blank}, ent√£o voc√™ receber√° mais aten√ß√£o nas quest√µes do GitHub.

Por outro lado, existem milhares de usu√°rios no chat, ent√£o tem uma grande chance de voc√™ encontrar algu√©m para trocar uma id√©ia por l√° em qualquer hor√°rio. üòÑ

## Patrocine o autor

Voc√™ tamb√©m pode ajudar o autor financeiramente (eu) atrav√©s do <a href="https://github.com/sponsors/tiangolo" class="external-link" target="_blank">GitHub sponsors</a>.

L√° voc√™ pode me pagar um caf√©zinho ‚òïÔ∏è como agradecimento. üòÑ

E voc√™ tamb√©m pode se tornar um patrocinador Prata ou Ouro do FastAPI. üèÖüéâ

## Patrocine as ferramente que potencializam o FastAPI

Como voc√™ viu na documenta√ß√£o, o FastAPI se apoia em nos gigantes, Starlette e Pydantic.

Patrocine tamb√©m:

* <a href="https://github.com/sponsors/samuelcolvin" class="external-link" target="_blank">Samuel Colvin (Pydantic)</a>
* <a href="https://github.com/sponsors/encode" class="external-link" target="_blank">Encode (Starlette, Uvicorn)</a>

---

Muito Obrigado! üöÄ


================================================
File: /docs/pt/docs/history-design-future.md
================================================
# Hist√≥ria, Design e Futuro

H√° algum tempo, <a href="https://github.com/fastapi/fastapi/issues/3#issuecomment-454956920" class="external-link" target="_blank">um usu√°rio **FastAPI** perguntou</a>:

> Qual √© a hist√≥ria desse projeto? Parece que surgiu do nada e se tornou incr√≠vel em poucas semanas [...]

Aqui est√° um pouco dessa hist√≥ria.

## Alternativas

Eu tenho criado APIs com requisitos complexos por v√°rios anos (Aprendizado de M√°quina, sistemas distribu√≠dos, tarefas ass√≠ncronas, banco de dados NoSQL etc.), liderando v√°rios times de desenvolvedores.

Como parte disso, eu precisava investigar, testar e usar muitas alternativas.

A hist√≥ria do **FastAPI** √©, em grande parte, a hist√≥ria de seus predecessores.

Como dito na se√ß√£o [Alternativas](alternatives.md){.internal-link target=_blank}:

<blockquote markdown="1">

**FastAPI** n√£o existiria se n√£o pelo trabalho anterior de outros.

H√° muitas ferramentas criadas antes que ajudaram a inspirar sua cria√ß√£o.

Eu estive evitando a cria√ß√£o de um novo _framework_ por v√°rios anos. Primeiro tentei resolver todas as funcionalidades cobertas por **FastAPI** usando muitos _frameworks_, _plug-ins_ e ferramentas diferentes.

Mas em algum ponto, n√£o havia outra op√ß√£o sen√£o criar algo que oferecia todas as funcionalidades, aproveitando as melhores ideias de ferramentas anteriores, e combinando-as da melhor maneira poss√≠vel, usando funcionalidades da linguagem que nem estavam dispon√≠veis antes (_type hints_ do Python 3.6+).

</blockquote>

## Investiga√ß√£o

Ao usar todas as alternativas anteriores, eu tive a chance de aprender com todas elas, aproveitar ideias e combin√°-las da melhor maneira que encontrei para mim e para os times de desenvolvedores com os quais trabalhava.

Por exemplo, estava claro que idealmente ele deveria ser baseado nos _type hints_ padr√µes do Python.

Tamb√©m, a melhor abordagem era usar padr√µes j√° existentes.

Ent√£o, antes mesmo de come√ßar a codificar o **FastAPI**, eu investi v√°rios meses estudando as especifica√ß√µes do OpenAPI, JSON Schema, OAuth2 etc. Entendendo suas rela√ß√µes, sobreposi√ß√µes e diferen√ßas.

## Design

Eu ent√£o dediquei algum tempo projetando a "API" de desenvolvimento que eu queria como usu√°rio (como um desenvolvedor usando o FastAPI).

Eu testei v√°rias ideias nos editores Python mais populares: PyCharm, VS Code, e editores baseados no Jedi.

Pela √∫ltima <a href="https://www.jetbrains.com/research/python-developers-survey-2018/#development-tools" class="external-link" target="_blank">Pesquisa do Desenvolvedor Python</a>, isso cobre cerca de 80% dos usu√°rios.

Isso significa que o **FastAPI** foi testado especificamente com os editores usados por 80% dos desenvolvedores Python. Como a maioria dos outros editores tendem a funcionar de forma similar, todos os seus benef√≠cios devem funcionar para virtualmente todos os editores.

Dessa forma eu pude encontrar a melhor maneira de reduzir duplica√ß√£o de c√≥digo o m√°ximo poss√≠vel, ter completa√ß√£o de texto em todos os lugares, confer√™ncia de tipos e erros etc.

Tudo de uma forma que oferecesse a melhor experi√™ncia de desenvolvimento para todos os desenvolvedores.

## Requisitos

Ap√≥s testar v√°rias alternativas, eu decidi que usaria o <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">**Pydantic**</a> por suas vantagens.

Ent√£o eu contribu√≠ com ele, para deix√°-lo completamente de acordo com o JSON Schema, para dar suporte a diferentes maneiras de definir declara√ß√µes de restri√ß√µes, e melhorar o suporte a editores (confer√™ncias de tipos, auto completa√ß√µes) baseado nos testes em v√°rios editores.

Durante o desenvolvimento, eu tamb√©m contribu√≠ com o <a href="https://www.starlette.io/" class="external-link" target="_blank">**Starlette**</a>, outro requisito chave.

## Desenvolvimento

Quando comecei a criar o **FastAPI** de fato, a maior parte das pe√ßas j√° estavam encaixadas, o design estava definido, os requisitos e ferramentas j√° estavam prontos, e o conhecimento sobre os padr√µes e especifica√ß√µes estavam claros e frescos.

## Futuro

Nesse ponto, j√° est√° claro que o **FastAPI** com suas ideias est√° sendo √∫til para muitas pessoas.

Ele foi escolhido sobre outras alternativas anteriores por se adequar melhor em muitos casos.

Muitos desenvolvedores e times j√° dependem do **FastAPI** para seus projetos (incluindo eu e meu time).

Mas ainda h√° muitas melhorias e funcionalidades a vir.

**FastAPI** tem um grande futuro √† frente.

E [sua ajuda](help-fastapi.md){.internal-link target=_blank} √© muito bem-vinda.


================================================
File: /docs/pt/docs/index.md
================================================
# FastAPI

<style>
.md-content .md-typeset h1 { display: none; }
</style>

<p align="center">
  <a href="https://fastapi.tiangolo.com"><img src="https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png" alt="FastAPI"></a>
</p>
<p align="center">
    <em>Framework FastAPI, alta performance, f√°cil de aprender, f√°cil de codar, pronto para produ√ß√£o</em>
</p>
<p align="center">
<a href="https://github.com/fastapi/fastapi/actions?query=workflow%3ATest" target="_blank">
    <img src="https://github.com/fastapi/fastapi/workflows/Test/badge.svg" alt="Test">
</a>
<a href="https://codecov.io/gh/fastapi/fastapi" target="_blank">
    <img src="https://img.shields.io/codecov/c/github/fastapi/fastapi?color=%2334D058" alt="Coverage">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://img.shields.io/pypi/v/fastapi?color=%2334D058&label=pypi%20package" alt="Package version">
</a>
</p>

---

**Documenta√ß√£o**: <a href="https://fastapi.tiangolo.com" target="_blank">https://fastapi.tiangolo.com</a>

**C√≥digo fonte**: <a href="https://github.com/fastapi/fastapi" target="_blank">https://github.com/fastapi/fastapi</a>

---

FastAPI √© um moderno e r√°pido (alta performance) _framework web_ para constru√ß√£o de APIs com Python, baseado nos _type hints_ padr√µes do Python.

Os recursos chave s√£o:

* **R√°pido**: alta performance, equivalente a **NodeJS** e **Go** (gra√ßas ao Starlette e Pydantic). [Um dos frameworks mais r√°pidos dispon√≠veis](#performance).
* **R√°pido para codar**: Aumenta a velocidade para desenvolver recursos entre 200% a 300%. *
* **Poucos bugs**: Reduz cerca de 40% de erros induzidos por humanos (desenvolvedores). *
* **Intuitivo**: Grande suporte a _IDEs_. <abbr title="tamb√©m conhecido como _auto-complete_, _autocompletion_, _IntelliSense_">_Auto-Complete_</abbr> em todos os lugares. Menos tempo debugando.
* **F√°cil**: Projetado para ser f√°cil de aprender e usar. Menos tempo lendo documenta√ß√£o.
* **Enxuto**: Minimize duplica√ß√£o de c√≥digo. M√∫ltiplos recursos para cada declara√ß√£o de par√¢metro. Menos bugs.
* **Robusto**: Tenha c√≥digo pronto para produ√ß√£o. E com documenta√ß√£o interativa autom√°tica.
* **Baseado em padr√µes**: Baseado em (e totalmente compat√≠vel com) os padr√µes abertos para APIs: <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> (anteriormente conhecido como Swagger) e <a href="https://json-schema.org/" class="external-link" target="_blank">_JSON Schema_</a>.

<small>* estimativas baseadas em testes realizados com equipe interna de desenvolvimento, construindo aplica√ß√µes em produ√ß√£o.</small>

## Patrocinadores Ouro

<!-- sponsors -->

{% if sponsors %}
{% for sponsor in sponsors.gold -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor -%}
{%- for sponsor in sponsors.silver -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor %}
{% endif %}

<!-- /sponsors -->

<a href="https://fastapi.tiangolo.com/pt/fastapi-people/#patrocinadores" class="external-link" target="_blank">Outros patrocinadores</a>

## Opini√µes

"*[...] Estou usando **FastAPI** muito esses dias. [...] Estou na verdade planejando utilizar ele em todos os times de **servi√ßos _Machine Learning_ na Microsoft**. Alguns deles est√£o sendo integrados no _core_ do produto **Windows** e alguns produtos **Office**.*"

<div style="text-align: right; margin-right: 10%;">Kabir Khan - <strong>Microsoft</strong> <a href="https://github.com/fastapi/fastapi/pull/26" target="_blank"><small>(ref)</small></a></div>

---

"*Estou extremamente entusiasmado com o **FastAPI**. √â t√£o divertido!*"

<div style="text-align: right; margin-right: 10%;">Brian Okken - <strong><a href="https://pythonbytes.fm/episodes/show/123/time-to-right-the-py-wrongs?time_in_sec=855" target="_blank">Python Bytes</a> podcaster</strong> <a href="https://twitter.com/brianokken/status/1112220079972728832" target="_blank"><small>(ref)</small></a></div>

---

"*Honestamente, o que voc√™ construiu parece super s√≥lido e rebuscado. De muitas formas, eu queria que o **Hug** fosse assim - √© realmente inspirador ver algu√©m que construiu ele.*"

<div style="text-align: right; margin-right: 10%;">Timothy Crosley - <strong>criador do<a href="https://github.com/hugapi/hug" target="_blank">Hug</a></strong> <a href="https://news.ycombinator.com/item?id=19455465" target="_blank"><small>(ref)</small></a></div>

---

"*Se voc√™ est√° procurando aprender um **_framework_ moderno** para construir aplica√ß√µes _REST_, d√™ uma olhada no **FastAPI** [...] √â r√°pido, f√°cil de usar e f√°cil de aprender [...]*"

"*N√≥s trocamos nossas **APIs** por **FastAPI** [...] Acredito que voc√™s gostar√£o dele [...]*"

<div style="text-align: right; margin-right: 10%;">Ines Montani - Matthew Honnibal - <strong>fundadores da <a href="https://explosion.ai" target="_blank">Explosion AI</a> - criadores da <a href="https://spacy.io" target="_blank">spaCy</a></strong> <a href="https://twitter.com/_inesmontani/status/1144173225322143744" target="_blank"><small>(ref)</small></a> - <a href="https://twitter.com/honnibal/status/1144031421859655680" target="_blank"><small>(ref)</small></a></div>

---

"*N√≥s adotamos a biblioteca **FastAPI** para criar um servidor **REST** que possa ser chamado para obter **predi√ß√µes**. [para o Ludwig]*"

<div style="text-align: right; margin-right: 10%;">Piero Molino, Yaroslav Dudin e Sai Sumanth Miryala - <strong>Uber</strong> <a href="https://eng.uber.com/ludwig-v0-2/" target="_blank"><small>(ref)</small></a></div>

---

## **Typer**, o FastAPI das interfaces de linhas de comando

<a href="https://typer.tiangolo.com" target="_blank"><img src="https://typer.tiangolo.com/img/logo-margin/logo-margin-vector.svg" style="width: 20%;"></a>

Se voc√™ estiver construindo uma aplica√ß√£o <abbr title="Command Line Interface">_CLI_</abbr> para ser utilizada em um terminal ao inv√©s de uma aplica√ß√£o web, d√™ uma olhada no <a href="https://typer.tiangolo.com/" class="external-link" target="_blank">**Typer**</a>.

**Typer** √© o irm√£o menor do FastAPI. E seu prop√≥sito √© ser o **FastAPI das _CLIs_**. ‚å®Ô∏è üöÄ

## Requisitos

FastAPI est√° nos ombros de gigantes:

* <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> para as partes web.
* <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> para a parte de dados.

## Instala√ß√£o

<div class="termy">

```console
$ pip install fastapi

---> 100%
```

</div>

Voc√™ tamb√©m precisar√° de um servidor ASGI para produ√ß√£o, tal como <a href="https://www.uvicorn.org" class="external-link" target="_blank">Uvicorn</a> ou <a href="https://github.com/pgjones/hypercorn" class="external-link" target="_blank">Hypercorn</a>.

<div class="termy">

```console
$ pip install "uvicorn[standard]"

---> 100%
```

</div>

## Exemplo

### Crie

* Crie um arquivo `main.py` com:

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

<details markdown="1">
<summary>Ou use <code>async def</code>...</summary>

Se seu c√≥digo utiliza `async` / `await`, use `async def`:

```Python hl_lines="9  14"
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
async def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

**Nota**:

Se voc√™ n√£o sabe, verifique a se√ß√£o _"In a hurry?"_ sobre <a href="https://fastapi.tiangolo.com/async/#in-a-hurry" target="_blank">`async` e `await` nas docs</a>.

</details>

### Rode

Rode o servidor com:

<div class="termy">

```console
$ uvicorn main:app --reload

INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [28720]
INFO:     Started server process [28722]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

</div>

<details markdown="1">
<summary>Sobre o comando <code>uvicorn main:app --reload</code>...</summary>

O comando `uvicorn main:app` se refere a:

* `main`: o arquivo `main.py` (o "m√≥dulo" Python).
* `app`: o objeto criado dentro de `main.py` com a linha `app = FastAPI()`.
* `--reload`: faz o servidor recarregar ap√≥s mudan√ßas de c√≥digo. Somente fa√ßa isso para desenvolvimento.

</details>

### Verifique

Abra seu navegador em <a href="http://127.0.0.1:8000/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1:8000/items/5?q=somequery</a>.

Voc√™ ver√° a resposta JSON como:

```JSON
{"item_id": 5, "q": "somequery"}
```

Voc√™ acabou de criar uma API que:

* Recebe requisi√ß√µes HTTP nas _rotas_ `/` e `/items/{item_id}`.
* Ambas _rotas_ fazem <em>opera√ß√µes</em> `GET` (tamb√©m conhecido como _m√©todos_ HTTP).
* A _rota_ `/items/{item_id}` tem um _par√¢metro de rota_ `item_id` que deve ser um `int`.
* A _rota_ `/items/{item_id}` tem um _par√¢metro query_ `q` `str` opcional.

### Documenta√ß√£o Interativa da API

Agora v√° para <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

Voc√™ ver√° a documenta√ß√£o autom√°tica interativa da API (fornecida por <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### Documenta√ß√£o Alternativa da API

E agora, v√° para <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

Voc√™ ver√° a documenta√ß√£o autom√°tica alternativa (fornecida por <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## Evoluindo o Exemplo

Agora modifique o arquivo `main.py` para receber um corpo para uma requisi√ß√£o `PUT`.

Declare o corpo utilizando tipos padr√£o Python, gra√ßas ao Pydantic.

```Python hl_lines="4  9-12  25-27"
from typing import Union

from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()


class Item(BaseModel):
    name: str
    price: float
    is_offer: Union[bool] = None


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}


@app.put("/items/{item_id}")
def update_item(item_id: int, item: Item):
    return {"item_name": item.name, "item_id": item_id}
```

O servidor dever√° recarregar automaticamente (porqu√™ voc√™ adicionou `--reload` ao comando `uvicorn` acima).

### Evoluindo a Documenta√ß√£o Interativa da API

Agora v√° para <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

* A documenta√ß√£o interativa da API ser√° automaticamente atualizada, incluindo o novo corpo:

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* Clique no bot√£o "Try it out", ele permitir√° que voc√™ preencha os par√¢metros e interaja diretamente com a API:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-04-swagger-03.png)

* Ent√£o clique no bot√£o "Execute", a interface do usu√°rio ir√° se comunicar com a API, enviar os par√¢metros, pegar os resultados e mostr√°-los na tela:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-05-swagger-04.png)

### Evoluindo a Documenta√ß√£o Alternativa da API

E agora, v√° para <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

* A documenta√ß√£o alternativa tamb√©m ir√° refletir o novo par√¢metro da _query_ e o corpo:

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### Recapitulando

Resumindo, voc√™ declara **uma vez** os tipos dos par√¢metros, corpo etc. como par√¢metros de fun√ß√£o.

Voc√™ faz com tipos padr√£o do Python moderno.

Voc√™ n√£o ter√° que aprender uma nova sintaxe, m√©todos ou classes de uma biblioteca espec√≠fica etc.

Apenas **Python** padr√£o.

Por exemplo, para um `int`:

```Python
item_id: int
```

ou para um modelo mais complexo, `Item`:

```Python
item: Item
```

...e com essa √∫nica declara√ß√£o voc√™ tem:

* Suporte ao Editor, incluindo:
    * Completa√ß√£o.
    * Verifica√ß√£o de tipos.
* Valida√ß√£o de dados:
    * Erros autom√°ticos e claros quando o dado √© inv√°lido.
    * Valida√ß√£o at√© para objetos JSON profundamente aninhados.
* <abbr title="tamb√©m conhecido como: serialization, parsing, marshalling">Convers√£o</abbr> de dados de entrada: vindo da rede para dados e tipos Python. Consegue ler:
    * JSON.
    * Par√¢metros de rota.
    * Par√¢metros de _query_ .
    * _Cookies_.
    * Cabe√ßalhos.
    * Formul√°rios.
    * Arquivos.
* <abbr title="tamb√©m conhecido como: serialization, parsing, marshalling">Convers√£o</abbr> de dados de sa√≠da de tipos e dados Python para dados de rede (como JSON):
    * Converte tipos Python (`str`, `int`, `float`, `bool`, `list` etc).
    * Objetos `datetime`.
    * Objetos `UUID`.
    * Modelos de Banco de Dados.
    * ...e muito mais.
* Documenta√ß√£o interativa autom√°tica da API, incluindo 2 alternativas de interface de usu√°rio:
    * Swagger UI.
    * ReDoc.

---

Voltando ao c√≥digo do exemplo anterior, **FastAPI** ir√°:

* Validar que existe um `item_id` na rota para requisi√ß√µes `GET` e `PUT`.
* Validar que `item_id` √© do tipo `int` para requisi√ß√µes `GET` e `PUT`.
    * Se n√£o √© validado, o cliente ver√° um √∫til, claro erro.
* Verificar se existe um par√¢metro de _query_ opcional nomeado como `q` (como em `http://127.0.0.1:8000/items/foo?q=somequery`) para requisi√ß√µes `GET`.
    * Como o par√¢metro `q` √© declarado com `= None`, ele √© opcional.
    * Sem o `None` ele poderia ser obrigat√≥rio (como o corpo no caso de `PUT`).
* Para requisi√ß√µes `PUT` para `/items/{item_id}`, ler√° o corpo como JSON e:
    * Verifica que tem um atributo obrigat√≥rio `name` que deve ser `str`.
    * Verifica que tem um atributo obrigat√≥rio `price` que deve ser `float`.
    * Verifica que tem an atributo opcional `is_offer`, que deve ser `bool`, se presente.
    * Tudo isso tamb√©m funciona para objetos JSON profundamente aninhados.
* Converter de e para JSON automaticamente.
* Documentar tudo com OpenAPI, que poder√° ser usado por:
    * Sistemas de documenta√ß√£o interativos.
    * Sistemas de clientes de gera√ß√£o de c√≥digo autom√°ticos, para muitas linguagens.
* Fornecer diretamente 2 interfaces _web_ de documenta√ß√£o interativa.

---

N√≥s arranhamos apenas a superf√≠cie, mas voc√™ j√° tem id√©ia de como tudo funciona.

Experimente mudar a seguinte linha:

```Python
    return {"item_name": item.name, "item_id": item_id}
```

...de:

```Python
        ... "item_name": item.name ...
```

...para:

```Python
        ... "item_price": item.price ...
```

...e veja como seu editor ir√° auto-completar os atributos e saber√° os tipos:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

Para um exemplo mais completo incluindo mais recursos, veja <a href="https://fastapi.tiangolo.com/tutorial/">Tutorial - Guia do Usu√°rio</a>.

**Alerta de Spoiler**: o tutorial - guia do usu√°rio inclui:

* Declara√ß√£o de **par√¢metetros** de diferentes lugares como: **cabe√ßalhos**, **cookies**, **campos de formul√°rios** e **arquivos**.
* Como configurar **Limita√ß√µes de Valida√ß√£o** como `maximum_length` ou `regex`.
* Um poderoso e f√°cil de usar sistema de **<abbr title="tamb√©m conhecido como componentes, recursos, fornecedores, servi√ßos, injet√°veis">Inje√ß√£o de Depend√™ncia</abbr>**.
* Seguran√ßa e autentica√ß√£o, incluindo suporte para **OAuth2** com autentica√ß√£o **JWT tokens** e **HTTP Basic**.
* T√©cnicas mais avan√ßadas (mas igualmente f√°ceis) para declara√ß√£o de **modelos JSON profundamente aninhados** (gra√ßas ao Pydantic).
* Muitos recursos extras (gra√ßas ao Starlette) como:
    * **WebSockets**
    * **GraphQL**
    * testes extrememamente f√°ceis baseados em HTTPX e `pytest`
    * **CORS**
    * **Cookie Sessions**
    * ...e mais.

## Performance

Testes de performance da _Independent TechEmpower_ mostram aplica√ß√µes **FastAPI** rodando sob Uvicorn como <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">um dos _frameworks_ Python mais r√°pidos dispon√≠veis</a>, somente atr√°s de Starlette e Uvicorn (utilizados internamente pelo FastAPI). (*)

Para entender mais sobre performance, veja a se√ß√£o <a href="https://fastapi.tiangolo.com/benchmarks/" class="internal-link" target="_blank">Benchmarks</a>.

## Depend√™ncias opcionais

Usados por Pydantic:

* <a href="https://github.com/JoshData/python-email-validator" target="_blank"><code>email-validator</code></a> - para valida√ß√£o de email.

Usados por Starlette:

* <a href="https://www.python-httpx.org" target="_blank"><code>httpx</code></a> - Necess√°rio se voc√™ quiser utilizar o `TestClient`.
* <a href="https://jinja.palletsprojects.com" target="_blank"><code>jinja2</code></a> - Necess√°rio se voc√™ quiser utilizar a configura√ß√£o padr√£o de templates.
* <a href="https://github.com/Kludex/python-multipart" target="_blank"><code>python-multipart</code></a> - Necess√°rio se voc√™ quiser suporte com <abbr title="converte uma string que chega de uma requisi√ß√£o HTTP para dados Python">"parsing"</abbr> de formul√°rio, com `request.form()`.
* <a href="https://pythonhosted.org/itsdangerous/" target="_blank"><code>itsdangerous</code></a> - Necess√°rio para suporte a `SessionMiddleware`.
* <a href="https://pyyaml.org/wiki/PyYAMLDocumentation" target="_blank"><code>pyyaml</code></a> - Necess√°rio para suporte a `SchemaGenerator` da Starlette (voc√™ provavelmente n√£o precisar√° disso com o FastAPI).
* <a href="https://graphene-python.org/" target="_blank"><code>graphene</code></a> - Necess√°rio para suporte a `GraphQLApp`.

Usados por FastAPI / Starlette:

* <a href="https://www.uvicorn.org" target="_blank"><code>uvicorn</code></a> - para o servidor que carrega e serve sua aplica√ß√£o.
* <a href="https://github.com/ijl/orjson" target="_blank"><code>orjson</code></a> - Necess√°rio se voc√™ quer utilizar `ORJSONResponse`.
* <a href="https://github.com/esnme/ultrajson" target="_blank"><code>ujson</code></a> - Necess√°rio se voc√™ quer utilizar `UJSONResponse`.

Voc√™ pode instalar todas essas depend√™ncias com `pip install fastapi[all]`.

## Licen√ßa

Esse projeto √© licenciado sob os termos da licen√ßa MIT.


================================================
File: /docs/pt/docs/project-generation.md
================================================
# Gera√ß√£o de Projetos - Modelo

Voc√™ pode usar um gerador de projetos para come√ßar, por j√° incluir configura√ß√µes iniciais, seguran√ßa, banco de dados e os primeiros _endpoints_ API j√° feitos para voc√™.

Um gerador de projetos sempre ter√° uma pr√©-configura√ß√£o que voc√™ pode atualizar e adaptar para suas pr√≥prias necessidades, mas pode ser um bom ponto de partida para seu projeto.

## Full Stack FastAPI PostgreSQL

GitHub: <a href="https://github.com/tiangolo/full-stack-fastapi-postgresql" class="external-link" target="_blank">https://github.com/tiangolo/full-stack-fastapi-postgresql</a>

### Full Stack FastAPI PostgreSQL - Recursos

* Integra√ß√£o completa **Docker**.
* Modo de implanta√ß√£o Docker Swarm.
* Integra√ß√£o e otimiza√ß√£o **Docker Compose** para desenvolvimento local.
* **Pronto para Produ√ß√£o** com servidor _web_ usando Uvicorn e Gunicorn.
* _Backend_ <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">**FastAPI**</a> Python:
    * **R√°pido**: Alta performance, no n√≠vel de **NodeJS** e **Go** (gra√ßas ao Starlette e Pydantic).
    * **Intuitivo**: √ìtimo suporte de editor. <abbr title="tamb√©m conhecido como auto-complete, auto completa√ß√£o, IntelliSense">_Auto-Complete_</abbr> em todo lugar. Menos tempo _debugando_.
    * **F√°cil**: Projetado para ser f√°cil de usar e aprender. Menos tempo lendo documenta√ß√µes.
    * **Curto**: Minimize duplica√ß√£o de c√≥digo. M√∫ltiplos recursos para cada declara√ß√£o de par√¢metro.
    * **Robusto**: Tenha c√≥digo pronto para produ√ß√£o. Com documenta√ß√£o interativa autom√°tica.
    * **Baseado em Padr√µes**: Baseado em (e completamente compat√≠vel com) padr√µes abertos para APIs: <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> e <a href="http://json-schema.org/" class="external-link" target="_blank">JSON Schema</a>.
    * <a href="https://fastapi.tiangolo.com/features/" class="external-link" target="_blank">**Muitos outros recursos**</a> incluindo valida√ß√£o autom√°tica, serializa√ß√£o, documenta√ß√£o interativa, autentica√ß√£o com _tokens_ OAuth2 JWT etc.
* **Senha segura** _hashing_ por padr√£o.
* Autentica√ß√£o **Token JWT**.
* Modelos **SQLAlchemy** (independente de extens√µes Flask, para que eles possam ser usados com _workers_ Celery diretamente).
* Modelos b√°sicos para usu√°rios (modifique e remova conforme suas necessidades).
* Migra√ß√µes **Alembic**.
* **CORS** (_Cross Origin Resource Sharing_ - Compartilhamento de Recursos Entre Origens).
* _Worker_ **Celery** que pode importar e usar modelos e c√≥digos do resto do _backend_ seletivamente.
* Testes _backend_ _REST_ baseados no **Pytest**, integrados com Docker, ent√£o voc√™ pode testar a intera√ß√£o completa da API, independente do banco de dados. Como roda no Docker, ele pode construir um novo reposit√≥rio de dados do zero toda vez (assim voc√™ pode usar ElasticSearch, MongoDB, CouchDB, ou o que quiser, e apenas testar que a API esteja funcionando).
* F√°cil integra√ß√£o com Python atrav√©s dos **Kernels Jupyter** para desenvolvimento remoto ou no Docker com extens√µes como Atom Hydrogen ou Visual Studio Code Jupyter.
* _Frontend_ **Vue**:
    * Gerado com Vue CLI.
    * Controle de **Autentica√ß√£o JWT**.
    * Visualiza√ß√£o de _login_.
    * Ap√≥s o _login_, visualiza√ß√£o do painel de controle principal.
    * Painel de controle principal com cria√ß√£o e edi√ß√£o de usu√°rio.
    * Edi√ß√£o do pr√≥prio usu√°rio.
    * **Vuex**.
    * **Vue-router**.
    * **Vuetify** para belos componentes _material design_.
    * **TypeScript**.
    * Servidor Docker baseado em **Nginx** (configurado para rodar "lindamente" com Vue-router).
    * Constru√ß√£o multi-est√°gio Docker, ent√£o voc√™ n√£o precisa salvar ou _commitar_ c√≥digo compilado.
    * Testes _frontend_ rodados na hora da constru√ß√£o (pode ser desabilitado tamb√©m).
    * Feito t√£o modular quanto poss√≠vel, ent√£o ele funciona fora da caixa, mas voc√™ pode gerar novamente com Vue CLI ou criar conforme voc√™ queira, e reutilizar o que quiser.
* **PGAdmin** para banco de dados PostgreSQL, voc√™ pode modificar para usar PHPMyAdmin e MySQL facilmente.
* **Flower** para monitora√ß√£o de tarefas Celery.
* Balanceamento de carga entre _frontend_ e _backend_ com **Traefik**, ent√£o voc√™ pode ter ambos sob o mesmo dom√≠nio, separados por rota, mas servidos por diferentes containers.
* Integra√ß√£o Traefik, incluindo gera√ß√£o autom√°tica de certificados **HTTPS** Let's Encrypt.
* GitLab **CI** (integra√ß√£o cont√≠nua), incluindo testes _frontend_ e _backend_.

## Full Stack FastAPI Couchbase

GitHub: <a href="https://github.com/tiangolo/full-stack-fastapi-couchbase" class="external-link" target="_blank">https://github.com/tiangolo/full-stack-fastapi-couchbase</a>

‚ö†Ô∏è **WARNING** ‚ö†Ô∏è

Se voc√™ est√° iniciando um novo projeto do zero, verifique as alternativas aqui.

Por exemplo, o gerador de projetos <a href="https://github.com/tiangolo/full-stack-fastapi-postgresql" class="external-link" target="_blank">Full Stack FastAPI PostgreSQL</a> pode ser uma alternativa melhor, como ele √© ativamente mantido e utilizado. E ele inclui todos os novos recursos e melhorias.

Voc√™ ainda √© livre para utilizar o gerador baseado em Couchbase se quiser, ele provavelmente ainda funciona bem, e voc√™ j√° tem um projeto gerado com ele que roda bem tamb√©m (e voc√™ provavelmente j√° atualizou ele para encaixar nas suas necessidades).

Voc√™ pode ler mais sobre nas documenta√ß√£oes do reposit√≥rio.

## Full Stack FastAPI MongoDB

...pode demorar, dependendo do meu tempo dispon√≠vel e outros fatores. üòÖ üéâ

## Modelos de Aprendizado de M√°quina com spaCy e FastAPI

GitHub: <a href="https://github.com/microsoft/cookiecutter-spacy-fastapi" class="external-link" target="_blank">https://github.com/microsoft/cookiecutter-spacy-fastapi</a>

### Modelos de Aprendizado de M√°quina com spaCy e FastAPI - Recursos

* Integra√ß√£o com modelo NER **spaCy**.
* Formato de requisi√ß√£o **Busca Cognitiva Azure** acoplado.
* Servidor Python _web_ **Pronto para Produ√ß√£o** usando Uvicorn e Gunicorn.
* Implanta√ß√£o **Azure DevOps** Kubernetes (AKS) CI/CD acoplada.
* **Multilingual** facilmente escolhido como uma das linguagens spaCy acopladas durante a configura√ß√£o do projeto.
* **Facilmente extens√≠vel** para outros modelos de _frameworks_ (Pytorch, Tensorflow), n√£o apenas spaCy.


================================================
File: /docs/pt/docs/python-types.md
================================================
# Introdu√ß√£o aos tipos Python

O Python possui suporte para "dicas de tipo" ou "type hints" (tamb√©m chamado de "anota√ß√µes de tipo" ou "type annotations")

Esses **"type hints"** s√£o uma sintaxe especial que permite declarar o <abbr title = "por exemplo: str, int, float, bool">tipo</abbr> de uma vari√°vel.

Ao declarar tipos para suas vari√°veis, editores e ferramentas podem oferecer um melhor suporte.

Este √© apenas um **tutorial r√°pido / atualiza√ß√£o** sobre type hints do Python. Ele cobre apenas o m√≠nimo necess√°rio para us√°-los com o **FastAPI**... que √© realmente muito pouco.

O **FastAPI** √© baseado nesses type hints, eles oferecem muitas vantagens e benef√≠cios.

Mas mesmo que voc√™ nunca use o **FastAPI**, voc√™ se beneficiaria de aprender um pouco sobre eles.

/// note | Nota

Se voc√™ √© um especialista em Python e j√° sabe tudo sobre type hints, pule para o pr√≥ximo cap√≠tulo.

///

## Motiva√ß√£o

Vamos come√ßar com um exemplo simples:

{* ../../docs_src/python_types/tutorial001.py *}

A chamada deste programa gera:

```
John Doe
```

A fun√ß√£o faz o seguinte:

* Pega um `first_name` e `last_name`.
* Converte a primeira letra de cada uma em mai√∫sculas com `title()`.
* <abbr title = "Agrupa-os, como um. Com o conte√∫do de um ap√≥s o outro.">Concatena</abbr> com um espa√ßo no meio.

{* ../../docs_src/python_types/tutorial001.py hl[2] *}

### Edite-o

√â um programa muito simples.

Mas agora imagine que voc√™ estava escrevendo do zero.

Em algum momento voc√™ teria iniciado a defini√ß√£o da fun√ß√£o, j√° tinha os par√¢metros prontos...

Mas ent√£o voc√™ deve chamar "esse m√©todo que converte a primeira letra em mai√∫scula".

Era `upper`? Era `uppercase`? `first_uppercase`? `capitalize`?

Em seguida, tente com o velho amigo do programador, o preenchimento autom√°tico do editor.

Voc√™ digita o primeiro par√¢metro da fun√ß√£o, `first_name`, depois um ponto (`.`) e, em seguida, pressiona `Ctrl + Space` para acionar a conclus√£o.

Mas, infelizmente, voc√™ n√£o obt√©m nada √∫til:

<img src="/img/python-types/image01.png">

### Adicionar tipos

Vamos modificar uma √∫nica linha da vers√£o anterior.

Vamos mudar exatamente esse fragmento, os par√¢metros da fun√ß√£o, de:

```Python
    first_name, last_name
```

para:

```Python
    first_name: str, last_name: str
```

√â isso a√≠.

Esses s√£o os "type hints":

{* ../../docs_src/python_types/tutorial002.py hl[1] *}

Isso n√£o √© o mesmo que declarar valores padr√£o como seria com:

```Python
    first_name="john", last_name="doe"
```

√â uma coisa diferente.

Estamos usando dois pontos (`:`), n√£o √© igual a (`=`).

E adicionar type hints normalmente n√£o muda o que acontece do que aconteceria sem eles.

Mas agora, imagine que voc√™ est√° novamente no meio da cria√ß√£o dessa fun√ß√£o, mas com type hints.

No mesmo ponto, voc√™ tenta acionar o preenchimento autom√°tico com o `Ctrl+Space` e v√™:

<img src="/img/python-types/image02.png">

Com isso, voc√™ pode rolar, vendo as op√ß√µes, at√© encontrar o que "soa familiar":

<img src="/img/python-types/image03.png">

## Mais motiva√ß√£o

Verifique esta fun√ß√£o, ela j√° possui type hints:

{* ../../docs_src/python_types/tutorial003.py hl[1] *}

Como o editor conhece os tipos de vari√°veis, voc√™ n√£o obt√©m apenas o preenchimento autom√°tico, mas tamb√©m as verifica√ß√µes de erro:

<img src="/img/python-types/image04.png">

Agora voc√™ sabe que precisa corrig√≠-lo, converta `age` em uma string com `str(age)`:

{* ../../docs_src/python_types/tutorial004.py hl[2] *}

## Declarando Tipos

Voc√™ acabou de ver o local principal para declarar type hints. Como par√¢metros de fun√ß√£o.

Este tamb√©m √© o principal local em que voc√™ os usaria com o **FastAPI**.

### Tipos simples

Voc√™ pode declarar todos os tipos padr√£o de Python, n√£o apenas `str`.

Voc√™ pode usar, por exemplo:

* `int`
* `float`
* `bool`
* `bytes`

{* ../../docs_src/python_types/tutorial005.py hl[1] *}

### Tipos gen√©ricos com par√¢metros de tipo

Existem algumas estruturas de dados que podem conter outros valores, como `dict`, `list`, `set` e `tuple`. E os valores internos tamb√©m podem ter seu pr√≥prio tipo.

Estes tipos que possuem tipos internos s√£o chamados de tipos "**gen√©ricos**". E √© poss√≠vel declar√°-los mesmo com os seus tipos internos.

Para declarar esses tipos e os tipos internos, voc√™ pode usar o m√≥dulo Python padr√£o `typing`. Ele existe especificamente para suportar esses type hints.

#### Vers√µes mais recentes do Python

A sintaxe utilizando `typing` √© **compat√≠vel** com todas as vers√µes, desde o Python 3.6 at√© as √∫ltimas, incluindo o Python 3.9, 3.10, etc.

Conforme o Python evolui, **novas vers√µes** chegam com suporte melhorado para esses type annotations, e em muitos casos, voc√™ n√£o precisar√° nem importar e utilizar o m√≥dulo `typing` para declarar os type annotations.

Se voc√™ pode escolher uma vers√£o mais recente do Python para o seu projeto, voc√™ poder√° aproveitar isso ao seu favor.

Em todos os documentos existem exemplos compat√≠veis com cada vers√£o do Python (quando existem diferen√ßas).

Por exemplo, "**Python 3.6+**" significa que √© compat√≠vel com o Python 3.6 ou superior (incluindo o 3.7, 3.8, 3.9, 3.10, etc). E "**Python 3.9+**" significa que √© compat√≠vel com o Python 3.9 ou mais recente (incluindo o 3.10, etc).

Se voc√™ pode utilizar a **vers√£o mais recente do Python**, utilize os exemplos para as √∫ltimas vers√µes. Eles ter√£o as **melhores e mais simples sintaxes**, como por exemplo, "**Python 3.10+**".

#### List

Por exemplo, vamos definir uma vari√°vel para ser uma `list` de `str`.

//// tab | Python 3.9+

Declare uma vari√°vel com a mesma sintaxe com dois pontos (`:`)

Como tipo, coloque `list`.

Como a lista √© o tipo que cont√©m algum tipo interno, voc√™ coloca o tipo dentro de colchetes:

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial006_py39.py!}
```

////

//// tab | Python 3.8+

De `typing`, importe `List` (com o `L` mai√∫sculo):

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial006.py!}
```

Declare uma vari√°vel com a mesma sintaxe com dois pontos (`:`)

Como tipo, coloque o `List` que voc√™ importou de `typing`.

Como a lista √© o tipo que cont√©m algum tipo interno, voc√™ coloca o tipo dentro de colchetes:

```Python hl_lines="4"
{!> ../../docs_src/python_types/tutorial006.py!}
```

////

/// info | Informa√ß√£o

Estes tipos internos dentro dos colchetes s√£o chamados "par√¢metros de tipo" (type parameters).

Neste caso, `str` √© o par√¢metro de tipo passado para `List` (ou `list` no Python 3.9 ou superior).

///

Isso significa: "a vari√°vel `items` √© uma `list`, e cada um dos itens desta lista √© uma `str`".

/// tip | Dica

Se voc√™ usa o Python 3.9 ou superior, voc√™ n√£o precisa importar `List` de `typing`. Voc√™ pode utilizar o mesmo tipo `list` no lugar.

///

Ao fazer isso, seu editor pode fornecer suporte mesmo durante o processamento de itens da lista:

<img src="/img/python-types/image05.png">

Sem tipos, isso √© quase imposs√≠vel de alcan√ßar.

Observe que a vari√°vel `item` √© um dos elementos da lista `items`.

E, ainda assim, o editor sabe que √© um `str` e fornece suporte para isso.

#### Tuple e Set

Voc√™ faria o mesmo para declarar `tuple`s e `set`s:

//// tab | Python 3.9+

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial007_py39.py!}
```

////

//// tab | Python 3.8+

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial007.py!}
```

////

Isso significa que:

* A vari√°vel `items_t` √© uma `tuple` com 3 itens, um `int`, outro `int` e uma `str`.
* A vari√°vel `items_s` √© um `set`, e cada um de seus itens √© do tipo `bytes`.

#### Dict

Para definir um `dict`, voc√™ passa 2 par√¢metros de tipo, separados por v√≠rgulas.

O primeiro par√¢metro de tipo √© para as chaves do `dict`.

O segundo par√¢metro de tipo √© para os valores do `dict`:

//// tab | Python 3.9+

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial008_py39.py!}
```

////

//// tab | Python 3.8+

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial008.py!}
```

////

Isso significa que:

* A vari√°vel `prices` √© um dict`:
    * As chaves deste `dict` s√£o do tipo `str` (digamos, o nome de cada item).
    * Os valores deste `dict` s√£o do tipo `float` (digamos, o pre√ßo de cada item).

#### Union

Voc√™ pode declarar que uma vari√°vel pode ser de qualquer um dentre **diversos tipos**. Por exemplo, um `int` ou um `str`.

No Python 3.6 e superior (incluindo o Python 3.10), voc√™ pode utilizar o tipo `Union` de `typing`, e colocar dentro dos colchetes os poss√≠veis tipos aceit√°veis.

No Python 3.10 tamb√©m existe uma **nova sintaxe** onde voc√™ pode colocar os poss√≠vels tipos separados por uma <abbr title='tamb√©m chamado de "bitwise ou operador", mas o significado √© irrelevante aqui'>barra vertical (`|`)</abbr>.

//// tab | Python 3.10+

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial008b_py310.py!}
```

////

//// tab | Python 3.8+

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial008b.py!}
```

////

Em ambos os casos, isso significa que `item` poderia ser um `int` ou um `str`.


#### Poss√≠velmente `None`

Voc√™ pode declarar que um valor pode ter um tipo, como `str`, mas que ele tamb√©m pode ser `None`.

No Python 3.6 e superior (incluindo o Python 3.10) voc√™ pode declar√°-lo importando e utilizando `Optional` do m√≥dulo `typing`.

```Python hl_lines="1  4"
{!../../docs_src/python_types/tutorial009.py!}
```

O uso de `Optional[str]` em vez de apenas `str` permitir√° que o editor o ajude a detectar erros, onde voc√™ pode estar assumindo que um valor √© sempre um `str`, quando na verdade tamb√©m pode ser `None`.

`Optional[Something]` √© na verdade um atalho para `Union[Something, None]`, eles s√£o equivalentes.

Isso tamb√©m significa que no Python 3.10, voc√™ pode utilizar `Something | None`:

//// tab | Python 3.10+

```Python hl_lines="1"
{!> ../../docs_src/python_types/tutorial009_py310.py!}
```

////

//// tab | Python 3.8+

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial009.py!}
```

////

//// tab | Python 3.8+ alternative

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial009b.py!}
```

////

#### Utilizando `Union` ou `Optional`

Se voc√™ est√° utilizando uma vers√£o do Python abaixo da 3.10, aqui vai uma dica do meu ponto de vista bem **subjetivo**:

* üö® Evite utilizar `Optional[SomeType]`
* No lugar, ‚ú® **use `Union[SomeType, None]`** ‚ú®.

Ambos s√£o equivalentes, e no final das contas, eles s√£o o mesmo. Mas eu recomendaria o `Union` ao inv√©s de `Optional` porque a palavra **Optional** parece implicar que o valor √© opcional, quando na verdade significa "isso pode ser `None`", mesmo que ele n√£o seja opcional e ainda seja obrigat√≥rio.

Eu penso que `Union[SomeType, None]` √© mais expl√≠cito sobre o que ele significa.

Isso √© apenas sobre palavras e nomes. Mas estas palavras podem afetar como os seus colegas de trabalho pensam sobre o c√≥digo.

Por exemplo, vamos pegar esta fun√ß√£o:

{* ../../docs_src/python_types/tutorial009c.py hl[1,4] *}

O pa√¢metro `name` √© definido como `Optional[str]`, mas ele **n√£o √© opcional**, voc√™ n√£o pode chamar a fun√ß√£o sem o par√¢metro:

```Python
say_hi()  # Oh, no, this throws an error! üò±
```

O par√¢metro `name` **ainda √© obrigat√≥rio** (n√£o *opicional*) porque ele n√£o possui um valor padr√£o. Mesmo assim, `name` aceita `None` como valor:

```Python
say_hi(name=None)  # This works, None is valid üéâ
```

A boa not√≠cia √©, quando voc√™ estiver no Python 3.10 voc√™ n√£o precisar√° se preocupar mais com isso, pois voc√™ poder√° simplesmente utilizar o `|` para definir uni√µes de tipos:

{* ../../docs_src/python_types/tutorial009c_py310.py hl[1,4] *}

E ent√£o voc√™ n√£o precisar√° mais se preocupar com nomes como `Optional` e `Union`. üòé

#### Tipos gen√©ricos

Esses tipos que usam par√¢metros de tipo entre colchetes s√£o chamados **tipos gen√©ricos** ou **gen√©ricos**. Por exemplo:

//// tab | Python 3.10+

Voc√™ pode utilizar os mesmos tipos internos como gen√©ricos (com colchetes e tipos dentro):

* `list`
* `tuple`
* `set`
* `dict`

E o mesmo como no Python 3.8, do m√≥dulo `typing`:

* `Union`
* `Optional` (o mesmo que com o 3.8)
* ...entro outros.

No Python 3.10, como uma alternativa para a utiliza√ß√£o dos gen√©ricos `Union` e `Optional`, voc√™ pode usar a <abbr title='tamb√©m chamado de "bitwise ou operador", mas o significado n√£o √© relevante aqui'>barra vertical (`|`)</abbr> para declarar uni√µes de tipos. Isso √© muito melhor e mais simples.

////

//// tab | Python 3.9+

Voc√™ pode utilizar os mesmos tipos internos como gen√©ricos (com colchetes e tipos dentro):

* `list`
* `tuple`
* `set`
* `dict`

E o mesmo como no Python 3.8, do m√≥dulo `typing`:

* `Union`
* `Optional`
* ...entro outros.

////

//// tab | Python 3.8+

* `List`
* `Tuple`
* `Set`
* `Dict`
* `Union`
* `Optional`
* ...entro outros.

////

### Classes como tipos

Voc√™ tamb√©m pode declarar uma classe como o tipo de uma vari√°vel.

Digamos que voc√™ tenha uma classe `Person`, com um nome:

{* ../../docs_src/python_types/tutorial010.py hl[1:3] *}

Ent√£o voc√™ pode declarar que uma vari√°vel √© do tipo `Person`:

{* ../../docs_src/python_types/tutorial010.py hl[6] *}

E ent√£o, novamente, voc√™ recebe todo o suporte do editor:

<img src="/img/python-types/image06.png">

Perceba que isso significa que "`one_person` √© uma **inst√¢ncia** da classe `Person`".

Isso n√£o significa que "`one_person` √© a **classe** chamada `Person`".

## Modelos Pydantic

O <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> √© uma biblioteca Python para executar a valida√ß√£o de dados.

Voc√™ declara a "forma" dos dados como classes com atributos.

E cada atributo tem um tipo.

Em seguida, voc√™ cria uma inst√¢ncia dessa classe com alguns valores e ela os validar√°, os converter√° para o tipo apropriado (se for esse o caso) e fornecer√° um objeto com todos os dados.

E voc√™ recebe todo o suporte do editor com esse objeto resultante.

Retirado dos documentos oficiais dos Pydantic:

//// tab | Python 3.10+

```Python
{!> ../../docs_src/python_types/tutorial011_py310.py!}
```

////

//// tab | Python 3.9+

```Python
{!> ../../docs_src/python_types/tutorial011_py39.py!}
```

////

//// tab | Python 3.8+

```Python
{!> ../../docs_src/python_types/tutorial011.py!}
```

////

/// info | Informa√ß√£o

Para saber mais sobre o <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic, verifique a sua documenta√ß√£o</a>.

///

O **FastAPI** √© todo baseado em Pydantic.

Voc√™ ver√° muito mais disso na pr√°tica no [Tutorial - Guia do usu√°rio](tutorial/index.md){.internal-link target=_blank}.

/// tip | Dica

O Pydantic tem um comportamento especial quando voc√™ usa `Optional` ou `Union[Something, None]` sem um valor padr√£o. Voc√™ pode ler mais sobre isso na documenta√ß√£o do Pydantic sobre <a href="https://docs.pydantic.dev/2.3/usage/models/#required-fields" class="external-link" target="_blank">campos Opcionais Obrigat√≥rios</a>.

///


## Type Hints com Metadados de Anota√ß√µes

O Python possui uma funcionalidade que nos permite incluir **<abbr title="Informa√ß√£o sobre a informa√ß√£o, neste caso, informa√ß√£o sobre o tipo, e.g. uma descri√ß√£o.">metadados</abbr> adicionais** nos type hints utilizando `Annotated`.

//// tab | Python 3.9+

No Python 3.9, `Annotated` √© parte da biblioteca padr√£o, ent√£o voc√™ pode import√°-lo de `typing`.

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial013_py39.py!}
```

////

//// tab | Python 3.8+

Em vers√µes abaixo do Python 3.9, voc√™ importa `Annotated` de `typing_extensions`.

Ele j√° estar√° instalado com o **FastAPI**.

```Python hl_lines="1  4"
{!> ../../docs_src/python_types/tutorial013.py!}
```

////

O Python em si n√£o faz nada com este `Annotated`. E para editores e outras ferramentas, o tipo ainda √© `str`.

Mas voc√™ pode utilizar este espa√ßo dentro do `Annotated` para fornecer ao **FastAPI** metadata adicional sobre como voc√™ deseja que a sua aplica√ß√£o se comporte.

O importante aqui de se lembrar √© que **o primeiro *type parameter*** que voc√™ informar ao `Annotated` √© o **tipo de fato**. O resto √© apenas metadado para outras ferramentas.

Por hora, voc√™ precisa apenas saber que o `Annotated` existe, e que ele √© Python padr√£o. üòé

Mais tarde voc√™ ver√° o qu√£o **poderoso** ele pode ser.

/// tip | Dica

O fato de que isso √© **Python padr√£o** significa que voc√™ ainda obt√©m a **melhor experi√™ncia de desenvolvedor poss√≠vel** no seu editor, com as ferramentas que voc√™ utiliza para analisar e refatorar o seu c√≥digo, etc. ‚ú®

E tamb√©m que o seu c√≥digo ser√° muito compat√≠vel com diversas outras ferramentas e bibliotecas Python. üöÄ

///


## Type hints no **FastAPI**

O **FastAPI** aproveita esses type hints para fazer v√°rias coisas.

Com o **FastAPI**, voc√™ declara par√¢metros com type hints e obt√©m:

* **Suporte ao editor**.
* **Verifica√ß√µes de tipo**.

... e o **FastAPI** usa as mesmas declara√ß√µes para:

* **Definir requisitos**: dos par√¢metros de rota, par√¢metros da consulta, cabe√ßalhos, corpos, depend√™ncias, etc.
* **Converter dados**: da solicita√ß√£o para o tipo necess√°rio.
* **Validar dados**: provenientes de cada solicita√ß√£o:
    * Gerando **erros autom√°ticos** retornados ao cliente quando os dados s√£o inv√°lidos.
* **Documentar** a API usando OpenAPI:
    * que √© usado pelas interfaces de usu√°rio da documenta√ß√£o interativa autom√°tica.

Tudo isso pode parecer abstrato. N√£o se preocupe. Voc√™ ver√° tudo isso em a√ß√£o no [Tutorial - Guia do usu√°rio](tutorial/index.md){.internal-link target=_blank}.

O importante √© que, usando tipos padr√£o de Python, em um √∫nico local (em vez de adicionar mais classes, decoradores, etc.), o **FastAPI** far√° muito trabalho para voc√™.

/// info | Informa√ß√£o

Se voc√™ j√° passou por todo o tutorial e voltou para ver mais sobre os tipos, um bom recurso √© <a href = "https://mypy.readthedocs.io/en/latest/cheat_sheet_py3.html" class = "external-link "target =" _ blank "> a "cheat sheet" do `mypy` </a>.

///


================================================
File: /docs/pt/docs/virtual-environments.md
================================================
# Ambientes Virtuais

Ao trabalhar em projetos Python, voc√™ provavelmente deve usar um **ambiente virtual** (ou um mecanismo similar) para isolar os pacotes que voc√™ instala para cada projeto.

/// info | Informa√ß√£o

Se voc√™ j√° sabe sobre ambientes virtuais, como cri√°-los e us√°-los, talvez seja melhor pular esta se√ß√£o. ü§ì

///

/// tip | Dica

Um **ambiente virtual** √© diferente de uma **vari√°vel de ambiente**.

Uma **vari√°vel de ambiente** √© uma vari√°vel no sistema que pode ser usada por programas.

Um **ambiente virtual** √© um diret√≥rio com alguns arquivos.

///

/// info | Informa√ß√£o

Esta p√°gina lhe ensinar√° como usar **ambientes virtuais** e como eles funcionam.

Se voc√™ estiver pronto para adotar uma **ferramenta que gerencia tudo** para voc√™ (incluindo a instala√ß√£o do Python), experimente <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">uv</a>.

///

## Criar um Projeto

Primeiro, crie um diret√≥rio para seu projeto.

O que normalmente fa√ßo √© criar um diret√≥rio chamado `code` dentro do meu diret√≥rio home/user.

E dentro disso eu crio um diret√≥rio por projeto.

<div class="termy">

```console
// V√° para o diret√≥rio inicial
$ cd
// Crie um diret√≥rio para todos os seus projetos de c√≥digo
$ mkdir code
// Entre nesse diret√≥rio de c√≥digo
$ cd code
// Crie um diret√≥rio para este projeto
$ mkdir awesome-project
// Entre no diret√≥rio do projeto
$ cd awesome-project
```

</div>

## Crie um ambiente virtual

Ao come√ßar a trabalhar em um projeto Python **pela primeira vez**, crie um ambiente virtual **<abbr title="existem outras op√ß√µes, esta √© uma diretriz simples">dentro do seu projeto</abbr>**.

/// tip | Dica

Voc√™ s√≥ precisa fazer isso **uma vez por projeto**, n√£o toda vez que trabalhar.

///

//// tab | `venv`

Para criar um ambiente virtual, voc√™ pode usar o m√≥dulo `venv` que vem com o Python.

<div class="termy">

```console
$ python -m venv .venv
```

</div>

/// details | O que esse comando significa

* `python`: usa o programa chamado `python`
* `-m`: chama um m√≥dulo como um script, n√≥s diremos a ele qual m√≥dulo vem em seguida
* `venv`: usa o m√≥dulo chamado `venv` que normalmente vem instalado com o Python
* `.venv`: cria o ambiente virtual no novo diret√≥rio `.venv`

///

////

//// tab | `uv`

Se voc√™ tiver o <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">`uv`</a> instalado, poder√° us√°-lo para criar um ambiente virtual.

<div class="termy">

```console
$ uv venv
```

</div>

/// tip | Dica

Por padr√£o, `uv` criar√° um ambiente virtual em um diret√≥rio chamado `.venv`.

Mas voc√™ pode personaliz√°-lo passando um argumento adicional com o nome do diret√≥rio.

///

////

Esse comando cria um novo ambiente virtual em um diret√≥rio chamado `.venv`.

/// details | `.venv` ou outro nome

Voc√™ pode criar o ambiente virtual em um diret√≥rio diferente, mas h√° uma conven√ß√£o para cham√°-lo de `.venv`.

///

## Ative o ambiente virtual

Ative o novo ambiente virtual para que qualquer comando Python que voc√™ executar ou pacote que voc√™ instalar o utilize.

/// tip | Dica

Fa√ßa isso **toda vez** que iniciar uma **nova sess√£o de terminal** para trabalhar no projeto.

///

//// tab | Linux, macOS

<div class="termy">

```console
$ source .venv/bin/activate
```

</div>

////

//// tab | Windows PowerShell

<div class="termy">

```console
$ .venv\Scripts\Activate.ps1
```

</div>

////

//// tab | Windows Bash

Ou se voc√™ usa o Bash para Windows (por exemplo, <a href="https://gitforwindows.org/" class="external-link" target="_blank">Git Bash</a>):

<div class="termy">

```console
$ source .venv/Scripts/activate
```

</div>

////

/// tip | Dica

Toda vez que voc√™ instalar um **novo pacote** naquele ambiente, **ative** o ambiente novamente.

Isso garante que, se voc√™ usar um **programa de terminal (<abbr title="interface de linha de comando">CLI</abbr>)** instalado por esse pacote, voc√™ usar√° aquele do seu ambiente virtual e n√£o qualquer outro que possa ser instalado globalmente, provavelmente com uma vers√£o diferente do que voc√™ precisa.

///

## Verifique se o ambiente virtual est√° ativo

Verifique se o ambiente virtual est√° ativo (o comando anterior funcionou).

/// tip | Dica

Isso √© **opcional**, mas √© uma boa maneira de **verificar** se tudo est√° funcionando conforme o esperado e se voc√™ est√° usando o ambiente virtual pretendido.

///

//// tab | Linux, macOS, Windows Bash

<div class="termy">

```console
$ which python

/home/user/code/awesome-project/.venv/bin/python
```

</div>

Se ele mostrar o bin√°rio `python` em `.venv/bin/python`, dentro do seu projeto (neste caso `awesome-project`), ent√£o funcionou. üéâ

////

//// tab | Windows PowerShell

<div class="termy">

```console
$ Get-Command python

C:\Users\user\code\awesome-project\.venv\Scripts\python
```

</div>

Se ele mostrar o bin√°rio `python` em `.venv\Scripts\python`, dentro do seu projeto (neste caso `awesome-project`), ent√£o funcionou. üéâ

////

## Atualizar `pip`

/// tip | Dica

Se voc√™ usar <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">`uv`</a>, voc√™ o usar√° para instalar coisas em vez do `pip`, ent√£o n√£o precisar√° atualizar o `pip`. üòé

///

Se voc√™ estiver usando `pip` para instalar pacotes (ele vem por padr√£o com o Python), voc√™ deve **atualiz√°-lo** para a vers√£o mais recente.

Muitos erros ex√≥ticos durante a instala√ß√£o de um pacote s√£o resolvidos apenas atualizando o `pip` primeiro.

/// tip | Dica

Normalmente, voc√™ faria isso **uma vez**, logo ap√≥s criar o ambiente virtual.

///

Certifique-se de que o ambiente virtual esteja ativo (com o comando acima) e execute:

<div class="termy">

```console
$ python -m pip install --upgrade pip

---> 100%
```

</div>

## Adicionar `.gitignore`

Se voc√™ estiver usando **Git** (voc√™ deveria), adicione um arquivo `.gitignore` para excluir tudo em seu `.venv` do Git.

/// tip | Dica

Se voc√™ usou <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">`uv`</a> para criar o ambiente virtual, ele j√° fez isso para voc√™, voc√™ pode pular esta etapa. üòé

///

/// tip | Dica

Fa√ßa isso **uma vez**, logo ap√≥s criar o ambiente virtual.

///

<div class="termy">

```console
$ echo "*" > .venv/.gitignore
```

</div>

/// details | O que esse comando significa

* `echo "*"`: ir√° "imprimir" o texto `*` no terminal (a pr√≥xima parte muda isso um pouco)
* `>`: qualquer coisa impressa no terminal pelo comando √† esquerda de `>` n√£o deve ser impressa, mas sim escrita no arquivo que vai √† direita de `>`
* `.gitignore`: o nome do arquivo onde o texto deve ser escrito

E `*` para Git significa "tudo". Ent√£o, ele ignorar√° tudo no diret√≥rio `.venv`.

Esse comando criar√° um arquivo `.gitignore` com o conte√∫do:

```gitignore
*
```

///

## Instalar Pacotes

Ap√≥s ativar o ambiente, voc√™ pode instalar pacotes nele.

/// tip | Dica

Fa√ßa isso **uma vez** ao instalar ou atualizar os pacotes que seu projeto precisa.

Se precisar atualizar uma vers√£o ou adicionar um novo pacote, voc√™ **far√° isso novamente**.

///

### Instalar pacotes diretamente

Se estiver com pressa e n√£o quiser usar um arquivo para declarar os requisitos de pacote do seu projeto, voc√™ pode instal√°-los diretamente.

/// tip | Dica

√â uma (muito) boa ideia colocar os pacotes e vers√µes que seu programa precisa em um arquivo (por exemplo `requirements.txt` ou `pyproject.toml`).

///

//// tab | `pip`

<div class="termy">

```console
$ pip install "fastapi[standard]"

---> 100%
```

</div>

////

//// tab | `uv`

Se voc√™ tem o <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">`uv`</a>:

<div class="termy">

```console
$ uv pip install "fastapi[standard]"
---> 100%
```

</div>

////

### Instalar a partir de `requirements.txt`

Se voc√™ tiver um `requirements.txt`, agora poder√° us√°-lo para instalar seus pacotes.

//// tab | `pip`

<div class="termy">

```console
$ pip install -r requirements.txt
---> 100%
```

</div>

////

//// tab | `uv`

Se voc√™ tem o <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">`uv`</a>:

<div class="termy">

```console
$ uv pip install -r requirements.txt
---> 100%
```

</div>

////

/// details | `requirements.txt`

Um `requirements.txt` com alguns pacotes poderia se parecer com:

```requirements.txt
fastapi[standard]==0.113.0
pydantic==2.8.0
```

///

## Execute seu programa

Depois de ativar o ambiente virtual, voc√™ pode executar seu programa, e ele usar√° o Python dentro do seu ambiente virtual com os pacotes que voc√™ instalou l√°.

<div class="termy">

```console
$ python main.py

Hello World
```

</div>

## Configure seu editor

Voc√™ provavelmente usaria um editor. Certifique-se de configur√°-lo para usar o mesmo ambiente virtual que voc√™ criou (ele provavelmente o detectar√° automaticamente) para que voc√™ possa obter erros de preenchimento autom√°tico e em linha.

Por exemplo:

* <a href="https://code.visualstudio.com/docs/python/environments#_select-and-activate-an-environment" class="external-link" target="_blank">VS Code</a>
* <a href="https://www.jetbrains.com/help/pycharm/creating-virtual-environment.html" class="external-link" target="_blank">PyCharm</a>

/// tip | Dica

Normalmente, voc√™ s√≥ precisa fazer isso **uma vez**, ao criar o ambiente virtual.

///

## Desativar o ambiente virtual

Quando terminar de trabalhar no seu projeto, voc√™ pode **desativar** o ambiente virtual.

<div class="termy">

```console
$ deactivate
```

</div>

Dessa forma, quando voc√™ executar `python`, ele n√£o tentar√° execut√°-lo naquele ambiente virtual com os pacotes instalados nele.

## Pronto para trabalhar

Agora voc√™ est√° pronto para come√ßar a trabalhar no seu projeto.



/// tip | Dica

Voc√™ quer entender o que √© tudo isso acima?

Continue lendo. üëáü§ì

///

## Por que ambientes virtuais

Para trabalhar com o FastAPI, voc√™ precisa instalar o <a href="https://www.python.org/" class="external-link" target="_blank">Python</a>.

Depois disso, voc√™ precisar√° **instalar** o FastAPI e quaisquer outros **pacotes** que queira usar.

Para instalar pacotes, voc√™ normalmente usaria o comando `pip` que vem com o Python (ou alternativas semelhantes).

No entanto, se voc√™ usar `pip` diretamente, os pacotes ser√£o instalados no seu **ambiente Python global** (a instala√ß√£o global do Python).

### O Problema

Ent√£o, qual √© o problema em instalar pacotes no ambiente global do Python?

Em algum momento, voc√™ provavelmente acabar√° escrevendo muitos programas diferentes que dependem de **pacotes diferentes**. E alguns desses projetos em que voc√™ trabalha depender√£o de **vers√µes diferentes** do mesmo pacote. üò±

Por exemplo, voc√™ pode criar um projeto chamado `philosophers-stone`, este programa depende de outro pacote chamado **`harry`, usando a vers√£o `1`**. Ent√£o, voc√™ precisa instalar `harry`.

```mermaid
flowchart LR
    stone(philosophers-stone) -->|requires| harry-1[harry v1]
```

Ent√£o, em algum momento depois, voc√™ cria outro projeto chamado `prisoner-of-azkaban`, e esse projeto tamb√©m depende de `harry`, mas esse projeto precisa do **`harry` vers√£o `3`**.

```mermaid
flowchart LR
    azkaban(prisoner-of-azkaban) --> |requires| harry-3[harry v3]
```

Mas agora o problema √© que, se voc√™ instalar os pacotes globalmente (no ambiente global) em vez de em um **ambiente virtual** local, voc√™ ter√° que escolher qual vers√£o do `harry` instalar.

Se voc√™ quiser executar `philosophers-stone`, precisar√° primeiro instalar `harry` vers√£o `1`, por exemplo com:

<div class="termy">

```console
$ pip install "harry==1"
```

</div>

E ent√£o voc√™ acabaria com `harry` vers√£o `1` instalado em seu ambiente Python global.

```mermaid
flowchart LR
    subgraph global[global env]
        harry-1[harry v1]
    end
    subgraph stone-project[philosophers-stone project]
        stone(philosophers-stone) -->|requires| harry-1
    end
```

Mas se voc√™ quiser executar `prisoner-of-azkaban`, voc√™ precisar√° desinstalar `harry` vers√£o `1` e instalar `harry` vers√£o `3` (ou apenas instalar a vers√£o `3` desinstalaria automaticamente a vers√£o `1`).

<div class="termy">

```console
$ pip install "harry==3"
```

</div>

E ent√£o voc√™ acabaria com `harry` vers√£o `3` instalado em seu ambiente Python global.

E se voc√™ tentar executar `philosophers-stone` novamente, h√° uma chance de que **n√£o funcione** porque ele precisa de `harry` vers√£o `1`.

```mermaid
flowchart LR
    subgraph global[global env]
        harry-1[<strike>harry v1</strike>]
        style harry-1 fill:#ccc,stroke-dasharray: 5 5
        harry-3[harry v3]
    end
    subgraph stone-project[philosophers-stone project]
        stone(philosophers-stone) -.-x|‚õîÔ∏è| harry-1
    end
    subgraph azkaban-project[prisoner-of-azkaban project]
        azkaban(prisoner-of-azkaban) --> |requires| harry-3
    end
```

/// tip | Dica

√â muito comum em pacotes Python tentar ao m√°ximo **evitar altera√ß√µes dr√°sticas** em **novas vers√µes**, mas √© melhor prevenir do que remediar e instalar vers√µes mais recentes intencionalmente e, quando poss√≠vel, executar os testes para verificar se tudo est√° funcionando corretamente.

///

Agora, imagine isso com **muitos** outros **pacotes** dos quais todos os seus **projetos dependem**. Isso √© muito dif√≠cil de gerenciar. E voc√™ provavelmente acabaria executando alguns projetos com algumas **vers√µes incompat√≠veis** dos pacotes, e n√£o saberia por que algo n√£o est√° funcionando.

Al√©m disso, dependendo do seu sistema operacional (por exemplo, Linux, Windows, macOS), ele pode ter vindo com o Python j√° instalado. E, nesse caso, provavelmente tinha alguns pacotes pr√©-instalados com algumas vers√µes espec√≠ficas **necess√°rias para o seu sistema**. Se voc√™ instalar pacotes no ambiente global do Python, poder√° acabar **quebrando** alguns dos programas que vieram com seu sistema operacional.

## Onde os pacotes s√£o instalados

Quando voc√™ instala o Python, ele cria alguns diret√≥rios com alguns arquivos no seu computador.

Alguns desses diret√≥rios s√£o os respons√°veis ‚Äã‚Äãpor ter todos os pacotes que voc√™ instala.

Quando voc√™ executa:

<div class="termy">

```console
// N√£o execute isso agora, √© apenas um exemplo ü§ì
$ pip install "fastapi[standard]"
---> 100%
```

</div>

Isso far√° o download de um arquivo compactado com o c√≥digo FastAPI, normalmente do <a href="https://pypi.org/project/fastapi/" class="external-link" target="_blank">PyPI</a>.

Ele tamb√©m far√° o **download** de arquivos para outros pacotes dos quais o FastAPI depende.

Em seguida, ele **extrair√°** todos esses arquivos e os colocar√° em um diret√≥rio no seu computador.

Por padr√£o, ele colocar√° os arquivos baixados e extra√≠dos no diret√≥rio que vem com a instala√ß√£o do Python, que √© o **ambiente global**.

## O que s√£o ambientes virtuais

A solu√ß√£o para os problemas de ter todos os pacotes no ambiente global √© usar um **ambiente virtual para cada projeto** em que voc√™ trabalha.

Um ambiente virtual √© um **diret√≥rio**, muito semelhante ao global, onde voc√™ pode instalar os pacotes para um projeto.

Dessa forma, cada projeto ter√° seu pr√≥prio ambiente virtual (diret√≥rio `.venv`) com seus pr√≥prios pacotes.

```mermaid
flowchart TB
    subgraph stone-project[philosophers-stone project]
        stone(philosophers-stone) --->|requires| harry-1
        subgraph venv1[.venv]
            harry-1[harry v1]
        end
    end
    subgraph azkaban-project[prisoner-of-azkaban project]
        azkaban(prisoner-of-azkaban) --->|requires| harry-3
        subgraph venv2[.venv]
            harry-3[harry v3]
        end
    end
    stone-project ~~~ azkaban-project
```

## O que significa ativar um ambiente virtual

Quando voc√™ ativa um ambiente virtual, por exemplo com:

//// tab | Linux, macOS

<div class="termy">

```console
$ source .venv/bin/activate
```

</div>

////

//// tab | Windows PowerShell

<div class="termy">

```console
$ .venv\Scripts\Activate.ps1
```

</div>

////

//// tab | Windows Bash

Ou se voc√™ usa o Bash para Windows (por exemplo, <a href="https://gitforwindows.org/" class="external-link" target="_blank">Git Bash</a>):

<div class="termy">

```console
$ source .venv/Scripts/activate
```

</div>

////

Esse comando criar√° ou modificar√° algumas [vari√°veis ‚Äã‚Äãde ambiente](environment-variables.md){.internal-link target=_blank} que estar√£o dispon√≠veis para os pr√≥ximos comandos.

Uma dessas vari√°veis ‚Äã‚Äã√© a vari√°vel `PATH`.

/// tip | Dica

Voc√™ pode aprender mais sobre a vari√°vel de ambiente `PATH` na se√ß√£o [Vari√°veis ‚Äã‚Äãde ambiente](environment-variables.md#path-environment-variable){.internal-link target=_blank}.

///

A ativa√ß√£o de um ambiente virtual adiciona seu caminho `.venv/bin` (no Linux e macOS) ou `.venv\Scripts` (no Windows) √† vari√°vel de ambiente `PATH`.

Digamos que antes de ativar o ambiente, a vari√°vel `PATH` estava assim:

//// tab | Linux, macOS

```plaintext
/usr/bin:/bin:/usr/sbin:/sbin
```

Isso significa que o sistema procuraria programas em:

* `/usr/bin`
* `/bin`
* `/usr/sbin`
* `/sbin`

////

//// tab | Windows

```plaintext
C:\Windows\System32
```

Isso significa que o sistema procuraria programas em:

* `C:\Windows\System32`

////

Ap√≥s ativar o ambiente virtual, a vari√°vel `PATH` ficaria mais ou menos assim:

//// tab | Linux, macOS

```plaintext
/home/user/code/awesome-project/.venv/bin:/usr/bin:/bin:/usr/sbin:/sbin
```

Isso significa que o sistema agora come√ßar√° a procurar primeiro por programas em:

```plaintext
/home/user/code/awesome-project/.venv/bin
```

antes de procurar nos outros diret√≥rios.

Ent√£o, quando voc√™ digita `python` no terminal, o sistema encontrar√° o programa Python em

```plaintext
/home/user/code/awesome-project/.venv/bin/python
```

e usa esse.

////

//// tab | Windows

```plaintext
C:\Users\user\code\awesome-project\.venv\Scripts;C:\Windows\System32
```

Isso significa que o sistema agora come√ßar√° a procurar primeiro por programas em:

```plaintext
C:\Users\user\code\awesome-project\.venv\Scripts
```

antes de procurar nos outros diret√≥rios.

Ent√£o, quando voc√™ digita `python` no terminal, o sistema encontrar√° o programa Python em

```plaintext
C:\Users\user\code\awesome-project\.venv\Scripts\python
```

e usa esse.

////

Um detalhe importante √© que ele colocar√° o caminho do ambiente virtual no **in√≠cio** da vari√°vel `PATH`. O sistema o encontrar√° **antes** de encontrar qualquer outro Python dispon√≠vel. Dessa forma, quando voc√™ executar `python`, ele usar√° o Python **do ambiente virtual** em vez de qualquer outro `python` (por exemplo, um `python` de um ambiente global).

Ativar um ambiente virtual tamb√©m muda algumas outras coisas, mas esta √© uma das mais importantes.

## Verificando um ambiente virtual

Ao verificar se um ambiente virtual est√° ativo, por exemplo com:

//// tab | Linux, macOS, Windows Bash

<div class="termy">

```console
$ which python

/home/user/code/awesome-project/.venv/bin/python
```

</div>

////

//// tab | Windows PowerShell

<div class="termy">

```console
$ Get-Command python

C:\Users\user\code\awesome-project\.venv\Scripts\python
```

</div>

////

Isso significa que o programa `python` que ser√° usado √© aquele **no ambiente virtual**.

voc√™ usa `which` no Linux e macOS e `Get-Command` no Windows PowerShell.

A maneira como esse comando funciona √© que ele vai e verifica na vari√°vel de ambiente `PATH`, passando por **cada caminho em ordem**, procurando pelo programa chamado `python`. Uma vez que ele o encontre, ele **mostrar√° o caminho** para esse programa.

A parte mais importante √© que quando voc√™ chama ``python`, esse √© exatamente o "`python`" que ser√° executado.

Assim, voc√™ pode confirmar se est√° no ambiente virtual correto.

/// tip | Dica

√â f√°cil ativar um ambiente virtual, obter um Python e ent√£o **ir para outro projeto**.

E o segundo projeto **n√£o funcionaria** porque voc√™ est√° usando o **Python incorreto**, de um ambiente virtual para outro projeto.

√â √∫til poder verificar qual `python` est√° sendo usado. ü§ì

///

## Por que desativar um ambiente virtual

Por exemplo, voc√™ pode estar trabalhando em um projeto `philosophers-stone`, **ativar esse ambiente virtual**, instalar pacotes e trabalhar com esse ambiente.

E ent√£o voc√™ quer trabalhar em **outro projeto** `prisoner-of-azkaban`.

Voc√™ vai para aquele projeto:

<div class="termy">

```console
$ cd ~/code/prisoner-of-azkaban
```

</div>

Se voc√™ n√£o desativar o ambiente virtual para `philosophers-stone`, quando voc√™ executar `python` no terminal, ele tentar√° usar o Python de `philosophers-stone`.

<div class="termy">

```console
$ cd ~/code/prisoner-of-azkaban

$ python main.py

// Erro ao importar o Sirius, ele n√£o est√° instalado üò±
Traceback (most recent call last):
    File "main.py", line 1, in <module>
        import sirius
```

</div>

Mas se voc√™ desativar o ambiente virtual e ativar o novo para `prisoner-of-askaban`, quando voc√™ executar `python`, ele usar√° o Python do ambiente virtual em `prisoner-of-azkaban`.

<div class="termy">

```console
$ cd ~/code/prisoner-of-azkaban

// Voc√™ n√£o precisa estar no diret√≥rio antigo para desativar, voc√™ pode fazer isso de onde estiver, mesmo depois de ir para o outro projeto üòé
$ deactivate

// Ative o ambiente virtual em prisoner-of-azkaban/.venv üöÄ
$ source .venv/bin/activate

// Agora, quando voc√™ executar o python, ele encontrar√° o pacote sirius instalado neste ambiente virtual ‚ú®
$ python main.py

Eu juro solenemente üê∫
```

</div>

## Alternativas

Este √© um guia simples para voc√™ come√ßar e lhe ensinar como tudo funciona **por baixo**.

Existem muitas **alternativas** para gerenciar ambientes virtuais, depend√™ncias de pacotes (requisitos) e projetos.

Quando estiver pronto e quiser usar uma ferramenta para **gerenciar todo o projeto**, depend√™ncias de pacotes, ambientes virtuais, etc., sugiro que voc√™ experimente o <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">uv</a>.

`uv` pode fazer muitas coisas, ele pode:

* **Instalar o Python** para voc√™, incluindo vers√µes diferentes
* Gerenciar o **ambiente virtual** para seus projetos
* Instalar **pacotes**
* Gerenciar **depend√™ncias e vers√µes** de pacotes para seu projeto
* Certifique-se de ter um conjunto **exato** de pacotes e vers√µes para instalar, incluindo suas depend√™ncias, para que voc√™ possa ter certeza de que pode executar seu projeto em produ√ß√£o exatamente da mesma forma que em seu computador durante o desenvolvimento, isso √© chamado de **bloqueio**
* E muitas outras coisas

## Conclus√£o

Se voc√™ leu e entendeu tudo isso, agora **voc√™ sabe muito mais** sobre ambientes virtuais do que muitos desenvolvedores por a√≠. ü§ì

Saber esses detalhes provavelmente ser√° √∫til no futuro, quando voc√™ estiver depurando algo que parece complexo, mas voc√™ saber√° **como tudo funciona**. üòé


================================================
File: /docs/pt/docs/about/index.md
================================================
# Sobre

Sobre o FastAPI, seus padr√µes, inspira√ß√µes e muito mais. ü§ì


================================================
File: /docs/pt/docs/advanced/additional-responses.md
================================================
# Retornos Adicionais no OpenAPI

/// warning | Aviso

Este √© um tema bem avan√ßado.

Se voc√™ est√° come√ßando com o **FastAPI**, provavelmente voc√™ n√£o precisa disso.

///

Voc√™ pode declarar retornos adicionais, com c√≥digos de status adicionais, media types, descri√ß√µes, etc.

Essas respostas adicionais ser√£o inclu√≠das no esquema do OpenAPI, e tamb√©m aparecer√£o na documenta√ß√£o da API.

Por√©m para as respostas adicionais, voc√™ deve garantir que est√° retornando um `Response` como por exemplo o `JSONResponse` diretamente, junto com o c√≥digo de status e o conte√∫do.

## Retorno Adicional com `model`

Voc√™ pode fornecer o par√¢metro `responses` aos seus *decoradores de caminho*.

Este par√¢metro recebe um `dict`, as chaves s√£o os c√≥digos de status para cada retorno, como por exemplo `200`, e os valores s√£o um outro `dict` com a informa√ß√£o de cada um deles.

Cada um desses `dict` de retorno pode ter uma chave `model`, contendo um modelo do Pydantic, assim como o `response_model`.

O **FastAPI** pegar√° este modelo, gerar√° o esquema JSON dele e incluir√° no local correto do OpenAPI.

Por exemplo, para declarar um outro retorno com o status code `404` e um modelo do Pydantic chamado `Message`, voc√™ pode escrever:

{* ../../docs_src/additional_responses/tutorial001.py hl[18,22] *}

/// note | Nota

Lembre-se que voc√™ deve retornar o `JSONResponse` diretamente.

///

/// info | Informa√ß√£o

A chave `model` n√£o √© parte do OpenAPI.

O **FastAPI** pegar√° o modelo do Pydantic, gerar√° o `JSON Schema`, e adicionar√° no local correto.

O local correto √©:

* Na chave `content`, que tem como valor um outro objeto JSON (`dict`) que cont√©m:
    * Uma chave com o media type, como por exemplo `application/json`, que cont√©m como valor um outro objeto JSON, contendo::
        * Uma chave `schema`, que cont√©m como valor o JSON Schema do modelo, sendo este o local correto.
            * O **FastAPI** adiciona aqui a refer√™ncia dos esquemas JSON globais que est√£o localizados em outro lugar, ao inv√©s de inclu√≠-lo diretamente. Deste modo, outras aplica√ß√µes e clientes podem utilizar estes esquemas JSON diretamente, fornecer melhores ferramentas de gera√ß√£o de c√≥digo, etc.

///

O retorno gerado no OpenAI para esta *opera√ß√£o de caminho* ser√°:

```JSON hl_lines="3-12"
{
    "responses": {
        "404": {
            "description": "Additional Response",
            "content": {
                "application/json": {
                    "schema": {
                        "$ref": "#/components/schemas/Message"
                    }
                }
            }
        },
        "200": {
            "description": "Successful Response",
            "content": {
                "application/json": {
                    "schema": {
                        "$ref": "#/components/schemas/Item"
                    }
                }
            }
        },
        "422": {
            "description": "Validation Error",
            "content": {
                "application/json": {
                    "schema": {
                        "$ref": "#/components/schemas/HTTPValidationError"
                    }
                }
            }
        }
    }
}
```

Os esquemas s√£o referenciados em outro local dentro do esquema OpenAPI:

```JSON hl_lines="4-16"
{
    "components": {
        "schemas": {
            "Message": {
                "title": "Message",
                "required": [
                    "message"
                ],
                "type": "object",
                "properties": {
                    "message": {
                        "title": "Message",
                        "type": "string"
                    }
                }
            },
            "Item": {
                "title": "Item",
                "required": [
                    "id",
                    "value"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "title": "Id",
                        "type": "string"
                    },
                    "value": {
                        "title": "Value",
                        "type": "string"
                    }
                }
            },
            "ValidationError": {
                "title": "ValidationError",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "type": "object",
                "properties": {
                    "loc": {
                        "title": "Location",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "msg": {
                        "title": "Message",
                        "type": "string"
                    },
                    "type": {
                        "title": "Error Type",
                        "type": "string"
                    }
                }
            },
            "HTTPValidationError": {
                "title": "HTTPValidationError",
                "type": "object",
                "properties": {
                    "detail": {
                        "title": "Detail",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        }
                    }
                }
            }
        }
    }
}
```

## Media types adicionais para o retorno principal

Voc√™ pode utilizar o mesmo par√¢metro `responses` para adicionar diferentes media types para o mesmo retorno principal.

Por exemplo, voc√™ pode adicionar um media type adicional de `image/png`, declarando que a sua *opera√ß√£o de caminho* pode retornar um objeto JSON (com o media type `application/json`) ou uma imagem PNG:

{* ../../docs_src/additional_responses/tutorial002.py hl[19:24,28] *}

/// note | Nota

Note que voc√™ deve retornar a imagem utilizando um `FileResponse` diretamente.

///

/// info | Informa√ß√£o

A menos que voc√™ especifique um media type diferente explicitamente em seu par√¢metro `responses`, o FastAPI assumir√° que o retorno possui o mesmo media type contido na classe principal de retorno (padr√£o `application/json`).

Por√©m se voc√™ especificou uma classe de retorno com o valor `None` como media type, o FastAPI utilizar√° `application/json` para qualquer retorno adicional que possui um modelo associado.

///

## Combinando informa√ß√µes

Voc√™ tamb√©m pode combinar informa√ß√µes de diferentes lugares, incluindo os par√¢metros `response_model`, `status_code`, e `responses`.

Voc√™ pode declarar um `response_model`, utilizando o c√≥digo de status padr√£o `200` (ou um customizado caso voc√™ precise), e depois adicionar informa√ß√µes adicionais para esse mesmo retorno em `responses`, diretamente no esquema OpenAPI.

O **FastAPI** manter√° as informa√ß√µes adicionais do `responses`, e combinar√° com o esquema JSON do seu modelo.

Por exemplo, voc√™ pode declarar um retorno com o c√≥digo de status `404` que utiliza um modelo do Pydantic que possui um `description` customizado.

E um retorno com o c√≥digo de status `200` que utiliza o seu `response_model`, por√©m inclui um `example` customizado:

{* ../../docs_src/additional_responses/tutorial003.py hl[20:31] *}

Isso ser√° combinado e inclu√≠do em seu OpenAPI, e disponibilizado na documenta√ß√£o da sua API:

<img src="/img/tutorial/additional-responses/image01.png">

## Combinar retornos predefinidos e personalizados

Voc√™ pode querer possuir alguns retornos predefinidos que s√£o aplicados para diversas *opera√ß√µes de caminho*, por√©m voc√™ deseja combinar com retornos personalizados que s√£o necess√°rios para cada *opera√ß√£o de caminho*.

Para estes casos, voc√™ pode utilizar a t√©cnica do Python de "desempacotamento" de um `dict` utilizando `**dict_to_unpack`:

```Python
old_dict = {
    "old key": "old value",
    "second old key": "second old value",
}
new_dict = {**old_dict, "new key": "new value"}
```

Aqui, o `new_dict` ter√° todos os pares de chave-valor do `old_dict` mais o novo par de chave-valor:

```Python
{
    "old key": "old value",
    "second old key": "second old value",
    "new key": "new value",
}
```

Voc√™ pode utilizar essa t√©cnica para reutilizar alguns retornos predefinidos nas suas *opera√ß√µes de caminho* e combin√°-las com personaliza√ß√µes adicionais.

Por exemplo:

{* ../../docs_src/additional_responses/tutorial004.py hl[13:17,26] *}

## Mais informa√ß√µes sobre retornos OpenAPI

Para verificar exatamente o que voc√™ pode incluir nos retornos, voc√™ pode conferir estas se√ß√µes na especifica√ß√£o do OpenAPI:

* <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.1.0.md#responsesObject" class="external-link" target="_blank">Objeto de Retorno OpenAPI</a>, inclui o `Response Object`.
* <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.1.0.md#responseObject" class="external-link" target="_blank">Objeto de Retorno OpenAPI</a>, voc√™ pode incluir qualquer coisa dele diretamente em cada retorno dentro do seu par√¢metro `responses`. Incluindo `description`, `headers`, `content` (dentro dele que voc√™ declara diferentes media types e esquemas JSON), e `links`.


================================================
File: /docs/pt/docs/advanced/additional-status-codes.md
================================================
# C√≥digos de status adicionais

Por padr√£o, o **FastAPI** retornar√° as respostas utilizando o `JSONResponse`, adicionando o conte√∫do do retorno da sua *opera√ß√£o de caminho* dentro do `JSONResponse`.

Ele usar√° o c√≥digo de status padr√£o ou o que voc√™ definir na sua *opera√ß√£o de caminho*.

## C√≥digos de status adicionais

Caso voc√™ queira retornar c√≥digos de status adicionais al√©m do c√≥digo principal, voc√™ pode fazer isso retornando um `Response` diretamente, como por exemplo um `JSONResponse`, e definir os c√≥digos de status adicionais diretamente.

Por exemplo, vamos dizer que voc√™ deseja ter uma *opera√ß√£o de caminho* que permita atualizar itens, e retornar um c√≥digo de status HTTP 200 "OK" quando for bem sucedido.

Mas voc√™ tamb√©m deseja aceitar novos itens. E quando os itens n√£o existiam, ele os cria, e retorna o c√≥digo de status HTTP 201 "Created.

Para conseguir isso, importe `JSONResponse` e retorne o seu conte√∫do diretamente, definindo o `status_code` que voc√™ deseja:

{* ../../docs_src/additional_status_codes/tutorial001_an_py310.py hl[4,25] *}

/// warning | Aviso

Quando voc√™ retorna um `Response` diretamente, como no exemplo acima, ele ser√° retornado diretamente.

Ele n√£o ser√° serializado com um modelo, etc.

Garanta que ele tenha toda informa√ß√£o que voc√™ deseja, e que os valores sejam um JSON v√°lido (caso voc√™ esteja usando `JSONResponse`).

///

/// note | Detalhes t√©cnicos

Voc√™ tamb√©m pode utilizar `from starlette.responses import JSONResponse`.

O **FastAPI** disponibiliza o `starlette.responses` como `fastapi.responses` apenas por conveni√™ncia para voc√™, o programador. Por√©m a maioria dos retornos dispon√≠veis vem diretamente do Starlette. O mesmo com `status`.

///

## OpenAPI e documenta√ß√£o da API

Se voc√™ retorna c√≥digos de status adicionais e retornos diretamente, eles n√£o ser√£o inclu√≠dos no esquema do OpenAPI (a documenta√ß√£o da API), porque o FastAPI n√£o tem como saber de antem√£o o que ser√° retornado.

Mas voc√™ pode documentar isso no seu c√≥digo, utilizando: [Retornos Adicionais](additional-responses.md){.internal-link target=_blank}.


================================================
File: /docs/pt/docs/advanced/advanced-dependencies.md
================================================
# Depend√™ncias avan√ßadas

## Depend√™ncias parametrizadas

Todas as depend√™ncias que vimos at√© agora s√£o fun√ß√µes ou classes fixas.

Mas podem ocorrer casos onde voc√™ deseja ser capaz de definir par√¢metros na depend√™ncia, sem ter a necessidade de declarar diversas fun√ß√µes ou classes.

Vamos imaginar que queremos ter uma depend√™ncia que verifica se o par√¢metro de consulta `q` possui um valor fixo.

Por√©m n√≥s queremos poder parametrizar o conte√∫do fixo.

## Uma inst√¢ncia "cham√°vel"

Em Python existe uma maneira de fazer com que uma inst√¢ncia de uma classe seja um "cham√°vel".

N√£o propriamente a classe (que j√° √© um cham√°vel), mas a inst√¢ncia desta classe.

Para fazer isso, n√≥s declaramos o m√©todo `__call__`:

{* ../../docs_src/dependencies/tutorial011_an_py39.py hl[12] *}

Neste caso, o `__call__` √© o que o **FastAPI** utilizar√° para verificar par√¢metros adicionais e sub depend√™ncias, e isso √© o que ser√° chamado para passar o valor ao par√¢metro na sua *fun√ß√£o de opera√ß√£o de rota* posteriormente.

## Parametrizar a inst√¢ncia

E agora, n√≥s podemos utilizar o `__init__` para declarar os par√¢metros da inst√¢ncia que podemos utilizar para "parametrizar" a depend√™ncia:

{* ../../docs_src/dependencies/tutorial011_an_py39.py hl[9] *}

Neste caso, o **FastAPI** nunca tocar√° ou se importar√° com o `__init__`, n√≥s vamos utilizar diretamente em nosso c√≥digo.

## Crie uma inst√¢ncia

N√≥s poder√≠amos criar uma inst√¢ncia desta classe com:

{* ../../docs_src/dependencies/tutorial011_an_py39.py hl[18] *}

E deste modo n√≥s podemos "parametrizar" a nossa depend√™ncia, que agora possui `"bar"` dentro dele, como o atributo `checker.fixed_content`.

## Utilize a inst√¢ncia como depend√™ncia

Ent√£o, n√≥s podemos utilizar este `checker` em um `Depends(checker)`, no lugar de `Depends(FixedContentQueryChecker)`, porque a depend√™ncia √© a inst√¢ncia, `checker`, e n√£o a pr√≥pria classe.

E quando a depend√™ncia for resolvida, o **FastAPI** chamar√° este `checker` como:

```Python
checker(q="somequery")
```

...e passar o que quer que isso retorne como valor da depend√™ncia em nossa *fun√ß√£o de opera√ß√£o de rota* como o par√¢metro `fixed_content_included`:

{* ../../docs_src/dependencies/tutorial011_an_py39.py hl[22] *}

/// tip | Dica

Tudo isso parece n√£o ser natural. E pode n√£o estar muito claro ou aparentar ser √∫til ainda.

Estes exemplos s√£o intencionalmente simples, por√©m mostram como tudo funciona.

Nos cap√≠tulos sobre seguran√ßa, existem fun√ß√µes utilit√°rias que s√£o implementadas desta maneira.

Se voc√™ entendeu tudo isso, voc√™ j√° sabe como essas fun√ß√µes utilit√°rias para seguran√ßa funcionam por debaixo dos panos.

///


================================================
File: /docs/pt/docs/advanced/async-tests.md
================================================
# Testes Ass√≠ncronos

Voc√™ j√° viu como testar as suas aplica√ß√µes **FastAPI** utilizando o `TestClient` que √© fornecido. At√© agora, voc√™ viu apenas como escrever testes s√≠ncronos, sem utilizar fun√ß√µes `async`.

Ser capaz de utilizar fun√ß√µes ass√≠ncronas em seus testes pode ser √∫til, por exemplo, quando voc√™ est√° realizando uma consulta em seu banco de dados de maneira ass√≠ncrona. Imagine que voc√™ deseja testar realizando requisi√ß√µes para a sua aplica√ß√£o FastAPI e depois verificar que a sua aplica√ß√£o inseriu corretamente as informa√ß√µes no banco de dados, ao utilizar uma biblioteca ass√≠ncrona para banco de dados.

Vamos ver como n√≥s podemos fazer isso funcionar.

## pytest.mark.anyio

Se quisermos chamar fun√ß√µes ass√≠ncronas em nossos testes, as nossas fun√ß√µes de teste precisam ser ass√≠ncronas. O AnyIO oferece um plugin bem legal para isso, que nos permite especificar que algumas das nossas fun√ß√µes de teste precisam ser chamadas de forma ass√≠ncrona.

## HTTPX

Mesmo que a sua aplica√ß√£o **FastAPI** utilize fun√ß√µes normais com `def` no lugar de `async def`, ela ainda √© uma aplica√ß√£o `async` por baixo dos panos.

O `TestClient` faz algumas m√°gicas para invocar a aplica√ß√£o FastAPI ass√≠ncrona em suas fun√ß√µes `def` normais, utilizando o pytest padr√£o. Por√©m a m√°gica n√£o acontece mais quando n√≥s estamos utilizando dentro de fun√ß√µes ass√≠ncronas. Ao executar os nossos testes de forma ass√≠ncrona, n√≥s n√£o podemos mais utilizar o `TestClient` dentro das nossas fun√ß√µes de teste.

O `TestClient` √© baseado no <a href="https://www.python-httpx.org" class="external-link" target="_blank">HTTPX</a>, e felizmente n√≥s podemos utiliz√°-lo diretamente para testar a API.

## Exemplo

Para um exemplos simples, vamos considerar uma estrutura de arquivos semelhante ao descrito em [Bigger Applications](../tutorial/bigger-applications.md){.internal-link target=_blank} e [Testing](../tutorial/testing.md){.internal-link target=_blank}:

```
.
‚îú‚îÄ‚îÄ app
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ __init__.py
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ main.py
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ test_main.py
```

O arquivo `main.py` teria:

{* ../../docs_src/async_tests/main.py *}

O arquivo `test_main.py` teria os testes para para o arquivo `main.py`, ele poderia ficar assim:

{* ../../docs_src/async_tests/test_main.py *}

## Execut√°-lo

Voc√™ pode executar os seus testes normalmente via:

<div class="termy">

```console
$ pytest

---> 100%
```

</div>

## Em Detalhes

O marcador `@pytest.mark.anyio` informa ao pytest que esta fun√ß√£o de teste deve ser invocada de maneira ass√≠ncrona:

{* ../../docs_src/async_tests/test_main.py hl[7] *}

/// tip | Dica

Note que a fun√ß√£o de teste √© `async def` agora, no lugar de apenas `def` como quando est√°vamos utilizando o `TestClient` anteriormente.

///

Ent√£o podemos criar um `AsyncClient` com a aplica√ß√£o, e enviar requisi√ß√µes ass√≠ncronas para ela utilizando `await`.

{* ../../docs_src/async_tests/test_main.py hl[9:12] *}

Isso √© equivalente a:

```Python
response = client.get('/')
```

...que n√≥s utilizamos para fazer as nossas requisi√ß√µes utilizando o `TestClient`.

/// tip | Dica

Note que n√≥s estamos utilizando async/await com o novo `AsyncClient` - a requisi√ß√£o √© ass√≠ncrona.

///

/// warning | Aviso

Se a sua aplica√ß√£o depende dos eventos de vida √∫til (*lifespan*), o `AsyncClient` n√£o acionar√° estes eventos. Para garantir que eles s√£o acionados, utilize o `LifespanManager` do <a href="https://github.com/florimondmanca/asgi-lifespan#usage" class="external-link" target="_blank">florimondmanca/asgi-lifespan</a>.

///

## Outras Chamadas de Fun√ß√µes Ass√≠ncronas

Como a fun√ß√£o de teste agora √© ass√≠ncrona, voc√™ pode chamar (e `esperar`) outras fun√ß√µes `async` al√©m de enviar requisi√ß√µes para a sua aplica√ß√£o FastAPI em seus testes, exatamente como voc√™ as chamaria em qualquer outro lugar do seu c√≥digo.

/// tip | Dica

Se voc√™ se deparar com um `RuntimeError: Task attached to a different loop` ao integrar fun√ß√µes ass√≠ncronas em seus testes (e.g. ao utilizar o <a href="https://stackoverflow.com/questions/41584243/runtimeerror-task-attached-to-a-different-loop" class="external-link" target="_blank">MotorClient do MongoDB</a>) Lembre-se de instanciar objetos que precisam de um loop de eventos (*event loop*) apenas em fun√ß√µes ass√≠ncronas, e.g. um *"callback"* `'@app.on_event("startup")`.

///


================================================
File: /docs/pt/docs/advanced/behind-a-proxy.md
================================================
# Atr√°s de um Proxy

Em algumas situa√ß√µes, voc√™ pode precisar usar um servidor **proxy** como Traefik ou Nginx com uma configura√ß√£o que adiciona um prefixo de caminho extra que n√£o √© visto pela sua aplica√ß√£o.

Nesses casos, voc√™ pode usar `root_path` para configurar sua aplica√ß√£o.

O `root_path` √© um mecanismo fornecido pela especifica√ß√£o ASGI (que o FastAPI utiliza, atrav√©s do Starlette).

O `root_path` √© usado para lidar com esses casos espec√≠ficos.

E tamb√©m √© usado internamente ao montar sub-aplica√ß√µes.

## Proxy com um prefixo de caminho removido

Ter um proxy com um prefixo de caminho removido, nesse caso, significa que voc√™ poderia declarar um caminho em `/app` no seu c√≥digo, mas ent√£o, voc√™ adiciona uma camada no topo (o proxy) que colocaria sua aplica√ß√£o **FastAPI** sob um caminho como `/api/v1`.

Nesse caso, o caminho original `/app` seria servido em `/api/v1/app`.

Embora todo o seu c√≥digo esteja escrito assumindo que existe apenas `/app`.

{* ../../docs_src/behind_a_proxy/tutorial001.py hl[6] *}

E o proxy estaria **"removendo"** o **prefixo do caminho** dinamicamente antes de transmitir a solicita√ß√£o para o servidor da aplica√ß√£o (provavelmente Uvicorn via CLI do FastAPI), mantendo sua aplica√ß√£o convencida de que est√° sendo servida em `/app`, para que voc√™ n√£o precise atualizar todo o seu c√≥digo para incluir o prefixo `/api/v1`.

At√© aqui, tudo funcionaria normalmente.

Mas ent√£o, quando voc√™ abre a interface de documenta√ß√£o integrada (o frontend), ele esperaria obter o OpenAPI schema em `/openapi.json`, em vez de `/api/v1/openapi.json`.

Ent√£o, o frontend (que roda no navegador) tentaria acessar `/openapi.json` e n√£o conseguiria obter o OpenAPI schema.

Como temos um proxy com um prefixo de caminho de `/api/v1` para nossa aplica√ß√£o, o frontend precisa buscar o OpenAPI schema em `/api/v1/openapi.json`.

```mermaid
graph LR

browser("Browser")
proxy["Proxy on http://0.0.0.0:9999/api/v1/app"]
server["Server on http://127.0.0.1:8000/app"]

browser --> proxy
proxy --> server
```

/// tip | Dica

O IP `0.0.0.0` √© comumente usado para significar que o programa escuta em todos os IPs dispon√≠veis naquela m√°quina/servidor.

///

A interface de documenta√ß√£o tamb√©m precisaria do OpenAPI schema para declarar que API `server` est√° localizado em `/api/v1` (atr√°s do proxy). Por exemplo:

```JSON hl_lines="4-8"
{
    "openapi": "3.1.0",
    // Mais coisas aqui
    "servers": [
        {
            "url": "/api/v1"
        }
    ],
    "paths": {
            // Mais coisas aqui
    }
}
```

Neste exemplo, o "Proxy" poderia ser algo como **Traefik**. E o servidor seria algo como CLI do FastAPI com **Uvicorn**, executando sua aplica√ß√£o FastAPI.

### Fornecendo o `root_path`

Para conseguir isso, voc√™ pode usar a op√ß√£o de linha de comando `--root-path` assim:

<div class="termy">

```console
$ fastapi run main.py --root-path /api/v1

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

Se voc√™ usar Hypercorn, ele tamb√©m tem a op√ß√£o `--root-path`.

/// note | Detalhes T√©cnicos

A especifica√ß√£o ASGI define um `root_path` para esse caso de uso.

E a op√ß√£o de linha de comando `--root-path` fornece esse `root_path`.

///

### Verificando o `root_path` atual

Voc√™ pode obter o `root_path` atual usado pela sua aplica√ß√£o para cada solicita√ß√£o, ele faz parte do dicion√°rio `scope` (que faz parte da especifica√ß√£o ASGI).

Aqui estamos incluindo ele na mensagem apenas para fins de demonstra√ß√£o.

{* ../../docs_src/behind_a_proxy/tutorial001.py hl[8] *}

Ent√£o, se voc√™ iniciar o Uvicorn com:

<div class="termy">

```console
$ fastapi run main.py --root-path /api/v1

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

A resposta seria algo como:

```JSON
{
    "message": "Hello World",
    "root_path": "/api/v1"
}
```

### Configurando o `root_path` na aplica√ß√£o FastAPI

Alternativamente, se voc√™ n√£o tiver uma maneira de fornecer uma op√ß√£o de linha de comando como `--root-path` ou equivalente, voc√™ pode definir o par√¢metro `--root-path` ao criar sua aplica√ß√£o FastAPI:

{* ../../docs_src/behind_a_proxy/tutorial002.py hl[3] *}

Passar o `root_path`h para `FastAPI` seria o equivalente a passar a op√ß√£o de linha de comando `--root-path` para Uvicorn ou Hypercorn.

### Sobre `root_path`

Tenha em mente que o servidor (Uvicorn) n√£o usar√° esse `root_path` para nada al√©m de pass√°-lo para a aplica√ß√£o.

Mas se voc√™ acessar com seu navegador <a href="http://127.0.0.1:8000" class="external-link" target="_blank">http://127.0.0.1:8000/app</a> voc√™ ver√° a resposta normal:

```JSON
{
    "message": "Hello World",
    "root_path": "/api/v1"
}
```

Portanto, ele n√£o esperar√° ser acessado em `http://127.0.0.1:8000/api/v1/app`.

O Uvicorn esperar√° que o proxy acesse o Uvicorn em `http://127.0.0.1:8000/app`, e ent√£o seria responsabilidade do proxy adicionar o prefixo extra `/api/v1` no topo.

## Sobre proxies com um prefixo de caminho removido

Tenha em mente que um proxy com prefixo de caminho removido √© apenas uma das maneiras de configur√°-lo.

Provavelmente, em muitos casos, o padr√£o ser√° que o proxy n√£o tenha um prefixo de caminho removido.

Em um caso como esse (sem um prefixo de caminho removido), o proxy escutaria em algo como `https://myawesomeapp.com`, e ent√£o se o navegador acessar `https://myawesomeapp.com/api/v1/app` e seu servidor (por exemplo, Uvicorn) escutar em `http://127.0.0.1:8000` o proxy (sem um prefixo de caminho removido) acessaria o Uvicorn no mesmo caminho: `http://127.0.0.1:8000/api/v1/app`.

## Testando localmente com Traefik

Voc√™ pode facilmente executar o experimento localmente com um prefixo de caminho removido usando <a href="https://docs.traefik.io/" class="external-link" target="_blank">Traefik</a>.

<a href="https://github.com/containous/traefik/releases" class="external-link" target="_blank">Fa√ßa o download do Traefik.</a>, Ele √© um √∫nico bin√°rio e voc√™ pode extrair o arquivo compactado e execut√°-lo diretamente do terminal.

Ent√£o, crie um arquivo `traefik.toml` com:

```TOML hl_lines="3"
[entryPoints]
  [entryPoints.http]
    address = ":9999"

[providers]
  [providers.file]
    filename = "routes.toml"
```

Isso diz ao Traefik para escutar na porta 9999 e usar outro arquivo `routes.toml`.

/// tip | Dica

Estamos usando a porta 9999 em vez da porta padr√£o HTTP 80 para que voc√™ n√£o precise execut√°-lo com privil√©gios de administrador (`sudo`).

///

Agora crie esse outro arquivo `routes.toml`:

```TOML hl_lines="5  12  20"
[http]
  [http.middlewares]

    [http.middlewares.api-stripprefix.stripPrefix]
      prefixes = ["/api/v1"]

  [http.routers]

    [http.routers.app-http]
      entryPoints = ["http"]
      service = "app"
      rule = "PathPrefix(`/api/v1`)"
      middlewares = ["api-stripprefix"]

  [http.services]

    [http.services.app]
      [http.services.app.loadBalancer]
        [[http.services.app.loadBalancer.servers]]
          url = "http://127.0.0.1:8000"
```

Esse arquivo configura o Traefik para usar o prefixo de caminho `/api/v1`.

E ent√£o ele redirecionar√° suas solicita√ß√µes para seu Uvicorn rodando em `http://127.0.0.1:8000`.

Agora inicie o Traefik:

<div class="termy">

```console
$ ./traefik --configFile=traefik.toml

INFO[0000] Configuration loaded from file: /home/user/awesomeapi/traefik.toml
```

</div>

E agora inicie sua aplica√ß√£o, usando a op√ß√£o `--root-path`:

<div class="termy">

```console
$ fastapi run main.py --root-path /api/v1

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

### Verifique as respostas

Agora, se voc√™ for ao URL com a porta para o Uvicorn: <a href="http://127.0.0.1:8000/app" class="external-link" target="_blank">http://127.0.0.1:8000/app</a>, voc√™ ver√° a resposta normal:

```JSON
{
    "message": "Hello World",
    "root_path": "/api/v1"
}
```

/// tip | Dica

Perceba que, mesmo acessando em `http://127.0.0.1:8000/app`, ele mostra o `root_path` de `/api/v1`, retirado da op√ß√£o `--root-path`.

///

E agora abra o URL com a porta para o Traefik, incluindo o prefixo de caminho: <a href="http://127.0.0.1:9999/api/v1/app" class="external-link" target="_blank">http://127.0.0.1:9999/api/v1/app</a>.

Obtemos a mesma resposta:

```JSON
{
    "message": "Hello World",
    "root_path": "/api/v1"
}
```

mas desta vez no URL com o prefixo de caminho fornecido pelo proxy: `/api/v1`.

Claro, a ideia aqui √© que todos acessariam a aplica√ß√£o atrav√©s do proxy, ent√£o a vers√£o com o prefixo de caminho `/api/v1` √© a "correta".

E a vers√£o sem o prefixo de caminho (`http://127.0.0.1:8000/app`), fornecida diretamente pelo Uvicorn, seria exclusivamente para o _proxy_ (Traefik) acess√°-la.

Isso demonstra como o Proxy (Traefik) usa o prefixo de caminho e como o servidor (Uvicorn) usa o `root_path` da op√ß√£o `--root-path`.

### Verifique a interface de documenta√ß√£o

Mas aqui est√° a parte divertida. ‚ú®

A maneira "oficial" de acessar a aplica√ß√£o seria atrav√©s do proxy com o prefixo de caminho que definimos. Ent√£o, como esperar√≠amos, se voc√™ tentar a interface de documenta√ß√£o servida diretamente pelo Uvicorn, sem o prefixo de caminho no URL, ela n√£o funcionar√°, porque espera ser acessada atrav√©s do proxy.

