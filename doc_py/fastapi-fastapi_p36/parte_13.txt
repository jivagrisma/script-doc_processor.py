-   ×œ×ª×¢×“ ×”×›×œ ×‘×××¦×¢×•×ª OpenAPI, ×ª×™×¢×•×“ ×©×‘×• ×™×•×›×œ×• ×œ×”×©×ª××©:
    -   ××¢×¨×›×•×ª ×ª×™×¢×•×“ ××™× ×˜×¨×§×˜×™×‘×™×•×ª.
    -   ××¢×¨×›×•×ª ×™×™×¦×•×¨ ×§×•×“ ××•×˜×•××˜×™×•×ª, ×œ×”×¨×‘×” ×©×¤×•×ª.
-   ×œ×¡×¤×§ ×™×©×™×¨×•×ª ×©×ª×™ ××¢×¨×›×•×ª ×ª×™×¢×•×“ ×¨×©×ª×™×•×ª.

---

×¨×§ ×’×¨×“× ×• ××ª ×§×¦×” ×”×§×¨×—×•×Ÿ, ××‘×œ ×›×‘×¨ ×™×© ×œ×›× ×¨×¢×™×•×Ÿ ×©×œ ××™×š ×”×›×œ ×¢×•×‘×“.

× ×¡×• ×œ×©× ×•×ª ××ª ×”×©×•×¨×”:

```Python
    return {"item_name": item.name, "item_id": item_id}
```

...×:

```Python
        ... "item_name": item.name ...
```

...×œ:

```Python
        ... "item_price": item.price ...
```

...×•×¨××• ××™×š ×”×¢×•×¨×š ×©×œ×›× ××©×œ×™× ××ª ×”×××¤×™×™× ×™× ×•×™×•×“×¢ ××ª ×”×˜×™×¤×•×¡×™× ×©×œ×”×:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

×œ×“×•×’×× ×™×•×ª×¨ ×©×œ××” ×©×›×•×œ×œ×ª ×¢×•×“ ×ª×›×•× ×•×ª, ×¨××• ××ª ×”<a href="https://fastapi.tiangolo.com/tutorial/">××“×¨×™×š - ×œ××©×ª××©</a>.

**×”×ª×¨××ª ×¡×¤×•×™×œ×¨×™×**: ×”××“×¨×™×š - ×œ××©×ª××© ×›×•×œ×œ:

-   ×”×›×¨×–×” ×¢×œ **×¤×¨××˜×¨×™×** ×××§×•×¨×•×ª ××—×¨×™× ×•×©×•× ×™× ×›×’×•×Ÿ: **×›×•×ª×¨×•×ª**, **×¢×•×’×™×•×ª**, **×˜×¤×¡×™×** ×• - **×§×‘×¦×™×**.
-   ××™×š ×œ×§×‘×•×¢ **××’×‘×œ×•×ª ××™××•×ª** ×‘×¢×–×¨×ª `maximum_length` ××• `regex`.
-   ×“×¨×š ×—×–×§×” ×•×§×œ×” ×œ×”×©×ª××© ×‘**<abbr title="×™×“×•×¢×” ×’× ×›×¨×›×™×‘×™×, ××©××‘×™×, ×¡×¤×§×™×, ×©×™×¨×•×ª×™×, ××•×–×¨×§×™×">×”×–×¨×§×ª ×ª×œ×•×™×•×ª</abbr>**.
-   ××‘×˜×—×” ×•×”×ª×××ª×•×ª, ×›×•×œ×œ ×ª××™×›×” ×‘ - **OAuth2** ×¢× **JWT** ×•×”×ª×××ª×•×ª **HTTP Basic**.
-   ×˜×›× ×™×§×•×ª ××ª×§×“××•×ª (××‘×œ ×§×œ×•×ª ×‘××•×ª×” ××™×“×”) ×œ×”×›×¨×–×ª ××•×‘×™×™×§×˜×™ JSON ××§×•× × ×™× (×ª×•×“×•×ª ×œ - Pydantic).
-   ××™× ×˜×¨×§×¦×™×” ×¢× **GraphQL** ×“×¨×š <a href="https://strawberry.rocks" class="external-link" target="_blank">Strawberry</a> ×•×¡×¤×¨×™×•×ª ××—×¨×•×ª.
-   ×ª×›×•× ×•×ª × ×•×¡×¤×•×ª ×¨×‘×•×ª (×ª×•×“×•×ª ×œ - Starlette) ×›×’×•×Ÿ:
    -   **WebSockets**
    -   ×‘×“×™×§×•×ª ×§×œ×•×ª ×‘××™×•×—×“ ××‘×•×¡×¡×•×ª ×¢×œ `requests` ×• - `pytest`
    -   **CORS**
    -   **Cookie Sessions**
    -   ...×•×¢×•×“.

## ×‘×™×¦×•×¢×™×

×‘×“×™×§×•×ª ×¢×¦×××™×•×ª ×©×œ TechEmpower ×”×¨××• ×©××¤×œ×™×§×¦×™×•×ª **FastAPI** ×©×¨×¦×•×ª ×ª×—×ª Uvicorn ×”×Ÿ <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">××ª×©×ª×™×•×ª ×”×¤×™×™×ª×•×Ÿ ×”××”×™×¨×•×ª ×‘×™×•×ª×¨</a>, ×¨×§ ××ª×—×ª ×œ - Starlette ×• - Uvicorn ×¢×¦××Ÿ (×© - FastAPI ××‘×•×¡×¡×ª ×¢×œ×™×”×Ÿ). (\*)

×›×“×™ ×œ×”×‘×™×Ÿ ×¢×•×“ ×¢×œ ×”× ×•×©×, ×¨××• ××ª ×”×¤×¨×§ <a href="https://fastapi.tiangolo.com/benchmarks/" class="internal-link" target="_blank">Benchmarks</a>.

## ×ª×œ×•×™×•×ª ××•×¤×¦×™×•× ×œ×™×•×ª

×‘×©×™××•×© Pydantic:

-   <a href="https://github.com/JoshData/python-email-validator" target="_blank"><code>email-validator</code></a> - ×œ××™××•×ª ×›×ª×•×‘×•×ª ××™××™×™×œ.

×‘×©×™××•×© Starlette:

-   <a href="https://www.python-httpx.org" target="_blank"><code>httpx</code></a> - ×“×¨×•×© ×× ×‘×¨×¦×•× ×›× ×œ×”×©×ª××© ×‘ - `TestClient`.
-   <a href="https://jinja.palletsprojects.com" target="_blank"><code>jinja2</code></a> - ×“×¨×•×© ×× ×‘×¨×¦×•× ×›× ×œ×”×©×ª××© ×‘×‘×¨×™×¨×ª ×”××—×“×œ ×©×œ ×ª×¦×•×¨×ª ×”×˜××¤×œ×™×™×˜×™×.
-   <a href="https://github.com/Kludex/python-multipart" target="_blank"><code>python-multipart</code></a> - ×“×¨×•×© ×× ×‘×¨×¦×•× ×›× ×œ×ª××•×š ×‘ <abbr title="×”××¨×ª ×”××—×¨×•×–×ª ×©××’×™×¢×” ××‘×§×©×ª HTTP ×œ××™×“×¢ ×¤×™×™×ª×•×Ÿ">"×¤×¨×¡×•×¨"</abbr> ×˜×¤×¡×™×, ×‘××¦××¢×•×ª <code dir="ltr">request.form()</code>.
-   <a href="https://pythonhosted.org/itsdangerous/" target="_blank"><code>itsdangerous</code></a> - ×“×¨×•×© ×× ×‘×¨×¦×•× ×›× ×œ×”×©×ª××© ×‘ - `SessionMiddleware`.
-   <a href="https://pyyaml.org/wiki/PyYAMLDocumentation" target="_blank"><code>pyyaml</code></a> - ×“×¨×•×© ×× ×‘×¨×¦×•× ×›× ×œ×”×©×ª××© ×‘ - `SchemaGenerator` ×©×œ Starlette (×›× ×¨××” ×©××ª× ×œ× ×¦×¨×™×›×™× ××ª ×–×” ×¢× FastAPI).

×‘×©×™××•×© FastAPI / Starlette:

-   <a href="https://www.uvicorn.org" target="_blank"><code>uvicorn</code></a> - ×œ×©×¨×ª ×©×˜×•×¢×Ÿ ×•××’×™×© ××ª ×”××¤×œ×™×§×¦×™×” ×©×œ×›×.
-   <a href="https://github.com/ijl/orjson" target="_blank"><code>orjson</code></a> - ×“×¨×•×© ×× ×‘×¨×¦×•× ×›× ×œ×”×©×ª××© ×‘ - `ORJSONResponse`.
-   <a href="https://github.com/esnme/ultrajson" target="_blank"><code>ujson</code></a> - ×“×¨×•×© ×× ×‘×¨×¦×•× ×›× ×œ×”×©×ª××© ×‘ - `UJSONResponse`.

×ª×•×›×œ×• ×œ×”×ª×§×™×Ÿ ××ª ×›×œ ××œ×• ×‘×××¦×¢×•×ª <code dir="ltr">pip install "fastapi[all]"</code>.

## ×¨×©×™×•×Ÿ

×”×¤×¨×•×™×§×˜ ×”×–×” ×”×•× ×ª×—×ª ×”×ª× ××™× ×©×œ ×¨×©×™×•×Ÿ MIT.


================================================
File: /docs/hu/mkdocs.yml
================================================
INHERIT: ../en/mkdocs.yml


================================================
File: /docs/hu/docs/index.md
================================================
<p align="center">
  <a href="https://fastapi.tiangolo.com"><img src="https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png" alt="FastAPI"></a>
</p>
<p align="center">
    <em>FastAPI keretrendszer, nagy teljesÃ­tmÃ©ny, kÃ¶nnyen tanulhatÃ³, gyorsan kÃ³dolhatÃ³, productionre kÃ©sz</em>
</p>
<p align="center">
<a href="https://github.com/fastapi/fastapi/actions?query=workflow%3ATest+event%3Apush+branch%3Amaster" target="_blank">
    <img src="https://github.com/fastapi/fastapi/workflows/Test/badge.svg?event=push&branch=master" alt="Test">
</a>
<a href="https://coverage-badge.samuelcolvin.workers.dev/redirect/fastapi/fastapi" target="_blank">
    <img src="https://coverage-badge.samuelcolvin.workers.dev/fastapi/fastapi.svg" alt="Coverage">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://img.shields.io/pypi/v/fastapi?color=%2334D058&label=pypi%20package" alt="Package version">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://img.shields.io/pypi/pyversions/fastapi.svg?color=%2334D058" alt="Supported Python versions">
</a>
</p>

---

**DokumentÃ¡ciÃ³**: <a href="https://fastapi.tiangolo.com" target="_blank">https://fastapi.tiangolo.com</a>

**ForrÃ¡s kÃ³d**: <a href="https://github.com/fastapi/fastapi" target="_blank">https://github.com/fastapi/fastapi</a>

---
A FastAPI egy modern, gyors (nagy teljesÃ­tmÃ©nyÅ±), webes keretrendszer API-ok Ã©pÃ­tÃ©sÃ©hez Python -al, a Python szabvÃ¡nyos tÃ­pusjelÃ¶lÃ©seire Ã©pÃ­tve.


Kulcs funkciÃ³k:

* **Gyors**: Nagyon nagy teljesÃ­tmÃ©ny, a **NodeJS**-el Ã©s a **Go**-val egyenrangÃº (a Starlettenek Ã©s a Pydantic-nek kÃ¶szÃ¶nhetÅ‘en). [Az egyik leggyorsabb Python keretrendszer](#performance).
* **Gyorsan kÃ³dolhatÃ³**: A funkciÃ³k fejlesztÃ©si sebessÃ©gÃ©t 200-300 szÃ¡zalÃ©kkal megnÃ¶veli. *
* **Kevesebb hiba**: KÃ¶rÃ¼lbelÃ¼l 40%-al csÃ¶kkenti az emberi (fejlesztÅ‘i) hibÃ¡k szÃ¡mÃ¡t. *
* **IntuitÃ­v**: KivÃ¡lÃ³ szerkesztÅ‘ tÃ¡mogatÃ¡s. <abbr title="mÃ¡s nÃ©ven auto-complete, autocompletion, IntelliSense">KiegÃ©szÃ­tÃ©s</abbr> mindenhol. Kevesebb hibakeresÃ©ssel tÃ¶ltÃ¶tt idÅ‘.
* **EgyszerÅ±**: EgyszerÅ± tanulÃ¡sra Ã©s hasznÃ¡latra tervezve. Kevesebb dokumentÃ¡ciÃ³ olvasÃ¡ssal tÃ¶ltÃ¶tt idÅ‘.
* **RÃ¶vid**: KÃ³d duplikÃ¡ciÃ³ minimalizÃ¡lÃ¡sa. TÃ¶bb funkciÃ³ minden paramÃ©ter deklarÃ¡lÃ¡sÃ¡val. Kevesebb hiba.
* **Robosztus**: Production ready kÃ³d. Automatikus interaktÃ­v dokumentÃ¡ciÃ³ val.
* **SzabvÃ¡ny alapÃº**: Az API-ok nyÃ­lt szabvÃ¡nyaira alapulÃ³ (Ã©s azokkal teljesen kompatibilis): <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> (korÃ¡bban Swagger nÃ©ven ismert) Ã©s a <a href="https://json-schema.org/" class="external-link" target="_blank">JSON Schema</a>.

<small>* Egy production alkalmazÃ¡sokat Ã©pÃ­tÅ‘ belsÅ‘ fejlesztÅ‘i csapat tesztjein alapulÃ³ becslÃ©s. </small>

## Szponzorok

<!-- sponsors -->

{% if sponsors %}
{% for sponsor in sponsors.gold -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor -%}
{%- for sponsor in sponsors.silver -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor %}
{% endif %}

<!-- /sponsors -->

<a href="https://fastapi.tiangolo.com/fastapi-people/#sponsors" class="external-link" target="_blank">TovÃ¡bbi szponzorok</a>

## VÃ©lemÃ©nyek

"_[...] I'm using **FastAPI** a ton these days. [...] I'm actually planning to use it for all of my team's **ML services at Microsoft**. Some of them are getting integrated into the core **Windows** product and some **Office** products._"

<div style="text-align: right; margin-right: 10%;">Kabir Khan - <strong>Microsoft</strong> <a href="https://github.com/fastapi/fastapi/pull/26" target="_blank"><small>(ref)</small></a></div>

---

"_We adopted the **FastAPI** library to spawn a **REST** server that can be queried to obtain **predictions**. [for Ludwig]_"

<div style="text-align: right; margin-right: 10%;">Piero Molino, Yaroslav Dudin, and Sai Sumanth Miryala - <strong>Uber</strong> <a href="https://eng.uber.com/ludwig-v0-2/" target="_blank"><small>(ref)</small></a></div>

---

"_**Netflix** is pleased to announce the open-source release of our **crisis management** orchestration framework: **Dispatch**! [built with **FastAPI**]_"

<div style="text-align: right; margin-right: 10%;">Kevin Glisson, Marc Vilanova, Forest Monsen - <strong>Netflix</strong> <a href="https://netflixtechblog.com/introducing-dispatch-da4b8a2a8072" target="_blank"><small>(ref)</small></a></div>

---

"_Iâ€™m over the moon excited about **FastAPI**. Itâ€™s so fun!_"

<div style="text-align: right; margin-right: 10%;">Brian Okken - <strong><a href="https://pythonbytes.fm/episodes/show/123/time-to-right-the-py-wrongs?time_in_sec=855" target="_blank">Python Bytes</a> podcast host</strong> <a href="https://twitter.com/brianokken/status/1112220079972728832" target="_blank"><small>(ref)</small></a></div>

---

"_Honestly, what you've built looks super solid and polished. In many ways, it's what I wanted **Hug** to be - it's really inspiring to see someone build that._"

<div style="text-align: right; margin-right: 10%;">Timothy Crosley - <strong><a href="https://github.com/hugapi/hug" target="_blank">Hug</a> creator</strong> <a href="https://news.ycombinator.com/item?id=19455465" target="_blank"><small>(ref)</small></a></div>

---

"_If you're looking to learn one **modern framework** for building REST APIs, check out **FastAPI** [...] It's fast, easy to use and easy to learn [...]_"

"_We've switched over to **FastAPI** for our **APIs** [...] I think you'll like it [...]_"

<div style="text-align: right; margin-right: 10%;">Ines Montani - Matthew Honnibal - <strong><a href="https://explosion.ai" target="_blank">Explosion AI</a> founders - <a href="https://spacy.io" target="_blank">spaCy</a> creators</strong> <a href="https://twitter.com/_inesmontani/status/1144173225322143744" target="_blank"><small>(ref)</small></a> - <a href="https://twitter.com/honnibal/status/1144031421859655680" target="_blank"><small>(ref)</small></a></div>

---

"_If anyone is looking to build a production Python API, I would highly recommend **FastAPI**. It is **beautifully designed**, **simple to use** and **highly scalable**, it has become a **key component** in our API first development strategy and is driving many automations and services such as our Virtual TAC Engineer._"

<div style="text-align: right; margin-right: 10%;">Deon Pillsbury - <strong>Cisco</strong> <a href="https://www.linkedin.com/posts/deonpillsbury_cisco-cx-python-activity-6963242628536487936-trAp/" target="_blank"><small>(ref)</small></a></div>

---

## **Typer**, a CLI-ok FastAPI-ja

<a href="https://typer.tiangolo.com" target="_blank"><img src="https://typer.tiangolo.com/img/logo-margin/logo-margin-vector.svg" style="width: 20%;"></a>

Ha egy olyan CLI alkalmazÃ¡st fejlesztesz amit a parancssorban kell hasznÃ¡lni webes API helyett, tekintsd meg: <a href="https://typer.tiangolo.com/" class="external-link" target="_blank">**Typer**</a>.

**Typer** a FastAPI kistestvÃ©re. A **CLI-k FastAPI-ja**. âŒ¨ï¸ ğŸš€

## KÃ¶vetelmÃ©nyek

A FastAPI Ã³riÃ¡sok vÃ¡llÃ¡n Ã¡ll:

* <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> a webes rÃ©szekhez.
* <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> az adat rÃ©szekhez.

## TelepÃ­tÃ©s

<div class="termy">

```console
$ pip install fastapi

---> 100%
```

</div>

A production-hÃ¶z egy ASGI szerverre is szÃ¼ksÃ©g lesz, mint pÃ©ldÃ¡ul az <a href="https://www.uvicorn.org" class="external-link" target="_blank">Uvicorn</a> vagy a <a href="https://github.com/pgjones/hypercorn" class="external-link" target="_blank">Hypercorn</a>.

<div class="termy">

```console
$ pip install "uvicorn[standard]"

---> 100%
```

</div>

## PÃ©lda

### Hozd lÃ©tre

* Hozz lÃ©tre a `main.py` fÃ¡jlt a kÃ¶vetkezÅ‘ tartalommal:

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

<details markdown="1">
<summary>Vagy hasznÃ¡ld az <code>async def</code>-et...</summary>

Ha a kÃ³dod `async` / `await`-et, hasznÃ¡l `async def`:

```Python hl_lines="9  14"
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
async def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

**MegjegyzÃ©s**:

Ha nem tudod, tekintsd meg a _"Sietsz?"_ szekciÃ³t <a href="https://fastapi.tiangolo.com/async/#in-a-hurry" target="_blank">`async` Ã©s `await`-rÅ‘l dokumentÃ¡ciÃ³ba</a>.

</details>

### Futtasd le

IndÃ­tsd el a szervert a kÃ¶vetkezÅ‘ paranccsal:

<div class="termy">

```console
$ uvicorn main:app --reload

INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [28720]
INFO:     Started server process [28722]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

</div>

<details markdown="1">
<summary>A parancsrÃ³l <code>uvicorn main:app --reload</code>...</summary>

A `uvicorn main:app` parancs a kÃ¶vetkezÅ‘re utal:

* `main`: fÃ¡jl `main.py` (a Python "modul").
* `app`: a `main.py`-ban a `app = FastAPI()` sorral lÃ©trehozott objektum.
* `--reload`: kÃ³d vÃ¡ltoztatÃ¡s esetÃ©n Ãºjra indÃ­tja a szervert. Csak fejlesztÃ©s kÃ¶zben hasznÃ¡landÃ³.

</details>

### EllenÅ‘rizd

Nyisd meg a bÃ¶ngÃ©szÅ‘d a kÃ¶vetkezÅ‘ cÃ­men: <a href="http://127.0.0.1:8000/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1:8000/items/5?q=somequery</a>.

A kÃ¶vetkezÅ‘ JSON vÃ¡laszt fogod lÃ¡tni:

```JSON
{"item_id": 5, "q": "somequery"}
```

MÃ¡ris lÃ©trehoztÃ¡l egy API-t ami:

* HTTP kÃ©rÃ©seket fogad a  `/` Ã©s `/items/{item_id}` _Ãºtvonalakon_.
* MindkÃ©t _Ãºtvonal_ a `GET` <em>mÅ±veletet</em> hasznÃ¡lja (mÃ¡sik elnevezÃ©s: HTTP _metÃ³dus_).
* A `/items/{item_id}` _Ãºtvonalnak_ van egy _path paramÃ©tere_, az `item_id`, aminek `int` tÃ­pusÃºnak kell lennie.
* A `/items/{item_id}` _Ãºtvonalnak_ mÃ©g van egy opcionÃ¡lis, `str` tÃ­pusÃº _query paramÃ©tere_ is, a `q`.

### InteraktÃ­v API dokumentÃ¡ciÃ³

Most nyisd meg a <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a> cÃ­met.

Az automatikus interaktÃ­v API dokumentÃ¡ciÃ³t fogod lÃ¡tni (amit a <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>-al hozunk lÃ©tre):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### AlternatÃ­v API dokumentÃ¡ciÃ³

Ã‰s most menj el a <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a> cÃ­mre.

Az alternatÃ­v automatikus dokumentÃ¡ciÃ³t fogod lÃ¡tni. (lÃ¡sd <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## PÃ©lda frissÃ­tÃ©se

MÃ³dosÃ­tsuk a `main.py` fÃ¡jlt, hogy `PUT` kÃ©rÃ©sek esetÃ©n tudjon body-t fogadni.

DeklarÃ¡ld a body-t standard Python tÃ­pusokkal, a Pydantic-nak kÃ¶szÃ¶nhetÅ‘en.

```Python hl_lines="4  9-12  25-27"
from typing import Union

from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()


class Item(BaseModel):
    name: str
    price: float
    is_offer: Union[bool, None] = None


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}


@app.put("/items/{item_id}")
def update_item(item_id: int, item: Item):
    return {"item_name": item.name, "item_id": item_id}
```

A szerver automatikusan Ãºjraindul (mert hozzÃ¡adtuk a --reload paramÃ©tert a fenti `uvicorn` parancshoz).

### InteraktÃ­v API dokumentÃ¡ciÃ³ frissÃ­tÃ©se

Most menj el a <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a> cÃ­mre.

* Az interaktÃ­v API dokumentÃ¡ciÃ³ automatikusan frissÃ¼lt Ã­gy mÃ¡r benne van az Ãºj body.

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* Kattints rÃ¡ a "Try it out" gombra, ennek segÃ­tsÃ©gÃ©vel kitÃ¶ltheted a paramÃ©tereket Ã©s kÃ¶zvetlen hasznÃ¡lhatod az API-t:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-04-swagger-03.png)

* EzutÃ¡n kattints az "Execute" gompra, a felhasznÃ¡lÃ³i felÃ¼let kommunikÃ¡lni fog az API-oddal. ElkÃ¼ldi a paramÃ©tereket Ã©s a visszakapott vÃ¡laszt megmutatja a kÃ©pernyÅ‘dÃ¶n.

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-05-swagger-04.png)

### AlternatÃ­v API dokumentÃ¡ciÃ³ frissÃ­tÃ©s

Most menj el a <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a> cÃ­mre.

* Az alternatÃ­v dokumentÃ¡ciÃ³ szintÃºgy tÃ¼krÃ¶zni fogja az Ãºj kÃ©rÃ©si paramÃ©ter Ã©s body-t.

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### Ã–sszefoglalÃ¡s

Ã–sszegzÃ©sÃ¼l, deklarÃ¡lod **egyszer** a paramÃ©terek, body, stb tÃ­pusÃ¡t funkciÃ³s paramÃ©terekkÃ©nt.

Ezt standard modern Python tÃ­pusokkal csinÃ¡lod.

Nem kell Ãºj szintaxist, vagy specifikus kÃ¶nyvtÃ¡r mert metÃ³dÃ³sait, stb. megtanulnod.

Csak standard **Python**.

PÃ©ldÃ¡ul egy `int`-nek:

```Python
item_id: int
```

Egy komplexebb `Item` modellnek:

```Python
item: Item
```

... Ã‰s csupÃ¡n egy deklarÃ¡ciÃ³val megkapod a:

* SzerkesztÅ‘ tÃ¡mogatÃ¡st, beleÃ©rtve:
    * SzÃ¶vegkiegÃ©szÃ­tÃ©s.
    * TÃ­pus ellenÅ‘rzÃ©s.
* Adatok validÃ¡ciÃ³ja:
    * Automatikus Ã©s Ã©rthetÅ‘ hibÃ¡k amikor az adatok hibÃ¡sak.
    * ValidÃ¡ciÃ³ mÃ©lyen Ã¡gyazott objektumok esetÃ©n is.
* Bemeneti adatok<abbr title="also known as: serialization, parsing, marshalling"> Ã¡tvÃ¡ltÃ¡sa</abbr> : a hÃ¡lÃ³zatrÃ³l Ã©rkezÅ‘ Python adatokkÃ¡ Ã©s tÃ­pusokkÃ¡. Adatok olvasÃ¡sa kÃ¶vetkezÅ‘ forrÃ¡sokbÃ³l:
    * JSON.
    * CÃ­m paramÃ©terek.
    * Query paramÃ©terek.
    * Cookie-k.
    * Header-Ã¶k.
    * Formok.
    * FÃ¡jlok.
* Kimeneti adatok <abbr title=" mÃ¡s nÃ©ven: serialization, parsing, marshalling">Ã¡tvÃ¡ltÃ¡sa</abbr>: Python adatok is tÃ­pusokrÃ³l hÃ¡lÃ³zati adatokkÃ¡:
    * vÃ¡lts Ã¡t Python tÃ­pusokat (`str`, `int`, `float`, `bool`, `list`, etc).
    * `datetime` csak objektumokat.
    * `UUID` objektumokat.
    * AdatbÃ¡zis modelleket.
    * ...Ã‰s sok mÃ¡st.
* Automatikus interaktÃ­v dokumentÃ¡ciÃ³, beleÃ©rtve kÃ©t alternatÃ­v dokumentÃ¡ciÃ³t is:
    * Swagger UI.
    * ReDoc.

---

VisszatÃ©rve az elÅ‘zÅ‘ kÃ³d pÃ©ldÃ¡hoz. A **FastAPI**:

* ValidÃ¡lja hogy van egy `item_id` mezÅ‘ a `GET` Ã©s `PUT` kÃ©rÃ©sekben.
* ValidÃ¡lja hogy az `item_id` `int` tÃ­pusÃº a `GET` Ã©s `PUT` kÃ©rÃ©sekben.
    * Ha nem akkor lÃ¡tni fogunk egy tiszta hibÃ¡t ezzel kapcsolatban.
* ellenÅ‘rzi hogyha van egy opcionÃ¡lis query paramÃ©ter `q` nÃ©vvel (azaz `http://127.0.0.1:8000/items/foo?q=somequery`) `GET` kÃ©rÃ©sek esetÃ©n.
    * Mivel a `q` paramÃ©ter `= None`-al van deklarÃ¡lva, ezÃ©rt opcionÃ¡lis.
    * `None` nÃ©lkÃ¼l ez a mezÅ‘ kÃ¶telezÅ‘ lenne (mint pÃ©ldÃ¡ul a body `PUT` kÃ©rÃ©sek esetÃ©n).
* a `/items/{item_id}` cÃ­mre Ã©rkezÅ‘ `PUT` kÃ©rÃ©sek esetÃ©n, a JSON-t a kÃ¶vetkezÅ‘kÃ©ppen olvassa be:
    * EllenÅ‘rzi hogy lÃ©tezik a kÃ¶telezÅ‘ `name` nevÅ± attribÃºtum Ã©s `string`.
    * EllenÅ‘rzi hogy lÃ©tezik a kÃ¶telezÅ‘ `price` nevÅ± attribÃºtum Ã©s `float`.
    * EllenÅ‘rzi hogy lÃ©tezik a `is_offer` nevÅ± opcionÃ¡lis paramÃ©ter, ami ha lÃ©tezik akkor `bool`
    * Ez Ã¡gyazott JSON objektumokkal is mÅ±kÃ¶dik
* JSONrÅ‘l valÃ³ automatikus konvertÃ¡lÃ¡s.
* dokumentÃ¡ljuk mindent OpenAPI-al amit hasznÃ¡lhatÃ³:
    * InteraktÃ­v dokumentÃ¡ciÃ³s rendszerekkel.
    * Automatikus kliens kÃ³d generÃ¡lÃ³ a rendszerekkel, tÃ¶bb nyelven.
* HozzÃ¡ tartozik kettÅ‘ interaktÃ­v dokumentÃ¡ciÃ³s web felÃ¼let.

---

Eddig csak a felszÃ­nt kapargattuk, de a lÃ©nyeg hogy most mÃ¡r kÃ¶nnyebben Ã©rthetÅ‘ hogyan mÅ±kÃ¶dik.

PrÃ³bÃ¡ld kicserÃ©lni a kÃ¶vetkezÅ‘ sorban:

```Python
    return {"item_name": item.name, "item_id": item_id}
```

...ezt:

```Python
        ... "item_name": item.name ...
```

...erre:

```Python
        ... "item_price": item.price ...
```

... Ã‰s figyeld meg hogy a szerkesztÅ‘ automatikusan tudni fogja a tÃ­pusokat Ã©s kiegÃ©szÃ­ti azokat:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

Teljesebb pÃ©ldÃ¡kÃ©rt Ã©s funkciÃ³kÃ©rt tekintsd meg a <a href="https://fastapi.tiangolo.com/tutorial/">Tutorial - User Guide</a> -t.

**Spoiler veszÃ©ly**: a Tutorial - User Guidehoz tartozik:

* **ParamÃ©terek** deklarÃ¡ciÃ³ja kÃ¼lÃ¶nbÃ¶zÅ‘ helyekrÅ‘l: **header-Ã¶k**, **cookie-k**, **form mezÅ‘k** Ã©s **fÃ¡jlok**.
* Hogyan Ã¡llÃ­ts be **validÃ¡ciÃ³s feltÃ©teleket** mint a `maximum_length` vagy a `regex`.
* Nagyon hatÃ©kony Ã©s erÅ‘s **<abbr title="also known as components, resources, providers, services, injectables">FÃ¼ggÅ‘sÃ©g InjekciÃ³</abbr>** rendszerek.
* BiztonsÃ¡g Ã©s autentikÃ¡ciÃ³ beleÃ©rtve, **OAuth2**, **JWT tokens** Ã©s **HTTP Basic** tÃ¡mogatÃ¡st.
* TÃ¶bb haladÃ³ (de ugyanannyira kÃ¶nnyÅ±) technika **mÃ©lyen Ã¡gyazott JSON modellek deklarÃ¡ciÃ³jÃ¡ra** (Pydantic-nek kÃ¶szÃ¶nhetÅ‘en).
* **GraphQL** integrÃ¡ciÃ³ <a href="https://strawberry.rocks" class="external-link" target="_blank">Strawberry</a>-vel Ã©s mÃ¡s kÃ¶nyvtÃ¡rakkal.
* tÃ¶bb extra funkciÃ³ (Starlette-nek kÃ¶szÃ¶nhetÅ‘en) pl.:
    * **WebSockets**
    * rendkÃ­vÃ¼l kÃ¶nnyÅ± tesztek HTTPX Ã©s `pytest` alapokra Ã©pÃ­tve
    * **CORS**
    * **Cookie Sessions**
    * ...Ã©s tÃ¶bb.

## TeljesÃ­tmÃ©ny

A fÃ¼ggetlen TechEmpower benchmarkok szerint az Uvicorn alatt futÃ³ **FastAPI** alkalmazÃ¡sok az <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">egyik leggyorsabb Python keretrendszerek kÃ¶zÃ© tartoznak</a>, Ã©ppen lemaradva a Starlette Ã©s az Uvicorn (melyeket a FastAPI belsÅ‘leg hasznÃ¡l) mÃ¶gÃ¶tt.(*)

Ezeknek a tovÃ¡bbi megÃ©rtÃ©sÃ©hez: <a href="https://fastapi.tiangolo.com/benchmarks/" class="internal-link" target="_blank">Benchmarks</a>.

## OpcionÃ¡lis kÃ¶vetelmÃ©nyek

Pydantic Ã¡ltal hasznÃ¡lt:

* <a href="https://github.com/JoshData/python-email-validator" target="_blank"><code>email-validator</code></a> - e-mail validÃ¡ciÃ³kra.
* <a href="https://docs.pydantic.dev/latest/usage/pydantic_settings/" target="_blank"><code>pydantic-settings</code></a> - BeÃ¡llÃ­tÃ¡sok kÃ¶vetÃ©sÃ©re.
* <a href="https://docs.pydantic.dev/latest/usage/types/extra_types/extra_types/" target="_blank"><code>pydantic-extra-types</code></a> - Extra tÃ­pusok Pydantic-hoz.

Starlette Ã¡ltal hasznÃ¡lt:

* <a href="https://www.python-httpx.org" target="_blank"><code>httpx</code></a> - KÃ¶vetelmÃ©ny ha a `TestClient`-et akarod hasznÃ¡lni.
* <a href="https://jinja.palletsprojects.com" target="_blank"><code>jinja2</code></a> - KÃ¶vetelmÃ©ny ha az alap template konfigurÃ¡ciÃ³t akarod hasznÃ¡lni.
* <a href="https://github.com/Kludex/python-multipart" target="_blank"><code>python-multipart</code></a> - KÃ¶vetelmÃ©ny ha <abbr title="converting the string that comes from an HTTP request into Python data">"parsing"</abbr>-ot akarsz tÃ¡mogatni, `request.form()`-al.
* <a href="https://pythonhosted.org/itsdangerous/" target="_blank"><code>itsdangerous</code></a> - KÃ¶vetelmÃ©ny `SessionMiddleware` tÃ¡mogatÃ¡shoz.
* <a href="https://pyyaml.org/wiki/PyYAMLDocumentation" target="_blank"><code>pyyaml</code></a> - KÃ¶vetelmÃ©ny a Starlette `SchemaGenerator`-Ã¡nak tÃ¡mogatÃ¡sÃ¡hoz (valÃ³szÃ­nÅ±leg erre nincs szÃ¼ksÃ©g FastAPI hasznÃ¡lÃ¡sa esetÃ©n).

FastAPI / Starlette Ã¡ltal hasznÃ¡lt

* <a href="https://www.uvicorn.org" target="_blank"><code>uvicorn</code></a> - Szerverekhez amÃ­g betÃ¶ltik Ã©s szolgÃ¡ltatjÃ¡k az applikÃ¡ciÃ³dat.
* <a href="https://github.com/ijl/orjson" target="_blank"><code>orjson</code></a> - KÃ¶vetelmÃ©ny ha `ORJSONResponse`-t akarsz hasznÃ¡lni.
* <a href="https://github.com/esnme/ultrajson" target="_blank"><code>ujson</code></a> - KÃ¶vetelmÃ©ny ha `UJSONResponse`-t akarsz hasznÃ¡lni.

Ezeket mind telepÃ­theted a `pip install "fastapi[all]"` paranccsal.

## Licensz
Ez a projekt az MIT license, licensz alatt fut


================================================
File: /docs/id/mkdocs.yml
================================================
INHERIT: ../en/mkdocs.yml


================================================
File: /docs/id/docs/tutorial/first-steps.md
================================================
# Langkah Pertama

File FastAPI yang paling sederhana bisa seperti berikut:

{* ../../docs_src/first_steps/tutorial001.py *}

Salin file tersebut ke `main.py`.

Jalankan di server:

<div class="termy">

```console
$ <font color="#4E9A06">fastapi</font> dev <u style="text-decoration-style:single">main.py</u>
<font color="#3465A4">INFO    </font> Using path <font color="#3465A4">main.py</font>
<font color="#3465A4">INFO    </font> Resolved absolute path <font color="#75507B">/home/user/code/awesomeapp/</font><font color="#AD7FA8">main.py</font>
<font color="#3465A4">INFO    </font> Searching for package file structure from directories with <font color="#3465A4">__init__.py</font> files
<font color="#3465A4">INFO    </font> Importing from <font color="#75507B">/home/user/code/</font><font color="#AD7FA8">awesomeapp</font>

 â•­â”€ <font color="#8AE234"><b>Python module file</b></font> â”€â•®
 â”‚                      â”‚
 â”‚  ğŸ main.py          â”‚
 â”‚                      â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

<font color="#3465A4">INFO    </font> Importing module <font color="#4E9A06">main</font>
<font color="#3465A4">INFO    </font> Found importable FastAPI app

 â•­â”€ <font color="#8AE234"><b>Importable FastAPI app</b></font> â”€â•®
 â”‚                          â”‚
 â”‚  <span style="background-color:#272822"><font color="#FF4689">from</font></span><span style="background-color:#272822"><font color="#F8F8F2"> main </font></span><span style="background-color:#272822"><font color="#FF4689">import</font></span><span style="background-color:#272822"><font color="#F8F8F2"> app</font></span><span style="background-color:#272822">  </span>  â”‚
 â”‚                          â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

<font color="#3465A4">INFO    </font> Using import string <font color="#8AE234"><b>main:app</b></font>

 <span style="background-color:#C4A000"><font color="#2E3436">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FastAPI CLI - Development mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚                                                     â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚  Serving at: http://127.0.0.1:8000                  â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚                                                     â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚  API docs: http://127.0.0.1:8000/docs               â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚                                                     â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚  Running in development mode, for production use:   â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚                                                     â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚  </font></span><span style="background-color:#C4A000"><font color="#555753"><b>fastapi run</b></font></span><span style="background-color:#C4A000"><font color="#2E3436">                                        â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â”‚                                                     â”‚</font></span>
 <span style="background-color:#C4A000"><font color="#2E3436">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</font></span>

<font color="#4E9A06">INFO</font>:     Will watch for changes in these directories: [&apos;/home/user/code/awesomeapp&apos;]
<font color="#4E9A06">INFO</font>:     Uvicorn running on <b>http://127.0.0.1:8000</b> (Press CTRL+C to quit)
<font color="#4E9A06">INFO</font>:     Started reloader process [<font color="#34E2E2"><b>2265862</b></font>] using <font color="#34E2E2"><b>WatchFiles</b></font>
<font color="#4E9A06">INFO</font>:     Started server process [<font color="#06989A">2265873</font>]
<font color="#4E9A06">INFO</font>:     Waiting for application startup.
<font color="#4E9A06">INFO</font>:     Application startup complete.
```

</div>

Di output, terdapat sebaris pesan:

```hl_lines="4"
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

Baris tersebut menunjukan URL dimana app aktif di komputer anda.


### Mencoba aplikasi

Buka browser di <a href="http://127.0.0.1:8000" class="external-link" target="_blank">http://127.0.0.1:8000</a>.

Anda akan melihat response JSON sebagai berikut:

```JSON
{"message": "Hello World"}
```

### Dokumen API interaktif

Sekarang kunjungi <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

Anda akan melihat dokumentasi API interaktif otomatis (dibuat oleh <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### Dokumen API alternatif

Dan sekarang, kunjungi <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

Anda akan melihat dokumentasi alternatif otomatis (dibuat oleh <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

### OpenAPI

**FastAPI** membuat sebuah "schema" dimana semua API anda menggunakan standar **OpenAPI** untuk mendefinisikan API.

#### "Schema"

"schema" adalah suatu definisi atau deskripsi dari sesuatu. Bukan kode yang mengimplementasi definisi tersebut. Ini hanyalah sebuah deskripsi abstrak.

#### "schema" API

Dalam hal ini, <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> adalah spesifikasi yang menunjukan bagaimana untuk mendefinisikan sebuah skema di API anda.

Definisi skema ini termasuk jalur API anda, parameter yang bisa diterima, dll.

#### "schema" Data

Istilah "schema" bisa juga merujuk ke struktur data, seperti konten JSON.

Dalam kondisi ini, ini berarti attribut JSON dan tipe data yang dimiliki, dll.

#### Schema OpenAPI and JSON

"schema" OpenAPI mendefinisikan skema API dari API yang anda buat. Skema tersebut termasuk definisi (atau "schema") dari data yang dikirim atau diterima oleh API dari **JSON Schema**, skema data standar JSON.

#### Lihat `openapi.json`

Jika anda penasaran bagaimana skema OpenAPI polos seperti apa, FastAPI secara otomatis membuat JSON (schema) dengan deksripsi API anda.

anda bisa melihatnya di: <a href="http://127.0.0.1:8000/openapi.json" class="external-link" target="_blank">http://127.0.0.1:8000/openapi.json</a>.

Anda akan melihat JSON yang dimulai seperti:

```JSON
{
    "openapi": "3.1.0",
    "info": {
        "title": "FastAPI",
        "version": "0.1.0"
    },
    "paths": {
        "/items/": {
            "get": {
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {



...
```

#### Kegunaan OpenAPI

Skema OpenAPI adalah tulang punggung dua sistem dokumentasi API interaktif yang ada di FastAPI.

Ada banyak alternatif sistem dokumentasi lainnya yang semuanya berdasarkan OpenAPI. Anda bisa menambahkannya ke aplikasi **FastAPI** anda.

Anda juga bisa menggunakan OpenAPI untuk membuat kode secara otomatis, untuk klien yang menggunakan API anda. Sebagai contoh, frontend, aplikasi mobile atau IoT.

## Ringkasan, secara bertahap

### Langkah 1: impor `FastAPI`

{* ../../docs_src/first_steps/tutorial001.py hl[1] *}

`FastAPI` adalah class Python yang menyediakan semua fungsionalitas API anda.

/// note | Detail Teknis

`FastAPI` adalah class turunan langsung dari `Starlette`.

Anda bisa menggunakan semua fungsionalitas <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> dengan `FastAPI` juga.

///

### Langkah 2: buat "instance" dari `FastAPI`

{* ../../docs_src/first_steps/tutorial001.py hl[3] *}

Di sini variabel `app` akan menjadi sebuah "instance" dari class `FastAPI`.

Ini akan menjadi gerbang utama untuk membuat semua API anda.

### Langkah 3: Buat *operasi path*

#### Path

"Path" atau jalur di sini merujuk ke bagian URL terakhir dimulai dari `/` pertama.

Sehingga, URL seperti:

```
https://example.com/items/foo
```

...path-nya adalah:

```
/items/foo
```

/// info

"path" juga biasa disebut "endpoint" atau "route".

///

ketika membuat API, "path" adalah jalan utama untuk memisahkan "concern" dan "resources".

#### Operasi

"Operasi" di sini merujuk ke salah satu dari metode HTTP berikut.

Salah satu dari:

* `POST`
* `GET`
* `PUT`
* `DELETE`

...dan operasi lainnya yang unik:

* `OPTIONS`
* `HEAD`
* `PATCH`
* `TRACE`

Dalam protokol HTTP, anda bisa berkomunikasi ke setiap path menggunakan satu (atau lebih) metode di atas.

---

Ketika membuat API, anda umumnya menggunakan metode HTTP tertentu untuk proses tertentu.

Umumnya menggunakan:

* `POST`: untuk membuat data.
* `GET`: untuk membaca data.
* `PUT`: untuk memperbarui data.
* `DELETE`: untuk menghapus data.

Sehingga, di OpanAPI, setiap metode HTTP ini disebut sebuah "operasi".

Kita akan menyebut mereka juga "**operasi**".

#### Mendefinisikan *dekorator operasi path*

{* ../../docs_src/first_steps/tutorial001.py hl[6] *}

`@app.get("/")` memberitahu **FastAPI** bahwa fungsi di bawahnya mengurusi request yang menuju ke:

* path `/`
* menggunakan <abbr title="an HTTP GET method">operasi <code>get</code></abbr>

/// info | `@decorator` Info

Sintaksis `@sesuatu` di Python disebut "dekorator".

Dekorator ditempatkan di atas fungsi. Seperti sebuah topi cantik (Saya pikir istilah ini berasal dari situ).

"dekorator" memanggil dan bekerja dengan fungsi yang ada di bawahnya

Pada kondisi ini, dekorator ini memberi tahu **FastAPI** bahwa fungsi di bawah nya berhubungan dengan **path** `/` dengan **operasi** `get`.

Sehingga disebut **dekorator operasi path**.

///

Operasi lainnya yang bisa digunakan:

* `@app.post()`
* `@app.put()`
* `@app.delete()`

Dan operasi unik lainnya:

* `@app.options()`
* `@app.head()`
* `@app.patch()`
* `@app.trace()`

/// tip | Tips

Jika anda bisa menggunakan operasi apa saja (metode HTTP).

**FastAPI** tidak mengharuskan anda menggunakan operasi tertentu.

Informasi di sini hanyalah sebagai panduan, bukan keharusan.

Sebagai contoh, ketika menggunakan GraphQL, semua operasi umumnya hanya menggunakan `POST`.

///

### Langkah 4: mendefinisikan **fungsi operasi path**

Ini "**fungsi operasi path**" kita:

* **path**: adalah `/`.
* **operasi**: adalah `get`.
* **fungsi**: adalah fungsi yang ada di bawah dekorator (di bawah `@app.get("/")`).

{* ../../docs_src/first_steps/tutorial001.py hl[7] *}

Ini adalah fungsi Python.

Fungsi ini dipanggil **FastAPI** setiap kali menerima request ke URL "`/`" dengan operasi `GET`.

Di kondisi ini, ini adalah sebuah fungsi `async`.

---

Anda bisa mendefinisikan fungsi ini sebagai fungsi normal daripada `async def`:

{* ../../docs_src/first_steps/tutorial003.py hl[7] *}

/// note | Catatan

Jika anda tidak tahu perbedaannya, kunjungi [Async: *"Panduan cepat"*](../async.md#in-a-hurry){.internal-link target=_blank}.

///

### Langkah 5: hasilkan konten

{* ../../docs_src/first_steps/tutorial001.py hl[8] *}

Anda bisa menghasilkan `dict`, `list`, nilai singular seperti `str`, `int`, dll.

Anda juga bisa menghasilkan model Pydantic (anda akan belajar mengenai ini nanti).

Ada banyak objek dan model yang secara otomatis dikonversi ke JSON (termasuk ORM, dll). Anda bisa menggunakan yang anda suka, kemungkinan sudah didukung.

## Ringkasan

* Impor `FastAPI`.
* Buat sebuah instance `app`.
* Tulis  **dekorator operasi path** menggunakan dekorator seperti `@app.get("/")`.
* Definisikan **fungsi operasi path**; sebagai contoh, `def root(): ...`.
* Jalankan server development dengan perintah `fastapi dev`.


================================================
File: /docs/id/docs/tutorial/index.md
================================================
# Tutorial - Pedoman Pengguna - Pengenalan

Tutorial ini menunjukan cara menggunakan ***FastAPI*** dengan semua fitur-fiturnya, tahap demi tahap.

Setiap bagian dibangun secara bertahap dari bagian sebelumnya, tetapi terstruktur untuk memisahkan banyak topik, sehingga kamu bisa secara langsung menuju ke topik spesifik untuk menyelesaikan kebutuhan API tertentu.

Ini juga dibangun untuk digunakan sebagai referensi yang akan datang.

Sehingga kamu dapat kembali lagi dan mencari apa yang kamu butuhkan dengan tepat.

## Jalankan kode

Semua blok-blok kode dapat disalin dan digunakan langsung (Mereka semua sebenarnya adalah file python yang sudah teruji).

Untuk menjalankan setiap contoh, salin kode ke file `main.py`, dan jalankan `uvicorn` dengan:

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
<span style="color: green;">INFO</span>:     Started reloader process [28720]
<span style="color: green;">INFO</span>:     Started server process [28722]
<span style="color: green;">INFO</span>:     Waiting for application startup.
<span style="color: green;">INFO</span>:     Application startup complete.
```

</div>

**SANGAT disarankan** agar kamu menulis atau menyalin kode, mengubahnya dan menjalankannya secara lokal.

Dengan menggunakannya di dalam editor, benar-benar memperlihatkan manfaat dari FastAPI, melihat bagaimana sedikitnya kode yang harus kamu tulis, semua pengecekan tipe, pelengkapan otomatis, dll.

---

## Install FastAPI

Langkah pertama adalah dengan meng-install FastAPI.

Untuk tutorial, kamu mungkin hendak meng-installnya dengan semua pilihan fitur dan dependensinya:

<div class="termy">

```console
$ pip install "fastapi[all]"

---> 100%
```

</div>

...yang juga termasuk `uvicorn`, yang dapat kamu gunakan sebagai server yang menjalankan kodemu.

/// note | Catatan

Kamu juga dapat meng-installnya bagian demi bagian.

Hal ini mungkin yang akan kamu lakukan ketika kamu hendak menyebarkan (men-deploy) aplikasimu ke tahap produksi:

```
pip install fastapi
```

Juga install `uvicorn` untuk menjalankan server"

```
pip install "uvicorn[standard]"
```

Dan demikian juga untuk pilihan dependensi yang hendak kamu gunakan.

///

## Pedoman Pengguna Lanjutan

Tersedia juga **Pedoman Pengguna Lanjutan** yang dapat kamu baca nanti setelah **Tutorial - Pedoman Pengguna** ini.

**Pedoman Pengguna Lanjutan**, dibangun atas hal ini, menggunakan konsep yang sama, dan mengajarkan kepadamu beberapa fitur tambahan.

Tetapi kamu harus membaca terlebih dahulu **Tutorial - Pedoman Pengguna** (apa yang sedang kamu baca sekarang).

Hal ini dirancang supaya kamu dapat membangun aplikasi lengkap dengan hanya **Tutorial - Pedoman Pengguna**, dan kemudian mengembangkannya ke banyak cara yang berbeda, tergantung dari kebutuhanmu, menggunakan beberapa ide-ide tambahan dari **Pedoman Pengguna Lanjutan**.


================================================
File: /docs/id/docs/tutorial/path-params.md
================================================
# Parameter Path

"parameter" atau "variabel" path didefinisikan dengan sintaksis Python format string:

{* ../../docs_src/path_params/tutorial001.py hl[6:7] *}

Nilai parameter path `item_id` akan dikirim ke fungsi sebagai argument `item_id`:

Jika anda menjalankan contoh berikut dan kunjungi <a href="http://127.0.0.1:8000/items/foo" class="external-link" target="_blank">http://127.0.0.1:8000/items/foo</a>, anda akan melihat respon:

```JSON
{"item_id":"foo"}
```

## Parameter path dengan tipe data

Tipe data parameter path bisa didefinisikan di dalam fungsi, menggunakan anotasi tipe data standar Python:

{* ../../docs_src/path_params/tutorial002.py hl[7] *}

Dalam hal ini `item_id` didefinisikan sebagai `int`.

/// check | Periksa

Penyunting kode anda bisa membantu periksa di dalam fungsi seperti pemeriksaan kesalahan, kelengkapan kode, dll.

///

## <abbr title="juga disebut: serialization, parsing, marshalling">Konversi</abbr> data

Jika contoh berikut dijalankan dan diakses browser melalui <a href="http://127.0.0.1:8000/items/3" class="external-link" target="_blank">http://127.0.0.1:8000/items/3</a>, anda akan melihat respon:

```JSON
{"item_id":3}
```

/// check | Periksa

Perhatikan nilai fungsi yang diterima (dan dihasilkan) adalah `3`, sebagai `int` di Python, dan bukan string `"3"`.

Sehingga dengan deklarasi tipe data **FastAPI** memberikan request otomatis <abbr title="konversi string dari request HTTP menjadi data Python">"parsing"</abbr>.

///

## Validasi Data

Tetapi jika di browser anda akses <a href="http://127.0.0.1:8000/items/foo" class="external-link" target="_blank">http://127.0.0.1:8000/items/foo</a>, anda akan melihat pesan kesalahan HTTP:

```JSON
{
  "detail": [
    {
      "type": "int_parsing",
      "loc": [
        "path",
        "item_id"
      ],
      "msg": "Input should be a valid integer, unable to parse string as an integer",
      "input": "foo",
      "url": "https://errors.pydantic.dev/2.1/v/int_parsing"
    }
  ]
}
```

Karena parameter path `item_id` bernilai `"foo"` yang bukan tipe data `int`.

Kesalahan yang sama akan muncul jika menggunakan `float` daripada `int`, seperti di: <a href="http://127.0.0.1:8000/items/4.2" class="external-link" target="_blank">http://127.0.0.1:8000/items/4.2</a>

/// check | Periksa

Dengan deklarasi tipe data Python, **FastAPI** melakukan validasi data.

Perhatikan kesalahan tersebut juga menjelaskan validasi apa yang tidak sesuai.

Validasi ini sangat membantu ketika mengembangkan dan men-*debug* kode yang berhubungan dengan API anda.

///

## Dokumentasi

Ketika anda membuka browser di <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>, anda melihat dokumentasi API interaktif otomatis berikut:

<img src="/img/tutorial/path-params/image01.png">

/// check | Periksa

Dengan deklarasi tipe data Python yang sama, **FastAPI** membuat dokumentasi interaktif otomatis (terintegrasi Swagger UI).

Perhatikan parameter path dideklarasikan sebagai integer.

///

## Keuntungan basis-standar, dokumentasi alternatif

Karena skema yang dibuat berasal dari standar <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.1.0.md" class="external-link" target="_blank">OpenAPI</a>, maka banyak alat lain yang kompatibel.

Sehingga **FastAPI** menyediakan dokumentasi alternatif (menggunakan ReDoc), yang bisa diakses di <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>:

<img src="/img/tutorial/path-params/image02.png">

Cara yang sama untuk menggunakan tools kompatibel lainnya. Termasuk alat membuat kode otomatis untuk banyak bahasa.

## Pydantic

Semua validasi data dikerjakan di belakang layar oleh <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a>, sehingga anda mendapatkan banyak kemudahan. Anda juga tahu proses ini akan ditangani dengan baik.

Anda bisa mendeklarasikan tipe data dengan `str`, `float`, `bool` dan banyak tipe data kompleks lainnya.

Beberapa tipe di atas akan dibahas pada bab berikutnya tutorial ini.

## Urutan berpengaruh

Ketika membuat  *operasi path*, anda bisa menghadapi kondisi dimana *path* nya sudah tetap.

Seperti `/users/me`, untuk mendapatkan data user yang sedang aktif.

Kemudian anda bisa memiliki path `/users/{user_id}` untuk mendapatkan data user tertentu melalui user ID.

karena *operasi path* dievaluasi melalui urutan, anda harus memastikan path untuk `/users/me` dideklarasikan sebelum `/user/{user_id}`:

{* ../../docs_src/path_params/tutorial003.py hl[6,11] *}

Sebaliknya, path `/users/{user_id}` juga akan sesuai dengan `/users/me`, "menganggap" menerima parameter `user_id` dengan nilai `"me"`.

Serupa, anda juga tidak bisa mendefinisikan operasi path:

{* ../../docs_src/path_params/tutorial003b.py hl[6,11] *}

Path pertama akan selalu digunakan karena path sesuai dengan yang pertama.

## Nilai terdefinisi

Jika ada *operasi path* yang menerima *parameter path*, tetapi anda ingin nilai valid *parameter path* sudah terdefinisi, anda bisa menggunakan standar Python <abbr title="Enumeration">`Enum`</abbr>.

### Membuat class `Enum`

Import `Enum` dan buat *sub-class* warisan dari `str` dan `Enum`.

Dengan warisan dari `str` dokumen API mengetahui nilai nya harus berjenis `string` supaya bisa digunakan dengan benar.

Kemudian buat atribut *class* dengan nilai tetap *string* yang benar:

{* ../../docs_src/path_params/tutorial005.py hl[1,6:9] *}

/// info

<a href="https://docs.python.org/3/library/enum.html" class="external-link" target="_blank">Enumerasi (atau enum) tersedia di Python</a> sejak versi 3.4.

///

/// tip | Tips

"AlxexNet", "ResNet", dan "LeNet" adalah nama <abbr title="Secara teknis, arsitektur model Deep Learning">model</abbr> *Machine Learning*.

///

### Mendeklarasikan *parameter path*

Kemudian buat *parameter path* dengan tipe anotasi menggunakan *class* enum dari (`ModelName`)

{* ../../docs_src/path_params/tutorial005.py hl[16] *}

### Periksa dokumentasi

Karena nilai yang tersedia untuk *parameter path* telah terdefinisi, dokumen interatik bisa memunculkan:

<img src="/img/tutorial/path-params/image03.png">

### Bekerja dengan *enumarasi* Python

Nilai *parameter path* akan menjadi *anggota enumerasi*.

#### Membandingkan *anggota enumerasi*

Anda bisa membandingkan parameter *path* dengan *anggota enumerasi* di enum `ModelName` yang anda buat:

{* ../../docs_src/path_params/tutorial005.py hl[17] *}

#### Mendapatkan *nilai enumerasi*

Anda bisa mendapatkan nilai (`str` dalam kasus ini) menggunakan `model_name.value`, atau secara umum `anggota_enum_anda.value`:

{* ../../docs_src/path_params/tutorial005.py hl[20] *}

/// tip | Tips

Anda bisa mengakses nilai `"lenet"` dnegan `ModelName.lenet.value`.

///

#### Menghasilkan *anggota enumerasi*

Anda bisa menghasilkan *anggota enumerasi* dari *operasi path* bahkan di body JSON bersarang (contoh `dict`).

They will be converted to their corresponding values (strings in this case) before returning them to the client:

{* ../../docs_src/path_params/tutorial005.py hl[18,21,23] *}

Klien akan mendapatkan respon JSON seperti berikut:

```JSON
{
  "model_name": "alexnet",
  "message": "Deep Learning FTW!"
}
```

## Parameter path berisi path

Misalkan terdapat *operasi path* dengan path `/files/{file_path}`.

Tetapi anda memerlukan `file_path` itu berisi *path*, seperti like `home/johndoe/myfile.txt`.

Sehingga URL untuk file tersebut akan seperti: `/files/home/johndoe/myfile.txt`.

### Dukungan OpenAPI

OpenAPI tidak bisa mendeklarasikan *parameter path* berisi *path* di dalamnya, karena menyebabkan kondisi yang sulit di*test* dan didefinisikan.

Tetapi, di **FastAPI** anda tetap bisa melakukannya dengan menggunakan *tools* internal dari Starlette.

Dan dokumentasi tetap berfungsi walaupun tidak menambahkan keterangan bahwa parameter harus berisi *path*.

### Konverter path

Melalui Starlette anda bisa mendeklarasikan *parameter path* berisi *path* dengan URL seperti:

```
/files/{file_path:path}
```

Dikondisi ini nama parameter adalah `file_path` dan bagian terakhir `:path` menginformasikan parameter harus sesuai dengan setiap *path*.

Sehingga anda bisa menggunakan:

{* ../../docs_src/path_params/tutorial004.py hl[6] *}

/// tip | Tips

Anda mungkin perlu parameter berisi `/home/johndoe/myfile.txt` di awali garis belakang (`/`).

Di kondisi ini, URL nya menjadi: `/files//home/johndoe/myfile.txt`, dengan dua garis belakang (`//`) di antara `files` dan `home`.

///

## Ringkasan

Di **FastAPI** dengan menggunakan deklarasi tipe Python standar, pendek, intuitif, anda mendapatkan:

* Dukungan editor: pemeriksaan kesalahan, autocompletion, dll.
* "<abbr title="konversi string dari request HTTP menjadi data Python">Parsing</abbr>" data.
* Validasi data.
* Annotasi API dan dokumentasi otomatis.

Semua itu anda hanya perlu mendeklarasikan sekali saja.

Ini adalah salah satu keunggulan **FastAPI** dibandingkan dengan *framework* lainnya (selain dari performa Python *native*c)


================================================
File: /docs/it/mkdocs.yml
================================================
INHERIT: ../en/mkdocs.yml


================================================
File: /docs/it/docs/index.md
================================================
<p align="center">
  <a href="https://fastapi.tiangolo.com"><img src="https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png" alt="FastAPI"></a>
</p>
<p align="center">
    <em>FastAPI framework, alte prestazioni, facile da imparare, rapido da implementare, pronto per il rilascio in produzione</em>
</p>
<p align="center">
<a href="https://travis-ci.com/fastapi/fastapi" target="_blank">
    <img src="https://travis-ci.com/fastapi/fastapi.svg?branch=master" alt="Build Status">
</a>
<a href="https://codecov.io/gh/fastapi/fastapi" target="_blank">
    <img src="https://img.shields.io/codecov/c/github/fastapi/fastapi" alt="Coverage">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://badge.fury.io/py/fastapi.svg" alt="Package version">
</a>
</p>

---

**Documentazione**: <a href="https://fastapi.tiangolo.com" target="_blank">https://fastapi.tiangolo.com</a>

**Codice Sorgente**: <a href="https://github.com/fastapi/fastapi" target="_blank">https://github.com/fastapi/fastapi</a>

---

FastAPI Ã¨ un web framework moderno e veloce (a prestazioni elevate) che serve a creare API con Python 3.6+ basato sulle annotazioni di tipo di Python.

Le sue caratteristiche principali sono:

* **VelocitÃ **: Prestazioni molto elevate, alla pari di **NodeJS** e **Go** (grazie a Starlette e Pydantic). [Uno dei framework Python piÃ¹ veloci in circolazione](#performance).
* **Veloce da programmare**: Velocizza il lavoro consentendo il rilascio di nuove funzionalitÃ  tra il 200% e il 300% piÃ¹ rapidamente. *
* **Meno bug**: Riduce di circa il 40% gli errori che commettono gli sviluppatori durante la scrittura del codice. *
* **Intuitivo**: Grande supporto per gli editor di testo con <abbr title="anche conosciuto come auto-completamento, autocompletion, IntelliSense">autocompletamento</abbr> in ogni dove. In questo modo si puÃ² dedicare meno tempo al debugging.
* **Facile**: Progettato per essere facile da usare e imparare. Si riduce il tempo da dedicare alla lettura della documentazione.
* **Sintentico**: Minimizza la duplicazione di codice. Molteplici funzionalitÃ , ognuna con la propria dichiarazione dei parametri. Meno errori.
* **Robusto**: Crea codice pronto per la produzione con documentazione automatica interattiva.
* **Basato sugli standard**: Basato su (e completamente compatibile con) gli open standard per le API: <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> (precedentemente Swagger) e <a href="https://json-schema.org/" class="external-link" target="_blank">JSON Schema</a>.

<small>* Stima basata sull'esito di test eseguiti su codice sorgente di applicazioni rilasciate in produzione da un team interno di sviluppatori.</small>

## Sponsor

<!-- sponsors -->

{% if sponsors %}
{% for sponsor in sponsors.gold -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor -%}
{%- for sponsor in sponsors.silver -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor %}
{% endif %}

<!-- /sponsors -->

<a href="https://fastapi.tiangolo.com/fastapi-people/#sponsors" class="external-link" target="_blank">Altri sponsor</a>

## Recensioni

"_[...] I'm using **FastAPI** a ton these days. [...] I'm actually planning to use it for all of my team's **ML services at Microsoft**. Some of them are getting integrated into the core **Windows** product and some **Office** products._"

<div style="text-align: right; margin-right: 10%;">Kabir Khan - <strong>Microsoft</strong> <a href="https://github.com/fastapi/fastapi/pull/26" target="_blank"><small>(ref)</small></a></div>

---

"_We adopted the **FastAPI** library to spawn a **REST** server that can be queried to obtain **predictions**. [for Ludwig]_"

<div style="text-align: right; margin-right: 10%;">Piero Molino, Yaroslav Dudin, e Sai Sumanth Miryala - <strong>Uber</strong> <a href="https://eng.uber.com/ludwig-v0-2/" target="_blank"><small>(ref)</small></a></div>

---

"_**Netflix** is pleased to announce the open-source release of our **crisis management** orchestration framework: **Dispatch**! [built with **FastAPI**]_"

<div style="text-align: right; margin-right: 10%;">Kevin Glisson, Marc Vilanova, Forest Monsen - <strong>Netflix</strong> <a href="https://netflixtechblog.com/introducing-dispatch-da4b8a2a8072" target="_blank"><small>(ref)</small></a></div>

---

"_Iâ€™m over the moon excited about **FastAPI**. Itâ€™s so fun!_"

<div style="text-align: right; margin-right: 10%;">Brian Okken - <strong><a href="https://pythonbytes.fm/episodes/show/123/time-to-right-the-py-wrongs?time_in_sec=855" target="_blank">Python Bytes</a> podcast host</strong> <a href="https://twitter.com/brianokken/status/1112220079972728832" target="_blank"><small>(ref)</small></a></div>

---

"_Honestly, what you've built looks super solid and polished. In many ways, it's what I wanted **Hug** to be - it's really inspiring to see someone build that._"

<div style="text-align: right; margin-right: 10%;">Timothy Crosley - <strong><a href="https://github.com/hugapi/hug" target="_blank">Hug</a> creator</strong> <a href="https://news.ycombinator.com/item?id=19455465" target="_blank"><small>(ref)</small></a></div>

---

"_If you're looking to learn one **modern framework** for building REST APIs, check out **FastAPI** [...] It's fast, easy to use and easy to learn [...]_"

"_We've switched over to **FastAPI** for our **APIs** [...] I think you'll like it [...]_"

<div style="text-align: right; margin-right: 10%;">Ines Montani - Matthew Honnibal - <strong><a href="https://explosion.ai" target="_blank">Explosion AI</a> founders - <a href="https://spacy.io" target="_blank">spaCy</a> creators</strong> <a href="https://twitter.com/_inesmontani/status/1144173225322143744" target="_blank"><small>(ref)</small></a> - <a href="https://twitter.com/honnibal/status/1144031421859655680" target="_blank"><small>(ref)</small></a></div>

---

## **Typer**, la FastAPI delle CLI

<a href="https://typer.tiangolo.com" target="_blank"><img src="https://typer.tiangolo.com/img/logo-margin/logo-margin-vector.svg" style="width: 20%;"></a>

Se stai sviluppando un'app <abbr title="Command Line Interface (interfaccia della riga di comando)">CLI</abbr> da usare nel terminale invece che una web API, ti consigliamo <a href="https://typer.tiangolo.com/" class="external-link" target="_blank">**Typer**</a>.

**Typer** Ã¨ il fratello minore di FastAPI. Ed Ã¨ stato ideato per essere la **FastAPI delle CLI**. âŒ¨ï¸ ğŸš€

## Requisiti

Python 3.6+

FastAPI Ã¨ basata su importanti librerie:

* <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> per le parti web.
* <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> per le parti dei dati.

## Installazione

<div class="termy">

```console
$ pip install fastapi

---> 100%
```

</div>

Per il rilascio in produzione, sarÃ  necessario un server ASGI come <a href="http://www.uvicorn.org" class="external-link" target="_blank">Uvicorn</a> oppure <a href="https://github.com/pgjones/hypercorn" class="external-link" target="_blank">Hypercorn</a>.

<div class="termy">

```console
$ pip install uvicorn[standard]

---> 100%
```

</div>

## Esempio

### Crea un file

* Crea un file `main.py` con:

```Python
from fastapi import FastAPI
from typing import Optional

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: str = Optional[None]):
    return {"item_id": item_id, "q": q}
```

<details markdown="1">
<summary>Oppure usa <code>async def</code>...</summary>

Se il tuo codice usa `async` / `await`, allora usa `async def`:

```Python hl_lines="7  12"
from fastapi import FastAPI
from typing import Optional

app = FastAPI()


@app.get("/")
async def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
async def read_item(item_id: int, q: Optional[str] = None):
    return {"item_id": item_id, "q": q}
```

**Nota**:

e vuoi approfondire, consulta la sezione  _"In a hurry?"_ su <a href="https://fastapi.tiangolo.com/async/#in-a-hurry" target="_blank">`async` e `await` nella documentazione</a>.

</details>

### Esegui il server

Puoi far partire il server cosÃ¬:

<div class="termy">

```console
$ uvicorn main:app --reload

INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [28720]
INFO:     Started server process [28722]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

</div>

<details markdown="1">
<summary>Informazioni sul comando <code>uvicorn main:app --reload</code>...</summary>

Vediamo il comando `uvicorn main:app` in dettaglio:

* `main`: il file `main.py` (il "modulo" Python).
* `app`: l'oggetto creato dentro `main.py` con la riga di codice `app = FastAPI()`.
* `--reload`: ricarica il server se vengono rilevati cambiamenti del codice. Usalo solo durante la fase di sviluppo.

</details>

### Testa l'API

Apri il browser all'indirizzo <a href="http://127.0.0.1:8000/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1:8000/items/5?q=somequery</a>.

Vedrai la seguente risposta JSON:

```JSON
{"item_id": 5, "q": "somequery"}
```

Hai appena creato un'API che:

* Riceve richieste HTTP sui _paths_ `/` and `/items/{item_id}`.
* Entrambi i _paths_ accettano`GET` <em>operations</em> (conosciuti anche come <abbr title="metodi HTTP">HTTP _methods_</abbr>).
* Il _path_ `/items/{item_id}` ha un _path parameter_ `item_id` che deve essere un `int`.
* Il _path_ `/items/{item_id}` ha una `str` _query parameter_ `q`.

### Documentazione interattiva dell'API

Adesso vai all'indirizzo <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

Vedrai la documentazione interattiva dell'API (offerta da <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### Documentazione interattiva alternativa

Adesso accedi all'url <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

Vedrai la documentazione interattiva dell'API (offerta da <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## Esempio piÃ¹ avanzato

Adesso modifica il file `main.py` per ricevere un _body_ da una richiesta `PUT`.

Dichiara il _body_ usando le annotazioni di tipo standard di Python, grazie a Pydantic.

```Python hl_lines="2  7-10  23-25"
from fastapi import FastAPI
from pydantic import BaseModel
from typing import Optional

app = FastAPI()


class Item(BaseModel):
    name: str
    price: float
    is_offer: bool = Optional[None]


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Optional[str] = None):
    return {"item_id": item_id, "q": q}


@app.put("/items/{item_id}")
def update_item(item_id: int, item: Item):
    return {"item_name": item.name, "item_id": item_id}
```

Il server dovrebbe ricaricarsi in automatico (perchÃ© hai specificato `--reload` al comando `uvicorn` lanciato precedentemente).

### Aggiornamento della documentazione interattiva

Adesso vai su <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

* La documentazione interattiva dell'API verrÃ  automaticamente aggiornata, includendo il nuovo _body_:

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* Fai click sul pulsante "Try it out", che ti permette di inserire i parametri per interagire direttamente con l'API:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-04-swagger-03.png)

* Successivamente, premi sul pulsante "Execute". L'interfaccia utente comunicherÃ  con la tua API, invierÃ  i parametri, riceverÃ  i risultati della richiesta, e li mostrerÃ  sullo schermo:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-05-swagger-04.png)

### Aggiornamento della documentazione alternativa

Ora vai su <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

* Anche la documentazione alternativa dell'API mostrerÃ  il nuovo parametro della query e il _body_:

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### Riepilogo

Ricapitolando, Ã¨ sufficiente dichiarare **una sola volta** i tipi dei parametri, del body, ecc. come parametri di funzioni.

Questo con le annotazioni per i tipi standard di Python.

Non c'Ã¨ bisogno di imparare una nuova sintassi, metodi o classi specifici a una libreria, ecc.

Ãˆ normalissimo **Python 3.6+**.

Per esempio, per un `int`:

```Python
item_id: int
```

o per un modello `Item` piÃ¹ complesso:

```Python
item: Item
```

...e con quella singola dichiarazione hai in cambio:

* Supporto per gli editor di testo, incluso:
    * Autocompletamento.
    * Controllo sulle annotazioni di tipo.
* Validazione dei dati:
    * Errori chiari e automatici quando i dati sono invalidi.
    * Validazione anche per gli oggetti JSON piÃ¹ complessi.
* <abbr title="anche noto come: serializzazione, parsing, marshalling">Conversione</abbr> dei dati di input: da risorse esterne a dati e tipi di Python. Ãˆ possibile leggere da:
    * JSON.
    * Path parameters.
    * Query parameters.
    * Cookies.
    * Headers.
    * Form.
    * File.
* <abbr title="detta anche: serialization, parsing, marshalling">Conversione</abbr> dei dati di output: converte dati e tipi di Python a dati per la rete (come JSON):
    * Converte i tipi di Python (`str`, `int`, `float`, `bool`, `list`, ecc).
    * Oggetti `datetime`.
    * Oggetti `UUID`.
    * Modelli del database.
    * ...e molto di piÃ¹.
* Generazione di una documentazione dell'API interattiva, con scelta dell'interfaccia grafica:
    * Swagger UI.
    * ReDoc.

---

Tornando al precedente esempio, **FastAPI**:

* ValiderÃ  che esiste un `item_id` nel percorso delle richieste `GET` e `PUT`.
* ValiderÃ  che `item_id` sia di tipo `int` per le richieste `GET` e `PUT`.
    * Se non lo Ã¨, il client vedrÃ  un errore chiaro e utile.
* ControllerÃ  se ci sia un parametro opzionale chiamato `q` (per esempio `http://127.0.0.1:8000/items/foo?q=somequery`) per le richieste `GET`.
    * Siccome il parametro `q` Ã¨ dichiarato con `= None`, Ã¨ opzionale.
    * Senza il `None` sarebbe stato obbligatorio (come per il body della richiesta `PUT`).
* Per le richieste `PUT` su `/items/{item_id}`, leggerÃ  il body come JSON, questo comprende:
    * verifica che la richiesta abbia un attributo obbligatorio `name` e che sia di tipo `str`.
    * verifica che la richiesta abbia un attributo obbligatorio `price` e che sia di tipo `float`.
    * verifica che la richiesta abbia un attributo opzionale `is_offer` e che sia di tipo `bool`, se presente.
    * Tutto questo funzionerebbe anche con oggetti JSON piÃ¹ complessi.
* ConvertirÃ  *da* e *a* JSON automaticamente.
* DocumenterÃ  tutto con OpenAPI, che puÃ² essere usato per:
    * Sistemi di documentazione interattivi.
    * Sistemi di generazione di codice dal lato client, per molti linguaggi.
* FornirÃ  2 interfacce di documentazione dell'API interattive.

---

Questa Ã¨ solo la punta dell'iceberg, ma dovresti avere giÃ  un'idea di come il tutto funzioni.

Prova a cambiare questa riga di codice:

```Python
    return {"item_name": item.name, "item_id": item_id}
```

...da:

```Python
        ... "item_name": item.name ...
```

...a:

```Python
        ... "item_price": item.price ...
```

...e osserva come il tuo editor di testo autocompleterÃ  gli attributi e sarÃ  in grado di riconoscere i loro tipi:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

Per un esempio piÃ¹ completo che mostra piÃ¹ funzionalitÃ  del framework, consulta <a href="https://fastapi.tiangolo.com/tutorial/">Tutorial - Guida Utente</a>.

**Spoiler alert**: il tutorial - Guida Utente include:

* Dichiarazione di **parameters** da altri posti diversi come: **headers**, **cookies**, **form fields** e **files**.
* Come stabilire **vincoli di validazione** come `maximum_length` o `regex`.
* Un sistema di **<abbr title="detto anche components, resources, providers, services, injectables">Dependency Injection</abbr>** facile da usare e molto potente.
e potente.
* Sicurezza e autenticazione, incluso il supporto per **OAuth2** con **token JWT** e autenticazione **HTTP Basic**.
* Tecniche piÃ¹ avanzate (ma ugualmente semplici) per dichiarare **modelli JSON altamente nidificati** (grazie a Pydantic).
* E altre funzionalitÃ  (grazie a Starlette) come:
    * **WebSockets**
    * **GraphQL**
    * test molto facili basati su `requests` e `pytest`
    * **CORS**
    * **Cookie Sessions**
    * ...e altro ancora.

## Prestazioni

Benchmark indipendenti di TechEmpower mostrano che **FastAPI** basato su Uvicorn Ã¨ <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">uno dei framework Python piÃ¹ veloci in circolazione</a>, solamente dietro a Starlette e Uvicorn (usate internamente da FastAPI). (*)

Per approfondire, consulta la sezione <a href="https://fastapi.tiangolo.com/benchmarks/" class="internal-link" target="_blank">Benchmarks</a>.

## Dipendenze opzionali

Usate da Pydantic:

* <a href="https://github.com/JoshData/python-email-validator" target="_blank"><code>email-validator</code></a> - per la validazione di email.

Usate da Starlette:

* <a href="http://docs.python-requests.org" target="_blank"><code>requests</code></a> - Richiesto se vuoi usare il `TestClient`.
* <a href="https://github.com/Tinche/aiofiles" target="_blank"><code>aiofiles</code></a> - Richiesto se vuoi usare `FileResponse` o `StaticFiles`.
* <a href="http://jinja.pocoo.org" target="_blank"><code>jinja2</code></a> - Richiesto se vuoi usare la configurazione template di default.
* <a href="https://github.com/Kludex/python-multipart" target="_blank"><code>python-multipart</code></a> - Richiesto se vuoi supportare il <abbr title="convertire la stringa che proviene da una richiesta HTTP in dati Python">"parsing"</abbr> con `request.form()`.
* <a href="https://pythonhosted.org/itsdangerous/" target="_blank"><code>itsdangerous</code></a> - Richiesto per usare `SessionMiddleware`.
* <a href="https://pyyaml.org/wiki/PyYAMLDocumentation" target="_blank"><code>pyyaml</code></a> - Richiesto per il supporto dello `SchemaGenerator` di Starlette (probabilmente non ti serve con FastAPI).
* <a href="https://graphene-python.org/" target="_blank"><code>graphene</code></a> - Richiesto per il supporto di `GraphQLApp`.

Usate da FastAPI / Starlette:

* <a href="https://www.uvicorn.org" target="_blank"><code>uvicorn</code></a> - per il server che carica e serve la tua applicazione.
* <a href="https://github.com/ijl/orjson" target="_blank"><code>orjson</code></a> - ichiesto se vuoi usare `ORJSONResponse`.
* <a href="https://github.com/esnme/ultrajson" target="_blank"><code>ujson</code></a> - Richiesto se vuoi usare `UJSONResponse`.

Puoi installarle tutte con `pip install fastapi[all]`.

## Licenza

Questo progetto Ã¨ concesso in licenza in base ai termini della licenza MIT.


================================================
File: /docs/ja/mkdocs.yml
================================================
INHERIT: ../en/mkdocs.yml


================================================
File: /docs/ja/docs/alternatives.md
================================================
# ä»£æ›¿ãƒ„ãƒ¼ãƒ«ã‹ã‚‰å—ã‘ãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨æ¯”è¼ƒ

ä½•ãŒ**FastAPI**ã«ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸ãˆãŸã®ã‹ã€ä»–ã®ä»£æ›¿ãƒ„ãƒ¼ãƒ«ã¨æ¯”è¼ƒã—ã¦ã©ã†ã‹ã€ãã—ã¦ãã“ã‹ã‚‰ä½•ã‚’å­¦ã‚“ã ã®ã‹ã«ã¤ã„ã¦ã€‚

## ã¯ã˜ã‚ã«

**FastAPI**ã¯ã€ä»£æ›¿ãƒ„ãƒ¼ãƒ«ã®ã“ã‚Œã¾ã§ã®åƒããŒãªã‘ã‚Œã°å­˜åœ¨ã—ãªã‹ã£ãŸã§ã—ã‚‡ã†ã€‚

ä»¥å‰ã«ä½œã‚‰ã‚ŒãŸå¤šãã®ãƒ„ãƒ¼ãƒ«ãŒã€ä½œæˆã«ãŠã‘ã‚‹åˆºæ¿€ã¨ã—ã¦å½¹ç«‹ã£ã¦ãã¾ã—ãŸã€‚

ç§ã¯æ•°å¹´å‰ã‹ã‚‰æ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä½œæˆã‚’é¿ã‘ã¦ãã¾ã—ãŸã€‚ã¾ãšã€**FastAPI**ã§ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’ã€ã•ã¾ã–ã¾ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦è§£æ±ºã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã€‚

ã—ã‹ã—ã€ãã®æ™‚ç‚¹ã§ã¯ã€ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ã™ã¹ã¦æä¾›ã—ã€ä»¥å‰ã®ãƒ„ãƒ¼ãƒ«ã‹ã‚‰å„ªã‚ŒãŸã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å–ã‚Šå…¥ã‚Œã€å¯èƒ½ãªé™ã‚Šæœ€é«˜ã®æ–¹æ³•ã§ãã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã€ãã‚Œã¾ã§åˆ©ç”¨ã§ããªã‹ã£ãŸè¨€èªæ©Ÿèƒ½ (Python 3.6ä»¥é™ã®å‹ãƒ’ãƒ³ãƒˆ) ã‚’åˆ©ç”¨ã—ãŸã‚‚ã®ã‚’ä½œã‚‹ä»¥å¤–ã«é¸æŠè‚¢ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

## ä»¥å‰ã®ãƒ„ãƒ¼ãƒ«

### <a href="https://www.djangoproject.com/" class="external-link" target="_blank">Django</a>

Pythonã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸­ã§æœ€ã‚‚ãƒãƒ”ãƒ¥ãƒ©ãƒ¼ã§ã€åºƒãä¿¡é ¼ã•ã‚Œã¦ã„ã¾ã™ã€‚Instagramã®ã‚ˆã†ãªã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã«ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚

ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (MySQLã‚„PostgreSQLãªã©) ã¨æ¯”è¼ƒçš„å¼·å›ºã«çµåˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã€NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (Couchbaseã€MongoDBã€Cassandraãªã©) ã‚’ãƒ¡ã‚¤ãƒ³ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ç°¡å˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§HTMLã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ä½œã‚‰ã‚ŒãŸã‚‚ã®ã§ã‚ã‚Šã€ç¾ä»£çš„ãªãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Reactã‚„Vue.jsã€Angularãªã©) ã‚„ã€ä»–ã®ã‚·ã‚¹ãƒ†ãƒ  (IoTãƒ‡ãƒã‚¤ã‚¹ãªã©) ã¨é€šä¿¡ã™ã‚‹APIã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«ä½œã‚‰ã‚ŒãŸã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### <a href="https://www.django-rest-framework.org/" class="external-link" target="_blank">Django REST Framework</a>

Django REST Frameworkã¯ã€Djangoã‚’ä¸‹æ•·ãã«ã—ã¦Web APIã‚’æ§‹ç¯‰ã™ã‚‹æŸ”è»Ÿãªãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã¨ã—ã¦ã€APIã®æ©Ÿèƒ½ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ä½œã‚‰ã‚Œã¾ã—ãŸã€‚

Mozillaã€Red Hatã€Eventbrite ãªã©å¤šãã®ä¼æ¥­ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã¯**è‡ªå‹•çš„ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ**ã®æœ€åˆã®ä¾‹ã§ã‚ã‚Šã€ã“ã‚Œã¯**FastAPI**ã«å‘ã‘ãŸã€Œèª¿æŸ»ã€ã‚’è§¦ç™ºã—ãŸæœ€åˆã®ã‚¢ã‚¤ãƒ‡ã‚¢ã®ä¸€ã¤ã§ã—ãŸã€‚

/// note | å‚™è€ƒ

Django REST Framework ã¯ Tom Christie ã«ã‚ˆã£ã¦ä½œæˆã•ã‚Œã¾ã—ãŸã€‚Starletteã¨Uvicornã®ç”Ÿã¿ã®è¦ªã§ã‚ã‚Šã€**FastAPI**ã®ãƒ™ãƒ¼ã‚¹ã¨ãªã£ã¦ã„ã¾ã™ã€‚

///

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

è‡ªå‹•ã§APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹Webãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æŒã£ã¦ã„ã‚‹ç‚¹ã€‚

///

### <a href="http://flask.pocoo.org/" class="external-link" target="_blank">Flask</a>

Flask ã¯ã€Œãƒã‚¤ã‚¯ãƒ­ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®çµ±åˆã®ã‚ˆã†ãªDjangoãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æŒã¤å¤šãã®æ©Ÿèƒ½ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ã“ã®ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨æŸ”è»Ÿæ€§ã«ã‚ˆã‚Šã€ãƒ¡ã‚¤ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã„ã£ãŸã‚ˆã†ãªã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ãªã®ã§ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã„ãã¤ã‹ã®ç‚¹ã§ã‚„ã‚„æŠ€è¡“çš„ã§ã‚ã‚Šã¾ã™ãŒã€æ¯”è¼ƒçš„ç›´æ„Ÿçš„ã«å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„ãƒ¦ãƒ¼ã‚¶ç®¡ç†ã€ã‚ã‚‹ã„ã¯Djangoã«ã‚ã‚‰ã‹ã˜ã‚çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å¤šãã®æ©Ÿèƒ½ã‚’å¿…ãšã—ã‚‚å¿…è¦ã¨ã—ãªã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚‚ã‚ˆãä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã®å¤šãã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ãƒ‘ãƒ¼ãƒ„ã‚’åˆ†é›¢ã—ã€å¿…è¦ãªã‚‚ã®ã‚’æ­£ç¢ºã«ã‚«ãƒãƒ¼ã™ã‚‹ãŸã‚ã«æ‹¡å¼µã§ãã‚‹ã€Œãƒã‚¤ã‚¯ãƒ­ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ã§ã‚ã‚‹ã“ã¨ã¯ã€ç§ãŒæ®‹ã—ã¦ãŠããŸã‹ã£ãŸé‡è¦ãªæ©Ÿèƒ½ã§ã—ãŸã€‚

Flaskã®ã‚·ãƒ³ãƒ—ãƒ«ã•ã‚’è€ƒãˆã‚‹ã¨ã€APIã‚’æ§‹ç¯‰ã™ã‚‹ã®ã«é©ã—ã¦ã„ã‚‹ã‚ˆã†ã«æ€ãˆã¾ã—ãŸã€‚æ¬¡ã«è¦‹ã¤ã‘ã‚‹ã¹ãã¯ã€Flask ç”¨ã®ã€ŒDjango REST Frameworkã€ã§ã—ãŸã€‚

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ãƒã‚¤ã‚¯ãƒ­ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹ã“ã¨ã€‚ãƒ„ãƒ¼ãƒ«ã‚„ãƒ‘ãƒ¼ãƒ„ã‚’ç›®çš„ã«åˆã†ã‚ˆã†ã«ç°¡å˜ã«çµ„ã¿åˆã‚ã›ã‚‰ã‚Œã‚‹ç‚¹ã€‚

ã‚·ãƒ³ãƒ—ãƒ«ã§ç°¡å˜ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ä»•çµ„ã¿ã‚’æŒã£ã¦ã„ã‚‹ç‚¹ã€‚

///

### <a href="http://docs.python-requests.org" class="external-link" target="_blank">Requests</a>

**FastAPI**ã¯å®Ÿéš›ã«ã¯**Requests**ã®ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚Œã‚‰ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯å¤§ããç•°ãªã‚Šã¾ã™ã€‚

å®Ÿéš›ã«ã¯FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®*å†…éƒ¨*ã§Requestsã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚

ã—ã‹ã—ã€FastAPIã¯Requestsã‹ã‚‰ã‹ãªã‚Šã®ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¾—ã¦ã„ã¾ã™ã€‚

**Requests**ã¯ (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã—ã¦) APIã¨*é€šä¿¡*ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚Šã€**FastAPI**ã¯ (ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦) APIã‚’*æ§‹ç¯‰*ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

ã“ã‚Œã‚‰ã¯å¤šã‹ã‚Œå°‘ãªã‹ã‚Œä¸¡ç«¯ã«ã‚ã‚Šã€ãŠäº’ã„ã‚’è£œå®Œã—åˆã£ã¦ã„ã¾ã™ã€‚

Requestsã¯éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã‹ã¤ç›´æ„Ÿçš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ã§ä½¿ã„ã‚„ã™ãã€é©åˆ‡ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—åŒæ™‚ã«ã€éå¸¸ã«å¼·åŠ›ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚‚å¯èƒ½ã§ã™ã€‚

å…¬å¼ã‚µã‚¤ãƒˆã§ä»¥ä¸‹ã®ã‚ˆã†ã«è¨€ã‚ã‚Œã¦ã„ã‚‹ã®ã¯ã€ãã‚ŒãŒç†ç”±ã§ã™ã€‚

> Requestsã¯ä»Šã¾ã§ã§æœ€ã‚‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸPythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹

ä½¿ã„æ–¹ã¯ã¨ã¦ã‚‚ç°¡å˜ã§ã™ã€‚ä¾‹ãˆã°ã€`GET`ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€ã“ã®ã‚ˆã†ã«æ›¸ã‘ã°è‰¯ã„ã§ã™:

```Python
response = requests.get("http://example.com/some/url")
```

å¯¾å¿œã™ã‚‹FastAPIã®ãƒ‘ã‚¹ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

```Python hl_lines="1"
@app.get("/some/url")
def read_url():
    return {"message": "Hello World"}
```

 `requests.get(...)` ã¨`@app.get(...)` ã«ã¯é¡ä¼¼ç‚¹ãŒè¦‹å—ã‘ã‚‰ã‚Œã¾ã™ã€‚

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

* ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãªAPIã‚’æŒã£ã¦ã„ã‚‹ç‚¹ã€‚
* HTTPãƒ¡ã‚½ãƒƒãƒ‰åã‚’ç›´æ¥åˆ©ç”¨ã—ã€å˜ç´”ã§ç›´æ„Ÿçš„ã§ã‚ã‚‹ã€‚
* é©åˆ‡ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æŒã¡ã¤ã¤ã€å¼·åŠ›ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ã‚’æŒã£ã¦ã„ã‚‹ã€‚

///

### <a href="https://swagger.io/" class="external-link" target="_blank">Swagger</a> / <a href="https://github.com/OAI/OpenAPI-Specification/" class="external-link" target="_blank">OpenAPI</a>

ç§ãŒDjango REST Frameworkã«æ±‚ã‚ã¦ã„ãŸä¸»ãªæ©Ÿèƒ½ã¯ã€APIã®è‡ªå‹•çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã§ã—ãŸã€‚

ãã—ã¦ã€Swaggerã¨å‘¼ã°ã‚Œã‚‹ã€ JSON (ã¾ãŸã¯YAMLã€JSONã®æ‹¡å¼µç‰ˆ) ã‚’ä½¿ã£ã¦APIã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã™ã‚‹ãŸã‚ã®æ¨™æº–ãŒã‚ã‚‹ã“ã¨ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚

ãã—ã¦ã€Swagger APIç”¨ã®Webãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒæ—¢ã«ä½œæˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ã¤ã¾ã‚Šã€APIç”¨ã®Swaggerãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã€ã“ã®Webãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’è‡ªå‹•çš„ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã‚ã‚‹æ™‚ç‚¹ã§ã€Swaggerã¯Linux Foundationã«å¯„è´ˆã•ã‚Œã€OpenAPIã«æ”¹åã•ã‚Œã¾ã—ãŸã€‚

ãã®ãŸã‚ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³2.0ã§ã¯ã€ŒSwaggerã€ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³3ä»¥ä¸Šã§ã¯ã€ŒOpenAPIã€ã¨è¡¨è¨˜ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ç‹¬è‡ªã®ã‚¹ã‚­ãƒ¼ãƒã®ä»£ã‚ã‚Šã«ã€APIä»•æ§˜ã®ã‚ªãƒ¼ãƒ—ãƒ³ãªæ¨™æº–ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

ãã—ã¦ã€æ¨™æº–ã«åŸºã¥ããƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ„ãƒ¼ãƒ«ã‚’çµ±åˆã—ã¦ã„ã¾ã™ã€‚

* <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>
* <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>

ã“ã®äºŒã¤ã¯äººæ°—ã§å®‰å®šã—ãŸã‚‚ã®ã¨ã—ã¦é¸æŠã•ã‚Œã¾ã—ãŸãŒã€å°‘ã—æ¤œç´¢ã—ã¦ã¿ã‚‹ã¨ã€ (**FastAPI**ã¨åŒæ™‚ã«ä½¿ç”¨ã§ãã‚‹) OpenAPIã®ãŸã‚ã®å¤šãã®ä»£æ›¿ã¨ãªã‚‹ãƒ„ãƒ¼ãƒ«ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

///

### Flask REST ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

ã„ãã¤ã‹ã®Flask RESTãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œã‚‰ã‚’èª¿æŸ»ã—ã¦ã¿ãŸã¨ã“ã‚ã€å¤šãã®ã‚‚ã®ãŒä¸é©åˆ‡ãªå•é¡ŒãŒæ®‹ã£ãŸã¾ã¾ã€ä¸­æ–­ã•ã‚ŒãŸã‚Šæ”¾ç½®ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚

### <a href="https://marshmallow.readthedocs.io/en/3.0/" class="external-link" target="_blank">Marshmallow</a>

APIã‚·ã‚¹ãƒ†ãƒ ã§å¿…è¦ã¨ã•ã‚Œã‚‹ä¸»ãªæ©Ÿèƒ½ã®ä¸€ã¤ã«ã€ã‚³ãƒ¼ãƒ‰ (Python) ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šå‡ºã—ã¦ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä»‹ã—ã¦é€ã‚Œã‚‹ã‚‚ã®ã«å¤‰æ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã€Œ<abbr title="marshalling, conversion">ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³</abbr>ã€ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ãŸã‚Šã€`datetime` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹ãªã©ã§ã™ã€‚

APIãŒå¿…è¦ã¨ã™ã‚‹ã‚‚ã†ä¸€ã¤ã®å¤§ããªæ©Ÿèƒ½ã¯ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚Šã€ç‰¹å®šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã«ãƒ‡ãƒ¼ã‚¿ãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã™ã€‚ä¾‹ãˆã°ã€ã‚ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã§ã¯ãªã `int` ã§ã‚ã‚‹ã“ã¨ãªã©ã§ã™ã€‚ã“ã‚Œã¯ç‰¹ã«å—ä¿¡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ä¾¿åˆ©ã§ã™ã€‚

ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ãŒãªã‘ã‚Œã°ã€ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ã‚’æ‰‹ä½œæ¥­ã§ã‚³ãƒ¼ãƒ‰ã«å®Ÿè£…ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã¯ã€MarshmallowãŒæä¾›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚Marshmallowã¯ç´ æ™´ã‚‰ã—ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€ç§ã‚‚ä»¥å‰ã«ä½•åº¦ã‚‚ä½¿ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€ãã‚Œã¯Pythonã®å‹ãƒ’ãƒ³ãƒˆãŒå­˜åœ¨ã™ã‚‹å‰ã«ä½œã‚‰ã‚ŒãŸã‚‚ã®ã§ã™ã€‚ãã®ãŸã‚ã€ã™ã¹ã¦ã®<abbr title="ãƒ‡ãƒ¼ã‚¿ãŒã©ã®ã‚ˆã†ã«å½¢æˆã•ã‚Œã‚‹ã¹ãã‹ã®å®šç¾©">ã‚¹ã‚­ãƒ¼ãƒ</abbr>ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ã¯ã€MarshmallowãŒæä¾›ã™ã‚‹ç‰¹å®šã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚„ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ã‚³ãƒ¼ãƒ‰ã§ã€Œã‚¹ã‚­ãƒ¼ãƒã€ã‚’å®šç¾©ã—ã€ãƒ‡ãƒ¼ã‚¿ã®å‹ã‚„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•ã§æä¾›ã™ã‚‹ç‚¹ã€‚

///

### <a href="https://webargs.readthedocs.io/en/latest/" class="external-link" target="_blank">Webargs</a>

APIã«æ±‚ã‚ã‚‰ã‚Œã‚‹ä»–ã®å¤§ããªæ©Ÿèƒ½ã¨ã—ã¦ã€<abbr title="Pythonãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã¨å¤‰æ›">å—ä¿¡ã—ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ãƒ¼ã‚¹</abbr>ãŒã‚ã‚Šã¾ã™ã€‚

Webargsã¯Flaskã‚’ã¯ã˜ã‚ã¨ã™ã‚‹ã„ãã¤ã‹ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸Šã«ãã‚Œã‚’æä¾›ã™ã‚‹ãŸã‚ã«ä½œã‚‰ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ãŸã‚ã«å†…éƒ¨ã§ã¯Marshmallowã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€åŒã˜é–‹ç™ºè€…ã«ã‚ˆã£ã¦ä½œã‚‰ã‚Œã¾ã—ãŸã€‚

ç´ æ™´ã‚‰ã—ã„ãƒ„ãƒ¼ãƒ«ã§ã€ç§ã‚‚**FastAPI**ã‚’æŒã¤å‰ã¯ã‚ˆãä½¿ã£ã¦ã„ã¾ã—ãŸã€‚

/// info | æƒ…å ±

Webargsã¯ã€Marshmallowã¨åŒã˜é–‹ç™ºè€…ã«ã‚ˆã‚Šä½œã‚‰ã‚Œã¾ã—ãŸã€‚

///

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹è‡ªå‹•çš„ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒã£ã¦ã„ã‚‹ç‚¹ã€‚

///

### <a href="https://apispec.readthedocs.io/en/stable/" class="external-link" target="_blank">APISpec</a>

Marshmallowã¨Webargsã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‘ãƒ¼ã‚¹ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦æä¾›ã—ã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã¾ã ä¸è¶³ã—ã¦ã„ã¾ã™ã€‚ãã“ã§APISpecãŒä½œã‚‰ã‚Œã¾ã—ãŸã€‚

ã“ã‚Œã¯å¤šãã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ (Starletteç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚ã‚ã‚Šã¾ã™) ã€‚

ä»•çµ„ã¿ã¨ã—ã¦ã¯ã€å„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é–¢æ•°ã®docstringã«YAMLå½¢å¼ã§ã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

ãã—ã¦ã€OpenAPIã‚¹ã‚­ãƒ¼ãƒã‚’ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ã€‚

Flask, Starlette, Responderãªã©ã«ãŠã„ã¦ã¯ãã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ã€‚

ã—ã‹ã—ã€Pythonã®æ–‡å­—åˆ— (å¤§ããªYAML) ã®ä¸­ã«ã€å°ã•ãªæ§‹æ–‡ãŒã‚ã‚‹ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚

ã‚¨ãƒ‡ã‚£ã‚¿ã§ã¯ã€ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã¾ãŸã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„Marshmallowã‚¹ã‚­ãƒ¼ãƒã‚’å¤‰æ›´ã—ãŸã¨ãã«ã€YAMLã®docstringã‚’å¤‰æ›´ã™ã‚‹ã®ã‚’å¿˜ã‚Œã¦ã—ã¾ã†ã¨ã€ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚­ãƒ¼ãƒãŒå¤ããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

/// info | æƒ…å ±

APISpecã¯ã€Marshmallowã¨åŒã˜é–‹ç™ºè€…ã«ã‚ˆã‚Šä½œæˆã•ã‚Œã¾ã—ãŸã€‚

///

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

OpenAPIã¨ã„ã†ã€APIã«ã¤ã„ã¦ã®ã‚ªãƒ¼ãƒ—ãƒ³ãªæ¨™æº–ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ç‚¹ã€‚

///

### <a href="https://flask-apispec.readthedocs.io/en/latest/" class="external-link" target="_blank">Flask-apispec</a>

Webargsã€Marshmallowã€APISpecã‚’é€£æºã•ã›ãŸFlaskãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

Webargsã¨Marshmallowã®æƒ…å ±ã‹ã‚‰ã€APISpecã‚’ä½¿ç”¨ã—ã¦OpenAPIã‚¹ã‚­ãƒ¼ãƒã‚’è‡ªå‹•çš„ã«ç”Ÿæˆã—ã¾ã™ã€‚

ã“ã‚Œã¯ç´ æ™´ã‚‰ã—ã„ãƒ„ãƒ¼ãƒ«ã§ã€éå¸¸ã«éå°è©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚å¤šãã® Flask ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚ˆã‚Šã‚‚ãšã£ã¨äººæ°—ãŒã‚ã‚‹ã¹ãã§ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã¾ã‚Šã«ã‚‚ç°¡æ½”ã§æŠ½è±¡çš„ã§ã‚ã‚‹ã‹ã‚‰ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€Pythonã®docstringã«YAML (åˆ¥ã®æ§‹æ–‡) ã‚’æ›¸ãå¿…è¦ãŒãªããªã‚Šã¾ã—ãŸã€‚

Flaskã€Flask-apispecã€Marshmallowã€Webargsã®çµ„ã¿åˆã‚ã›ã¯ã€**FastAPI**ã‚’æ§‹ç¯‰ã™ã‚‹ã¾ã§ç§ã®ãŠæ°—ã«å…¥ã‚Šã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¹ã‚¿ãƒƒã‚¯ã§ã—ãŸã€‚

ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§ã€ã„ãã¤ã‹ã®Flaskãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã¯ç§ (ã¨ã„ãã¤ã‹ã®å¤–éƒ¨ã®ãƒãƒ¼ãƒ ) ãŒä»Šã¾ã§ä½¿ã£ã¦ããŸãƒ¡ã‚¤ãƒ³ã®ã‚¹ã‚¿ãƒƒã‚¯ã§ã™ã€‚

* <a href="https://github.com/tiangolo/full-stack" class="external-link" target="_blank">https://github.com/tiangolo/full-stack</a>
* <a href="https://github.com/tiangolo/full-stack-flask-couchbase" class="external-link" target="_blank">https://github.com/tiangolo/full-stack-flask-couchbase</a>
* <a href="https://github.com/tiangolo/full-stack-flask-couchdb" class="external-link" target="_blank">https://github.com/tiangolo/full-stack-flask-couchdb</a>

ãã—ã¦ã€ã“ã‚Œã‚‰ã®ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ã€[**FastAPI** Project Generators](project-generation.md){.internal-link target=_blank}ã®å…ƒã¨ãªã£ã¦ã„ã¾ã—ãŸã€‚

/// info | æƒ…å ±

Flask-apispecã¯Marshmallowã¨åŒã˜é–‹ç™ºè€…ã«ã‚ˆã‚Šä½œæˆã•ã‚Œã¾ã—ãŸã€‚

///

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ãŸã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã€OpenAPIã‚¹ã‚­ãƒ¼ãƒã‚’è‡ªå‹•çš„ã«ç”Ÿæˆã™ã‚‹ç‚¹ã€‚

///

### <a href="https://nestjs.com/" class="external-link" target="_blank">NestJS</a> (ã¨<a href="https://angular.io/" class="external-link" target="_blank">Angular</a>)

NestJSã¯Angularã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚ŒãŸJavaScript (TypeScript) NodeJSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€Pythonã§ã™ã‚‰ã‚ã‚Šã¾ã›ã‚“ã€‚

Flask-apispecã§ã§ãã‚‹ã“ã¨ã¨å¤šå°‘ä¼¼ãŸã‚ˆã†ãªã“ã¨ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

Angular 2ã«ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å—ã‘ãŸã€çµ±åˆã•ã‚ŒãŸä¾å­˜æ€§æ³¨å…¥ã®ä»•çµ„ã¿ã‚’æŒã£ã¦ã„ã¾ã™ã€‚(ç§ãŒçŸ¥ã£ã¦ã„ã‚‹ä»–ã®ä¾å­˜æ€§æ³¨å…¥ã®ä»•çµ„ã¿ã¨åŒæ§˜ã«) ã€Œinjectableã€ã‚’äº‹å‰ã«ç™»éŒ²ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ãŸã‚ã€å†—é•·æ€§ã¨ã‚³ãƒ¼ãƒ‰ã®ç¹°ã‚Šè¿”ã—ãŒç™ºç”Ÿã—ã¾ã™ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯TypeScriptã®å‹ã§è¨˜è¿°ã•ã‚Œã‚‹ã®ã§ (Pythonã®å‹ãƒ’ãƒ³ãƒˆã«ä¼¼ã¦ã„ã¾ã™) ã€ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã¯ã¨ã¦ã‚‚è‰¯ã„ã§ã™ã€‚

ã—ã‹ã—ã€TypeScriptã®ãƒ‡ãƒ¼ã‚¿ã¯JavaScriptã¸ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã«ã¯æ®‹ã•ã‚Œãªã„ãŸã‚ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã‚’åŒæ™‚ã«å®šç¾©ã™ã‚‹ã®ã«å‹ã«é ¼ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¹ã‚­ãƒ¼ãƒã®è‡ªå‹•ç”Ÿæˆã‚’è¡Œã†ãŸã‚ã«ã¯ã€å¤šãã®å ´æ‰€ã§ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€éå¸¸ã«å†—é•·ã«ãªã‚Šã¾ã™ã€‚

å…¥ã‚Œå­ã«ãªã£ãŸãƒ¢ãƒ‡ãƒ«ã‚’ã†ã¾ãæ‰±ãˆã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®JSONãƒœãƒ‡ã‚£ãŒå†…éƒ¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒã¤JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€ãã‚ŒãŒé †ç•ªã«ãƒã‚¹ãƒˆã•ã‚ŒãŸJSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãªã£ã¦ã„ã‚‹å ´åˆã€é©åˆ‡ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã‚„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ç´ æ™´ã‚‰ã—ã„ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®è£œåŠ©ã‚’å¾—ã‚‹ãŸã‚ã«ã€Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ç‚¹ã€‚

å¼·åŠ›ãªä¾å­˜æ€§æ³¨å…¥ã®ä»•çµ„ã¿ã‚’æŒã¡ã€ã‚³ãƒ¼ãƒ‰ã®ç¹°ã‚Šè¿”ã—ã‚’æœ€å°åŒ–ã™ã‚‹æ–¹æ³•ã‚’è¦‹ã¤ã‘ãŸç‚¹ã€‚

///

### <a href="https://sanic.readthedocs.io/en/latest/" class="external-link" target="_blank">Sanic</a>

`asyncio`ã«åŸºã¥ã„ãŸã€Pythonã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸­ã§ã‚‚éå¸¸ã«é«˜é€Ÿãªã‚‚ã®ã®ä¸€ã¤ã§ã™ã€‚Flaskã¨éå¸¸ã«ä¼¼ãŸä½œã‚Šã«ãªã£ã¦ã„ã¾ã™ã€‚

/// note | æŠ€è¡“è©³ç´°

Pythonã®`asyncio`ãƒ«ãƒ¼ãƒ—ã®ä»£ã‚ã‚Šã«ã€`uvloop`ãŒåˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã‚Œã«ã‚ˆã‚Šã€éå¸¸ã«é«˜é€Ÿã§ã™ã€‚

`Uvicorn`ã¨`Starlette`ã«æ˜ã‚‰ã‹ãªã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸ãˆã¦ãŠã‚Šã€ãã‚Œã‚‰ã¯ç¾åœ¨ã‚ªãƒ¼ãƒ—ãƒ³ãªãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«ãŠã„ã¦Sanicã‚ˆã‚Šé«˜é€Ÿã§ã™ã€‚

///

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ç‰©å‡„ã„æ€§èƒ½ã‚’å‡ºã™æ–¹æ³•ã‚’è¦‹ã¤ã‘ãŸç‚¹ã€‚

**FastAPI**ãŒã€(ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«ã‚ˆã‚Šãƒ†ã‚¹ãƒˆã•ã‚ŒãŸ) æœ€ã‚‚é«˜é€Ÿãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹Starletteã«åŸºã¥ã„ã¦ã„ã‚‹ç†ç”±ã§ã™ã€‚

///

### <a href="https://falconframework.org/" class="external-link" target="_blank">Falcon</a>

Falconã¯ã‚‚ã†ä¸€ã¤ã®é«˜æ€§èƒ½Pythonãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€ãƒŸãƒ‹ãƒãƒ ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€Hugã®ã‚ˆã†ãªä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®åŸºç›¤ã¨ã—ã¦å‹•ä½œã—ã¾ã™ã€‚

Pythonã®ã‚¦ã‚§ãƒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ¨™æº–è¦æ ¼ (WSGI) ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œã¯åŒæœŸçš„ã§ã‚ã‚‹ãŸã‚WebSocketãªã©ã®åˆ©ç”¨ã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚ã¨ã¯ã„ãˆã€ãã‚Œã§ã‚‚éå¸¸ã«é«˜ã„æ€§èƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã¯ã€ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ã¨ã€Œãƒ¬ã‚¹ãƒãƒ³ã‚¹ã€ã®2ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹é–¢æ•°ã‚’æŒã¤ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãã—ã¦ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã€Œèª­ã¿è¾¼ã¿ã€ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ã‚’ã€Œæ›¸ãè¾¼ã¿ã€ã¾ã™ã€‚ã“ã®è¨­è¨ˆã®ãŸã‚ã€Pythonæ¨™æº–ã®å‹ãƒ’ãƒ³ãƒˆã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ãƒœãƒ‡ã‚£ã‚’é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦å®£è¨€ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ãã®ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã¯ã€è‡ªå‹•çš„ã«ã§ããšã‚³ãƒ¼ãƒ‰ã®ä¸­ã§è¡Œã‚ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã‚ã‚‹ã„ã¯ã€Hugã®ã‚ˆã†ã«Falconã®ä¸Šã«ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦å®Ÿè£…ã•ã‚Œãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã“ã®ã‚ˆã†ãªåˆ†æ–­ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦1ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨1ã¤ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã¤ã¨ã„ã†Falconã®ãƒ‡ã‚¶ã‚¤ãƒ³ã«ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å—ã‘ãŸä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚‚èµ·ã“ã‚Šã¾ã™ã€‚

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ç´ æ™´ã‚‰ã—ã„æ€§èƒ½ã‚’å¾—ã‚‹ãŸã‚ã®æ–¹æ³•ã‚’è¦‹ã¤ã‘ãŸç‚¹ã€‚

Hug (Hugã¯Falconã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã¾ã™) ã¨ä¸€ç·’ã«ã€**FastAPI**ãŒ`response`å¼•æ•°ã‚’é–¢æ•°ã«æŒã¤ã“ã¨ã«ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸ãˆã¾ã—ãŸã€‚

**FastAPI**ã§ã¯ä»»æ„ã§ã™ãŒã€ãƒ˜ãƒƒãƒ€ãƒ¼ã‚„Cookieã‚„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

///

### <a href="https://moltenframework.com/" class="external-link" target="_blank">Molten</a>

**FastAPI**ã‚’æ§‹ç¯‰ã™ã‚‹æœ€åˆã®æ®µéšã§Moltenã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚ãã—ã¦ã€ãã‚Œã¯éå¸¸ã«ä¼¼ãŸã‚ˆã†ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

* Pythonã®å‹ãƒ’ãƒ³ãƒˆã«åŸºã¥ã„ã¦ã„ã‚‹
* ã“ã‚Œã‚‰ã®å‹ã‹ã‚‰è¡Œã‚ã‚Œã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–
* ä¾å­˜æ€§æ³¨å…¥ã®ä»•çµ„ã¿

Pydanticã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã‚’ã™ã‚‹ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã›ãšã€ç‹¬è‡ªã®ã‚‚ã®ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã‚‰ã®ãƒ‡ãƒ¼ã‚¿å‹ã®å®šç¾©ã¯ç°¡å˜ã«ã¯å†åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚

ã‚‚ã†å°‘ã—å†—é•·ãªè¨­å®šãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ (ASGIã§ã¯ãªã) WSGIã«åŸºã¥ã„ã¦ã„ã‚‹ã®ã§ã€Uvicornã‚„Starletteã‚„Sanicã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ãŒæä¾›ã™ã‚‹é«˜æ€§èƒ½ã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã¯è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ä¾å­˜æ€§æ³¨å…¥ã®ä»•çµ„ã¿ã¯ä¾å­˜æ€§ã®äº‹å‰ç™»éŒ²ãŒå¿…è¦ã§ã€å®£è¨€ã•ã‚ŒãŸå‹ã«åŸºã¥ã„ã¦ä¾å­˜æ€§ãŒè§£æ±ºã•ã‚Œã¾ã™ã€‚ãã®ãŸã‚ã€ç‰¹å®šã®å‹ã‚’æä¾›ã™ã‚‹ã€Œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ã‚’è¤‡æ•°å®£è¨€ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ä¸€ã¤ã®å ´æ‰€ã§å®£è¨€ã•ã‚Œã€ä»–ã®å ´æ‰€ã§å®£è¨€ã•ã‚ŒãŸé–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ (ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æ‰±ã†é–¢æ•°ã®ã™ãä¸Šã«é…ç½®ã§ãã‚‹ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã¯ãªã) ã€‚ã“ã‚Œã¯Flask (ã‚„Starlette) ã‚ˆã‚Šã‚‚ã€Djangoã«è¿‘ã„ã§ã™ã€‚ã“ã‚Œã¯ã€æ¯”è¼ƒçš„ç·Šå¯†ã«çµåˆã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§åˆ†é›¢ã—ã¦ã„ã¾ã™ã€‚

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ¢ãƒ‡ãƒ«ã®å±æ€§ã®ã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€å€¤ã‚’ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿å‹ã®è¿½åŠ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã‚Œã¯ã‚¨ãƒ‡ã‚£ã‚¿ã®è£œåŠ©ã‚’æ”¹å–„ã™ã‚‹ã‚‚ã®ã§ã€ä»¥å‰ã¯Pydanticã§ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚

åŒæ§˜ã®æ–¹æ³•ã§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å®£è¨€ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã€Pydanticã‚’éƒ¨åˆ†çš„ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¼ãƒ¬ã‚·ãƒ§ãƒ³ã‚’ä¸ãˆã¾ã—ãŸã€‚(ç¾åœ¨ã¯ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã¯å…¨ã¦Pydanticã§å¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ã€‚)

///

### <a href="http://www.hug.rest/" class="external-link" target="_blank">Hug</a>

Hugã¯ã€Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’åˆ©ç”¨ã—ã¦APIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å‹å®£è¨€ã‚’å®Ÿè£…ã—ãŸæœ€åˆã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®1ã¤ã§ã™ã€‚ã“ã‚Œã¯ç´ æ™´ã‚‰ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã§ã€ä»–ã®ãƒ„ãƒ¼ãƒ«ãŒåŒã˜ã“ã¨ã‚’ã™ã‚‹ãã£ã‹ã‘ã¨ãªã‚Šã¾ã—ãŸã€‚

Hugã¯æ¨™æº–ã®Pythonå‹ã®ä»£ã‚ã‚Šã«ã‚«ã‚¹ã‚¿ãƒ å‹ã‚’å®£è¨€ã«ä½¿ç”¨ã—ã¦ã„ã¾ã—ãŸãŒã€ãã‚Œã§ã‚‚å¤§ããªé€²æ­©ã§ã—ãŸã€‚

ã¾ãŸã€JSONã§APIå…¨ä½“ã‚’å®£è¨€ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚­ãƒ¼ãƒã‚’ç”Ÿæˆã—ãŸæœ€åˆã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®1ã¤ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

OpenAPIã‚„JSON Schemaã®ã‚ˆã†ãªæ¨™æº–ã«åŸºã¥ã„ãŸã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãã®ãŸã‚ã€Swagger UIã®ã‚ˆã†ãªä»–ã®ãƒ„ãƒ¼ãƒ«ã¨çµ±åˆã™ã‚‹ã®ã¯ç°¡å˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã—ã‹ã—ã€ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€ã“ã‚Œã¯éå¸¸ã«é©æ–°çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ã§ã—ãŸã€‚

åŒã˜ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã£ã¦APIã¨CLIã‚’ä½œæˆã§ãã‚‹ã€é¢ç™½ãçã—ã„æ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

ä»¥å‰ã®Pythonã®åŒæœŸå‹Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ¨™æº– (WSGI) ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã‚‹ãŸã‚ã€Websocketãªã©ã¯æ‰±ãˆã¾ã›ã‚“ãŒã€ãã‚Œã§ã‚‚é«˜æ€§èƒ½ã§ã™ã€‚

/// info | æƒ…å ±

Hugã¯Timothy Crosleyã«ã‚ˆã‚Šä½œæˆã•ã‚Œã¾ã—ãŸã€‚å½¼ã¯<a href="https://github.com/timothycrosley/isort" class="external-link" target="_blank">`isort`</a>ãªã©ã€Pythonã®ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®ä¸¦ã³æ›¿ãˆã‚’è‡ªå‹•çš„ã«ãŠã“ã†ãªã†ç´ æ™´ã‚‰ã—ã„ãƒ„ãƒ¼ãƒ«ã®é–‹ç™ºè€…ã§ã™ã€‚

///

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

Hugã¯APIStarã«éƒ¨åˆ†çš„ãªã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸ãˆã¦ãŠã‚Šã€ç§ãŒç™ºè¦‹ã—ãŸä¸­ã§ã¯APIStarã¨åŒæ§˜ã«æœ€ã‚‚æœŸå¾…ã®æŒã¦ã‚‹ãƒ„ãƒ¼ãƒ«ã®ä¸€ã¤ã§ã—ãŸã€‚

Hugã¯ã€**FastAPI**ãŒPythonã®å‹ãƒ’ãƒ³ãƒˆã‚’ç”¨ã„ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®£è¨€ã—è‡ªå‹•çš„ã«APIã‚’å®šç¾©ã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚’è§¦ç™ºã—ã¾ã—ãŸã€‚

Hugã¯ã€**FastAPI**ãŒãƒ˜ãƒƒãƒ€ãƒ¼ã‚„ã‚¯ãƒƒã‚­ãƒ¼ã‚’è¨­å®šã™ã‚‹ãŸã‚ã«é–¢æ•°ã« `response`å¼•æ•°ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã«ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸ãˆã¾ã—ãŸã€‚

///

### <a href="https://github.com/encode/apistar" class="external-link" target="_blank">APIStar</a> (<= 0.5)

**FastAPI**ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã‚’æ±ºã‚ã‚‹ç›´å‰ã«ã€**APIStar**ã‚µãƒ¼ãƒãƒ¼ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚ãã‚Œã¯ç§ãŒæ¢ã—ã¦ã„ãŸã‚‚ã®ãŒã»ã¼ã™ã¹ã¦å«ã¾ã‚Œã¦ãŠã‚Šã€ç´ æ™´ã‚‰ã—ã„ãƒ‡ã‚¶ã‚¤ãƒ³ã§ã—ãŸã€‚

ã“ã‚Œã¯ã€ç§ãŒã“ã‚Œã¾ã§ã«è¦‹ãŸä¸­ã§ (NestJSã‚„Moltenã®å‰ã«) Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’ä½¿ã£ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®£è¨€ã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®æœ€åˆã®å®Ÿè£…ã®ä¸€ã¤ã§ã—ãŸã€‚Hugã¨å¤šã‹ã‚Œå°‘ãªã‹ã‚ŒåŒæ™‚æœŸã«è¦‹ã¤ã‘ã¾ã—ãŸã€‚ãŸã ã€APIStarã¯OpenAPIæ¨™æº–ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸã€‚

ã„ãã¤ã‹ã®å ´æ‰€ã§åŒã˜å‹ãƒ’ãƒ³ãƒˆã‚’å…ƒã«ã€ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‡ãƒ¼ã‚¿ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€OpenAPIã‚¹ã‚­ãƒ¼ãƒã®ç”Ÿæˆã‚’è¡Œã£ã¦ã„ã¾ã—ãŸã€‚

ãƒœãƒ‡ã‚£ã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã«ã¯Pydanticã®ã‚ˆã†ãªPythonã®å‹ãƒ’ãƒ³ãƒˆã¯ä½¿ã‚ã‚Œã¦ãŠã‚‰ãšã€ã‚‚ã†å°‘ã—Marshmallowã«ä¼¼ã¦ã„ãŸã®ã§ã€ã‚¨ãƒ‡ã‚£ã‚¿ã®è£œåŠ©ã¯ã‚ã¾ã‚Šè‰¯ããªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãã‚Œã§ã‚‚APIStarã¯åˆ©ç”¨å¯èƒ½ãªæœ€è‰¯ã®é¸æŠè‚¢ã§ã—ãŸã€‚

å½“æ™‚ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç™ºæ®ã—ã¦ã„ã¾ã—ãŸ (Starletteã®ã¿ãŒä¸Šå›ã£ã¦ã„ã¾ã—ãŸ) ã€‚

æœ€åˆã¯è‡ªå‹•çš„ãªAPIã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã®Web UIã‚’æŒã£ã¦ã„ã¾ã›ã‚“ã§ã—ãŸãŒã€Swagger UIã‚’è¿½åŠ ã§ãã‚‹ã“ã¨ã¯ã‚ã‹ã£ã¦ã„ã¾ã—ãŸã€‚

ä¾å­˜æ€§æ³¨å…¥ã®ä»•çµ„ã¿ã‚’æŒã£ã¦ã„ã¾ã—ãŸã€‚ä¸Šè¨˜ã§èª¬æ˜ã—ãŸä»–ã®ãƒ„ãƒ¼ãƒ«ã®ã‚ˆã†ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®äº‹å‰ç™»éŒ²ãŒå¿…è¦ã§ã—ãŸã€‚ã—ã‹ã—ã€ãã‚Œã§ã‚‚ç´ æ™´ã‚‰ã—ã„æ©Ÿèƒ½ã§ã—ãŸã€‚

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®çµ±åˆãŒãªã‹ã£ãŸã®ã§ã€Flask-apispecã‚’å…ƒã«ã—ãŸãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã«ã‚ã‚‹ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’ç½®ãæ›ãˆã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ç§ã¯ãã®æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒãƒƒã‚¯ãƒ­ã‚°ã‚’æŒã£ã¦ã„ã¾ã—ãŸã€‚

ã—ã‹ã—ã€ãã®å¾Œã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç„¦ç‚¹ãŒå¤‰ã‚ã‚Šã¾ã—ãŸã€‚

åˆ¶ä½œè€…ã¯Starletteã«é›†ä¸­ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸãŸã‚ã€APIã‚¦ã‚§ãƒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ãªããªã‚Šã¾ã—ãŸã€‚

ä»Šã§ã¯APIStarã¯OpenAPIä»•æ§˜ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã§ã‚ã‚Šã€ã‚¦ã‚§ãƒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

/// info | æƒ…å ±

APIStarã¯Tom Christieã«ã‚ˆã‚Šé–‹ç™ºã•ã‚Œã¾ã—ãŸã€‚ä»¥ä¸‹ã®é–‹ç™ºè€…ã§ã‚‚ã‚ã‚Šã¾ã™:

* Django REST Framework
* Starlette (**FastAPI**ã®ãƒ™ãƒ¼ã‚¹ã«ãªã£ã¦ã„ã¾ã™)
* Uvicorn (Starletteã‚„**FastAPI**ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™)

///

/// check | **FastAPI**ã¸ä¸ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

å­˜åœ¨ãã®ã‚‚ã®ã€‚

è¤‡æ•°ã®æ©Ÿèƒ½ (ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–) ã‚’åŒã˜Pythonå‹ã§å®£è¨€ã—ã€åŒæ™‚ã«å„ªã‚ŒãŸã‚¨ãƒ‡ã‚£ã‚¿ã®è£œåŠ©ã‚’æä¾›ã™ã‚‹ã¨ã„ã†ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€ç§ã«ã¨ã£ã¦ç´ æ™´ã‚‰ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã§ã—ãŸã€‚

ãã—ã¦ã€é•·ã„é–“åŒã˜ã‚ˆã†ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æ¢ã—ã€å¤šãã®ç•°ãªã‚‹ä»£æ›¿ãƒ„ãƒ¼ãƒ«ã‚’ãƒ†ã‚¹ãƒˆã—ãŸçµæœã€APIStarãŒæœ€è‰¯ã®é¸æŠè‚¢ã¨ãªã‚Šã¾ã—ãŸã€‚

ãã®å¾Œã€APIStarã¯ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦å­˜åœ¨ã—ãªããªã‚Šã€StarletteãŒä½œã‚‰ã‚Œã€ãã®ã‚ˆã†ãªã‚·ã‚¹ãƒ†ãƒ ã®ãŸã‚ã®æ–°ã—ãã‚ˆã‚Šè‰¯ã„åŸºç›¤ã¨ãªã‚Šã¾ã—ãŸã€‚ã“ã‚ŒãŒ**FastAPI**ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®æœ€çµ‚çš„ãªã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã—ãŸã€‚

ç§ã¯ã€ã“ã‚Œã¾ã§ã®ãƒ„ãƒ¼ãƒ«ã‹ã‚‰å­¦ã‚“ã ã“ã¨ã‚’ã‚‚ã¨ã«ã€æ©Ÿèƒ½ã‚„å‹ã‚·ã‚¹ãƒ†ãƒ ãªã©ã®éƒ¨åˆ†ã‚’æ”¹å–„ãƒ»æ‹¡å……ã—ãªãŒã‚‰ã€**FastAPI**ã‚’APIStarã®ã€Œç²¾ç¥çš„ãªå¾Œç¶™è€…ã€ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚

///

## **FastAPI**ãŒåˆ©ç”¨ã—ã¦ã„ã‚‹ã‚‚ã®

### <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a>

Pydanticã¯ã€Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’å…ƒã«ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€ (JSON Schemaã‚’ä½¿ç”¨ã—ãŸ) ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å®šç¾©ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

ãã®ãŸã‚ã€éå¸¸ã«ç›´æ„Ÿçš„ã§ã™ã€‚

Marshmallowã«åŒ¹æ•µã—ã¾ã™ãŒã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯Marshmallowã‚ˆã‚Šã‚‚é«˜é€Ÿã§ã™ã€‚ã¾ãŸã€Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’å…ƒã«ã—ã¦ã„ã‚‹ã®ã§ã€ã‚¨ãƒ‡ã‚£ã‚¿ã®è£œåŠ©ãŒç´ æ™´ã‚‰ã—ã„ã§ã™ã€‚

/// check | **FastAPI**ã§ã®ä½¿ç”¨ç”¨é€”

ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‡ãƒ¼ã‚¿ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€è‡ªå‹•çš„ãªãƒ¢ãƒ‡ãƒ«ã® (JSON Schemaã«åŸºã¥ã„ãŸ) ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã®å…¨ã¦ã‚’æ‰±ãˆã¾ã™ã€‚

**FastAPI**ã¯JSON Schemaã®ãƒ‡ãƒ¼ã‚¿ã‚’OpenAPIã«åˆ©ç”¨ã—ã¾ã™ã€‚

///

### <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a>

Starletteã¯ã€è»½é‡ãª<abbr title="éåŒæœŸPython webã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®æ–°æ¨™æº–">ASGI</abbr>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯/ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã€é«˜æ€§èƒ½ãªéåŒæœŸã‚µãƒ¼ãƒ“ã‚¹ã®æ§‹ç¯‰ã«æœ€é©ã§ã™ã€‚

éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ã§ã™ã€‚ç°¡å˜ã«æ‹¡å¼µã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒã£ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚

* éå¸¸ã«æ„Ÿå‹•çš„ãªæ€§èƒ½ã€‚
* WebSocketã®ã‚µãƒãƒ¼ãƒˆã€‚
* GraphQLã®ã‚µãƒãƒ¼ãƒˆã€‚
* ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã€‚
* èµ·å‹•ãŠã‚ˆã³ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã€‚
* requestsã«åŸºã¥ã„ã¦æ§‹ç¯‰ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€‚
* CORSã€GZipã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”ã€‚
* ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã‚¯ãƒƒã‚­ãƒ¼ã®ã‚µãƒãƒ¼ãƒˆã€‚
* 100%ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã€‚
* 100%ã®å‹æ³¨é‡ˆä»˜ãã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã€‚
* ãƒãƒ¼ãƒ‰ãªä¾å­˜é–¢ä¿‚ã¯ãªã„ã€‚

Starletteã¯ã€ç¾åœ¨ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹Pythonãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸­ã§æœ€ã‚‚é€Ÿã„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ãªãã‚µãƒ¼ãƒãƒ¼ã§ã‚ã‚‹Uvicornã ã‘ãŒä¸Šå›ã£ã¦ã„ã¾ã™ã€‚

Starletteã¯åŸºæœ¬çš„ãªWebãƒã‚¤ã‚¯ãƒ­ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®æ©Ÿèƒ½ã‚’ã™ã¹ã¦æä¾›ã—ã¾ã™ã€‚

ã—ã‹ã—ã€è‡ªå‹•çš„ãªãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã¯æä¾›ã—ã¦ã„ã¾ã›ã‚“ã€‚

ã“ã‚Œã¯ **FastAPI** ãŒè¿½åŠ ã™ã‚‹ä¸»ãªæ©Ÿèƒ½ã®ä¸€ã¤ã§ã€ã™ã¹ã¦ã®æ©Ÿèƒ½ã¯ Pythonã®å‹ãƒ’ãƒ³ãƒˆã«åŸºã¥ã„ã¦ã„ã¾ã™ (Pydanticã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™) ã€‚ã“ã‚Œã«åŠ ãˆã¦ã€ä¾å­˜æ€§æ³¨å…¥ã®ä»•çµ„ã¿ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€OpenAPIã‚¹ã‚­ãƒ¼ãƒç”Ÿæˆãªã©ãŒã‚ã‚Šã¾ã™ã€‚

/// note | æŠ€è¡“è©³ç´°

ASGIã¯Djangoã®ã‚³ã‚¢ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã«ã‚ˆã‚Šé–‹ç™ºã•ã‚ŒãŸæ–°ã—ã„ã€Œæ¨™æº–ã€ã§ã™ã€‚ã¾ã ã€ŒPythonã®æ¨™æº– (PEP) ã€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ç¾åœ¨ãã†ãªã‚‹ã‚ˆã†ã«é€²ã‚ã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ãªãŒã‚‰ã€ã„ãã¤ã‹ã®ãƒ„ãƒ¼ãƒ«ã«ãŠã„ã¦ã™ã§ã«ã€Œæ¨™æº–ã€ã¨ã—ã¦åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ã“ã¨ã¯äº’æ›æ€§ã‚’å¤§ããæ”¹å–„ã™ã‚‹ã‚‚ã®ã§ã€Uvicornã‹ã‚‰ä»–ã®ASGIã‚µãƒ¼ãƒãƒ¼ (Daphneã‚„Hypercorn) ã«ä¹—ã‚Šæ›ãˆã‚‹ã“ã¨ãŒã§ããŸã‚Šã€ã‚ãªãŸãŒ`python-socketio`ã®ã‚ˆã†ãªASGIäº’æ›ã®ãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

///

/// check | **FastAPI**ã§ã®ä½¿ç”¨ç”¨é€”

webã«é–¢ã™ã‚‹ã‚³ã‚¢ãªéƒ¨åˆ†ã‚’å…¨ã¦æ‰±ã„ã¾ã™ã€‚ãã®ä¸Šã«æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚

`FastAPI`ã‚¯ãƒ©ã‚¹ãã®ã‚‚ã®ã¯ã€`Starlette`ã‚¯ãƒ©ã‚¹ã‚’ç›´æ¥ç¶™æ‰¿ã—ã¦ã„ã¾ã™ã€‚

åŸºæœ¬çš„ã«ã¯Starletteã®å¼·åŒ–ç‰ˆã§ã‚ã‚‹ãŸã‚ã€Starletteã§å¯èƒ½ãªã“ã¨ã¯**FastAPI**ã§ç›´æ¥å¯èƒ½ã§ã™ã€‚

///

### <a href="https://www.uvicorn.org/" class="external-link" target="_blank">Uvicorn</a>

Uvicornã¯éå¸¸ã«é«˜é€ŸãªASGIã‚µãƒ¼ãƒãƒ¼ã§ã€uvloopã¨httptoolsã«ã‚ˆã‚Šæ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

ã‚¦ã‚§ãƒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ãªãã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚ä¾‹ãˆã°ã€ãƒ‘ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ãƒ„ãƒ¼ãƒ«ã¯æä¾›ã—ã¦ã„ã¾ã›ã‚“ã€‚ãã‚Œã‚‰ã¯ã€Starlette (ã‚„**FastAPI**) ã®ã‚ˆã†ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒãã®ä¸Šã§æä¾›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

Starletteã‚„**FastAPI**ã®ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

/// check | **FastAPI**ãŒæ¨å¥¨ã™ã‚‹ç†ç”±

**FastAPI**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãƒ¡ã‚¤ãƒ³ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã§ã‚ã‚‹ç‚¹ã€‚

Gunicornã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€éåŒæœŸã§ãƒãƒ«ãƒãƒ—ãƒ­ã‚»ã‚¹ãªã‚µãƒ¼ãƒãƒ¼ã‚’æŒã¤ã“ã¨ãŒãã¾ã™ã€‚

è©³ç´°ã¯[ãƒ‡ãƒ—ãƒ­ã‚¤](deployment/index.md){.internal-link target=_blank}ã®é …ç›®ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚

///

## ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ ã¨ ã‚¹ãƒ”ãƒ¼ãƒ‰

Uvicornã€Starletteã€FastAPIã®é•ã„ã‚’ç†è§£ã€æ¯”è¼ƒã€ç¢ºèªã™ã‚‹ã«ã¯ã€[ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯](benchmarks.md){.internal-link target=_blank}ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚


================================================
File: /docs/ja/docs/async.md
================================================
# ä¸¦è¡Œå‡¦ç†ã¨ async / await

*path operation é–¢æ•°*ã®ãŸã‚ã® `async def` ã«é–¢ã™ã‚‹è©³ç´°ã¨éåŒæœŸ (asynchronous) ã‚³ãƒ¼ãƒ‰ã€ä¸¦è¡Œå‡¦ç† (Concurrency)ã€ãã—ã¦ã€ä¸¦åˆ—å‡¦ç† (Parallelism) ã®èƒŒæ™¯ã«ã¤ã„ã¦ã€‚

## æ€¥ã„ã§ã„ã¾ã™ã‹ï¼Ÿ

<abbr title="too long; didn't read (é•·ã™ãã¦èª­ã‚ãªã„äººã®ãŸã‚ã®è¦ç´„ã¨ã„ã†æ„å‘³ã®ã‚¹ãƒ©ãƒ³ã‚°)"><strong>TL;DR:</strong></abbr>

æ¬¡ã®ã‚ˆã†ãªã€`await` ã‚’ä½¿ç”¨ã—ã¦å‘¼ã³å‡ºã™ã¹ãã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ:

```Python
results = await some_library()
```

ä»¥ä¸‹ã®æ§˜ã« `async def` ã‚’ä½¿ç”¨ã—ã¦*path operation é–¢æ•°*ã‚’å®£è¨€ã—ã¾ã™ã€‚

```Python hl_lines="2"
@app.get('/')
async def read_results():
    results = await some_library()
    return results
```

/// note | å‚™è€ƒ

`async def` ã‚’ä½¿ç”¨ã—ã¦ä½œæˆã•ã‚ŒãŸé–¢æ•°ã®å†…éƒ¨ã§ã—ã‹ `await` ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

///

---

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€APIã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãªã©ã¨é€šä¿¡ã—ã€`await` ã®ä½¿ç”¨ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (ç¾åœ¨ã®ã»ã¨ã‚“ã©ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å½“ã¦ã¯ã¾ã‚Šã¾ã™) ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€æ¬¡ã®æ§˜ã«ã€å˜ã« `def` ã‚’ä½¿ç”¨ã—ã¦é€šå¸¸é€šã‚Š *path operation é–¢æ•°* ã‚’å®£è¨€ã—ã¦ãã ã•ã„:

```Python hl_lines="2"
@app.get('/')
def results():
    results = some_library()
    return results
```

---

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒ (ã©ã†ã„ã†ã‚ã‘ã‹) ä»–ã®ä½•ã¨ã‚‚é€šä¿¡ã›ãšã€å¿œç­”ã‚’å¾…ã¤å¿…è¦ãŒãªã„å ´åˆã¯ã€`async def` ã‚’ä½¿ç”¨ã—ã¦ä¸‹ã•ã„ã€‚

---

ã‚ˆãåˆ†ã‹ã‚‰ãªã„å ´åˆã¯ã€é€šå¸¸ã® `def` ã‚’ä½¿ç”¨ã—ã¦ä¸‹ã•ã„ã€‚

---

**å‚™è€ƒ**: *path operation é–¢æ•°*ã«å¿…è¦ãªã ã‘ `def` ã¨ `async def` ã‚’æ··åœ¨ã•ã›ã€ãã‚Œãã‚Œã«æœ€é©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦å®šç¾©ã§ãã¾ã™ã€‚ãã‚Œã«å¿œã˜ã¦FastAPIã¯æ­£ã—ã„å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚

ã¨ã«ã‹ãã€ä¸Šè¨˜ã®ã„ãšã‚Œã®å ´åˆã§ã‚‚FastAPIã¯éåŒæœŸã§å‹•ä½œã—ã€éå¸¸ã«é«˜é€Ÿã§ã™ã€‚

ã—ã‹ã—ã€ä¸Šè¨˜ã®ã‚¹ãƒ†ãƒƒãƒ—ã«å¾“ã†ã“ã¨ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–ã‚’è¡Œãˆã¾ã™ã€‚

## æŠ€è¡“è©³ç´°

ç¾ä»£ç‰ˆã®Pythonã¯ã€Œ**éåŒæœŸã‚³ãƒ¼ãƒ‰**ã€ã‚’ã€ã€Œ**ã‚³ãƒ«ãƒ¼ãƒãƒ³**ã€ã¨ç§°ã•ã‚Œã‚‹ã‚‚ã®ã‚’åˆ©ç”¨ã—ã¦ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ **`async` ã¨ `await`** æ§‹æ–‡ã‚’ç”¨ã„ã¾ã™ã€‚

æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€ãƒ•ãƒ¬ãƒ¼ã‚ºå†…ã®ãƒ‘ãƒ¼ãƒ„ã‚’é †ã«è¦‹ã¦ã„ãã¾ã—ã‚‡ã†:

* **éåŒæœŸã‚³ãƒ¼ãƒ‰**
* **`async` ã¨ `await`**
* **ã‚³ãƒ«ãƒ¼ãƒãƒ³**

## éåŒæœŸã‚³ãƒ¼ãƒ‰

éåŒæœŸã‚³ãƒ¼ãƒ‰ã¨ã¯ã€è¨€èªğŸ’¬ãŒã‚³ãƒ¼ãƒ‰å†…ã®ã©ã“ã‹ã§ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ğŸ¤–ã« *ä»–ã®ä½•ã‹* ãŒã©ã“ã‹åˆ¥ã®ç®‡æ‰€ã§çµ‚äº†ã™ã‚‹ã®ã‚’å¾…ã¤ã‚ˆã†ã«ä¼ãˆã‚‹æ‰‹æ®µã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚*ä»–ã®ä½•ã‹* ã¯ã€Œé…ã„ãƒ•ã‚¡ã‚¤ãƒ«ğŸ“ã€ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã—ã‚‡ã†.

ã—ãŸãŒã£ã¦ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¯ã€Œé…ã„ãƒ•ã‚¡ã‚¤ãƒ«ğŸ“ã€ãŒçµ‚äº†ã™ã‚‹ã¾ã§ã€ä»–ã®å‡¦ç†ãŒã§ãã¾ã™ã€‚

ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ğŸ¤–ã¯å†ã³å¾…æ©Ÿã™ã‚‹æ©Ÿä¼šãŒã‚ã‚‹ã¨ãã‚„ã€ãã®æ™‚ç‚¹ã§è¡Œã£ã¦ã„ãŸã™ã¹ã¦ã®ä½œæ¥­ãŒå®Œäº†ã™ã‚‹ãŸã³ã«æˆ»ã£ã¦ãã¾ã™ã€‚ãã—ã¦ã€å¿…è¦ãªå‡¦ç†ã‚’ã—ãªãŒã‚‰ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ğŸ¤–ãŒå¾…ã£ã¦ã„ãŸå‡¦ç†ã®ã©ã‚Œã‹ãŒçµ‚ã‚ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ç¢ºèªã—ã¾ã™ã€‚

æ¬¡ã«ã€ãã‚ŒğŸ¤–ãŒæœ€åˆã®ã‚¿ã‚¹ã‚¯ (è¦ã™ã‚‹ã«ã€å…ˆç¨‹ã®ã€Œé…ã„ãƒ•ã‚¡ã‚¤ãƒ«ğŸ“ã€)ã‚’çµ‚ã‚ã‚‰ã›ã¦ã€ãã®ã‚¿ã‚¹ã‚¯ã®çµæœã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹å‡¦ç†ã‚’ç¶šã‘ã¾ã™ã€‚

ã“ã®ã€Œä»–ã®ä½•ã‹ã‚’å¾…ã¤ã€ã¨ã¯ã€é€šå¸¸ä»¥ä¸‹ã®æ§˜ãªã‚‚ã®ã‚’å¾…ã¤ã‚ˆã†ãª (ãƒ—ãƒ­ã‚»ãƒƒã‚µã¨RAMãƒ¡ãƒ¢ãƒªã®é€Ÿåº¦ã«æ¯”ã¹ã¦) ç›¸å¯¾çš„ã«ã€Œé…ã„ã€<abbr title="ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã¨ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ">I/O</abbr> æ“ä½œã‚’æŒ‡ã—ã¾ã™:

* ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿
* ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå—ä¿¡ã™ã‚‹ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰é€ä¿¡ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿
* ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦èª­ã¿å–ã‚‰ã‚Œã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«æ¸¡ã•ã‚Œã‚‹ãƒ‡ã‚£ã‚¹ã‚¯å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹
* ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚·ã‚¹ãƒ†ãƒ ã«æ¸¡ã—ã¦ã€ãƒ‡ã‚£ã‚¹ã‚¯ã«æ›¸ãè¾¼ã‚€å†…å®¹
* ãƒªãƒ¢ãƒ¼ãƒˆAPIæ“ä½œ
* ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã®å®Œäº†
* ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªãŒçµæœã‚’è¿”ã™ã“ã¨
* ãªã©ã€‚

å®Ÿè¡Œæ™‚é–“ã®ã»ã¨ã‚“ã©ãŒ<abbr title="ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã¨ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ">I/O</abbr> æ“ä½œã®å¾…ã¡æ™‚é–“ãŒå ã‚ã‚‹ãŸã‚ã€ã“ã®ã‚ˆã†ãªæ“ä½œã‚’ã€ŒI/O ãƒã‚¦ãƒ³ãƒ‰ã€æ“ä½œã¨è¨€ã„ã¾ã™ã€‚

ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã“ã®ã‚ˆã†ãªé…ã„ã‚¿ã‚¹ã‚¯ã¨ã€ŒåŒæœŸ (ã‚¿ã‚¹ã‚¯ã®çµæœã‚’å–å¾—ã—ã¦ä½œæ¥­ã‚’ç¶šè¡Œã™ã‚‹ãŸã‚ã«ã€ä½•ã‚‚ã›ãšã«ã€ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã™ã‚‹ç¬é–“ã‚’æ­£ç¢ºã«å¾…ã¤)ã€ã™ã‚‹å¿…è¦ãŒãªã„ãŸã‚ã€ã€ŒéåŒæœŸã€ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

ãã®ä»£ã‚ã‚Šã«ã€ã€ŒéåŒæœŸã€ã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ã„ã£ãŸã‚“çµ‚äº†ã™ã‚‹ã¨ã€ã‚¿ã‚¹ã‚¯ã¯ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒæ—¢ã«é–‹å§‹ã—ãŸå‡¦ç†ãŒã™ã¹ã¦å®Œäº†ã™ã‚‹ã®ã‚’ã»ã‚“ã®å°‘ã— (æ•°ãƒã‚¤ã‚¯ãƒ­ç§’) å¾…ã£ã¦ã€çµæœã‚’å—ã‘å–ã‚Šã«æˆ»ã£ã¦ãã¾ã™ã€‚ãã—ã¦ã€å‡¦ç†ã‚’ç¶™ç¶šã—ã¾ã™ã€‚

ã€ŒåŒæœŸã€ã®å ´åˆ (ã€ŒéåŒæœŸã€ã¨ã¯ç•°ãªã‚Š)ã€ã€Œã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã€ã¨ã„ã†ç”¨èªã‚‚ã‚ˆãä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã™ã¹ã¦ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ (å¾…æ©ŸãŒä¼´ã†å ´åˆã§ã‚‚åˆ¥ã®ã‚¿ã‚¹ã‚¯ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãªã) é †ç•ªã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã§ã™ã€‚

### ä¸¦è¡Œå‡¦ç†ã¨ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼

ä¸Šè¨˜ã®**éåŒæœŸ**ã‚³ãƒ¼ãƒ‰ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€**ã€Œä¸¦è¡Œå‡¦ç†ã€**ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ **ã€Œä¸¦åˆ—å‡¦ç†ã€**ã¨ã¯ç•°ãªã‚Šã¾ã™ã€‚

**ä¸¦è¡Œå‡¦ç†**ã¨**ä¸¦åˆ—å‡¦ç†**ã¯ã©ã¡ã‚‰ã‚‚ã€Œå¤šã‹ã‚Œå°‘ãªã‹ã‚ŒåŒæ™‚ã«ç™ºç”Ÿã™ã‚‹ã•ã¾ã–ã¾ãªã“ã¨ã€ã«é–¢é€£ã—ã¦ã„ã¾ã™ã€‚

ãŸã ã—ã€*ä¸¦è¡Œå‡¦ç†*ã¨*ä¸¦åˆ—å‡¦ç†*ã®è©³ç´°ã¯ã¾ã£ãŸãç•°ãªã‚Šã¾ã™ã€‚

é•ã„ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã«é–¢ã™ã‚‹æ¬¡ã®ç‰©èªã‚’æƒ³åƒã—ã¦ã¿ã¦ãã ã•ã„:

### ä¸¦è¡Œãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼

ãƒ•ã‚¡ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰ğŸ”ã‚’é£Ÿã¹ã‚ˆã†ã¨ã€å¥½ããªäººğŸ˜ã¨ãƒ¬ã‚¸ã«ä¸¦ã‚“ã§ãŠã‚Šã€ãƒ¬ã‚¸ä¿‚ğŸ’ãŒã‚ãªãŸã®å‰ã«ã„ã‚‹äººé”ã®æ³¨æ–‡ã‚’å—ã‘ã¤ã‘ã¦ã„ã¾ã™ã€‚

ãã‚Œã‹ã‚‰ã‚ãªãŸã®ç•ªã«ãªã‚Šã€å¥½ããªäººğŸ˜ã¨è‡ªåˆ†ã®ãŸã‚ã«ã€2ã¤ã®éå¸¸ã«è±ªè¯ãªãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’æ³¨æ–‡ã—ã¾ã™ã€‚

æ–™é‡‘ã‚’æ”¯æ‰•ã„ã¾ã™ğŸ’¸ã€‚

ãƒ¬ã‚¸ä¿‚ğŸ’ã¯ã‚­ãƒƒãƒãƒ³ã®ç”·ğŸ‘¨â€ğŸ³ã«å‘ã‹ã£ã¦ã€ã‚ãªãŸã®ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’æº–å‚™ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã¨ä¼ãˆã‚‹ãŸã‚ã«ä½•ã‹è¨€ã„ã¾ã—ãŸ (å½¼ã¯ç¾åœ¨ã€å‰ã®ãŠå®¢ã•ã‚“ã®å•†å“ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ãŒ)ã€‚

ãƒ¬ã‚¸ä¿‚ğŸ’ã¯ã‚ãªãŸã«ç•ªå·æœ­ã‚’æ¸¡ã—ã¾ã™ã€‚

å¾…ã£ã¦ã„ã‚‹é–“ã€å¥½ããªäººğŸ˜ã¨ä¸€ç·’ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’é¸ã‚“ã§åº§ã‚Šã€å¥½ããªäººğŸ˜ã¨é•·ã„é–“è©±ã‚’ã—ã¾ã™ (æ³¨æ–‡ã—ãŸãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã¯éå¸¸ã«è±ªè¯ã§ã€æº–å‚™ã«å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§âœ¨ğŸ”âœ¨)ã€‚

ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’å¾…ã¡ãªãŒã‚‰å¥½ããªäººğŸ˜ã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«åº§ã£ã¦ã„ã‚‹é–“ã€ã‚ãªãŸã®å¥½ããªäººãŒãªã‚“ã¦ç´ æ™´ã‚‰ã—ãã€ã‹ã‚ã„ãã¦é ­ãŒã„ã„ã‚“ã ã¨âœ¨ğŸ˜âœ¨æƒšã‚Œæƒšã‚Œã—ãªãŒã‚‰æ™‚é–“ã‚’è²»ã‚„ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

å¥½ããªäººğŸ˜ã¨è©±ã—ãªãŒã‚‰å¾…ã£ã¦ã„ã‚‹é–“ã€ã¨ãã©ãã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ç•ªå·ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã€è‡ªåˆ†ã®ç•ªã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

ãã®å¾Œã€ã¤ã„ã«ã‚ãªãŸã®ç•ªã«ãªã‚Šã¾ã—ãŸã€‚ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã«è¡Œãã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’æ‰‹ã«å…¥ã‚Œã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã«æˆ»ã‚Šã¾ã™ã€‚

ã‚ãªãŸã¨ã‚ãªãŸã®å¥½ããªäººğŸ˜ã¯ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’é£Ÿã¹ã¦ã€æ¥½ã—ã„æ™‚é–“ã‚’éã”ã—ã¾ã™âœ¨ã€‚

---

ä¸Šè¨˜ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã§ã€ã‚ãªãŸãŒã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ğŸ¤–ã ã¨æƒ³åƒã—ã¦ã¿ã¦ãã ã•ã„ã€‚

åˆ—ã«ã„ã‚‹é–“ã€ã‚ãªãŸã¯ã‚¢ã‚¤ãƒ‰ãƒ«çŠ¶æ…‹ã§ã™ğŸ˜´ã€‚ä½•ã‚‚ã€Œç”Ÿç”£çš„ã€ãªã“ã¨ã‚’ã›ãšã€ãŸã è‡ªåˆ†ã®ç•ªã‚’å¾…ã£ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ãƒ¬ã‚¸ä¿‚ğŸ’ã¯æ³¨æ–‡ã‚’å—ã‘å–ã‚‹ã ã‘ãªã®ã§ (å•†å“ã®æº–å‚™ã‚’ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„)ã€åˆ—ã¯é«˜é€Ÿã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ä½•ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

ãã‚Œã‹ã‚‰ã€ã‚ãªãŸã®ç•ªã«ãªã£ãŸã‚‰ã€å®Ÿã«ã€Œç”Ÿç”£çš„ãªã€ä½œæ¥­ã‚’è¡Œã„ã¾ã™ğŸ¤“ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ç¢ºèªã—ã€æ¬²ã—ã„ã‚‚ã®ã‚’æ±ºã‚ã€å¥½ããªäººğŸ˜ã®æ¬²ã—ã„ã‚‚ã®ã‚’èãã€æ–™é‡‘ã‚’æ”¯æ‰•ã„ğŸ’¸ã€ç¾é‡‘ã¾ãŸã¯ã‚«ãƒ¼ãƒ‰ã‚’æ­£ã—ãæ¸¡ã—ãŸã‹ç¢ºèªã—ã€æ­£ã—ãæ¸…ç®—ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã—ã€æ³¨æ–‡ãŒæ­£ã—ãé€šã£ã¦ã„ã‚‹ã‹ãªã©ã‚’ç¢ºèªã—ã¾ã™ã€‚

ã—ã‹ã—ã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’ã¾ã ã§ãã¦ã„ãªã„ã®ã§ã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã®æº–å‚™ãŒã§ãã‚‹ã¾ã§å¾…æ©ŸğŸ•™ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ãƒ¬ã‚¸ä¿‚ğŸ’ã¨ã®ä½œæ¥­ã¯ã€Œä¸€æ™‚åœæ­¢â¸ã€ã«ãªã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‹ã‚‰é›¢ã‚Œã¦ã€ç•ªå·æœ­ã‚’æŒã£ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã«åº§ã£ã¦ã„ã‚‹ã¨ãã¯ã€æ³¨æ„ã‚’å¥½ããªäººğŸ˜ã«åˆ‡ã‚Šæ›¿ãˆã¦ğŸ”€ã€ãã®ä¸Šã§ã€Œä»•äº‹â¯ğŸ¤“ã€ã‚’è¡Œãªãˆã¾ã™ã€‚ãã®å¾Œã€å¥½ããªäººğŸ˜ã¨ã„ã¡ã‚ƒã¤ãã‹ã®ã‚ˆã†ãªã€éå¸¸ã«ã€Œç”Ÿç”£çš„ãªğŸ¤“ã€ã“ã¨ã‚’å†ã³è¡Œã„ã¾ã™ã€‚

æ¬¡ã«ã€ãƒ¬ã‚¸ä¿‚ğŸ’ã¯ã€ã€Œãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã®æº–å‚™ãŒã§ãã¾ã—ãŸğŸ”ã€ã¨è¨€ã£ã¦ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã«ç•ªå·ã‚’è¡¨ç¤ºã—ã¾ã™ãŒã€è¡¨ç¤ºç•ªå·ãŒã‚ãªãŸã®ç•ªå·ã«å¤‰ã‚ã£ã¦ã‚‚ã€ã™ãã«ç‹‚ã£ãŸã‚ˆã†ã«é£›ã‚“ã§è¡Œãã‚ˆã†ãªã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚ãªãŸã¯è‡ªåˆ†ã®ç•ªå·æœ­ã‚’æŒã£ã¦ã„ã£ã¦ã€ä»–ã®äººã‚‚è‡ªåˆ†ã®ç•ªå·æœ­ãŒã‚ã‚‹ã®ã§ã€ã‚ãªãŸã®ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’ç›—ã‚€äººãŒã„ãªã„ã“ã¨ã¯çŸ¥ã£ã¦ã„ã¾ã™ã€‚

ãªã®ã§ã€ã‚ãªãŸã¯å¥½ããªäººğŸ˜ãŒè©±ã—çµ‚ãˆã‚‹ã®ã‚’å¾…ã£ã¦ (ç¾åœ¨ã®ä»•äº‹â¯ / å‡¦ç†ä¸­ã®ã‚¿ã‚¹ã‚¯ã‚’çµ‚äº†ã—ã¾ã™ğŸ¤“)ã€å„ªã—ãå¾®ç¬‘ã‚“ã§ã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚’è²°ã£ã¦ãã‚‹ã­ã¨è¨€ã„ã¾ã™â¸ã€‚

æ¬¡ã«ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¸ã€ã„ã¾ã‹ã‚‰å®Œäº†ã™ã‚‹æœ€åˆã®ã‚¿ã‚¹ã‚¯â¯ã¸å‘ã‹ã„ã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’å—ã‘å–ã‚Šã€æ„Ÿè¬ã®æ„ã‚’è¡¨ã—ã¦ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã«æŒã£ã¦ã„ãã¾ã™ã€‚ã“ã‚Œã§ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¨ã®ã‚„ã‚Šå–ã‚Šã®ã‚¹ãƒ†ãƒƒãƒ—/ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸâ¹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã€Œãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚’é£Ÿã¹ã‚‹ğŸ”€â¯ã€ã¨ã„ã†æ–°ã—ã„ã‚¿ã‚¹ã‚¯ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ã—ã‹ã—ã€å‰ã®ã€Œãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚’å–å¾—ã™ã‚‹ã€ã¨ã„ã†ã‚¿ã‚¹ã‚¯ã¯çµ‚äº†ã—ã¾ã—ãŸâ¹ã€‚

### ä¸¦åˆ—ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼

ã“ã‚Œã‚‰ãŒã€Œä¸¦è¡Œãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã€ã§ã¯ãªãã€ã€Œä¸¦åˆ—ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã€ã§ã‚ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚

ã‚ãªãŸã¯å¥½ããªäººğŸ˜ã¨ä¸¦åˆ—ãƒ•ã‚¡ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰ğŸ”ã‚’è²·ãŠã†ã¨ã—ã¦ã„ã¾ã™ã€‚

åˆ—ã«ä¸¦ã‚“ã§ã„ã¾ã™ãŒã€ä½•äººã‹ã®æ–™ç†äººå…¼ã€ãƒ¬ã‚¸ä¿‚ (8äººã¨ã—ã¾ã—ã‚‡ã†) ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ãŒã‚ãªãŸã®å‰ã«ã„ã‚‹äººé”ã®æ³¨æ–‡ã‚’å—ã‘ã¤ã‘ã¦ã„ã¾ã™ã€‚

8äººã®ãƒ¬ã‚¸ä¿‚ãŒãã‚Œãã‚Œè‡ªåˆ†ã§æ³¨æ–‡ã‚’å—ã‘ã‚‹ã‚„å¦ã‚„ã€æ¬¡ã®æ³¨æ–‡ã‚’å—ã‘ã‚‹å‰ã«ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚’æº–å‚™ã™ã‚‹ã®ã§ã€ã‚ãªãŸã®å‰ã®äººé”ã¯ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’é›¢ã‚Œãšã«ã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ãŒã§ãã‚‹ã®ã‚’å¾…ã£ã¦ã„ã¾ã™ğŸ•™ã€‚

ãã‚Œã‹ã‚‰ã„ã‚ˆã„ã‚ˆã‚ãªãŸã®ç•ªã«ãªã‚Šã€å¥½ããªäººğŸ˜ã¨è‡ªåˆ†ã®ãŸã‚ã«ã€2ã¤ã®éå¸¸ã«è±ªè¯ãªãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’æ³¨æ–‡ã—ã¾ã™ã€‚

æ–™é‡‘ã‚’æ”¯æ‰•ã„ã¾ã™ğŸ’¸ã€‚

ãƒ¬ã‚¸ä¿‚ã¯ã‚­ãƒƒãƒãƒ³ã«è¡Œãã¾ã™ğŸ‘¨â€ğŸ³ã€‚

ã‚ãªãŸã¯ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å‰ã«ç«‹ã£ã¦å¾…ã¡ã¾ã™ğŸ•™ã€‚ç•ªå·æœ­ãŒãªã„ã®ã§èª°ã‚‚ã‚ãªãŸã‚ˆã‚Šã‚‚å…ˆã«ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’å–ã‚‰ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã‚ãªãŸã¨å¥½ããªäººğŸ˜ã¯å¿™ã—ã„ã®ã§ã€èª°ã‚‚ã‚ãªãŸã®å‰ã«æ¥ã•ã›ã¾ã›ã‚“ã—ã€ã‚ãªãŸã®ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãŒåˆ°ç€ã—ãŸã¨ãğŸ•™ã«èª°ã«ã‚‚å–ã‚‹ã“ã¨ã‚’è¨±ã—ã¾ã›ã‚“ã€‚ã‚ãªãŸã¯å¥½ããªäººã«æ³¨æ„ã‚’æ‰•ãˆã¾ã›ã‚“ğŸ˜ã€‚

ã“ã‚Œã¯ã€ŒåŒæœŸã€ä½œæ¥­ã§ã‚ã‚Šã€ãƒ¬ã‚¸ä¿‚/æ–™ç†äººğŸ‘¨â€ğŸ³ã¨ã€ŒåŒæœŸã€ã—ã¾ã™ã€‚ãƒ¬ã‚¸ä¿‚/æ–™ç†äººğŸ‘¨â€ğŸ³ãŒãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’å®Œæˆã•ã›ã¦ã‚ãªãŸã«æ¸¡ã™ã¾ã§å¾…ã¤ğŸ•™å¿…è¦ãŒã‚ã‚Šã€ã¡ã‚‡ã†ã©ãã®å®Œæˆã®ç¬é–“ã«ãã“ã«ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã†ã§ãªã‘ã‚Œã°ã€ä»–ã®èª°ã‹ã«å–ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ãã®å¾Œã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å‰ã§é•·ã„æ™‚é–“å¾…ã£ã¦ã‹ã‚‰ğŸ•™ã€ã¤ã„ã«ãƒ¬ã‚¸ä¿‚/æ–™ç†äººğŸ‘¨â€ğŸ³ãŒãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’æ¸¡ã—ã«æˆ»ã£ã¦ãã¾ã™ã€‚

ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã‚’å–ã‚Šã€å¥½ããªäººğŸ˜ã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¡Œãã¾ã™ã€‚

ãŸã é£Ÿã¹ã‚‹ã ã‘ã€ãã‚Œã§ãŠã—ã¾ã„ã§ã™ã€‚ğŸ”â¹ã€‚

ã»ã¨ã‚“ã©ã®æ™‚é–“ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å‰ã§å¾…ã¤ã®ã«è²»ã‚„ã•ã‚Œã¦ã„ãŸã®ã§ğŸ•™ã€ã‚ã¾ã‚Šè©±ã—ãŸã‚Šã„ã¡ã‚ƒã¤ãã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸğŸ˜ã€‚

---

ã“ã®ä¸¦åˆ—ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã®ã‚·ãƒŠãƒªã‚ªã§ã¯ã€ã‚ãªãŸã¯2ã¤ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’å‚™ãˆãŸã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ğŸ¤– (ã‚ãªãŸã¨ã‚ãªãŸã®å¥½ããªäººğŸ˜) ã§ã‚ã‚Šã€ä¸¡æ–¹ã¨ã‚‚å¾…æ©ŸğŸ•™ã—ã¦ã„ã¦ã€å½¼ã‚‰ã¯ã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã§å¾…æ©ŸğŸ•™ã€ã™ã‚‹ã“ã¨ã«å°‚å¿µã—ã¦ã„ã¾ã™â¯ã€‚

ãƒ•ã‚¡ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰åº—ã«ã¯8ã¤ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µ (ãƒ¬ã‚¸ä¿‚/æ–™ç†äºº) ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ãŒã‚ã‚Šã¾ã™ã€‚ä¸€æ–¹ã€ä¸¦è¡Œãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼åº—ã«ã¯2äºº (ãƒ¬ã‚¸ä¿‚ã¨æ–™ç†äºº) ğŸ’ğŸ‘¨â€ğŸ³ã—ã‹ã„ãªã‹ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã—ã‹ã—ã€ãã‚Œã§ã‚‚ã€æœ€çµ‚çš„ãªä½“é¨“ã¯æœ€é«˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ğŸ˜ã€‚

---

ã“ã‚Œã¯ã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ğŸ”ã®è©±ã¨åŒç­‰ãªè©±ã«ãªã‚Šã¾ã™ã€‚

ã‚ˆã‚Šã€Œç¾å®Ÿçš„ãªã€ä¾‹ã¨ã—ã¦ã€éŠ€è¡Œã‚’æƒ³åƒã—ã¦ã¿ã¦ãã ã•ã„ã€‚

æœ€è¿‘ã¾ã§ã€ã»ã¨ã‚“ã©ã®éŠ€è¡Œã¯è¤‡æ•°ã®çª“å£ğŸ‘¨â€ğŸ’¼ğŸ‘¨â€ğŸ’¼ğŸ‘¨â€ğŸ’¼ğŸ‘¨â€ğŸ’¼ã«ã€è¡Œåˆ—ğŸ•™ğŸ•™ğŸ•™ğŸ•™ğŸ•™ğŸ•™ğŸ•™ğŸ•™ãŒã§ãã¦ã„ã¾ã—ãŸã€‚

ã™ã¹ã¦ã®çª“å£ã§ã€æ¬¡ã€…ã¨ã€ä¸€äººã®å®¢ã¨ã™ã¹ã¦ã®ä½œæ¥­ã‚’è¡Œã„ã¾ã™ğŸ‘¨â€ğŸ’¼â¯.

ãã®ä¸Šã€é•·æ™‚é–“ã€åˆ—ã«ä¸¦ã°ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ğŸ•™ã€‚ãã†ã—ãªã„ã¨ã€é †ç•ªãŒå›ã£ã¦ãã¾ã›ã‚“ã€‚

éŠ€è¡ŒğŸ¦ã§ã®ç”¨äº‹ã«ã‚ãªãŸã®å¥½ããªäººğŸ˜ã‚’é€£ã‚Œã¦è¡ŒããŸãã¯ãªã„ã§ã—ã‚‡ã†ã€‚

### ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã®ã¾ã¨ã‚

ã“ã®ã€Œå¥½ããªäººã¨ã®ãƒ•ã‚¡ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã€ã®ã‚·ãƒŠãƒªã‚ªã§ã¯ã€å¾…æ©ŸğŸ•™ãŒå¤šã„ãŸã‚ã€ä¸¦è¡Œã‚·ã‚¹ãƒ†ãƒ â¸ğŸ”€â¯ã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒã¯ã‚‹ã‹ã«ç†ã«ã‹ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã¯ã€ã»ã¨ã‚“ã©ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å½“ã¦ã¯ã¾ã‚Šã¾ã™ã€‚

å¤šãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ã¾ã™ãŒã€ã‚µãƒ¼ãƒãƒ¼ã¯ã€ã‚ã¾ã‚Šå¼·ããªã„å›ç·šã§ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€ä¿¡ã‚’å¾…æ©ŸğŸ•™ã—ã¦ã„ã¾ã™ã€‚

ãã—ã¦ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã‚‹ã®ã‚’ã‚‚ã†ä¸€åº¦å¾…æ©ŸğŸ•™ã—ã¾ã™ã€‚

ã“ã®ã€Œå¾…æ©ŸğŸ•™ã€ã¯ãƒã‚¤ã‚¯ãƒ­ç§’å˜ä½ã§ã™ãŒã€ãã‚Œã§ã‚‚ã€ã™ã¹ã¦åˆç®—ã™ã‚‹ã¨ã€æœ€çµ‚çš„ã«ã¯ã‹ãªã‚Šå¾…æ©Ÿã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ã“ã‚ŒãŒã€Web APIã¸ã®éåŒæœŸâ¸ğŸ”€â¯ã‚³ãƒ¼ãƒ‰ã®åˆ©ç”¨ãŒç†ã«ã‹ãªã£ã¦ã„ã‚‹ç†ç”±ã§ã™ã€‚

ã»ã¨ã‚“ã©ã®æ—¢å­˜ã®äººæ°—ã®ã‚ã‚‹Pythonãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (Flaskã‚„Djangoã‚’å«ã‚€) ã¯ã€Pythonã®æ–°ã—ã„éåŒæœŸæ©Ÿèƒ½ãŒã§ãã‚‹å‰ã«ä½œæˆã•ã‚Œã¾ã—ãŸã€‚ã—ãŸãŒã£ã¦ã€ãã‚Œã‚‰ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³•ã¯ã€ä¸¦åˆ—å®Ÿè¡Œã¨ã€æ–°æ©Ÿèƒ½ã»ã©å¼·åŠ›ã§ã¯ãªã„å¤ã„å½¢å¼ã®éåŒæœŸå®Ÿè¡Œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

ã—ã‹ã—ã€WebSocketã®ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã«ã€éåŒæœŸWeb Python (ASGI) ã®ä¸»ãªä»•æ§˜ã¯Djangoã§é–‹ç™ºã•ã‚Œã¾ã—ãŸã€‚

ãã®ã‚ˆã†ãªéåŒæœŸæ€§ãŒNodeJSã‚’äººæ°—ã«ã—ãŸç†ç”±ã§ã™ (NodeJSã¯ä¸¦åˆ—ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒ)ã€‚ãã—ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¨ã—ã¦ã®Goã®å¼·ã¿ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

ãã—ã¦ã€ãã‚Œã¯**FastAPI**ã§å¾—ã‚‰ã‚Œã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨åŒã˜ãƒ¬ãƒ™ãƒ«ã§ã™ã€‚

ã¾ãŸã€ä¸¦åˆ—å‡¦ç†ã¨éåŒæœŸå‡¦ç†ã‚’åŒæ™‚ã«å®Ÿè¡Œã§ãã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆæ¸ˆã¿ã®ã»ã¨ã‚“ã©ã®NodeJSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚ˆã‚Šã‚‚é«˜ãã€Goã¨åŒç­‰ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚Goã¯ã€Cã«è¿‘ã„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨€èªã§ã™ <a href="https://www.techempower.com/benchmarks/#section=data-r17&hw=ph&test=query&l=zijmkf-1" class="external-link" target="_blank">(Starletteã«æ„Ÿè¬ã—ã¾ã™)</a>ã€‚

### ä¸¦è¡Œã¯ä¸¦åˆ—ã‚ˆã‚Šã‚‚å„ªã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ

ã„ã‚„ï¼ãã‚Œã¯ã“ã®è©±ã®æ•™è¨“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ä¸¦è¡Œå‡¦ç†ã¯ä¸¦åˆ—å‡¦ç†ã¨ã¯ç•°ãªã‚Šã¾ã™ã€‚å¤šãã®å¾…æ©Ÿã‚’ä¼´ã†**ç‰¹å®šã®**ã‚·ãƒŠãƒªã‚ªã«é©ã—ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ä¸€èˆ¬ã«ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ã¯ä¸¦åˆ—å‡¦ç†ã‚ˆã‚Šã‚‚ã¯ã‚‹ã‹ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ã™ã¹ã¦ã«å¯¾ã—ã¦ã‚ˆã‚Šè‰¯ã„ã¨ã„ã†ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ãªã®ã§ã€ãƒãƒ©ãƒ³ã‚¹ã‚’ã¨ã‚‹ãŸã‚ã«ã€æ¬¡ã®ç‰©èªã‚’æƒ³åƒã—ã¦ä¸‹ã•ã„:

> ã‚ãªãŸã¯å¤§ããã¦æ±šã‚ŒãŸå®¶ã‚’æƒé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

*ã¯ã„ã€ä»¥ä¸Šã§ã™*ã€‚

---

å¾…æ©ŸğŸ•™ã›ãšã€å®¶ã®ä¸­ã®è¤‡æ•°ã®å ´æ‰€ã§ãŸãã•ã‚“ã®ä»•äº‹ã‚’ã™ã‚‹ã ã‘ã§ã™ã€‚

ã‚ãªãŸã¯ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã®ä¾‹ã®ã‚ˆã†ã«ã€æœ€åˆã¯ãƒªãƒ“ãƒ³ã‚°ãƒ«ãƒ¼ãƒ ã€æ¬¡ã«ã‚­ãƒƒãƒãƒ³ã®ã‚ˆã†ã«é †ç•ªã«ã‚„ã£ã¦ã„ãã“ã¨ãŒã§ãã¾ã™ãŒã€ä½•ã‹ã‚’å¾…æ©ŸğŸ•™ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªãã€ãŸã ã²ãŸã™ã‚‰ã«æƒé™¤ã‚’ã™ã‚‹ã ã‘ã§ã€é †ç•ªã¯ä½•ã«ã‚‚å½±éŸ¿ã—ã¾ã›ã‚“ã€‚

é †ç•ªã®æœ‰ç„¡ã«é–¢ä¿‚ãªã (ä¸¦è¡Œã«) åŒã˜æ™‚é–“ãŒã‹ã‹ã‚Šã€åŒã˜é‡ã®ä½œæ¥­ãŒè¡Œã‚ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

ã—ã‹ã—ã€ã“ã®å ´åˆã€8äººã®å…ƒãƒ¬ã‚¸ä¿‚/æ–™ç†äºº/ç¾å½¹æ¸…æƒå“¡ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘¨â€ğŸ³ã‚’æ‰‹é…ã§ãã¦ã€ãã‚Œãã‚Œ (ã•ã‚‰ã«ã‚ãªãŸã‚‚) ãŒå®¶ã®åˆ¥ã€…ã®å ´æ‰€ã‚’æƒé™¤ã§ãã‚Œã°ã€è¿½åŠ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€ã™ã¹ã¦ã®ä½œæ¥­ã‚’**ä¸¦åˆ—**ã«è¡Œã„ã€ã¯ã‚‹ã‹ã«æ—©ãçµ‚äº†ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚

ã“ã®ã‚·ãƒŠãƒªã‚ªã§ã¯ã€æ¸…æƒå“¡ (ã‚ãªãŸã‚’å«ã‚€) ã®ãã‚Œãã‚ŒãŒãƒ—ãƒ­ã‚»ãƒƒã‚µã¨ãªã‚Šã€ãã‚Œãã‚Œã®å½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚

ã¾ãŸã€å®Ÿè¡Œæ™‚é–“ã®ã»ã¨ã‚“ã©ã¯ (å¾…æ©Ÿã§ã¯ãªã) å®Ÿéš›ã®ä½œæ¥­ã«è²»ã‚„ã•ã‚Œã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã§ã®ä½œæ¥­ã¯<abbr title="Central Processing Unit">CPU</abbr>ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®å•é¡Œã¯ã€ŒCPUãƒã‚¦ãƒ³ãƒ‰ã€ã¨è¨€ã„ã¾ã™ã€‚

---

CPUãƒã‚¦ãƒ³ãƒ‰æ“ä½œã®ä¸€èˆ¬çš„ãªä¾‹ã¯ã€è¤‡é›‘ãªæ•°å­¦å‡¦ç†ãŒå¿…è¦ãªã‚‚ã®ã§ã™ã€‚

ä¾‹ãˆã°:

* **ã‚ªãƒ¼ãƒ‡ã‚£ã‚ª** ã‚„ **ç”»åƒå‡¦ç†**ã€‚
* **ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ§ãƒ³**: ç”»åƒã¯æ•°ç™¾ä¸‡ã®ãƒ”ã‚¯ã‚»ãƒ«ã§æ§‹æˆã•ã‚Œã€å„ãƒ”ã‚¯ã‚»ãƒ«ã«ã¯3ã¤ã®å€¤/è‰²ãŒã‚ã‚Šã€é€šå¸¸ã€ã“ã‚Œã‚‰ã®ãƒ”ã‚¯ã‚»ãƒ«ã§ä½•ã‹ã‚’åŒæ™‚ã«è¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å‡¦ç†ã€‚
* **æ©Ÿæ¢°å­¦ç¿’**: é€šå¸¸ã€å¤šãã®ã€Œè¡Œåˆ—ã€ã¨ã€Œãƒ™ã‚¯ãƒˆãƒ«ã€ã®ä¹—ç®—ãŒå¿…è¦ã§ã™ã€‚å·¨å¤§ãªã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«æ•°å­—ã‚’å…¥ã‚Œã¦ã€ãã‚Œã‚’åŒæ™‚ã«å…¨éƒ¨æ›ã‘åˆã‚ã›ã‚‹ã“ã¨ã‚’è€ƒãˆã¦ã¿ã¦ãã ã•ã„ã€‚
* **ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°**: ã“ã‚Œã¯æ©Ÿæ¢°å­¦ç¿’ã®ã‚µãƒ–ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã‚ã‚‹ãŸã‚ã€åŒã˜ã“ã¨ãŒå½“ã¦ã¯ã¾ã‚Šã¾ã™ã€‚ä¹—ç®—ã™ã‚‹æ•°å­—ãŒã‚ã‚‹å˜ä¸€ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§ã¯ãªãã€ãã‚Œã‚‰ã®è†¨å¤§ãªé›†åˆã§ã€å¤šãã®å ´åˆã€ãã‚Œã‚‰ã®ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ãŠã‚ˆã³/ã¾ãŸã¯ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ç‰¹åˆ¥ãªãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### ä¸¦è¡Œå‡¦ç† + ä¸¦åˆ—å‡¦ç†: Web + æ©Ÿæ¢°å­¦ç¿’

**FastAPI**ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Webé–‹ç™ºã§éå¸¸ã«ä¸€èˆ¬çš„ãªä¸¦è¡Œå‡¦ç† (NodeJSã®ä¸»ãªé­…åŠ›ã¨åŒã˜ã‚‚ã®) ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

ãŸã ã—ã€æ©Ÿæ¢°å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ã®ã‚ˆã†ãª **CPUãƒã‚¦ãƒ³ãƒ‰** ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã€ä¸¦åˆ—å‡¦ç†ã¨ãƒãƒ«ãƒãƒ—ãƒ­ã‚»ãƒƒã‚·ãƒ³ã‚° (è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒä¸¦åˆ—ã§å®Ÿè¡Œã•ã‚Œã‚‹) ã®åˆ©ç‚¹ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã•ã‚‰ã«ã€PythonãŒ**ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹**ã€æ©Ÿæ¢°å­¦ç¿’ã€ç‰¹ã«ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®ä¸»è¦è¨€èªã§ã‚ã‚‹ã¨ã„ã†å˜ç´”ãªäº‹å®Ÿã«ã‚ˆã‚Šã€FastAPIã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹/æ©Ÿæ¢°å­¦ç¿’ã®Web APIãŠã‚ˆã³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (ä»–ã®å¤šãã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã®) ã«éå¸¸ã«ã‚ˆãé©åˆã—ã¦ã„ã¾ã™ã€‚

æœ¬ç•ªç’°å¢ƒã§ã“ã®ä¸¦åˆ—å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€[ãƒ‡ãƒ—ãƒ­ã‚¤](deployment/index.md){.internal-link target=_blank}ã«é–¢ã™ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## `async` ã¨ `await`

ç¾ä»£çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Pythonã«ã¯ã€éåŒæœŸã‚³ãƒ¼ãƒ‰ã‚’å®šç¾©ã™ã‚‹éå¸¸ã«ç›´æ„Ÿçš„ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é€šå¸¸ã®ã€Œã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã€ã‚³ãƒ¼ãƒ‰ã®ã‚ˆã†ã«è¦‹ãˆã€é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€Œå¾…æ©Ÿã€ã—ã¾ã™ã€‚

çµæœã‚’è¿”ã™å‰ã«å¾…æ©Ÿã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã“ã‚Œã‚‰ã®æ–°ã—ã„Pythonæ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ“ä½œãŒã‚ã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ãã¾ã™ã€‚

```Python
burgers = await get_burgers(2)
```

ã‚«ã‚®ã¯ `await` ã§ã™ã€‚çµæœã‚’ `burgers`ã«ä¿å­˜ã™ã‚‹å‰ã«ã€`get_burgers(2)`ã®å‡¦ç†ğŸ•™ã®å®Œäº†ã‚’å¾…ã¤â¸å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’Pythonã«ä¼ãˆã¾ã™ã€‚ã“ã‚Œã§Pythonã¯ã€ãã®é–“ã« (åˆ¥ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ä¿¡ã™ã‚‹ãªã©) ä½•ã‹ä»–ã®ã“ã¨ãŒã§ãã‚‹ğŸ”€â¯ã“ã¨ã‚’çŸ¥ã‚Šã¾ã™ã€‚

`await` ãŒæ©Ÿèƒ½ã™ã‚‹ãŸã‚ã«ã¯ã€éåŒæœŸå‡¦ç†ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹é–¢æ•°å†…ã«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€`async def` ã§é–¢æ•°ã‚’å®£è¨€ã™ã‚‹ã ã‘ã§ã‚ˆã„ã§ã™:

```Python hl_lines="1"
async def get_burgers(number: int):
    # ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«éåŒæœŸå‡¦ç†ã‚’å®Ÿè¡Œ
    return burgers
```

...`def` ã®ã‹ã‚ã‚Šã«:

```Python hl_lines="2"
# éåŒæœŸã§ã¯ãªã„
def get_sequential_burgers(number: int):
    # ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ãªå‡¦ç†ã‚’å®Ÿè¡Œ
    return burgers
```
`async def` ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Pythonã«ãã®é–¢æ•°å†…ã§ `await` å¼ (ãã®é–¢æ•°ã®å®Ÿè¡Œã‚’ã€Œä¸€æ™‚åœæ­¢â¸ã€ã—ã€çµæœãŒæˆ»ã‚‹ã¾ã§ä»–ã®ä½•ã‹ã‚’å®Ÿè¡ŒğŸ”€ã™ã‚‹) ã‚’èªè­˜ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã¨ä¼ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`async def` é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã¨ãã¯ã€ã€Œawaitã€ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦ã€ã“ã‚Œã¯æ©Ÿèƒ½ã—ã¾ã›ã‚“:

```Python
# get_burgersã¯async defã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã§å‹•ä½œã—ãªã„
burgers = get_burgers(2)
```

---

ã—ãŸãŒã£ã¦ã€ `await` ã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã« `async def` ã‚’ä½¿ç”¨ã—ã¦ã€ãã‚Œã‚’ä½¿ç”¨ã™ã‚‹*path operation é–¢æ•°*ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:

```Python hl_lines="2-3"
@app.get('/burgers')
async def read_burgers():
    burgers = await get_burgers(2)
    return burgers
```

### ã‚ˆã‚Šç™ºå±•çš„ãªæŠ€è¡“è©³ç´°

`await` ã¯ `async def` ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°å†…ã§ã®ã¿ä½¿ç”¨ã§ãã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã‹ã¨æ€ã„ã¾ã™ã€‚

ã—ã‹ã—åŒæ™‚ã«ã€`async def` ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã¯ã€Œawaitã•ã‚Œã‚‹ã€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãªã®ã§ã€`async def` ã‚’æŒã¤é–¢æ•°ã¯ã€`async def` ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°å†…ã§ã®ã¿å‘¼ã³å‡ºã›ã¾ã™ã€‚

ã§ã¯ã€ã“ã®ãƒ‹ãƒ¯ãƒˆãƒªã¨åµã®å•é¡Œã«ã¤ã„ã¦ã€æœ€åˆã® `async` é–¢æ•°ã‚’ã©ã®ã‚ˆã†ã«å‘¼ã³å‡ºã™ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ

**FastAPI**ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ãã®ã€Œæœ€åˆã®ã€é–¢æ•°ãŒ*path operation é–¢æ•°*ã§ã‚ã‚Šã€FastAPIãŒæ­£ã—ãå®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹ã®ã§ã€å¿ƒé…ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã—ã‹ã—ã€FastAPIä»¥å¤–ã§ `async` / `await` ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã¯ã€<a href="https://docs.python.org/3/library/asyncio-task.html#coroutine" class="external-link" target="_blank">å…¬å¼Pythonãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ä¸‹ã•ã„</a>ã€‚

### éåŒæœŸã‚³ãƒ¼ãƒ‰ã®ä»–ã®å½¢å¼

`async` ã¨ `await` ã‚’ä½¿ç”¨ã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã¯ã€ã“ã®è¨€èªã§ã¯æ¯”è¼ƒçš„æ–°ã—ã„ã‚‚ã®ã§ã™ã€‚

éåŒæœŸã‚³ãƒ¼ãƒ‰ã®æ“ä½œãŒã¯ã‚‹ã‹ã«ç°¡å˜ã«ãªã‚Šã¾ã™ã€‚

ç­‰ä¾¡ãª (ã¾ãŸã¯ã»ã¨ã‚“ã©åŒä¸€ã®) æ§‹æ–‡ãŒã€æœ€è¿‘ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®JavaScript (ãƒ–ãƒ©ã‚¦ã‚¶ãŠã‚ˆã³NodeJS) ã«ã‚‚æœ€è¿‘çµ„ã¿è¾¼ã¾ã‚Œã¾ã—ãŸã€‚

ã—ã‹ã—ã€ãã®å‰ã¯ã€éåŒæœŸã‚³ãƒ¼ãƒ‰ã®å‡¦ç†ã¯ã‹ãªã‚Šè¤‡é›‘ã§é›£è§£ã§ã—ãŸã€‚

ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Pythonã§ã¯ã€ã‚¹ãƒ¬ãƒƒãƒ‰ã‚„<a href="https://www.gevent.org/" class="external-link" target="_blank">Gevent</a>ãŒåˆ©ç”¨ã§ãã¾ã—ãŸã€‚ã—ã‹ã—ã€ã‚³ãƒ¼ãƒ‰ã¯ç†è§£ã€ãƒ‡ãƒãƒƒã‚¯ã€ãã—ã¦ã€è€ƒå¯ŸãŒã¯ã‚‹ã‹ã«è¤‡é›‘ã§ã™ã€‚

ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®NodeJS / ãƒ–ãƒ©ã‚¦ã‚¶JavaScriptã§ã¯ã€ã€Œã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚ã“ã‚Œã¯ã€<a href="http://callbackhell.com/" class="external-link" target="_blank">ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯åœ°ç„</a>ã«ã¤ãªãŒã‚Šã¾ã™ã€‚

## ã‚³ãƒ«ãƒ¼ãƒãƒ³

**ã‚³ãƒ«ãƒ¼ãƒãƒ³**ã¯ã€`async def` é–¢æ•°ã«ã‚ˆã£ã¦è¿”ã•ã‚Œã‚‹ã‚‚ã®ã‚’æŒ‡ã™éå¸¸ã«æ´’è½ãŸç”¨èªã§ã™ã€‚ã“ã‚Œã¯ã€é–‹å§‹ã§ãã¦ã€ã„ã¤ã‹çµ‚äº†ã™ã‚‹é–¢æ•°ã®ã‚ˆã†ãªã‚‚ã®ã§ã‚ã‚‹ãŒã€å†…éƒ¨ã« `await` ãŒã‚ã‚‹ã¨ãã¯å†…éƒ¨çš„ã«ä¸€æ™‚åœæ­¢â¸ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã‚‚ã®ã ã¨Pythonã¯èªè­˜ã—ã¦ã„ã¾ã™ã€‚

`async` ã¨ `await` ã‚’ç”¨ã„ãŸéåŒæœŸã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã™ã¹ã¦ã®æ©Ÿèƒ½ã¯ã€ã€Œã‚³ãƒ«ãƒ¼ãƒãƒ³ã€ã‚’ä½¿ç”¨ã™ã‚‹ã‚‚ã®ã¨ã—ã¦ä½•åº¦ã‚‚ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚Goã®ä¸»è¦æ©Ÿèƒ½ã§ã‚ã‚‹ã€Œã‚´ãƒ«ãƒ¼ãƒãƒ³ã€ã«ç›¸å½“ã—ã¾ã™ã€‚

## ã¾ã¨ã‚

ä¸Šè¿°ã—ãŸãƒ•ãƒ¬ãƒ¼ã‚ºã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†:

> ç¾ä»£ç‰ˆã®Pythonã¯ã€Œ**éåŒæœŸã‚³ãƒ¼ãƒ‰**ã€ã‚’ã€ã€Œ**ã‚³ãƒ«ãƒ¼ãƒãƒ³**ã€ã¨ç§°ã•ã‚Œã‚‹ã‚‚ã®ã‚’åˆ©ç”¨ã—ã¦ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ **`async` ã¨ `await`** æ§‹æ–‡ã‚’ç”¨ã„ã¾ã™ã€‚

ä»Šã§ã¯ã€ã“ã®æ„å‘³ãŒã‚ˆã‚Šç†è§£ã§ãã‚‹ã¯ãšã§ã™ã€‚âœ¨

(Starletteã‚’ä»‹ã—ã¦) FastAPIã«åŠ›ã‚’ä¸ãˆã¦ã€å°è±¡çš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã‚‚ã®ã¯ã“ã‚ŒãŒã™ã¹ã¦ã§ã™ã€‚

## éå¸¸ã«ç™ºå±•çš„ãªæŠ€è¡“çš„è©³ç´°

/// warning | æ³¨æ„

æã‚‰ãã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚

ã“ã®éƒ¨åˆ†ã¯**FastAPI**ã®ä»•çµ„ã¿ã«é–¢ã™ã‚‹éå¸¸ã«æŠ€è¡“çš„ãªè©³ç´°ã§ã™ã€‚

ã‹ãªã‚Šã®æŠ€è¡“çŸ¥è­˜ (ã‚³ãƒ«ãƒ¼ãƒãƒ³ã€ã‚¹ãƒ¬ãƒƒãƒ‰ã€ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãªã©) ãŒã‚ã‚Šã€FastAPIãŒ `async def` ã¨é€šå¸¸ã® `def` ã‚’ã©ã®ã‚ˆã†ã«å‡¦ç†ã™ã‚‹ã‹çŸ¥ã‚ŠãŸã„å ´åˆã¯ã€å…ˆã«é€²ã‚“ã§ãã ã•ã„ã€‚

///

### Path operation é–¢æ•°

*path operation é–¢æ•°*ã‚’ `async def` ã®ä»£ã‚ã‚Šã«é€šå¸¸ã® `def` ã§å®£è¨€ã™ã‚‹ã¨ã€(ã‚µãƒ¼ãƒãƒ¼ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ã®ã§) ç›´æ¥å‘¼ã³å‡ºã™ä»£ã‚ã‚Šã«å¤–éƒ¨ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ« (awaitã•ã‚Œã‚‹) ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

ä¸Šè¨˜ã®æ–¹æ³•ã¨é•ã£ãŸæ–¹æ³•ã®åˆ¥ã®éåŒæœŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‹ã‚‰æ¥ã¦ãŠã‚Šã€å°ã•ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š (ç´„100ãƒŠãƒç§’) ã®ãŸã‚ã«é€šå¸¸ã® `def` ã‚’ä½¿ç”¨ã—ã¦äº›ç´°ãªæ¼”ç®—ã®ã¿è¡Œã† *path operation é–¢æ•°* ã‚’å®šç¾©ã™ã‚‹ã®ã«æ…£ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€**FastAPI**ã§ã¯ã¾ã£ãŸãé€†ã®åŠ¹æœã«ãªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã€*path operation é–¢æ•°* ãŒãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°<abbr title="å…¥åŠ›/å‡ºåŠ›: ãƒ‡ã‚£ã‚¹ã‚¯ã®èª­ã¿å–ã‚Šã¾ãŸã¯æ›¸ãè¾¼ã¿ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡ã€‚">I/O</abbr>ã‚’å®Ÿè¡Œã—ãªã„ã®ã§ã‚ã‚Œã°ã€`async def` ã®ä½¿ç”¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

ãã‚Œã§ã‚‚ã€ã©ã¡ã‚‰ã®çŠ¶æ³ã§ã‚‚ã€**FastAPI**ãŒéå»ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚ˆã‚Šã‚‚ (ã¾ãŸã¯ãã‚Œã«åŒ¹æ•µã™ã‚‹ã»ã©) [é«˜é€Ÿã«ãªã‚‹](index.md#_10){.internal-link target=_blank}å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

### ä¾å­˜é–¢ä¿‚

ä¾å­˜é–¢ä¿‚ã«ã¤ã„ã¦ã‚‚åŒæ§˜ã§ã™ã€‚ä¾å­˜é–¢ä¿‚ãŒ `async def` ã§ã¯ãªãæ¨™æº–ã® `def` é–¢æ•°ã§ã‚ã‚‹å ´åˆã€å¤–éƒ¨ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

### ã‚µãƒ–ä¾å­˜é–¢ä¿‚

(é–¢æ•°å®šç¾©ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦) ç›¸äº’ã«å¿…è¦ãªè¤‡æ•°ã®ä¾å­˜é–¢ä¿‚ã¨ã‚µãƒ–ä¾å­˜é–¢ä¿‚ã‚’è¨­å®šã§ãã¾ã™ã€‚ä¸€éƒ¨ã¯ `async def` ã§ä½œæˆã•ã‚Œã€ä»–ã®ä¸€éƒ¨ã¯é€šå¸¸ã® `def` ã§ä½œæˆã•ã‚Œã¾ã™ã€‚ãã‚Œã§ã‚‚å‹•ä½œã—ã€é€šå¸¸ã® `def`ã§ä½œæˆã•ã‚ŒãŸã‚‚ã®ã¯ã€ã€Œawaitã•ã‚Œã‚‹ã€ä»£ã‚ã‚Šã« (ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã‹ã‚‰) å¤–éƒ¨ã‚¹ãƒ¬ãƒƒãƒ‰ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚

### ãã®ä»–ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°

ã‚ãªãŸãŒç›´æ¥å‘¼ã³å‡ºã™ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã¯é€šå¸¸ã® `def` ã¾ãŸã¯ `async def` ã§ä½œæˆã§ãã€FastAPIã¯å‘¼ã³å‡ºã™æ–¹æ³•ã«å½±éŸ¿ã‚’ä¸ãˆã¾ã›ã‚“ã€‚

ã“ã‚Œã¯ã€FastAPIãŒå‘¼ã³å‡ºã™é–¢æ•°ã¨å¯¾ç…§çš„ã§ã™: *path operation é–¢æ•°*ã¨ä¾å­˜é–¢ä¿‚ã€‚

ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ãŒ `def` ã‚’ä½¿ç”¨ã—ãŸé€šå¸¸ã®é–¢æ•°ã§ã‚ã‚‹å ´åˆã€ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã§ã¯ãªãç›´æ¥ (ã‚³ãƒ¼ãƒ‰ã§è¨˜è¿°ã—ãŸã¨ãŠã‚Šã«) å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚é–¢æ•°ãŒ `async def` ã‚’ä½¿ç”¨ã—ã¦ä½œæˆã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€å‘¼ã³å‡ºã™éš›ã« `await` ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€ã“ã‚Œã‚‰ã¯éå¸¸ã«æŠ€è¡“çš„ãªè©³ç´°ã§ã‚ã‚Šã€æ¤œç´¢ã—ã¦è¾¿ã‚Šç€ã„ãŸå ´åˆã¯å½¹ç«‹ã¤ã§ã—ã‚‡ã†ã€‚

ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€ä¸Šè¨˜ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§å•é¡Œãªã„ã¯ãšã§ã™: <a href="#_1">æ€¥ã„ã§ã„ã¾ã™ã‹ï¼Ÿ</a>ã€‚


================================================
File: /docs/ja/docs/benchmarks.md
================================================
# ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

TechEmpowerã®ç‹¬ç«‹ã—ãŸãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯ã€Uvicornã®ä¸‹ã§å‹•ä½œã™ã‚‹**FastAPI**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€<a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">åˆ©ç”¨å¯èƒ½ãªæœ€é€Ÿã®Pythonãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®1ã¤</a>ã§ã‚ã‚Šã€ä¸‹å›ã£ã¦ã„ã‚‹ã®ã¯Starletteã¨Uvicornè‡ªä½“ (FastAPIã«ã‚ˆã£ã¦å†…éƒ¨ã§ä½¿ç”¨ã•ã‚Œã‚‹) ã®ã¿ã ã¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

ãŸã ã—ã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ç¢ºèªã—ã€æ¯”è¼ƒã™ã‚‹éš›ã«ã¯ä¸‹è¨˜ã®å†…å®¹ã«æ°—ã‚’ä»˜ã‘ã¦ãã ã•ã„ã€‚

## ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¨é€Ÿåº¦

ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ç¢ºèªã™ã‚‹æ™‚ã€ç•°ãªã‚‹ãƒ„ãƒ¼ãƒ«ã‚’åŒç­‰ãªã‚‚ã®ã¨æ¯”è¼ƒã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚

å…·ä½“çš„ã«ã¯ã€Uvicornã€Starletteã€FastAPIã‚’ (ä»–ã®å¤šãã®ãƒ„ãƒ¼ãƒ«ã¨) æ¯”è¼ƒã—ã¾ã—ãŸã€‚

ãƒ„ãƒ¼ãƒ«ã§è§£æ±ºã™ã‚‹å•é¡ŒãŒã‚·ãƒ³ãƒ—ãƒ«ãªã»ã©ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã—ã¾ã™ã€‚ã¾ãŸã€ã»ã¨ã‚“ã©ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¯ã€ãƒ„ãƒ¼ãƒ«ã‹ã‚‰æä¾›ã•ã‚Œã‚‹è¿½åŠ æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚

éšå±¤é–¢ä¿‚ã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

* **Uvicorn**: ASGIã‚µãƒ¼ãƒãƒ¼
    * **Starlette**: (Uvicornã‚’ä½¿ç”¨) WEBãƒã‚¤ã‚¯ãƒ­ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
        * **FastAPI**: (Starletteã‚’ä½¿ç”¨) ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã®ã€APIã‚’æ§‹ç¯‰ã™ã‚‹è¿½åŠ æ©Ÿèƒ½ã‚’å‚™ãˆãŸAPIãƒã‚¤ã‚¯ãƒ­ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

* **Uvicorn**:
    * ã‚µãƒ¼ãƒãƒ¼è‡ªä½“ã«ä½™åˆ†ãªã‚³ãƒ¼ãƒ‰ãŒå°‘ãªã„ã®ã§ã€æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚
    * Uvicornã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç›´æ¥æ›¸ãã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã¤ã¾ã‚Šã€ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ã«ã¯ã€Starlette (ã¾ãŸã¯** FastAPI **) ãŒæä¾›ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ã€å¤šã‹ã‚Œå°‘ãªã‹ã‚Œå«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã†ã™ã‚‹ã¨ã€æœ€çµ‚çš„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒ—ãƒªã®ã‚³ãƒ¼ãƒ‰ã¨ãƒã‚°ã‚’æœ€å°é™ã«æŠ‘ãˆãŸå ´åˆã¨åŒã˜ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã«ãªã‚Šã¾ã™ã€‚
    * ã‚‚ã—Uvicornã‚’æ¯”è¼ƒã™ã‚‹å ´åˆã¯ã€Daphneã€Hypercornã€uWSGIãªã©ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ã¨æ¯”è¼ƒã—ã¦ãã ã•ã„ã€‚
* **Starlette**:
    * Uvicornã«æ¬¡ãæ€§èƒ½ã‚’æŒã¤ã§ã—ã‚‡ã†ã€‚å®Ÿéš›ã€Starletteã¯Uvicornã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã ã‹ã‚‰ã€ã‚ˆã‚Šå¤šãã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€Uvicornã‚ˆã‚Šã‚‚ã€Œé…ãã€ãªã£ã¦ã—ã¾ã†ã ã‘ãªã®ã§ã™ã€‚
    * ã—ã‹ã—ã€ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãªã©ã®ã‚·ãƒ³ãƒ—ãƒ«ãªWEBã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
    * ã‚‚ã—Starletteã‚’æ¯”è¼ƒã™ã‚‹å ´åˆã¯ã€Sanicã€Flaskã€Djangoãªã©ã®WEBãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (ã‚‚ã—ãã¯ãƒã‚¤ã‚¯ãƒ­ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯) ã¨æ¯”è¼ƒã—ã¦ãã ã•ã„ã€‚
* **FastAPI**:
    * StarletteãŒUvicornã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã¨åŒã˜ã§ã€**FastAPI**ã¯Starletteã‚’ä½¿ã£ã¦ãŠã‚Šã€ãã‚Œã‚ˆã‚Šé€Ÿãã§ãã¾ã›ã‚“ã€‚
    * FastAPIã¯Starletteã®ä¸Šã«ã•ã‚‰ã«å¤šãã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã‚„ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã€APIã‚’æ§‹ç¯‰ã™ã‚‹éš›ã«å¸¸ã«å¿…è¦ãªæ©Ÿèƒ½ã§ã™ã€‚ã¾ãŸã€ãã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã‚’ç„¡æ–™ã§å–å¾—ã§ãã¾ã™ (ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å®Ÿè¡Œä¸­ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’è¿½åŠ ã›ãšã€èµ·å‹•æ™‚ã«ç”Ÿæˆã•ã‚Œã¾ã™) ã€‚
    * FastAPIã‚’ä½¿ç”¨ã›ãšã€ç›´æ¥Starlette (ã¾ãŸã¯Sanic, Flask, Responderãªã©) ã‚’ä½¿ç”¨ã—ãŸå ´åˆã€ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã¨ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã™ã¹ã¦è‡ªåˆ†ã§å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€æœ€çµ‚çš„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯FastAPIã‚’ä½¿ç”¨ã—ã¦æ§‹ç¯‰ã—ãŸå ´åˆã¨åŒã˜ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒç™ºç”Ÿã—ã¾ã™ã€‚ãã—ã¦ã€å¤šãã®å ´åˆã€ã“ã®ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã¨ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§æœ€å¤§ã®è¨˜è¿°é‡ã«ãªã‚Šã¾ã™ã€‚
    * FastAPIã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºæ™‚é–“ã€ãƒã‚°ã€ã‚³ãƒ¼ãƒ‰è¡Œæ•°ã‚’ç¯€ç´„ã§ãã€ä½¿ç”¨ã—ãªã„å ´åˆ (ã‚ãªãŸãŒå…¨ã¦ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ç›´ã—ãŸå ´åˆ) ã¨åŒã˜ã‹ãã‚Œä»¥ä¸Šã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚
    * ã‚‚ã—FastAPIã‚’æ¯”è¼ƒã™ã‚‹å ´åˆã¯ã€Flask-apispecã€NestJSã€Moltenãªã©ã®ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã‚„ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹WEBãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (ã‚„æ©Ÿèƒ½ã®ã‚»ãƒƒãƒˆ) ã¨æ¯”è¼ƒã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã‚‰ã¯ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•æ¤œè¨¼ã‚„ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ãŒçµ±åˆã•ã‚ŒãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚


================================================
File: /docs/ja/docs/features.md
================================================
# æ©Ÿèƒ½

## FastAPIã®æ©Ÿèƒ½

**FastAPI** ã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’ã‚‚ã¡ã¾ã™:

### ã‚ªãƒ¼ãƒ—ãƒ³ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰æº–æ‹ 

* APIä½œæˆã®ãŸã‚ã®<a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank"><strong>OpenAPI</strong></a>ã€‚ã“ã‚Œã¯ã€<abbr title="also known as: endpoints, routes">path</abbr> <abbr title="also known as HTTP methods, as POST, GET, PUT, DELETE">operations</abbr>ã®å®£è¨€ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ãƒœãƒ‡ã‚£ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãªã©ã‚’å«ã‚“ã§ã„ã¾ã™ã€‚
* <a href="http://json-schema.org/" class="external-link" target="_blank"><strong>JSONã‚¹ã‚­ãƒ¼ãƒ</strong></a>ã‚’ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆï¼ˆOpenAPIã¯JSONã‚¹ã‚­ãƒ¼ãƒã«åŸºã¥ã„ã¦ã„ã‚‹ï¼‰ã€‚
* ç¶¿å¯†ãªèª¿æŸ»ã®çµæœã€ä¸Šå±¤ã«å¾Œä»˜ã‘ã™ã‚‹ã®ã§ã¯ãªãã€ã“ã‚Œã‚‰ã®åŸºæº–ã«åŸºã¥ã„ã¦è¨­è¨ˆã•ã‚Œã¾ã—ãŸã€‚
* ã“ã‚Œã«ã‚ˆã‚Šã€å¤šãã®è¨€èªã§è‡ªå‹• **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆ** ãŒå¯èƒ½ã§ã™ã€‚

### è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
å¯¾è©±çš„ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨æ¢ç´¢çš„ãªwebãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯OpenAPIã‚’åŸºã«ã—ã¦ã„ã‚‹ãŸã‚ã€ã„ãã¤ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§2ã¤å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

* <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank"><strong>Swagger UI</strong></a>ã§ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæ¢ç´¢ã‚’ã—ãªãŒã‚‰ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ç›´æ¥APIã‚’å‘¼ã³å‡ºã—ã¦ãƒ†ã‚¹ãƒˆãŒè¡Œãˆã¾ã™ã€‚

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank"><strong>ReDoc</strong></a>ã‚’ä½¿ç”¨ã—ãŸã‚‚ã†ä¸€ã¤ã®APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã€‚

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### ç¾ä»£çš„ãªPython

FastAPIã®æ©Ÿèƒ½ã¯ã™ã¹ã¦ã€æ¨™æº–ã®Python 3.8å‹å®£è¨€ã«åŸºã¥ã„ã¦ã„ã¾ã™ï¼ˆPydanticã®åŠŸç¸¾ï¼‰ã€‚æ–°ã—ã„æ§‹æ–‡ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã ã®ç¾ä»£çš„ãªæ¨™æº–ã®Pythonã§ã™ã€‚

ï¼ˆFastAPIã‚’ä½¿ç”¨ã—ãªã„å ´åˆã§ã‚‚ï¼‰Pythonã®å‹ã®ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ç°¡å˜ãªå¾©ç¿’ãŒå¿…è¦ãªå ´åˆã¯ã€çŸ­ã„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼ˆ[Python Types](python-types.md){.internal-link target=_blank}ï¼‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

å‹ã‚’ä½¿ç”¨ã—ãŸæ¨™æº–çš„ãªPythonã‚’è¨˜è¿°ã—ã¾ã™:

```Python
from datetime import date

from pydantic import BaseModel

# Declare a variable as a str
# and get editor support inside the function
def main(user_id: str):
    return user_id


# A Pydantic model
class User(BaseModel):
    id: int
    name: str
    joined: date
```

ã“ã‚Œã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç”¨ã„ã‚‰ã‚Œã¾ã™:

```Python
my_user: User = User(id=3, name="John Doe", joined="2018-07-19")

second_user_data = {
    "id": 4,
    "name": "Mary",
    "joined": "2018-11-30",
}

my_second_user: User = User(**second_user_data)
```

/// info | æƒ…å ±

`**second_user_data` ã¯ä»¥ä¸‹ã‚’æ„å‘³ã—ã¾ã™ï¼š

`second_user_data`è¾æ›¸ã®ã‚­ãƒ¼ã¨å€¤ã‚’ç›´æ¥ã€ã‚­ãƒ¼ã¨å€¤ã®å¼•æ•°ã¨ã—ã¦æ¸¡ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€`User(id=4, name="Mary", joined="2018-11-30")`ã¨åŒç­‰ã§ã™ã€‚

///

### ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆ

ã™ã¹ã¦ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ä½¿ã„ã‚„ã™ãç›´æ„Ÿçš„ã«ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€ã™ã¹ã¦ã®æ±ºå®šã¯é–‹ç™ºã‚’é–‹å§‹ã™ã‚‹å‰ã§ã‚‚è¤‡æ•°ã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ãƒ†ã‚¹ãƒˆã•ã‚Œã€æœ€é«˜ã®é–‹ç™ºä½“é¨“ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚

å‰å›ã®Pythoné–‹ç™ºè€…èª¿æŸ»ã§ã¯ã€<a href="https://www.jetbrains.com/research/python-developers-survey-2017/#tools-and-features" class="external-link" target="_blank">æœ€ã‚‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ãŒã€Œã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã€ã§ã‚ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã‚Šã¾ã—ãŸã€‚</a>

**FastAPI** ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€ã“ã®è¦æ±‚ã‚’æº€ãŸã™ã“ã¨ã‚’åŸºæœ¬ã¨ã—ã¦ã„ã¾ã™ã€‚ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã¯ã©ã“ã§ã‚‚æ©Ÿèƒ½ã—ã¾ã™ã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æˆ»ã‚‹å¿…è¦ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã€‚

ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒã©ã®ã‚ˆã†ã«å½¹ç«‹ã¤ã‹ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™:

* <a href="https://code.visualstudio.com/" class="external-link" target="_blank">Visual Studio Code</a>ã®å ´åˆ:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

* <a href="https://www.jetbrains.com/pycharm/" class="external-link" target="_blank">PyCharm</a>ã®å ´åˆ:

![editor support](https://fastapi.tiangolo.com/img/pycharm-completion.png)

ä»¥å‰ã¯ä¸å¯èƒ½ã ã¨è€ƒãˆã¦ã„ãŸã‚³ãƒ¼ãƒ‰ã§ã•ãˆè£œå®Œã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ã®JSONãƒœãƒ‡ã‚£ï¼ˆãƒã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ï¼‰å†…ã® `price`ã‚­ãƒ¼ã§ã™ã€‚

é–“é•ã£ãŸã‚­ãƒ¼åã‚’å…¥åŠ›ã—ãŸã‚Šã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé–“ã‚’è¡Œãæ¥ã—ãŸã‚Šã€ä¸Šä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦`username`ã¨`user_name`ã®ã©ã¡ã‚‰ã‚’ä½¿ç”¨ã—ãŸã‹èª¿ã¹ãŸã‚Šã™ã‚‹å¿…è¦ã¯ã‚‚ã†ã‚ã‚Šã¾ã›ã‚“ã€‚

### ç°¡æ½”

ã™ã¹ã¦ã«é©åˆ‡ãª**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ãŒã‚ã‚Šã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ§‹æˆãŒã§ãã¾ã™ã€‚å¿…è¦ãªã“ã¨ã‚’å®Ÿè¡Œã—ã€å¿…è¦ãªAPIã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’èª¿æ•´ã§ãã¾ã™ã€‚

ãŸã ã—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚‚ã™ã¹ã¦ **ã†ã¾ãã„ãã¾ã™**ã€‚

### æ¤œè¨¼

* ä»¥ä¸‹ã®æ§˜ãªã€ã»ã¨ã‚“ã©ã®ï¼ˆã™ã¹ã¦ã®ï¼Ÿï¼‰Python **ãƒ‡ãƒ¼ã‚¿å‹**ã®æ¤œè¨¼:
     * JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ`dict`ï¼‰
     * é …ç›®ã®å‹ã‚’å®šç¾©ã™ã‚‹JSONé…åˆ—ï¼ˆ`list`ï¼‰
     * æœ€å°é•·ã¨æœ€å¤§é•·ã®ã‚ã‚‹æ–‡å­—åˆ—ï¼ˆ`str`ï¼‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
     * æœ€å°å€¤ã¨æœ€å¤§å€¤ã®ã‚ã‚‹æ•°å€¤ï¼ˆ`int`ã€` float`ï¼‰

* ã‚ˆã‚Šã‚¨ã‚­ã‚¾ãƒãƒƒã‚¯ãªå‹ã®æ¤œè¨¼ï¼š
     * URL
     * Eãƒ¡ãƒ¼ãƒ«
     * UUID
     * ...ãã®ä»–

ã™ã¹ã¦ã®æ¤œè¨¼ã¯ã€ç¢ºç«‹ã•ã‚ŒãŸå …ç‰¢ãª **Pydantic** ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã¾ã™ã€‚

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨èªè¨¼

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨èªè¨¼ãŒçµ±åˆã•ã‚Œã¦ã„ã¾ã™ã€‚ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã«ã¤ã„ã¦ã‚‚å¦¥å”ã—ã¦ã„ã¾ã›ã‚“ã€‚

ä»¥ä¸‹ã®OpenAPIã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ¼ãƒ ã‚’å«ã‚€:

* HTTPãƒ™ãƒ¼ã‚·ãƒƒã‚¯
* **OAuth2**ï¼ˆ**JWTãƒˆãƒ¼ã‚¯ãƒ³**ã‚‚ä½¿ç”¨ï¼‰ã€‚ JWTã‚’ä½¿ç”¨ã—ãŸOAuth2ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼ˆ[OAuth2 with JWT](tutorial/security/oauth2-jwt.md){.internal-link target=_blank}ï¼‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
* APIã‚­ãƒ¼ï¼š
     * ãƒ˜ãƒƒãƒ€ãƒ¼
     * ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
     * ã‚¯ãƒƒã‚­ãƒ¼ã€ç­‰

ã•ã‚‰ã«ã€Starletteã®ã™ã¹ã¦ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã‚‚å«ã¿ã¾ã™ï¼ˆ**ã‚»ãƒƒã‚·ãƒ§ãƒ³Cookie**ã‚’å«ã‚€ï¼‰ã€‚

ã“ã‚Œã‚‰ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã€ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã€ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãªã©ã¨ç°¡å˜ã«çµ±åˆã§ãã‚‹å†åˆ©ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ä¾å­˜æ€§ã®æ³¨å…¥ï¼ˆDependency Injectionï¼‰

FastAPIã«ã¯éå¸¸ã«ä½¿ã„ã‚„ã™ãã€éå¸¸ã«å¼·åŠ›ãª<abbr title='also known as "components", "resources", "services", "providers"'><strong>ä¾å­˜æ€§ã®æ³¨å…¥</strong></abbr>ã‚·ã‚¹ãƒ†ãƒ ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚

* ä¾å­˜é–¢ä¿‚ã§ã•ãˆã‚‚ä¾å­˜é–¢ä¿‚ã‚’æŒã¤ã“ã¨ãŒã§ãã€éšå±¤ã¾ãŸã¯ **ä¾å­˜é–¢ä¿‚ã®"ã‚°ãƒ©ãƒ•"** ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

* ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã£ã¦ã™ã¹ã¦**è‡ªå‹•çš„ã«å‡¦ç†**ã•ã‚Œã¾ã™ã€‚
* ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¦è«‹ã§ãã¦ã€**path operationsã®åˆ¶ç´„ã¨è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ‹¡å¼µã§ãã¾ã™**ã€‚
* ä¾å­˜é–¢ä¿‚ã§å®šç¾©ã•ã‚ŒãŸ *path operation* ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚**è‡ªå‹•æ¤œè¨¼**ãŒå¯èƒ½ã§ã™ã€‚
* è¤‡é›‘ãªãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã€**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š**ãªã©ã®ã‚µãƒãƒ¼ãƒˆ
* **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãªã©ã«å¯¾ã™ã‚‹å¦¥å”ã¯ã‚ã‚Šã¾ã›ã‚“**ã€‚ãã‚Œã‚‰ã™ã¹ã¦ã¨ç°¡å˜ã«çµ±åˆã§ãã¾ã™ã€‚

### ç„¡åˆ¶é™ã®ã€Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€

ä»–ã®æ–¹æ³•ã§ã¯ã€ãã‚Œã‚‰ã‚’å¿…è¦ã¨ã›ãšã€å¿…è¦ãªã‚³ãƒ¼ãƒ‰ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

çµ±åˆã¯éå¸¸ã«ç°¡å˜ã«ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šï¼ˆä¾å­˜é–¢ä¿‚ã‚’ç”¨ã„ã¦ï¼‰ã€*path operations* ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã®ã¨åŒã˜æ§‹é€ ã¨æ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¦ã€2è¡Œã®ã‚³ãƒ¼ãƒ‰ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã€Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ã‚’ä½œæˆã§ãã¾ã™ã€‚


### ãƒ†ã‚¹ãƒˆ

* <abbr title = "è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã®é‡">ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸</abbr> 100%
* <abbr title = "Pythonå‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚ˆã‚Šè‰¯ã„ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã¨å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã®ã‚µãƒãƒ¼ãƒˆå—ã‘ã‚‰ã‚Œã‚‹ã€‚">å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³</abbr>100%ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹
* æœ¬ç•ªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã•ã‚Œã¾ã™

## Starletteã®æ©Ÿèƒ½

**FastAPI**ã¯ã€<a href="https://www.starlette.io/" class="external-link" target="_blank"><strong>Starlette </strong></a>ã¨å®Œå…¨ã«äº’æ›æ€§ãŒã‚ã‚Šã¾ã™ï¼ˆãã—ã¦ãƒ™ãƒ¼ã‚¹ã«ãªã£ã¦ã„ã¾ã™ï¼‰ã€‚ã—ãŸãŒã£ã¦ã€è¿½åŠ ã®Starletteã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Œã°ã€ãã‚Œã‚‚æ©Ÿèƒ½ã—ã¾ã™ã€‚

`FastAPI`ã¯å®Ÿéš›ã«ã¯`Starlette`ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€Starletteã‚’ã™ã§ã«çŸ¥ã£ã¦ã„ã‚‹ã‹ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€ã»ã¨ã‚“ã©ã®æ©Ÿèƒ½ãŒåŒã˜ã‚ˆã†ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚

**FastAPI**ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã€**Starlette**ã®ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã¾ã™ï¼ˆFastAPIã¯Starletteã‚’å¼·åŒ–ã—ãŸã‚‚ã®ã«ã™ããªã„ãŸã‚ï¼‰:

* è¦‹äº‹ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€‚<a href="https://github.com/encode/starlette#performance" class="external-link" target="_blank"> **NodeJS**ãŠã‚ˆã³**Go**ã«åŒ¹æ•µã™ã‚‹ã€æœ€é€Ÿã®Pythonãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®1ã¤ã§ã™ã€‚</a>

* **WebSocket**ã®ã‚µãƒãƒ¼ãƒˆ
* **GraphQL**ã®ã‚µãƒãƒ¼ãƒˆ
* ãƒ—ãƒ­ã‚»ã‚¹å†…ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯
* èµ·å‹•ãŠã‚ˆã³ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
* `httpx`ã«åŸºã¥ã„ã¦æ§‹ç¯‰ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
* **CORS**ã€GZipã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”
* **ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨Cookie**ã®ã‚µãƒãƒ¼ãƒˆ
* ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸100%
* å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³100%ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹

## Pydanticã®ç‰¹å¾´

**FastAPI**ã¯<a href="https://docs.pydantic.dev/" class="external-link" target="_blank"><strong>Pydantic </strong></a>ã¨å®Œå…¨ã«äº’æ›æ€§ãŒã‚ã‚Šã¾ã™ï¼ˆãã—ã¦ãƒ™ãƒ¼ã‚¹ã«ãªã£ã¦ã„ã¾ã™ï¼‰ã€‚ã—ãŸãŒã£ã¦ã€è¿½åŠ ã®Pydanticã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Œã°ã€ãã‚Œã‚‚æ©Ÿèƒ½ã—ã¾ã™ã€‚

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãŸã‚ã«<abbr title = "Object-Relational Mapper">ORM</abbr>sã‚„ã€<abbr title = "Object-Document Mapper">ODM</abbr>sãªã©ã®ã€Pydanticã«åŸºã¥ãå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚

ã“ã‚Œã¯ã€ã™ã¹ã¦ãŒè‡ªå‹•çš„ã«æ¤œè¨¼ã•ã‚Œã‚‹ãŸã‚ã€å¤šãã®å ´åˆã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰å–å¾—ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ç›´æ¥**æ¸¡ã™ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã¾ã™ã€‚

åŒã˜ã“ã¨ãŒãã®é€†ã«ã‚‚å½“ã¦ã¯ã¾ã‚Šã€å¤šãã®å ´åˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ç›´æ¥**æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

**FastAPI**ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€**Pydantic**ã®ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã¾ã™ï¼ˆFastAPIãŒPydanticã«åŸºã¥ã„ã¦ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹ãŸã‚ï¼‰ã€‚

* **brainfuckãªã—**ï¼š
    * ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã®ãŸã‚ã®ãƒã‚¤ã‚¯ãƒ­è¨€èªã‚’æ–°ãŸã«å­¦ç¿’ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
    * Pythonã®å‹ã‚’çŸ¥ã£ã¦ã„ã‚‹å ´åˆã¯ã€æ—¢ã«Pydanticã®ä½¿ç”¨æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹ã«ç­‰ã—ã„ã§ã™ã€‚
* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® **<abbr title = "ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«ä¼¼ãŸçµ±åˆé–‹ç™ºç’°å¢ƒ">IDE</abbr>/<abbr title = "ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ">ãƒªãƒ³ã‚¿ãƒ¼</abbr>/æ€è€ƒ ã¨ã†ã¾ãé€£æºã—ã¾ã™**ï¼š
    * Pydanticã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®šç¾©ã™ã‚‹ã‚¯ãƒ©ã‚¹ã®å˜ãªã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ãŸã‚ã€ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã€ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°ã€mypyã€ãŠã‚ˆã³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›´æ„Ÿã¯ã™ã¹ã¦ã€æ¤œè¨¼æ¸ˆã¿ã®ãƒ‡ãƒ¼ã‚¿ã§é©åˆ‡ã«æ©Ÿèƒ½ã™ã‚‹ã¯ãšã§ã™ã€‚
* **è¤‡é›‘ãªæ§‹é€ **ã‚’æ¤œè¨¼ï¼š
    * éšå±¤çš„ãªPydanticãƒ¢ãƒ‡ãƒ«ã‚„ã€Pythonã®ã€Œ`typing`ã€ã®ã€Œ`list`ã€ã¨ã€Œ`dict`ã€ãªã©ã®åˆ©ç”¨ã€‚
    * ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ã«ã‚ˆã‚Šã€è¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒã‚’æ˜ç¢ºã‹ã¤ç°¡å˜ã«å®šç¾©ã€ãƒã‚§ãƒƒã‚¯ã—ã€JSONã‚¹ã‚­ãƒ¼ãƒã¨ã—ã¦æ–‡æ›¸åŒ–ã§ãã¾ã™ã€‚
    * æ·±ã**ãƒã‚¹ãƒˆã•ã‚ŒãŸJSON**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ãã‚Œã‚‰ã™ã¹ã¦ã‚’æ¤œè¨¼ã—ã¦ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
* **æ‹¡å¼µå¯èƒ½**ï¼š
    * Pydanticã§ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ãƒ¼ã‚¿å‹ã‚’å®šç¾©ã§ãã¾ã™ã€‚ã¾ãŸã¯ã€ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§è£…é£¾ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦æ¤œè¨¼ã‚’æ‹¡å¼µã§ãã¾ã™ã€‚
* ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 100%ã€‚


================================================
File: /docs/ja/docs/help-fastapi.md
================================================
# FastAPIã‚’å¿œæ´ - ãƒ˜ãƒ«ãƒ—ã®å…¥æ‰‹

**FastAPI** ã¯æ°—ã«å…¥ã‚Šã¾ã—ãŸã‹ï¼Ÿ

FastAPIã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„é–‹ç™ºè€…ã‚’å¿œæ´ã—ãŸã„ã§ã™ã‹ï¼Ÿ

ã‚‚ã—ãã¯ã€ **FastAPI** ã«ã¤ã„ã¦ãƒ˜ãƒ«ãƒ—ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ

ã¨ã¦ã‚‚ç°¡å˜ã«å¿œæ´ã§ãã¾ã™ (ãŸã 1ã€2å›ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã ã‘ã®ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™)ã€‚

ã¾ãŸã€ãƒ˜ãƒ«ãƒ—ã‚’å…¥æ‰‹ã™ã‚‹æ‰‹æ®µãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

## GitHubã§ **FastAPI** ã«Star

GitHubã§FastAPIã«ã€ŒStarã€ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ (å³ä¸Šéƒ¨ã®Starãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. â­ï¸

ã‚¹ã‚¿ãƒ¼ã‚’å¢—ã‚„ã™ã“ã¨ã§ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›®ã«ã¤ãã‚„ã™ããªã‚Šã€å¤šãã®äººã«ã¨ã£ã¦ä¾¿åˆ©ãªã‚‚ã®ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã›ã¾ã™ã€‚

## GitHubãƒ¬ãƒã‚¸ãƒˆãƒªã®ãƒªãƒªãƒ¼ã‚¹ã‚’Watch

GitHubã§FastAPIã‚’ã€ŒWatchã€ã§ãã¾ã™ (å³ä¸Šéƒ¨ã®Watchãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. ğŸ‘€

ãã“ã§ã€ŒReleases onlyã€ã‚’é¸æŠã§ãã¾ã™ã€‚

ã“ã‚Œã‚’è¡Œã†ã¨ã€**FastAPI** ãƒã‚°ä¿®æ­£ã‚„æ–°æ©Ÿèƒ½ã®å®Ÿè£…ãªã©ã®æ–°ã—ã„ãƒªãƒªãƒ¼ã‚¹ (æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³) ãŒã‚ã‚‹ãŸã³ã« (ãƒ¡ãƒ¼ãƒ«ã§) é€šçŸ¥ã‚’å—ã‘å–ã‚Œã¾ã™ã€‚

## é–‹ç™ºè€…ã¨ã¤ãªãŒã‚‹

ä»¥ä¸‹ã§ã€<a href="https://tiangolo.com" class="external-link" target="_blank">é–‹ç™ºè€… (SebastiÃ¡n RamÃ­rez / `tiangolo`)</a> ã¨ã‚³ãƒ³ã‚¿ã‚¯ãƒˆã‚’ã¨ã‚Œã¾ã™:

* <a href="https://github.com/tiangolo" class="external-link" target="_blank">**GitHub** ã§ãƒ•ã‚©ãƒ­ãƒ¼</a>ã€‚
    * ä»–ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¢ºèªã§ãã¾ã™ã€‚ä½•ã‹ã®åŠ©ã‘ã«ãªã‚‹ã‚‚ã®ãŒè¦‹ã¤ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
    * æ–°ãŸãªã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ãŸã¨ãã«é€šçŸ¥ã•ã‚Œã¾ã™ã€‚
* <a href="https://twitter.com/tiangolo" class="external-link" target="_blank">**Twitter** ã§ãƒ•ã‚©ãƒ­ãƒ¼</a>ã€‚
    * FastAPIã®ä½¿ç”¨ç”¨é€”ã‚’æ•™ãˆã¦ãã ã•ã„ (èã„ã¦ã¿ãŸã„ã§ã™)ã€‚
    * æ–°ãŸãªãƒ„ãƒ¼ãƒ«ã®ç™ºè¡¨ã‚„ãƒªãƒªãƒ¼ã‚¹ãŒèã‘ã¾ã™ã€‚
* <a href="https://www.linkedin.com/in/tiangolo/" class="external-link" target="_blank">**Linkedin** ã§ã¤ãªãŒã‚‹</a>ã€‚
    * æ–°ãŸãªãƒ„ãƒ¼ãƒ«ã®ç™ºè¡¨ã‚„ãƒªãƒªãƒ¼ã‚¹ãŒèã‘ã¾ã™ (ãŸã ã—Twitterã®æ–¹ãŒåˆ©ç”¨é »åº¦ãŒé«˜ã„ã§ã™ãŒ ğŸ¤·â€â™‚)ã€‚
* <a href="https://dev.to/tiangolo" class="external-link" target="_blank">**Dev.to**</a> ã‚„ <a href="https://medium.com/@tiangolo" class="external-link" target="_blank">**Medium**</a> ã§è‘—ä½œç‰©ã‚’èª­ã‚€ (ã¾ãŸã¯ãƒ•ã‚©ãƒ­ãƒ¼)ã€‚
    * ã‚¢ã‚¤ãƒ‡ã‚¢ã‚„ä½œæˆãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦ã®è¨˜äº‹ãŒèª­ã‚ã¾ã™ã€‚
    * æ–°è¦è¨˜äº‹ã®åŸ·ç­†ã‚’é€šçŸ¥ã—ã¦ãã‚Œã¾ã™ã€‚

## **FastAPI** ã«é–¢ã™ã‚‹ãƒ„ã‚¤ãƒ¼ãƒˆ

<a href="https://twitter.com/compose/tweet?text=I'm loving FastAPI because... https://github.com/fastapi/fastapi cc @tiangolo" class="external-link" target="_blank">**FastAPI** ã«ã¤ã„ã¦ãƒ„ã‚¤ãƒ¼ãƒˆ</a>ã—ã€é–‹ç™ºè€…ã‚„ä»–ã®äººã«ã©ã“ãŒæ°—ã«å…¥ã£ãŸã®ã‹æ•™ãˆã¦ãã ã•ã„ã€‚ğŸ‰

**FastAPI** ãŒã©ã®ã‚ˆã†ã«ä½¿ã‚ã‚Œã€ã©ã“ãŒæ°—ã«å…¥ã‚‰ã‚Œã€ã©ã‚“ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ/ä¼šç¤¾ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹ãªã©ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„ã§ã™ã€‚

## FastAPIã«æŠ•ç¥¨

* <a href="https://www.slant.co/options/34241/~fastapi-review" class="external-link" target="_blank">Slantã§ **FastAPI** ã«æŠ•ç¥¨</a>
* <a href="https://alternativeto.net/software/fastapi/" class="external-link" target="_blank">AlternativeToã§ **FastAPI** ã«æŠ•ç¥¨</a>
* <a href="https://github.com/marmelab/awesome-rest/pull/93" class="external-link" target="_blank">awesome-restã§ **FastAPI** ã«æŠ•ç¥¨</a>

## GitHub issuesã§ä»–ã®äººã‚’åŠ©ã‘ã‚‹

<a href="https://github.com/fastapi/fastapi/issues" class="external-link" target="_blank">æ—¢å­˜ã®issues</a>ã‚’ç¢ºèªã—ã¦ã€ä»–ã®äººã‚’åŠ©ã‘ã¦ã¿ã¦ãã ã•ã„ã€‚çš†ã•ã‚“ãŒå›ç­”ã‚’çŸ¥ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„è³ªå•ãŒã»ã¨ã‚“ã©ã§ã™ã€‚ğŸ¤“

## GitHubãƒ¬ãƒã‚¸ãƒˆãƒªã‚’Watch

GitHubã§FastAPIã‚’ã€Œwatchã€ã§ãã¾ã™ (å³ä¸Šéƒ¨ã®ã€Œwatchã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯): <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">https://github.com/fastapi/fastapi</a>. ğŸ‘€

ã€ŒReleases onlyã€ã§ã¯ãªãã€ŒWatchingã€ã‚’é¸æŠã™ã‚‹ã¨ã€æ–°ãŸãªissueãŒç«‹ã¦ã‚‰ã‚ŒãŸéš›ã«é€šçŸ¥ã•ã‚Œã¾ã™ã€‚

ãã—ã¦ã€issueã‚’è§£æ±ºã—ä»–ã®äººã‚’åŠ©ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## issuesã‚’ç«‹ã¦ã‚‹

GitHubãƒ¬ãƒã‚¸ãƒˆãƒªã§<a href="https://github.com/fastapi/fastapi/issues/new/choose" class="external-link" target="_blank">æ–°ãŸãªissueã‚’ç«‹ã¦ã‚‰ã‚Œã¾ã™</a>ã€‚ä¾‹ãˆã°:

* è³ªå•ã€ã¾ãŸã¯ã€å•é¡Œã®å ±å‘Š
* æ–°æ©Ÿèƒ½ã®ææ¡ˆ

**Note**: issueã‚’ç«‹ã¦ãŸäººã¯ã€ä»–ã®äººã®æ‰‹åŠ©ã‘ã‚‚ãŠé¡˜ã„ã—ã¾ã™ã€‚ğŸ˜‰

## ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã‚‹

ä»¥ä¸‹ã®æ§˜ãª<a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ</a>ã§ãã¾ã™:

* ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ã‚’ä¿®æ­£ã€‚
* æ–°ãŸãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ææ¡ˆã€‚
* æ—¢å­˜ã®issue/ãƒã‚°ã‚’ä¿®æ­£ã€‚
* æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã€‚

## é–‹ç™ºè€…ã®ã‚¹ãƒãƒ³ã‚µãƒ¼ã«ãªã‚‹

<a href="https://github.com/sponsors/tiangolo" class="external-link" target="_blank">GitHub sponsors</a>ã‚’é€šã—ã¦é–‹ç™ºè€…ã‚’çµŒæ¸ˆçš„ã«ã‚µãƒãƒ¼ãƒˆã§ãã¾ã™ã€‚

ãã“ã§ã€æ„Ÿè¬ã®æ°—æŒã¡ã‚’ä¼ãˆã‚‹ãŸã‚ã«ã‚³ãƒ¼ãƒ’ãƒ¼â˜•ï¸ã‚’è²·ã†ã“ã¨ãŒã§ãã¾ã™ ğŸ˜„ã€‚

## FastAPIã‚’å¼·åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®ã‚¹ãƒãƒ³ã‚µãƒ¼ã«ãªã‚‹

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§è¦‹ãŸã‚ˆã†ã«ã€FastAPIã¯Starletteã¨Pydanticã¨ã„ã†å·¨äººã®è‚©ã«ä¹—ã£ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚¹ãƒãƒ³ã‚µãƒ¼ã«ãªã‚‹ã“ã¨ã‚‚ã§ãã¾ã™:

* <a href="https://github.com/sponsors/samuelcolvin" class="external-link" target="_blank">Samuel Colvin (Pydantic)</a>
* <a href="https://github.com/sponsors/encode" class="external-link" target="_blank">Encode (Starlette, Uvicorn)</a>

---

Thanks! ğŸš€


================================================
File: /docs/ja/docs/history-design-future.md
================================================
# æ­´å²ã€è¨­è¨ˆã€ãã—ã¦ã“ã‚Œã‹ã‚‰

å°‘ã—å‰ã«ã€<a href="https://github.com/fastapi/fastapi/issues/3#issuecomment-454956920" class="external-link" target="_blank">**FastAPI**
ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä»¥ä¸‹ã®æ§˜ã«å°‹ã­ã‚‰ã‚Œã¾ã—ãŸ</a>:

> ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ­´å²ã¯ï¼Ÿä½•ã‚‚ãªã„ã¨ã“ã‚ã‹ã‚‰ã€æ•°é€±é–“ã§ã™ã”ã„ã‚‚ã®ãŒã§ãã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ [...]

ã“ã‚ŒãŒãã®æ­´å²ã®ã»ã‚“ã®ä¸€éƒ¨ã§ã™ã€‚

## ä»£æ›¿æ‰‹æ®µ

æ•°å¹´å‰ã‹ã‚‰ã€ç§ã¯è¤‡é›‘ãªè¦ä»¶ã‚’æŒã¤API (æ©Ÿæ¢°å­¦ç¿’ã€åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã€éåŒæœŸã‚¸ãƒ§ãƒ–ã€NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãªã©) ã‚’ä½œæˆã—ã¦ãŠã‚Šã€ã„ãã¤ã‹ã®é–‹ç™ºè€…ãƒãƒ¼ãƒ ã‚’ç‡ã„ã¦ã„ã¾ã™ã€‚

ãã®ä¸€ç’°ã§ã€å¤šãã®æ–¹æ³•ã‚’èª¿æŸ»ã—ã€ãƒ†ã‚¹ãƒˆã—ã€åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

**FastAPI** ã®æ­´å²ã¯ã€ãã®å‰èº«ã®æ­´å²ãŒå¤§éƒ¨åˆ†ã‚’å ã‚ã¦ã„ã¾ã™ã€‚

[ä»£æ›¿ãƒ„ãƒ¼ãƒ«ã‹ã‚‰å—ã‘ãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨æ¯”è¼ƒ](alternatives.md){.internal-link target=_blank}ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã“ã†è¿°ã¹ã¦ã„ã¾ã™:

<blockquote markdown="1">

**FastAPI**ã¯ã€ä»£æ›¿ãƒ„ãƒ¼ãƒ«ã®ã“ã‚Œã¾ã§ã®åƒããŒãªã‘ã‚Œã°å­˜åœ¨ã—ãªã‹ã£ãŸã§ã—ã‚‡ã†ã€‚

ä»¥å‰ã«ä½œã‚‰ã‚ŒãŸå¤šãã®ãƒ„ãƒ¼ãƒ«ãŒã€ä½œæˆã«ãŠã‘ã‚‹åˆºæ¿€ã¨ã—ã¦å½¹ç«‹ã£ã¦ãã¾ã—ãŸã€‚

ç§ã¯æ•°å¹´å‰ã‹ã‚‰æ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä½œæˆã‚’é¿ã‘ã¦ãã¾ã—ãŸã€‚ã¾ãšã€**FastAPI**ã§ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’ã€ã•ã¾ã–ã¾ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦è§£æ±ºã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã€‚

ã—ã‹ã—ã€ãã®æ™‚ç‚¹ã§ã¯ã€ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ã™ã¹ã¦æä¾›ã—ã€ä»¥å‰ã®ãƒ„ãƒ¼ãƒ«ã‹ã‚‰å„ªã‚ŒãŸã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å–ã‚Šå…¥ã‚Œã€å¯èƒ½ãªé™ã‚Šæœ€é«˜ã®æ–¹æ³•ã§ãã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã€ãã‚Œã¾ã§åˆ©ç”¨ã§ããªã‹ã£ãŸè¨€èªæ©Ÿèƒ½ (Python 3.6ä»¥é™ã®å‹ãƒ’ãƒ³ãƒˆ) ã‚’åˆ©ç”¨ã—ãŸã‚‚ã®ã‚’ä½œã‚‹ä»¥å¤–ã«é¸æŠè‚¢ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

</blockquote>

## èª¿æŸ»

ã™ã¹ã¦æ—¢å­˜ã®ä»£æ›¿æ‰‹æ®µã‚’ä½¿ã†ã“ã¨ã§ã€ãã®ã™ã¹ã¦ã‚’å­¦ã³ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å¾—ã¦ã€è‡ªåˆ†ã‚„ä¸€ç·’ã«ä»•äº‹ã‚’ã—ã¦ããŸé–‹ç™ºè€…ã®ãƒãƒ¼ãƒ ã«ã¨ã£ã¦æœ€è‰¯ã®æ–¹æ³•ã§çµ„ã¿åˆã‚ã›ã‚‹æ©Ÿä¼šã‚’å¾—ã¾ã—ãŸã€‚

ãŸã¨ãˆã°ã€ç†æƒ³çš„ã«ã¯Pythonã®æ¨™æº–çš„ãªå‹ãƒ’ãƒ³ãƒˆã«åŸºã¥ãã¹ãã§ã‚ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã«ãªã‚Šã¾ã—ãŸã€‚

ã¾ãŸã€ã™ã§ã«ã‚ã‚‹è¦æ ¼ã‚’åˆ©ç”¨ã™ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆãªæ–¹æ³•ã§ã—ãŸã€‚

ãã“ã§ã€**FastAPI**ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå§‹ã‚ã‚‹å‰ã«ã€OpenAPIã€JSON Schemaã€OAuth2ãªã©ã®ä»•æ§˜ã‚’æ•°ãƒ¶æœˆã‹ã‘ã¦å‹‰å¼·ã—ã€ãã‚Œã‚‰ã®é–¢ä¿‚ã€é‡è¤‡ã™ã‚‹ç®‡æ‰€ã€ç›¸é•ç‚¹ã‚’ç†è§£ã—ã¾ã—ãŸã€‚

## è¨­è¨ˆ

ãã®å¾Œã€ (FastAPIã‚’ä½¿ã†é–‹ç™ºè€…ã¨ã—ã¦) ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ¬²ã—ã„ã€ŒAPIã€ã®è¨­è¨ˆã«æ™‚é–“ã‚’è²»ã‚„ã—ã¾ã—ãŸã€‚

ã‚‚ã£ã¨ã‚‚äººæ°—ã®ã‚ã‚‹Pythonã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ã„ãã¤ã‹ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã—ãŸã€‚PyCharmã€VS Codeã€Jediãƒ™ãƒ¼ã‚¹ã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ã™ã€‚

æœ€æ–°ã® <a href="https://www.jetbrains.com/research/python-developers-survey-2018/#development-tools" class="external-link" target="_blank">Pythoné–‹ç™ºè€…èª¿æŸ»</a>ã§ã€ãã‚Œã‚‰ã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®80%ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã—ãŸã€‚

ã“ã‚Œã¯ã€**FastAPI**ãŒPythoné–‹ç™ºè€…ã®80%ãŒä½¿ç”¨ã—ã¦ã„ã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ç‰¹åˆ¥ã«ãƒ†ã‚¹ãƒˆã•ã‚ŒãŸã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ã¾ãŸã€ã»ã¨ã‚“ã©ã®ä»–ã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚‚åŒæ§˜ã«å‹•ä½œã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ãŸã‚ã€ã“ã®æ©æµã¯äº‹å®Ÿä¸Šã™ã¹ã¦ã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ã†ã‘ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ã€‚

ãã†ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’å¯èƒ½ãªé™ã‚Šæ¸›ã‚‰ã—ã€ã©ã“ã§ã‚‚è£œå®ŒãŒã‚ã‚‹ã‚ˆã†ã«ã—ã€ã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯ã‚„ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ãªã©ã‚’å®Ÿç¾ã™ã‚‹æœ€å–„ã®æ–¹æ³•ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚

ã™ã¹ã¦ã®ç®‡æ‰€ã§ã€ã™ã¹ã¦ã®é–‹ç™ºè€…ã«æœ€é«˜ã®é–‹ç™ºä½“é¨“ã‚’æä¾›ã—ã¾ã—ãŸã€‚

## è¦ä»¶

ã„ãã¤ã‹ã®ä»£æ›¿æ‰‹æ³•ã‚’è©¦ã—ãŸã‚ã¨ã€ç§ã¯<a href="https://docs.pydantic.dev/" class="external-link" target="_blank">**Pydantic**</a>ã®å¼·ã¿ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚’æ±ºã‚ã¾ã—ãŸã€‚

ãã—ã¦ã€JSON Schemaã«å®Œå…¨ã«æº–æ‹ ã™ã‚‹ã‚ˆã†ã«ã—ãŸã‚Šã€åˆ¶ç´„å®£è¨€ã‚’å®šç¾©ã™ã‚‹ã•ã¾ã–ã¾ãªæ–¹æ³•ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã‚Šã€ã„ãã¤ã‹ã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ã®ãƒ†ã‚¹ãƒˆã«åŸºã¥ã„ã¦ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®ã‚µãƒãƒ¼ãƒˆ (å‹ãƒã‚§ãƒƒã‚¯ã€è‡ªå‹•è£œå®Œ) ã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã«è²¢çŒ®ã—ã¾ã—ãŸã€‚

é–‹ç™ºä¸­ã€ã‚‚ã†1ã¤ã®é‡è¦ãªéµã¨ãªã‚‹<a href="https://www.starlette.io/" class="external-link" target="_blank">**Starlette**</a>ã€ã«ã‚‚è²¢çŒ®ã—ã¾ã—ãŸã€‚

## é–‹ç™º

ç§ãŒ**FastAPI**è‡ªä½“ã®ä½œæˆã‚’é–‹å§‹ã—ãŸæ™‚ã«ã¯ã€ã»ã¨ã‚“ã©ã®éƒ¨åˆ†ãŒã™ã§ã«æº–å‚™ã•ã‚Œã¦ãŠã‚Šã€è¨­è¨ˆãŒå®šç¾©ã•ã‚Œã€å¿…è¦ãªæ¡ä»¶ã¨ãƒ„ãƒ¼ãƒ«ã®æº–å‚™ãŒã§ãã¦ã„ã¾ã—ãŸã€‚ãã—ã¦è¦æ ¼ã‚„ä»•æ§˜ã«é–¢ã™ã‚‹çŸ¥è­˜ãŒã€æ˜ç¢ºã«ãªã‚Šã€æ›´æ–°ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

## ã“ã‚Œã‹ã‚‰

ã“ã®æ™‚ç‚¹ã§ã™ã§ã«ã€ã“ã‚Œã‚‰ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æŒã£ãŸ**FastAPI**ãŒå¤šãã®äººã®å½¹ã«ç«‹ã£ã¦ã„ã‚‹ã“ã¨ã¯æ˜ã‚‰ã‹ã§ã™ã€‚

å¤šãã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«é©ã—ã¦ã„ã‚‹ãŸã‚ã€æ—¢å­˜ã®æ–¹æ³•ã‚ˆã‚Šã‚‚é¸ã°ã‚Œã¦ã„ã¾ã™ã€‚

å¤šãã®é–‹ç™ºè€…ã‚„ãƒãƒ¼ãƒ ãŒã€ã™ã§ã« **FastAPI** ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¾å­˜ã—ã¦ã„ã¾ã™ (ç§ã¨ç§ã®ãƒãƒ¼ãƒ ã‚‚å«ã‚ã¦) ã€‚

ã—ã‹ã—ã€ã¾ã ã¾ã å¤šãã®æ”¹å–„ç‚¹ã‚„æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

**FastAPI**ã«ã¯å¤§ããªæœªæ¥ãŒå¾…ã£ã¦ã„ã¾ã™ã€‚

ãã—ã¦ã€[ã‚ãªãŸã®åŠ©ã‘](help-fastapi.md){.internal-link target=_blank}ã‚’å¤§ã„ã«æ­“è¿ã—ã¾ã™ã€‚


================================================
File: /docs/ja/docs/index.md
================================================
# FastAPI

<style>
.md-content .md-typeset h1 { display: none; }
</style>

<p align="center">
  <a href="https://fastapi.tiangolo.com"><img src="https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png" alt="FastAPI"></a>
</p>
<p align="center">
    <em>FastAPI framework, high performance, easy to learn, fast to code, ready for production</em>
</p>
<p align="center">
<a href="https://travis-ci.com/fastapi/fastapi" target="_blank">
    <img src="https://travis-ci.com/fastapi/fastapi.svg?branch=master" alt="Build Status">
</a>
<a href="https://codecov.io/gh/fastapi/fastapi" target="_blank">
    <img src="https://img.shields.io/codecov/c/github/fastapi/fastapi" alt="Coverage">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://badge.fury.io/py/fastapi.svg" alt="Package version">
</a>
</p>

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: <a href="https://fastapi.tiangolo.com" target="_blank">https://fastapi.tiangolo.com</a>

**ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰**: <a href="https://github.com/fastapi/fastapi" target="_blank">https://github.com/fastapi/fastapi</a>

---

FastAPI ã¯ã€Pythonã®æ¨™æº–ã§ã‚ã‚‹å‹ãƒ’ãƒ³ãƒˆã«åŸºã¥ã„ã¦Python ä»¥é™ã§API ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ã€ãƒ¢ãƒ€ãƒ³ã§ã€é«˜é€Ÿ(é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹)ãªã€Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚

ä¸»ãªç‰¹å¾´:

- **é«˜é€Ÿ**: **NodeJS** ã‚„ **Go** ä¸¦ã¿ã®ã¨ã¦ã‚‚é«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ (Starlette ã¨ Pydantic ã®ãŠã‹ã’ã§ã™)ã€‚ [æœ€ã‚‚é«˜é€Ÿãª Python ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸€ã¤ã§ã™](#_10).

- **é«˜é€Ÿãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: é–‹ç™ºé€Ÿåº¦ã‚’ç´„ 200%~300%å‘ä¸Šã•ã›ã¾ã™ã€‚ \*
- **å°‘ãªã„ãƒã‚°**: é–‹ç™ºè€…èµ·å› ã®ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ã‚¨ãƒ©ãƒ¼ã‚’ç´„ 40ï¼…å‰Šæ¸›ã—ã¾ã™ã€‚ \*
- **ç›´æ„Ÿçš„**: ç´ æ™´ã‚‰ã—ã„ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã‚„ <abbr title="also known as auto-complete, autocompletion, IntelliSense">ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã€‚</abbr> ãƒ‡ãƒãƒƒã‚°æ™‚é–“ã‚’å‰Šæ¸›ã—ã¾ã™ã€‚
- **ç°¡å˜**: ç°¡å˜ã«åˆ©ç”¨ã€ç¿’å¾—ã§ãã‚‹ã‚ˆã†ã«ãƒ‡ã‚¶ã‚¤ãƒ³ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€æ™‚é–“ã‚’å‰Šæ¸›ã—ã¾ã™ã€‚
- **çŸ­ã„**: ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’æœ€å°é™ã«ã—ã¦ã„ã¾ã™ã€‚å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ã®è¤‡æ•°ã®æ©Ÿèƒ½ã€‚å°‘ãªã„ãƒã‚°ã€‚
- **å …ç‰¢æ€§**: è‡ªå‹•å¯¾è©±ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã€æœ¬ç•ªç’°å¢ƒã§ä½¿ç”¨ã§ãã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã¾ã™ã€‚
- **Standards-based**: API ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã«åŸºã¥ã„ã¦ãŠã‚Šã€å®Œå…¨ã«äº’æ›æ€§ãŒã‚ã‚Šã¾ã™: <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> (ä»¥å‰ã¯ Swagger ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã—ãŸ) ã‚„ <a href="https://json-schema.org/" class="external-link" target="_blank">JSON ã‚¹ã‚­ãƒ¼ãƒ</a>.

<small>\* æœ¬ç•ªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ã„ã‚‹é–‹ç™ºãƒãƒ¼ãƒ ã®ãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹è¦‹ç©ã‚‚ã‚Šã€‚</small>

## Sponsors

<!-- sponsors -->

{% if sponsors %}
{% for sponsor in sponsors.gold -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor -%}
{%- for sponsor in sponsors.silver -%}
<a href="{{ sponsor.url }}" target="_blank" title="{{ sponsor.title }}"><img src="{{ sponsor.img }}" style="border-radius:15px"></a>
{% endfor %}
{% endif %}

<!-- /sponsors -->

<a href="https://fastapi.tiangolo.com/fastapi-people/#sponsors" class="external-link" target="_blank">Other sponsors</a>

## è©•ä¾¡

"_[...] æœ€è¿‘ **FastAPI** ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚ [...] å®Ÿéš›ã«ç§ã®ãƒãƒ¼ãƒ ã®å…¨ã¦ã® **Microsoft ã®æ©Ÿæ¢°å­¦ç¿’ã‚µãƒ¼ãƒ“ã‚¹** ã§ä½¿ç”¨ã™ã‚‹äºˆå®šã§ã™ã€‚ ãã®ã†ã¡ã®ã„ãã¤ã‹ã®ã‚³ã‚¢ãª**Windows**è£½å“ã¨**Office**è£½å“ã«çµ±åˆã•ã‚Œã¤ã¤ã‚ã‚Šã¾ã™ã€‚_"

<div style="text-align: right; margin-right: 10%;">Kabir Khan - <strong>Microsoft</strong> <a href="https://github.com/fastapi/fastapi/pull/26" target="_blank"><small>(ref)</small></a></div>

---

"_FastAPIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¡ç”¨ã—ã€ã‚¯ã‚¨ãƒªã§**äºˆæ¸¬å€¤**ã‚’å–å¾—ã§ãã‚‹**REST**ã‚µãƒ¼ãƒã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚ [for Ludwig]_"

<div style="text-align: right; margin-right: 10%;">Piero Molino, Yaroslav Dudin, and Sai Sumanth Miryala - <strong>Uber</strong> <a href="https://eng.uber.com/ludwig-v0-2/" target="_blank"><small>(ref)</small></a></div>

---

"_**Netflix** ã¯ã€**å±æ©Ÿç®¡ç†**ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€**Dispatch**ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒªãƒªãƒ¼ã‚¹ã‚’ç™ºè¡¨ã§ãã‚‹ã“ã¨ã‚’ã†ã‚Œã—ãæ€ã„ã¾ã™ã€‚ [built with **FastAPI**]_"

<div style="text-align: right; margin-right: 10%;">Kevin Glisson, Marc Vilanova, Forest Monsen - <strong>Netflix</strong> <a href="https://netflixtechblog.com/introducing-dispatch-da4b8a2a8072" target="_blank"><small>(ref)</small></a></div>

---

"_ç§ã¯**FastAPI**ã«ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¦ã„ã¾ã™ã€‚ ã‚ã¡ã‚ƒãã¡ã‚ƒæ¥½ã—ã„ã§ã™ï¼_"

<div style="text-align: right; margin-right: 10%;">Brian Okken - <strong><a href="https://pythonbytes.fm/episodes/show/123/time-to-right-the-py-wrongs?time_in_sec=855" target="_blank">Python Bytes</a> podcast host</strong> <a href="https://twitter.com/brianokken/status/1112220079972728832" target="_blank"><small>(ref)</small></a></div>

---

"_æ­£ç›´ã€è¶…å …å®Ÿã§æ´—ç·´ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚ã„ã‚ã‚“ãªæ„å‘³ã§ã€ãã‚Œã¯ç§ãŒãƒã‚°ã—ãŸã‹ã£ãŸã‚‚ã®ã§ã™ã€‚_"

<div style="text-align: right; margin-right: 10%;">Timothy Crosley - <strong><a href="https://github.com/hugapi/hug" target="_blank">Hug</a> creator</strong> <a href="https://news.ycombinator.com/item?id=19455465" target="_blank"><small>(ref)</small></a></div>

---

"_REST API ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®**ãƒ¢ãƒ€ãƒ³ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**ã‚’å­¦ã³ãŸã„æ–¹ã¯ã€**FastAPI** [...] ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ [...] é«˜é€Ÿã§, ä½¿ç”¨ã€ç¿’å¾—ãŒç°¡å˜ã§ã™ã€‚[...]_"

"_ç§ãŸã¡ã®**API**ã¯**FastAPI**ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚[...] ãã£ã¨æ°—ã«å…¥ã‚‹ã¨æ€ã„ã¾ã™ã€‚ [...]_"

<div style="text-align: right; margin-right: 10%;">Ines Montani - Matthew Honnibal - <strong><a href="https://explosion.ai" target="_blank">Explosion AI</a> founders - <a href="https://spacy.io" target="_blank">spaCy</a> creators</strong> <a href="https://twitter.com/_inesmontani/status/1144173225322143744" target="_blank"><small>(ref)</small></a> - <a href="https://twitter.com/honnibal/status/1144031421859655680" target="_blank"><small>(ref)</small></a></div>

---

## **Typer**, the FastAPI of CLIs

<a href="https://typer.tiangolo.com" target="_blank"><img src="https://typer.tiangolo.com/img/logo-margin/logo-margin-vector.svg" style="width: 20%;"></a>

ã‚‚ã— Web API ã®ä»£ã‚ã‚Šã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä½¿ç”¨ã™ã‚‹<abbr title="Command Line Interface">CLI</abbr>ã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã™ã‚‹å ´åˆã¯ã€<a href="https://typer.tiangolo.com/" class="external-link" target="_blank">**Typer**</a>ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

**Typer**ã¯ FastAPI ã®å¼Ÿåˆ†ã§ã™ã€‚ãã—ã¦ã€**CLI ç‰ˆ ã® FastAPI**ã‚’æ„å‘³ã—ã¦ã„ã¾ã™ã€‚

## å¿…è¦æ¡ä»¶

FastAPI ã¯å·¨äººã®è‚©ã®ä¸Šã«ç«‹ã£ã¦ã„ã¾ã™ã€‚

- Web ã®éƒ¨åˆ†ã¯<a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a>
- ãƒ‡ãƒ¼ã‚¿ã®éƒ¨åˆ†ã¯<a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a>

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

<div class="termy">

```console
$ pip install fastapi

---> 100%
```

</div>

æœ¬ç•ªç’°å¢ƒã§ã¯ã€<a href="https://www.uvicorn.org" class="external-link" target="_blank">Uvicorn</a> ã¾ãŸã¯ã€ <a href="https://github.com/pgjones/hypercorn" class="external-link" target="_blank">Hypercorn</a>ã®ã‚ˆã†ãªã€ ASGI ã‚µãƒ¼ãƒãƒ¼ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

<div class="termy">

```console
$ pip install "uvicorn[standard]"

---> 100%
```

</div>

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ

- `main.py` ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¾ã™:

```Python
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: str = None):
    return {"item_id": item_id, "q": q}
```

<details markdown="1">
<summary>ã¾ãŸã¯<code>async def</code>ã‚’ä½¿ã„ã¾ã™...</summary>

`async` / `await`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãã¯ã€ `async def`ã‚’ä½¿ã„ã¾ã™:

```Python hl_lines="7 12"
from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
async def read_item(item_id: int, q: str = None):
    return {"item_id": item_id, "q": q}
```

**æ³¨**:

ã‚ã‹ã‚‰ãªã„å ´åˆã¯ã€<a href="https://fastapi.tiangolo.com/async/#in-a-hurry" target="_blank">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®`async` ã¨ `await`ã«ã‚ã‚‹</a>"In a hurry?"ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

</details>

### å®Ÿè¡Œ

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¾ã™:

<div class="termy">

```console
$ uvicorn main:app --reload

INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [28720]
INFO:     Started server process [28722]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

</div>

<details markdown="1">
<summary><code>uvicorn main:app --reload</code>ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦</summary>

`uvicorn main:app`ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã®é …ç›®ã‚’å‚ç…§ã—ã¾ã™:

- `main`: `main.py`ãƒ•ã‚¡ã‚¤ãƒ« (Python "ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«")
- `app`: `main.py` ã®`app = FastAPI()`ã®è¡Œã§ç”Ÿæˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- `--reload`: ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ãŸã‚‰ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã—ã¾ã™ã€‚ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯é–‹ç™ºç’°å¢ƒã§ã®ã¿ä½¿ç”¨ã—ã¾ã™

</details>

### å‹•ä½œç¢ºèª

ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰<a href="http://127.0.0.1:8000/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1:8000/items/5?q=somequery</a>ã‚’é–‹ãã¾ã™ã€‚

ä»¥ä¸‹ã® JSON ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒç¢ºèªã§ãã¾ã™:

```JSON
{"item_id": 5, "q": "somequery"}
```

ã‚‚ã†ã™ã§ã«ä»¥ä¸‹ã® API ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™:

- `/` ã¨ `/items/{item_id}`ã®ãƒ‘ã‚¹ã§ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ã¾ã™ã€‚
- ã©ã¡ã‚‰ã®ãƒ‘ã‚¹ã‚‚ `GET` <em>æ“ä½œ</em> ã‚’å–ã‚Šã¾ã™ã€‚(HTTP ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚)
- `/items/{item_id}` ãƒ‘ã‚¹ã®ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `item_id` ã¯ `int` ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
- ãƒ‘ã‚¹ `/items/{item_id}` ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã® `str` ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `q` ã‚’æŒã¡ã¾ã™ã€‚

### è‡ªå‹•å¯¾è©±å‹ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

<a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

è‡ªå‹•å¯¾è©±å‹ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ (<a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>ãŒæä¾›ã—ã¦ã„ã¾ã™ã€‚):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### ä»£æ›¿ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

<a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

ä»£æ›¿ã®è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚(<a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>ãŒæä¾›ã—ã¦ã„ã¾ã™ã€‚):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ä¾‹

`PUT`ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ãƒœãƒ‡ã‚£ã‚’å—ã‘å–ã‚‹ãŸã‚ã«`main.py`ã‚’ä¿®æ­£ã—ã¾ã—ã‚‡ã†ã€‚

Pydantic ã«ã‚ˆã£ã¦ã€Python ã®æ¨™æº–çš„ãªå‹ã‚’ä½¿ã£ã¦ãƒœãƒ‡ã‚£ã‚’å®£è¨€ã—ã¾ã™ã€‚

```Python hl_lines="2  7 8 9 10  23 24 25"
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()


class Item(BaseModel):
    name: str
    price: float
    is_offer: bool = None


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: str = None):
    return {"item_id": item_id, "q": q}


@app.put("/items/{item_id}")
def update_item(item_id: int, item: Item):
    return {"item_name": item.name, "item_id": item_id}
```

ã‚µãƒ¼ãƒãƒ¼ã¯è‡ªå‹•ã§ãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚(ä¸Šè¿°ã®`uvicorn`ã‚³ãƒãƒ³ãƒ‰ã§`--reload`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚)

### è‡ªå‹•å¯¾è©±å‹ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

<a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚

- è‡ªå‹•å¯¾è©±å‹ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ–°ã—ã„ãƒœãƒ‡ã‚£ã‚‚å«ã‚ã¦è‡ªå‹•ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¾ã™:

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

- "Try it out"ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ API ã¨ç›´æ¥ã‚„ã‚Šã¨ã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-04-swagger-03.png)

- ãã‚Œã‹ã‚‰ã€"Execute" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ API ã¨é€šä¿¡ã—ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã€çµæœã‚’å–å¾—ã—ã¦ç”»é¢ã«è¡¨ç¤ºã—ã¾ã™:

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-05-swagger-04.png)

### ä»£æ›¿ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

<a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚

- ä»£æ›¿ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚‚æ–°ã—ã„ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ãƒœãƒ‡ã‚£ãŒåæ˜ ã•ã‚Œã¾ã™ã€‚

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### ã¾ã¨ã‚

è¦ç´„ã™ã‚‹ã¨ã€é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ãƒœãƒ‡ã‚£ ãªã©ã®å‹ã‚’**ä¸€åº¦ã ã‘**å®£è¨€ã—ã¾ã™ã€‚

æ¨™æº–çš„ãªæœ€æ–°ã® Python ã®å‹ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

æ–°ã—ã„æ§‹æ–‡ã‚„ç‰¹å®šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ã‚¯ãƒ©ã‚¹ãªã©ã‚’è¦šãˆã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

å˜ãªã‚‹æ¨™æº–çš„ãª**3.8 ä»¥é™ã® Python**ã§ã™ã€‚

ä¾‹ãˆã°ã€`int`ã®å ´åˆ:

```Python
item_id: int
```

ã¾ãŸã¯ã€ã‚ˆã‚Šè¤‡é›‘ãª`Item`ãƒ¢ãƒ‡ãƒ«ã®å ´åˆ:

```Python
item: Item
```

...ãã—ã¦ã€ã“ã®ä¸€åº¦ã®å®£è¨€ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

- ä»¥ä¸‹ã‚’å«ã‚€ã‚¨ãƒ‡ã‚£ã‚¿ã‚µãƒãƒ¼ãƒˆ:
  - è£œå®Œ
  - ã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯
- ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼:
  - ãƒ‡ãƒ¼ã‚¿ãŒç„¡åŠ¹ãªå ´åˆã«è‡ªå‹•ã§ã‚¨ãƒ©ãƒ¼ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚
  - æ·±ã„å…¥ã‚Œå­ã«ãªã£ãŸ JSON ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚æ¤œè¨¼ãŒå¯èƒ½ã§ã™ã€‚
- å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®<abbr title="also known as: serialization, parsing, marshalling">å¤‰æ›</abbr>: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ Python ã®ãƒ‡ãƒ¼ã‚¿ã‚„å‹ã«å¤‰æ›ã—ã¦ã‹ã‚‰èª­ã¿å–ã‚Šã¾ã™:
  - JSON.
  - ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
  - ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
  - ã‚¯ãƒƒã‚­ãƒ¼
  - ãƒ˜ãƒƒãƒ€ãƒ¼
  - ãƒ•ã‚©ãƒ¼ãƒ 
  - ãƒ•ã‚¡ã‚¤ãƒ«
- å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã®<abbr title="also known as: serialization, parsing, marshalling">å¤‰æ›</abbr>: Python ã®ãƒ‡ãƒ¼ã‚¿ã‚„å‹ã‹ã‚‰ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ‡ãƒ¼ã‚¿ã¸å¤‰æ›ã—ã¾ã™ (JSON ã¨ã—ã¦):
  - Convert Python types (`str`, `int`, `float`, `bool`, `list`, etc).
  - `datetime` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  - `UUID` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«
  - ...ãªã©ãªã©
- 2 ã¤ã®ä»£æ›¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å«ã‚€è‡ªå‹•ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ– API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:
  - Swagger UI.
  - ReDoc.

---

ã‚³ãƒ¼ãƒ‰ä¾‹ã«æˆ»ã‚Šã¾ã—ã‚‡ã†ã€**FastAPI** ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

- `GET`ãŠã‚ˆã³`PUT`ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ‘ã‚¹ã«`item_id` ãŒã‚ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚
- `item_id`ãŒ`GET`ãŠã‚ˆã³`PUT`ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã¦`int` å‹ã§ã‚ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚
  - ãã†ã§ãªã„å ´åˆã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯æœ‰ç”¨ã§æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
- `GET` ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã¦ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `q` (`http://127.0.0.1:8000/items/foo?q=somequery` ã®ã‚ˆã†ã«) ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’èª¿ã¹ã¾ã™ã€‚
  - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `q` ã¯ `= None` ã§å®£è¨€ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚
  - `None`ãŒãªã‘ã‚Œã°å¿…é ˆã«ãªã‚Šã¾ã™ï¼ˆ`PUT`ã®å ´åˆã®ãƒœãƒ‡ã‚£ã¨åŒæ§˜ã§ã™ï¼‰ã€‚
- `PUT` ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ `/items/{item_id}` ã«é€ä¿¡ã™ã‚‹å ´åˆã¯ã€ãƒœãƒ‡ã‚£ã‚’ JSON ã¨ã—ã¦èª­ã¿è¾¼ã¿ã¾ã™:
  - å¿…é ˆã®å±æ€§ `name` ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ ãã‚Œã¯ `str` ã§ã‚ã‚‹ã¹ãã§ã™ã€‚
  - å¿…é ˆã®å±æ€§ `price` ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãã‚Œã¯ `float` ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã§ã™ã€‚
  - ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å±æ€§ `is_offer` ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚å€¤ãŒã‚ã‚‹å ´åˆã¯ã€`bool` ã§ã‚ã‚‹ã¹ãã§ã™ã€‚
  - ã“ã‚Œã‚‰ã¯ã™ã¹ã¦ã€æ·±ããƒã‚¹ãƒˆã•ã‚ŒãŸ JSON ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦ã‚‚å‹•ä½œã—ã¾ã™ã€‚
- JSON ã‹ã‚‰ JSON ã«è‡ªå‹•çš„ã«å¤‰æ›ã—ã¾ã™ã€‚
- OpenAPIã§ã™ã¹ã¦ã‚’æ–‡æ›¸åŒ–ã—ã€ä»¥ä¸‹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:
  - å¯¾è©±çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã€‚
  - å¤šãã®è¨€èªã«å¯¾å¿œã—ãŸè‡ªå‹•ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã€‚
- 2 ã¤ã®å¯¾è©±çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’ç›´æ¥æä¾›ã—ã¾ã™ã€‚

---

ã¾ã è¡¨é¢çš„ãªéƒ¨åˆ†ã«è§¦ã‚ŒãŸã ã‘ã§ã™ãŒã€ã‚‚ã†å…¨ã¦ã®ä»•çµ„ã¿ã¯åˆ†ã‹ã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚

ä»¥ä¸‹ã®è¡Œã‚’å¤‰æ›´ã—ã¦ã¿ã¦ãã ã•ã„:

```Python
    return {"item_name": item.name, "item_id": item_id}
```

...ä»¥ä¸‹ã‚’:

```Python
        ... "item_name": item.name ...
```

...ä»¥ä¸‹ã®ã‚ˆã†ã«:

```Python
        ... "item_price": item.price ...
```

...ãã—ã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ãŒå±æ€§ã‚’è‡ªå‹•è£œå®Œã—ã€ãã®ã‚¿ã‚¤ãƒ—ã‚’çŸ¥ã‚‹æ–¹æ³•ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚:

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

ã‚ˆã‚Šå¤šãã®æ©Ÿèƒ½ã‚’å«ã‚€ã€ã‚ˆã‚Šå®Œå…¨ãªä¾‹ã«ã¤ã„ã¦ã¯ã€<a href="https://fastapi.tiangolo.com/tutorial/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰</a>ã‚’ã”è¦§ãã ã•ã„ã€‚

**ãƒã‚¿ãƒãƒ¬æ³¨æ„**: ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰ã¯ä»¥ä¸‹ã®æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™:

- **ãƒ˜ãƒƒãƒ€ãƒ¼**ã€**ã‚¯ãƒƒã‚­ãƒ¼**ã€**ãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**ã€**ãƒ•ã‚¡ã‚¤ãƒ«**ãªã©ã®ä»–ã®å ´æ‰€ã‹ã‚‰ã® **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿** å®£è¨€ã€‚
- `maximum_length`ã‚„`regex`ã®ã‚ˆã†ãª**æ¤œè¨¼ã‚„åˆ¶ç´„**ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã€‚
- éå¸¸ã«å¼·åŠ›ã§ä½¿ã„ã‚„ã™ã„ <abbr title="also known as components, resources, providers, services, injectables">**ä¾å­˜æ€§æ³¨å…¥**</abbr>ã‚·ã‚¹ãƒ†ãƒ ã€‚
- **JWT ãƒˆãƒ¼ã‚¯ãƒ³**ã‚’ç”¨ã„ãŸ **OAuth2** ã‚„ **HTTP Basic èªè¨¼** ã®ã‚µãƒãƒ¼ãƒˆã‚’å«ã‚€ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨èªè¨¼ã€‚
- **æ·±ããƒã‚¹ãƒˆã•ã‚ŒãŸ JSON ãƒ¢ãƒ‡ãƒ«**ã‚’å®£è¨€ã™ã‚‹ãŸã‚ã®ã‚ˆã‚Šé«˜åº¦ãªï¼ˆã—ã‹ã—åŒæ§˜ã«ç°¡å˜ãªï¼‰æŠ€è¡“ï¼ˆPydantic ã®ãŠã‹ã’ã§ã™ï¼‰ã€‚
- ä»¥ä¸‹ã®ã‚ˆã†ãªãŸãã•ã‚“ã®ãŠã¾ã‘æ©Ÿèƒ½(Starlette ã®ãŠã‹ã’ã§ã™):
  - **WebSockets**
  - **GraphQL**
  - `httpx` ã‚„ `pytest`ã‚’ã‚‚ã¨ã«ã—ãŸæ¥µé™ã«ç°¡å˜ãªãƒ†ã‚¹ãƒˆ
  - **CORS**
  - **ã‚¯ãƒƒã‚­ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³**
  - ...ãªã©ãªã©ã€‚

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

ç‹¬ç«‹ã—ãŸ TechEmpower ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯ã€Uvicorn ã§å‹•ä½œã™ã‚‹**FastAPI**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã€<a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">Python ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸­ã§æœ€ã‚‚é«˜é€Ÿãªã‚‚ã®ã® 1 ã¤</a>ã§ã‚ã‚Šã€Starlette ã¨ Uvicornï¼ˆFastAPI ã§å†…éƒ¨çš„ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ï¼‰ã«ã®ã¿ä¸‹å›ã£ã¦ã„ã‚‹ã¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

è©³ç´°ã¯<a href="https://fastapi.tiangolo.com/benchmarks/" class="internal-link" target="_blank">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</a>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ãã ã•ã„ã€‚

## ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¾å­˜é–¢ä¿‚

Pydantic ã«ã‚ˆã£ã¦ä½¿ç”¨ã•ã‚Œã‚‹ã‚‚ã®:

- <a href="https://github.com/JoshData/python-email-validator" target="_blank"><code>email-validator</code></a> - E ãƒ¡ãƒ¼ãƒ«ã®æ¤œè¨¼

Starlette ã«ã‚ˆã£ã¦ä½¿ç”¨ã•ã‚Œã‚‹ã‚‚ã®:

- <a href="https://www.python-httpx.org" target="_blank"><code>httpx</code></a> - `TestClient`ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚
- <a href="https://jinja.palletsprojects.com" target="_blank"><code>jinja2</code></a> - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®šã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯å¿…è¦ã§ã™ã€‚
- <a href="https://github.com/Kludex/python-multipart" target="_blank"><code>python-multipart</code></a> - <abbr title="converting the string that comes from an HTTP request into Python data">"parsing"</abbr>`request.form()`ã‹ã‚‰ã®å¤‰æ›ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„å ´åˆã¯å¿…è¦ã§ã™ã€‚
- <a href="https://pythonhosted.org/itsdangerous/" target="_blank"><code>itsdangerous</code></a> - `SessionMiddleware` ã‚µãƒãƒ¼ãƒˆã®ãŸã‚ã«ã¯å¿…è¦ã§ã™ã€‚
- <a href="https://pyyaml.org/wiki/PyYAMLDocumentation" target="_blank"><code>pyyaml</code></a> - Starlette ã® `SchemaGenerator` ã‚µãƒãƒ¼ãƒˆã®ãŸã‚ã«å¿…è¦ã§ã™ã€‚ (FastAPI ã§ã¯å¿…è¦ãªã„ã§ã—ã‚‡ã†ã€‚)
- <a href="https://graphene-python.org/" target="_blank"><code>graphene</code></a> - `GraphQLApp` ã‚µãƒãƒ¼ãƒˆã®ãŸã‚ã«ã¯å¿…è¦ã§ã™ã€‚

FastAPI / Starlette ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚‚ã®:

- <a href="https://www.uvicorn.org" target="_blank"><code>uvicorn</code></a> - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚µãƒ¼ãƒ–ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã®ãŸã‚ã€‚
- <a href="https://github.com/ijl/orjson" target="_blank"><code>orjson</code></a> - `ORJSONResponse`ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã¯å¿…è¦ã§ã™ã€‚
- <a href="https://github.com/esnme/ultrajson" target="_blank"><code>ujson</code></a> - `UJSONResponse`ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯å¿…é ˆã§ã™ã€‚

ã“ã‚Œã‚‰ã¯å…¨ã¦ `pip install fastapi[all]`ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§ã™ã€‚


================================================
File: /docs/ja/docs/project-generation.md
================================================
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ã€åˆæœŸè¨­å®šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€åˆæœŸAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãªã©ã®å¤šããŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹å§‹ã«åˆ©ç”¨ã§ãã¾ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯å¸¸ã«éå¸¸ã«æ„è¦‹ãŒåˆ†ã‹ã‚Œã‚‹è¨­å®šãŒã•ã‚Œã¦ãŠã‚Šã€ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦æ›´æ–°ãŠã‚ˆã³èª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ãã£ã¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è‰¯ã„å‡ºç™ºç‚¹ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚

## ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ FastAPI PostgreSQL

GitHub: <a href="https://github.com/tiangolo/full-stack-fastapi-postgresql" class="external-link" target="_blank">https://github.com/tiangolo/full-stack-fastapi-postgresql</a>

### ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ FastAPI PostgreSQL - æ©Ÿèƒ½

* å®Œå…¨ãª**Docker**ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (Dockerãƒ™ãƒ¼ã‚¹)ã€‚
* Docker Swarm ãƒ¢ãƒ¼ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ã€‚
* ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒå‘ã‘ã®**Docker Compose**ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨æœ€é©åŒ–ã€‚
* Uvicornã¨Gunicornã‚’ä½¿ç”¨ã—ãŸ**ãƒªãƒªãƒ¼ã‚¹å¯èƒ½ãª** Python web ã‚µãƒ¼ãƒã€‚
* Python <a href="https://github.com/fastapi/fastapi" class="external-link" target="_blank">**FastAPI**</a> ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰:
    * **é«˜é€Ÿ**: **NodeJS** ã‚„ **Go** ä¸¦ã¿ã®ã¨ã¦ã‚‚é«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ (Starlette ã¨ Pydantic ã®ãŠã‹ã’)ã€‚
    * **ç›´æ„Ÿçš„**: ç´ æ™´ã‚‰ã—ã„ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã‚„ <abbr title="è‡ªå‹•è£œå®Œã€ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ã¨ã‚‚å‘¼ã°ã‚Œã‚‹">è£œå®Œã€‚</abbr> ãƒ‡ãƒãƒƒã‚°æ™‚é–“ã®çŸ­ç¸®ã€‚
    * **ç°¡å˜**: ç°¡å˜ã«åˆ©ç”¨ã€ç¿’å¾—ã§ãã‚‹ã‚ˆã†ãªãƒ‡ã‚¶ã‚¤ãƒ³ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€æ™‚é–“ã‚’å‰Šæ¸›ã€‚
    * **çŸ­ã„**: ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’æœ€å°é™ã«ã€‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å®£è¨€ã«ã‚ˆã‚‹è¤‡æ•°ã®æ©Ÿèƒ½ã€‚
    * **å …ç‰¢æ€§**: è‡ªå‹•å¯¾è©±ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸã€æœ¬ç•ªç’°å¢ƒã§ä½¿ç”¨ã§ãã‚‹ã‚³ãƒ¼ãƒ‰ã€‚
    * **æ¨™æº–è¦æ ¼æº–æ‹ **: API ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã«åŸºãã€å®Œå…¨ãªäº’æ›æ€§: <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a>ã‚„ <a href="http://json-schema.org/" class="external-link" target="_blank">JSON ã‚¹ã‚­ãƒ¼ãƒ</a>ã€‚
    * è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€å¯¾è©±çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€OAuth2 JWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”¨ã„ãŸèªè¨¼ãªã©ã‚’å«ã‚€ã€<a href="https://fastapi.tiangolo.com/features/" class="external-link" target="_blank">**ãã®ä»–å¤šãã®æ©Ÿèƒ½**</a>ã€‚
* **ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰** ãƒãƒƒã‚·ãƒ¥åŒ– (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§)ã€‚
* **JWTãƒˆãƒ¼ã‚¯ãƒ³** èªè¨¼ã€‚
* **SQLAlchemy** ãƒ¢ãƒ‡ãƒ« (Flaskç”¨ã®æ‹¡å¼µã¨ç‹¬ç«‹ã—ã¦ã„ã‚‹ã®ã§ã€Celeryãƒ¯ãƒ¼ã‚«ãƒ¼ã¨ç›´æ¥çš„ã«ä½µç”¨ã§ãã¾ã™)ã€‚
* åŸºæœ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ« (ä»»æ„ã®ä¿®æ­£ã‚„å‰Šé™¤ãŒå¯èƒ½)ã€‚
* **Alembic** ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
* **CORS** (Cross Origin Resource Sharing (ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚½ãƒ¼ã‚¹å…±æœ‰))ã€‚
* **Celery** ãƒ¯ãƒ¼ã‚«ãƒ¼ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®æ®‹ã‚Šã®éƒ¨åˆ†ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã¨ã‚³ãƒ¼ãƒ‰ã‚’é¸æŠçš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ä½¿ç”¨å¯èƒ½ã€‚
* Dockerã¨çµ±åˆã•ã‚ŒãŸ**Pytest**ãƒ™ãƒ¼ã‚¹ã®RESTãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¾å­˜ã›ãšã«ã€å…¨ã¦ã®APIã‚’ãƒ†ã‚¹ãƒˆå¯èƒ½ã€‚Dockerä¸Šã§å‹•ä½œã™ã‚‹ã®ã§ã€æ¯å›ã‚¼ãƒ­ã‹ã‚‰æ–°ãŸãªãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‚’æ§‹ç¯‰å¯èƒ½ã€‚(ElasticSearchã€MongoDBã€CouchDBãªã©ã‚’ä½¿ç”¨ã—ã¦ã€APIã®å‹•ä½œã‚’ãƒ†ã‚¹ãƒˆå¯èƒ½)
* Atom Hydrogenã‚„Visual Studio Code Jupyterãªã©ã®æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ãŸã€ãƒªãƒ¢ãƒ¼ãƒˆã¾ãŸã¯Dockeré–‹ç™ºç”¨ã®**Jupyterã‚«ãƒ¼ãƒãƒ«**ã¨ã®ç°¡å˜ãªPythonçµ±åˆã€‚
* **Vue** ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰:
    * Vue CLIã«ã‚ˆã‚Šç”Ÿæˆã€‚
    * **JWTèªè¨¼**ã®å‡¦ç†ã€‚
    * ãƒ­ã‚°ã‚¤ãƒ³ãƒ“ãƒ¥ãƒ¼ã€‚
    * ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ã€ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ“ãƒ¥ãƒ¼ã€‚
    * ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã¨ç·¨é›†ã€‚
    * ã‚»ãƒ«ãƒ•ãƒ¦ãƒ¼ã‚¶ãƒ¼ç‰ˆ
    * **Vuex**ã€‚
    * **Vue-router**ã€‚
    * ç¾ã—ã„ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãŸã‚ã®**Vuetify**ã€‚
    * **TypeScript**ã€‚
    * **Nginx**ãƒ™ãƒ¼ã‚¹ã®Dockerã‚µãƒ¼ãƒ (Vue-routerã¨ã†ã¾ãå”èª¿ã™ã‚‹æ§‹æˆ)ã€‚
    * Dockerãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®ä¿å­˜ã‚„ã‚³ãƒŸãƒƒãƒˆãŒä¸è¦ã€‚
    * ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ (ç„¡åŠ¹åŒ–ã‚‚å¯èƒ½)ã€‚
    * å¯èƒ½ãªé™ã‚Šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚Œã¦ã„ã‚‹ã®ã§ãã®ã¾ã¾ä½¿ç”¨ã§ãã¾ã™ãŒã€Vue CLIã§å†ç”Ÿæˆã—ãŸã‚Šã€å¿…è¦ã«å¿œã˜ã¦ä½œæˆã—ãŸã‚Šã—ã¦ã€å¿…è¦ãªã‚‚ã®ã‚’å†åˆ©ç”¨å¯èƒ½ã€‚
* PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãŸã‚ã®**PGAdmin**ã€‚(PHPMyAdminã¨MySQLã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ç°¡å˜ã«å¤‰æ›´å¯èƒ½)
* Celeryã‚¸ãƒ§ãƒ–ç›£è¦–ã®ãŸã‚ã®**Flower**ã€‚
* **Traefik**ã‚’ä½¿ç”¨ã—ã¦ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–“ã‚’ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã€‚åŒä¸€ãƒ‰ãƒ¡ã‚¤ãƒ³ã«é…ç½®ã—ãƒ‘ã‚¹ã§åŒºåˆ‡ã‚‹ã€ãŸã ã—ã€ç•°ãªã‚‹ã‚³ãƒ³ãƒ†ãƒŠã§å‡¦ç†ã€‚
* Traefikçµ±åˆã€‚Let's Encrypt **HTTPS**è¨¼æ˜æ›¸ã®è‡ªå‹•ç”Ÿæˆã‚’å«ã‚€ã€‚
* GitLab **CI** (ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŠã‚ˆã³ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã‚’å«ã‚€ã€‚

## ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ FastAPI Couchbase

GitHub: <a href="https://github.com/tiangolo/full-stack-fastapi-couchbase" class="external-link" target="_blank">https://github.com/tiangolo/full-stack-fastapi-couchbase</a>

âš ï¸ **è­¦å‘Š** âš ï¸

ã‚¼ãƒ­ã‹ã‚‰æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å§‹ã‚ã‚‹å ´åˆã¯ã€ã“ã“ã§ä»£æ›¿æ¡ˆã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ä¾‹ãˆã°ã€<a href="https://github.com/tiangolo/full-stack-fastapi-postgresql" class="external-link" target="_blank">ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ FastAPI PostgreSQL</a>ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ã€ç©æ¥µçš„ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã€åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã®ã§ã‚ˆã‚Šè‰¯ã„ä»£æ›¿æ¡ˆã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã¾ãŸã€ã™ã¹ã¦ã®æ–°æ©Ÿèƒ½ã¨æ”¹å–„ç‚¹ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

Couchbaseãƒ™ãƒ¼ã‚¹ã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ä»Šã‚‚ç„¡å„Ÿæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚æã‚‰ãæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã§ã—ã‚‡ã†ã€‚ã¾ãŸã€ã™ã§ã«ãã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå­˜åœ¨ã™ã‚‹å ´åˆã§ã‚‚ (ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“)ã€åŒæ§˜ã«æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã¯ãšã§ã™ã€‚

è©³ç´°ã¯ãƒ¬ãƒã‚¸ãƒˆãƒªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ä¸‹ã•ã„ã€‚

## ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ FastAPI MongoDB

...æ™‚é–“ã®éƒ½åˆç­‰ã«ã‚ˆã£ã¦ã¯ã€ä»Šå¾Œä½œæˆã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ğŸ˜… ğŸ‰

## spaCyã¨FastAPIã‚’ä½¿ç”¨ã—ãŸæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«

GitHub: <a href="https://github.com/microsoft/cookiecutter-spacy-fastapi" class="external-link" target="_blank">https://github.com/microsoft/cookiecutter-spacy-fastapi</a>

### spaCyã¨FastAPIã‚’ä½¿ç”¨ã—ãŸæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ« - æ©Ÿèƒ½

* **spaCy** ã®NERãƒ¢ãƒ‡ãƒ«ã®çµ±åˆã€‚
* **Azure Cognitive Search** ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æ­è¼‰ã€‚
* **ãƒªãƒªãƒ¼ã‚¹å¯èƒ½ãª** Uvicornã¨Gunicornã‚’ä½¿ç”¨ã—ãŸPythonã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒã€‚
* **Azure DevOps** ã®Kubernetes (AKS) CI/CD ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’æ­è¼‰ã€‚
* **å¤šè¨€èª** ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«ã€ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã«è¨€èªã‚’å®¹æ˜“ã«é¸æŠå¯èƒ½ (spaCyã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹è¨€èªã®ä¸­ã‹ã‚‰)ã€‚
* **ç°¡å˜ã«æ‹¡å¼µå¯èƒ½**ã€‚spaCyã ã‘ã§ãªãã€ä»–ã®ãƒ¢ãƒ‡ãƒ«ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (Pytorchã€Tensorflow) ã¸ã€‚


================================================
File: /docs/ja/docs/python-types.md
================================================
# Pythonã®å‹ã®ç´¹ä»‹

**Python 3.6ä»¥é™** ã§ã¯ã€Œå‹ãƒ’ãƒ³ãƒˆã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã® **"å‹ãƒ’ãƒ³ãƒˆ"** ã¯å¤‰æ•°ã®<abbr title="ä¾‹: str, int, float, bool">å‹</abbr>ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã‚‹æ–°ã—ã„æ§‹æ–‡ã§ã™ã€‚ï¼ˆPython 3.6ä»¥é™ï¼‰

å¤‰æ•°ã«å‹ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã§ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚„ãƒ„ãƒ¼ãƒ«ãŒã‚ˆã‚Šè‰¯ã„ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã“ã§ã¯Pythonã®å‹ãƒ’ãƒ³ãƒˆã«ã¤ã„ã¦ã® **ã‚¯ã‚¤ãƒƒã‚¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«/ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥** ã§ã€**FastAPI**ã§ãã‚Œã‚‰ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«å¿…è¦ãªæœ€ä½é™ã®ã“ã¨ã ã‘ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚...å®Ÿéš›ã«ã¯æœ¬å½“ã«å°‘ãªã„ã§ã™ã€‚

**FastAPI** ã¯ã™ã¹ã¦ã“ã‚Œã‚‰ã®å‹ãƒ’ãƒ³ãƒˆã«åŸºã¥ã„ã¦ãŠã‚Šã€å¤šãã®å¼·ã¿ã¨åˆ©ç‚¹ã‚’ä¸ãˆã¦ãã‚Œã¾ã™ã€‚

ã—ã‹ã—ãŸã¨ãˆã¾ã£ãŸã **FastAPI** ã‚’ä½¿ç”¨ã—ãªã„å ´åˆã§ã‚‚ã€ãã‚Œã‚‰ã«ã¤ã„ã¦å°‘ã—å­¦ã¶ã“ã¨ã§åˆ©ç‚¹ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚

/// note | å‚™è€ƒ

ã‚‚ã—ã‚ãªãŸãŒPythonã®å°‚é–€å®¶ã§ã€ã™ã§ã«å‹ãƒ’ãƒ³ãƒˆã«ã¤ã„ã¦ã™ã¹ã¦çŸ¥ã£ã¦ã„ã‚‹ã®ã§ã‚ã‚Œã°ã€æ¬¡ã®ç« ã¾ã§èª­ã¿é£›ã°ã—ã¦ãã ã•ã„ã€‚

///

## å‹•æ©Ÿ

ç°¡å˜ãªä¾‹ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†:

{* ../../docs_src/python_types/tutorial001.py *}


ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ãŒå‡ºåŠ›ã•ã‚Œã¾ã™:

```
John Doe
```

ã“ã®é–¢æ•°ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ã‚’è¡Œã„ã¾ã™:

* `first_name`ã¨`last_name`ã‚’å–å¾—ã—ã¾ã™ã€‚
* `title()`ã‚’ç”¨ã„ã¦ã€ãã‚Œãã‚Œã®æœ€åˆã®æ–‡å­—ã‚’å¤§æ–‡å­—ã«å¤‰æ›ã—ã¾ã™ã€‚
* çœŸã‚“ä¸­ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œã¦<abbr title="æ¬¡ã‹ã‚‰æ¬¡ã¸ã¨ä¸­èº«ã‚’å…¥ã‚Œã¦ä¸€ã¤ã«ã¾ã¨ã‚ã‚‹">é€£çµ</abbr>ã—ã¾ã™ã€‚

{* ../../docs_src/python_types/tutorial001.py hl[2] *}


### ç·¨é›†

ã“ã‚Œã¯ã¨ã¦ã‚‚ç°¡å˜ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚

ã—ã‹ã—ã€ä»Šã€ã‚ãªãŸãŒãã‚Œã‚’ä¸€ã‹ã‚‰æ›¸ã„ã¦ã„ãŸã¨æƒ³åƒã—ã¦ã¿ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æº–å‚™ãŒã§ãã¦ã„ãŸã‚‰ã€ãã®ã¨ãã€é–¢æ•°ã®å®šç¾©ã‚’å§‹ã‚ã¦ã„ãŸã“ã¨ã§ã—ã‚‡ã†...

ã—ã‹ã—ã€ãã†ã™ã‚‹ã¨ã€Œæœ€åˆã®æ–‡å­—ã‚’å¤§æ–‡å­—ã«å¤‰æ›ã™ã‚‹ã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã€ã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã‚Œã¯`upper`ã§ã—ãŸã‹ï¼Ÿ`uppercase`ã§ã—ãŸã‹ï¼Ÿãã‚Œã¨ã‚‚`first_uppercase`ï¼Ÿã¾ãŸã¯`capitalize`ï¼Ÿ

ãã—ã¦ã€å¤ãã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®å‹äººã§ã‚ã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ã§è‡ªå‹•è£œå®Œã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚

é–¢æ•°ã®æœ€åˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿`first_name`ã‚’å…¥åŠ›ã—ã€ãƒ‰ãƒƒãƒˆ(`.`)ã‚’å…¥åŠ›ã—ã¦ã‹ã‚‰ã€`Ctrl+Space`ã‚’æŠ¼ã™ã¨è£œå®ŒãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

ã—ã‹ã—ã€æ‚²ã—ã„ã“ã¨ã«ã€ã“ã‚Œã¯ãªã‚“ã®å½¹ã«ã‚‚ç«‹ã¡ã¾ã›ã‚“:

<img src="https://fastapi.tiangolo.com/img/python-types/image01.png">

### å‹ã®è¿½åŠ 

å…ˆã»ã©ã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ä¸€è¡Œå¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ä»¥ä¸‹ã®é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿éƒ¨åˆ†ã‚’:

```Python
    first_name, last_name
```

ä»¥ä¸‹ã¸å¤‰æ›´ã—ã¾ã™:

```Python
    first_name: str, last_name: str
```

ã“ã‚Œã ã‘ã§ã™ã€‚

ãã‚ŒãŒã€Œå‹ãƒ’ãƒ³ãƒˆã€ã§ã™:

{* ../../docs_src/python_types/tutorial002.py hl[1] *}


ã“ã‚Œã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å®£è¨€ã™ã‚‹ã®ã¨åŒã˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“:

```Python
    first_name="john", last_name="doe"
```

ãã‚Œã¨ã¯åˆ¥ç‰©ã§ã™ã€‚

ã‚¤ã‚³ãƒ¼ãƒ«ï¼ˆ`=`ï¼‰ã§ã¯ãªãã€ã‚³ãƒ­ãƒ³ï¼ˆ`:`ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ãã—ã¦ã€é€šå¸¸ã€å‹ãƒ’ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¦ã‚‚ã€ãã‚Œã‚‰ãŒãªã„çŠ¶æ…‹ã¨èµ·ã“ã‚‹ã“ã¨ã¯ä½•ã‚‚å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚

ã—ã‹ã—ä»Šã€ã‚ãªãŸãŒå†ã³ãã®é–¢æ•°ã‚’ä½œæˆã—ã¦ã„ã‚‹æœ€ä¸­ã«ã€å‹ãƒ’ãƒ³ãƒˆã‚’ä½¿ã£ã¦ã„ã‚‹ã¨æƒ³åƒã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚

åŒã˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§`Ctrl+Space`ã§è‡ªå‹•è£œå®Œã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

<img src="https://fastapi.tiangolo.com/img/python-types/image02.png">

ã“ã‚Œã§ã‚ã‚Œã°ã€ã‚ãªãŸã¯ã€Œãƒ™ãƒ«ã‚’é³´ã‚‰ã™ã€ä¸€ã¤ã‚’è¦‹ã¤ã‘ã‚‹ã¾ã§ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¦ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

<img src="https://fastapi.tiangolo.com/img/python-types/image03.png">

## ã‚ˆã‚Šå¼·ã„å‹•æ©Ÿ

ã“ã®é–¢æ•°ã‚’è¦‹ã¦ãã ã•ã„ã€‚ã™ã§ã«å‹ãƒ’ãƒ³ãƒˆã‚’æŒã£ã¦ã„ã¾ã™:

{* ../../docs_src/python_types/tutorial003.py hl[1] *}


ã‚¨ãƒ‡ã‚£ã‚¿ã¯å¤‰æ•°ã®å‹ã‚’çŸ¥ã£ã¦ã„ã‚‹ã®ã§ã€è£œå®Œã ã‘ã§ãªãã€ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

<img src="https://fastapi.tiangolo.com/img/python-types/image04.png">

ã“ã‚Œã§`age`ã‚’`str(age)`ã§æ–‡å­—åˆ—ã«å¤‰æ›ã—ã¦ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™:

{* ../../docs_src/python_types/tutorial004.py hl[2] *}


## å‹ã®å®£è¨€

é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã€å‹ãƒ’ãƒ³ãƒˆã‚’å®£è¨€ã—ã¦ã„ã‚‹ä¸»ãªå ´æ‰€ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚

ã“ã‚Œã¯ **FastAPI** ã§ä½¿ç”¨ã™ã‚‹ä¸»ãªå ´æ‰€ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

### å˜ç´”ãªå‹

`str`ã ã‘ã§ãªãã€Pythonã®æ¨™æº–çš„ãªå‹ã™ã¹ã¦ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€ä»¥ä¸‹ã‚’ä½¿ç”¨å¯èƒ½ã§ã™:

* `int`
* `float`
* `bool`
* `bytes`

{* ../../docs_src/python_types/tutorial005.py hl[1] *}


### å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã¤ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹

ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ä¸­ã«ã¯ã€`dict`ã€`list`ã€`set`ã€ãã—ã¦`tuple`ã®ã‚ˆã†ã«ä»–ã®å€¤ã‚’å«ã‚€ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸå†…éƒ¨ã®å€¤ã‚‚ç‹¬è‡ªã®å‹ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚Œã‚‰ã®å‹ã‚„å†…éƒ¨ã®å‹ã‚’å®£è¨€ã™ã‚‹ã«ã¯ã€Pythonã®æ¨™æº–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«`typing`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®å‹ãƒ’ãƒ³ãƒˆã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ç‰¹åˆ¥ã«å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚

#### `List`

ä¾‹ãˆã°ã€`str`ã®`list`ã®å¤‰æ•°ã‚’å®šç¾©ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

`typing`ã‹ã‚‰`List`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ï¼ˆå¤§æ–‡å­—ã®`L`ã‚’å«ã‚€ï¼‰:

{* ../../docs_src/python_types/tutorial006.py hl[1] *}


åŒã˜ã‚ˆã†ã«ã‚³ãƒ­ãƒ³ï¼ˆ`:`ï¼‰ã®æ§‹æ–‡ã§å¤‰æ•°ã‚’å®£è¨€ã—ã¾ã™ã€‚

å‹ã¨ã—ã¦ã€`List`ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

ãƒªã‚¹ãƒˆã¯ã„ãã¤ã‹ã®å†…éƒ¨ã®å‹ã‚’å«ã‚€å‹ãªã®ã§ã€ãã‚Œã‚‰ã‚’è§’æ‹¬å¼§ã§å›²ã‚“ã§ã„ã¾ã™ã€‚

{* ../../docs_src/python_types/tutorial006.py hl[4] *}


/// tip | è±†çŸ¥è­˜

è§’æ‹¬å¼§å†…ã®å†…éƒ¨ã®å‹ã¯ã€Œå‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ã¨å‘¼ã°ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã®å ´åˆã€`str`ã¯`List`ã«æ¸¡ã•ã‚Œã‚‹å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™ã€‚

///

ã¤ã¾ã‚Š: å¤‰æ•°`items`ã¯`list`ã§ã‚ã‚Šã€ã“ã®ãƒªã‚¹ãƒˆã®å„é …ç›®ã¯`str`ã§ã™ã€‚

ãã†ã™ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ‡ã‚£ã‚¿ã¯ãƒªã‚¹ãƒˆã®é …ç›®ã‚’å‡¦ç†ã—ã¦ã„ã‚‹é–“ã«ã‚‚ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã§ãã¾ã™ã€‚

<img src="https://fastapi.tiangolo.com/img/python-types/image05.png">

ã‚¿ã‚¤ãƒ—ãŒãªã‘ã‚Œã°ã€ãã‚Œã¯ã»ã¼ä¸å¯èƒ½ã§ã™ã€‚

å¤‰æ•°`item`ã¯ãƒªã‚¹ãƒˆ`items`ã®è¦ç´ ã®ä¸€ã¤ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

ãã‚Œã§ã‚‚ã€ã‚¨ãƒ‡ã‚£ã‚¿ã¯ãã‚ŒãŒ`str`ã§ã‚ã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦ã„ã¦ã€ãã®ãŸã‚ã®ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

#### `Tuple` ã¨ `Set`

`tuple`ã¨`set`ã®å®£è¨€ã‚‚åŒæ§˜ã§ã™:

{* ../../docs_src/python_types/tutorial007.py hl[1,4] *}


ã¤ã¾ã‚Š:

* å¤‰æ•°`items_t`ã¯`int`ã€`int`ã€`str`ã®3ã¤ã®é …ç›®ã‚’æŒã¤`tuple`ã§ã™

* å¤‰æ•°`items_s`ã¯ãã‚Œãã‚Œã®é …ç›®ãŒ`bytes`å‹ã§ã‚ã‚‹`set`ã§ã™ã€‚

#### `Dict`

`dict`ã‚’å®£è¨€ã™ã‚‹ãŸã‚ã«ã¯ã€ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§2ã¤ã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¾ã™ã€‚

æœ€åˆã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯`dict`ã®ã‚­ãƒ¼ã§ã™ã€‚

ï¼’ç•ªç›®ã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯`dict`ã®å€¤ã§ã™ã€‚

{* ../../docs_src/python_types/tutorial008.py hl[1,4] *}


ã¤ã¾ã‚Š:

* å¤‰æ•°`prices`ã¯`dict`ã§ã‚ã‚Š:
    * ã“ã®`dict`ã®ã‚­ãƒ¼ã¯`str`å‹ã§ã™ã€‚ï¼ˆã¤ã¾ã‚Šã€å„é …ç›®ã®åå‰ï¼‰
    * ã“ã®`dict`ã®å€¤ã¯`float`å‹ã§ã™ã€‚ï¼ˆã¤ã¾ã‚Šã€å„é …ç›®ã®ä¾¡æ ¼ï¼‰

#### `Optional`

ã¾ãŸã€`Optional`ã‚’ä½¿ç”¨ã—ã¦ã€å¤‰æ•°ãŒ`str`ã®ã‚ˆã†ãªå‹ã‚’æŒã¤ã“ã¨ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ãã‚Œã¯ã€Œã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ã§ã‚ã‚Šã€`None`ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```Python hl_lines="1 4"
{!../../docs_src/python_types/tutorial009.py!}
```

ãŸã ã®`str`ã®ä»£ã‚ã‚Šã«`Optional[str]`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ‡ã‚£ã‚¿ã¯å€¤ãŒå¸¸ã«`str`ã§ã‚ã‚‹ã¨ä»®å®šã—ã¦ã„ã‚‹å ´åˆã«å®Ÿéš›ã«ã¯`None`ã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡ºã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

#### ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹

ä»¥ä¸‹ã®ã‚ˆã†ã«è§’æ‹¬å¼§ã§å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–ã‚‹å‹ã‚’:

* `List`
* `Tuple`
* `Set`
* `Dict`
* `Optional`
* ...ãªã©

**ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹** ã¾ãŸã¯ **ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹** ã¨å‘¼ã³ã¾ã™ã€‚

### å‹ã¨ã—ã¦ã®ã‚¯ãƒ©ã‚¹

å¤‰æ•°ã®å‹ã¨ã—ã¦ã‚¯ãƒ©ã‚¹ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€`Person`ã‚¯ãƒ©ã‚¹ã¨ã„ã†åå‰ã®ã‚¯ãƒ©ã‚¹ãŒã‚ã‚‹ã¨ã—ã¾ã—ã‚‡ã†:

{* ../../docs_src/python_types/tutorial010.py hl[1,2,3] *}


å¤‰æ•°ã®å‹ã‚’`Person`ã¨ã—ã¦å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/python_types/tutorial010.py hl[6] *}


ãã—ã¦ã€å†ã³ã€ã™ã¹ã¦ã®ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™:

<img src="https://fastapi.tiangolo.com/img/python-types/image06.png">

## Pydanticã®ãƒ¢ãƒ‡ãƒ«

<a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> ã¯ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã‚’è¡Œã†ãŸã‚ã®Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

ãƒ‡ãƒ¼ã‚¿ã®ã€Œå½¢ã€ã‚’å±æ€§ä»˜ãã®ã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®£è¨€ã—ã¾ã™ã€‚

ãã—ã¦ã€ãã‚Œãã‚Œã®å±æ€§ã¯å‹ã‚’æŒã¡ã¾ã™ã€‚

ã•ã‚‰ã«ã€ã„ãã¤ã‹ã®å€¤ã‚’æŒã¤ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ã¨ã€ãã®å€¤ã‚’æ¤œè¨¼ã—ã€é©åˆ‡ãªå‹ã«å¤‰æ›ã—ã¦ï¼ˆã‚‚ã—ãã†ã§ã‚ã‚Œã°ï¼‰å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚

ã¾ãŸã€ãã®çµæœã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã¹ã¦ã®ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

Pydanticã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰å¼•ç”¨:

{* ../../docs_src/python_types/tutorial011.py *}


/// info | æƒ…å ±

Pydanticã«ã¤ã„ã¦ã‚ˆã‚Šå­¦ã³ãŸã„æ–¹ã¯<a href="https://docs.pydantic.dev/" class="external-link" target="_blank">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„</a>.

///

**FastAPI** ã¯ã™ã¹ã¦Pydanticã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã¾ã™ã€‚

ã™ã¹ã¦ã®ã“ã¨ã¯[ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](tutorial/index.md){.internal-link target=_blank}ã§å®Ÿéš›ã«è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## **FastAPI**ã§ã®å‹ãƒ’ãƒ³ãƒˆ

**FastAPI** ã¯ã“ã‚Œã‚‰ã®å‹ãƒ’ãƒ³ãƒˆã‚’åˆ©ç”¨ã—ã¦ã„ãã¤ã‹ã®ã“ã¨ã‚’è¡Œã„ã¾ã™ã€‚

**FastAPI** ã§ã¯å‹ãƒ’ãƒ³ãƒˆã‚’ä½¿ã£ã¦å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®£è¨€ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚‚ã®ãŒå¾—ã‚‰ã‚Œã¾ã™:

* **ã‚¨ãƒ‡ã‚£ã‚¿ã‚µãƒãƒ¼ãƒˆ**.
* **å‹ãƒã‚§ãƒƒã‚¯**.

...ãã—ã¦ **FastAPI** ã¯åŒã˜ã‚ˆã†ã«å®£è¨€ã‚’ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã“ã¨ã‚’è¡Œã„ã¾ã™:

* **è¦ä»¶ã®å®šç¾©**: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã€ãƒœãƒ‡ã‚£ã€ä¾å­˜é–¢ä¿‚ãªã©ã‹ã‚‰è¦ä»¶ã‚’å®šç¾©ã—ã¾ã™ã€‚
* **ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›**: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’å¿…è¦ãªå‹ã«å¤‰æ›ã—ã¾ã™ã€‚
* **ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼**: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«:
    * ãƒ‡ãƒ¼ã‚¿ãŒç„¡åŠ¹ãªå ´åˆã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¿”ã•ã‚Œã‚‹ **è‡ªå‹•ã‚¨ãƒ©ãƒ¼** ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
* **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** OpenAPIã‚’ä½¿ç”¨ã—ãŸAPI:
    * è‡ªå‹•çš„ã«å¯¾è©±å‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

ã™ã¹ã¦ãŒæŠ½è±¡çš„ã«èã“ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å¿ƒé…ã—ãªã„ã§ãã ã•ã„ã€‚ ã“ã®å…¨ã¦ã®å‹•ä½œã¯ [ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](tutorial/index.md){.internal-link target=_blank}ã§è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

é‡è¦ãªã®ã¯ã€Pythonã®æ¨™æº–çš„ãªå‹ã‚’ä½¿ã†ã“ã¨ã§ã€ï¼ˆã‚¯ãƒ©ã‚¹ã‚„ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãªã©ã‚’è¿½åŠ ã™ã‚‹ã®ã§ã¯ãªãï¼‰ï¼‘ã¤ã®å ´æ‰€ã§ **FastAPI** ãŒå¤šãã®ä½œæ¥­ã‚’ä»£ã‚ã‚Šã«ã‚„ã£ã¦ãã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚

/// info | æƒ…å ±

ã™ã§ã«ã™ã¹ã¦ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’çµ‚ãˆã¦ã€å‹ã«ã¤ã„ã¦ã®è©³ç´°ã‚’è¦‹ã‚‹ãŸã‚ã«ã“ã®ãƒšãƒ¼ã‚¸ã«æˆ»ã£ã¦ããŸå ´åˆã¯ã€<a href="https://mypy.readthedocs.io/en/latest/cheat_sheet_py3.html" class="external-link" target="_blank">`mypy`ã®ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„</a>

///


================================================
File: /docs/ja/docs/advanced/additional-status-codes.md
================================================
# è¿½åŠ ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ **FastAPI** ã¯ `JSONResponse` ã‚’ä½¿ã£ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚ãã® `JSONResponse` ã®ä¸­ã«ã¯ã€ *path operation* ãŒè¿”ã—ãŸå†…å®¹ãŒå…¥ã‚Šã¾ã™ã€‚

ãã‚Œã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã€ *path operation* ã§ã‚»ãƒƒãƒˆã—ãŸã‚‚ã®ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

## è¿½åŠ ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰

ãƒ¡ã‚¤ãƒ³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ã¯åˆ¥ã«ã€ä»–ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¿”ã—ãŸã„å ´åˆã¯ã€`Response` (`JSONResponse` ãªã©) ã«è¿½åŠ ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ç›´æ¥è¿”ã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€itemã‚’æ›´æ–°ã—ã€æˆåŠŸã—ãŸå ´åˆã¯200 "OK"ã®HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¿”ã™ *path operation* ã‚’ä½œã‚ŠãŸã„ã¨ã—ã¾ã™ã€‚

ã—ã‹ã—ã€æ–°ã—ã„itemã‚‚è¨±å¯ã—ãŸã„ã§ã™ã€‚itemãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€ãã‚Œã‚‰ã‚’ä½œæˆã—ã¦201 "Created"ã‚’è¿”ã—ã¾ã™ã€‚

ã“ã‚Œã‚’é”æˆã™ã‚‹ã«ã¯ã€ `JSONResponse` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ `status_code` ã‚’è¨­å®šã—ã¦ç›´æ¥å†…å®¹ã‚’è¿”ã—ã¾ã™ã€‚

{* ../../docs_src/additional_status_codes/tutorial001.py hl[4,25] *}

/// warning | æ³¨æ„

ä¸Šè¨˜ã®ä¾‹ã®ã‚ˆã†ã« `Response` ã‚’æ˜ç¤ºçš„ã«è¿”ã™å ´åˆã€ãã‚Œã¯ç›´æ¥è¿”ã•ã‚Œã¾ã™ã€‚

ãƒ¢ãƒ‡ãƒ«ãªã©ã¯ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã›ã‚“ã€‚

å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚„ã€å€¤ãŒæœ‰åŠ¹ãªJSONã§ã‚ã‚‹ã“ã¨ (`JSONResponse` ã‚’ä½¿ã†å ´åˆ) ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

///

/// note | æŠ€è¡“è©³ç´°

`from starlette.responses import JSONResponse` ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

**FastAPI** ã¯ `fastapi.responses` ã¨åŒã˜ `starlette.responses` ã‚’ã€é–‹ç™ºè€…ã®åˆ©ä¾¿æ€§ã®ãŸã‚ã«æä¾›ã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—æœ‰åŠ¹ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ã»ã¨ã‚“ã©Starletteã‹ã‚‰æ¥ã¦ã„ã¾ã™ã€‚ `status` ã«ã¤ã„ã¦ã‚‚åŒã˜ã§ã™ã€‚

///

## OpenAPIã¨APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç›´æ¥è¿”ã™å ´åˆã€ãã‚Œã‚‰ã¯OpenAPIã‚¹ã‚­ãƒ¼ãƒ (APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ) ã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚ãªãœãªã‚‰ã€FastAPIã¯ä½•ãŒè¿”ã•ã‚Œã‚‹ã®ã‹äº‹å‰ã«çŸ¥ã‚‹ã“ã¨ãŒã§ããªã„ã‹ã‚‰ã§ã™ã€‚

ã—ã‹ã—ã€ [Additional Responses](additional-responses.md){.internal-link target=_blank} ã‚’ä½¿ã£ã¦ã‚³ãƒ¼ãƒ‰ã®ä¸­ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚


================================================
File: /docs/ja/docs/advanced/custom-response.md
================================================
# ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ - HTMLã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã€ãƒ•ã‚¡ã‚¤ãƒ«ã€ãã®ä»–ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€**FastAPI** ã¯ `JSONResponse` ã‚’ä½¿ã£ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚

[ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç›´æ¥è¿”ã™](response-directly.md){.internal-link target=_blank}ã§è¦‹ãŸã‚ˆã†ã«ã€ `Response` ã‚’ç›´æ¥è¿”ã™ã“ã¨ã§ã“ã®æŒ™å‹•ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã§ãã¾ã™ã€‚

ã—ã‹ã—ã€`Response` ã‚’ç›´æ¥è¿”ã™ã¨ã€ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•çš„ã«å¤‰æ›ã•ã‚Œãšã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã›ã‚“ (ä¾‹ãˆã°ã€ç”Ÿæˆã•ã‚Œã‚‹OpenAPIã®ä¸€éƒ¨ã¨ã—ã¦HTTPãƒ˜ãƒƒãƒ€ãƒ¼ `Content-Type` ã«ç‰¹å®šã®ã€Œãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã€ã‚’å«ã‚ã‚‹ãªã©) ã€‚

ã—ã‹ã—ã€*path operationãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿* ã«ã€ä½¿ã„ãŸã„ `Response` ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

*path operationé–¢æ•°* ã‹ã‚‰è¿”ã•ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ã€ãã® `Response` ã«å«ã¾ã‚Œã¾ã™ã€‚

ãã—ã¦ã‚‚ã—ã€`Response` ãŒã€`JSONResponse` ã‚„ `UJSONResponse` ã®å ´åˆã®ã‚ˆã†ã«JSONãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ— (`application/json`) ãªã‚‰ã°ã€ãƒ‡ãƒ¼ã‚¿ã¯ *path operationãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿* ã«å®£è¨€ã—ãŸPydantic `response_model` ã«ã‚ˆã‚Šè‡ªå‹•çš„ã«å¤‰æ› (ã‚‚ã—ãã¯ãƒ•ã‚£ãƒ«ã‚¿) ã•ã‚Œã¾ã™ã€‚

/// note | å‚™è€ƒ

ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã‚’æŒ‡å®šã›ãšã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¯ãƒ©ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€FastAPIã¯ä½•ã‚‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒãªã„ã“ã¨ã‚’æœŸå¾…ã—ã¾ã™ã€‚ãã®ãŸã‚ã€ç”Ÿæˆã•ã‚Œã‚‹OpenAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒè¨˜è¼‰ã•ã‚Œã¾ã›ã‚“ã€‚

///

## `ORJSONResponse` ã‚’ä½¿ã†

ä¾‹ãˆã°ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‡ºã—ãŸã„å ´åˆã¯ã€<a href="https://github.com/ijl/orjson" class="external-link" target="_blank">`orjson`</a>ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€`ORJSONResponse`ã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦ã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä½¿ã„ãŸã„ `Response` ã‚¯ãƒ©ã‚¹ (ã‚µãƒ–ã‚¯ãƒ©ã‚¹) ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ *path operationãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿* ã«å®£è¨€ã—ã¾ã™ã€‚

{* ../../docs_src/custom_response/tutorial001b.py hl[2,7] *}

/// info | æƒ…å ±

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `response_class` ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã€Œãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã€ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã“ã®å ´åˆã€HTTPãƒ˜ãƒƒãƒ€ãƒ¼ `Content-Type` ã«ã¯ `application/json` ãŒã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚

ãã—ã¦ã€OpenAPIã«ã¯ãã®ã‚ˆã†ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã•ã‚Œã¾ã™ã€‚

///

/// tip | è±†çŸ¥è­˜

`ORJSONResponse` ã¯ã€ç¾åœ¨ã¯FastAPIã®ã¿ã§åˆ©ç”¨å¯èƒ½ã§ã€Starletteã§ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚

///

## HTMLãƒ¬ã‚¹ãƒãƒ³ã‚¹

**FastAPI** ã‹ã‚‰HTMLã‚’ç›´æ¥è¿”ã™å ´åˆã¯ã€`HTMLResponse` ã‚’ä½¿ã„ã¾ã™ã€‚

* `HTMLResponse` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã€‚
* *path operation* ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `content_type` ã« `HTMLResponse` ã‚’æ¸¡ã™ã€‚

{* ../../docs_src/custom_response/tutorial002.py hl[2,7] *}

/// info | æƒ…å ±

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `response_class` ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã€Œãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã€ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚

ã“ã®å ´åˆã€HTTPãƒ˜ãƒƒãƒ€ãƒ¼ `Content-Type` ã«ã¯ `text/html` ãŒã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚

ãã—ã¦ã€OpenAPIã«ã¯ãã®ã‚ˆã†ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚Œã¾ã™ã€‚

///

### `Response` ã‚’è¿”ã™

[ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç›´æ¥è¿”ã™](response-directly.md){.internal-link target=_blank}ã§è¦‹ãŸã‚ˆã†ã«ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç›´æ¥è¿”ã™ã“ã¨ã§ã€*path operation* ã®ä¸­ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã§ãã¾ã™ã€‚

ä¸Šè¨˜ã¨åŒã˜ä¾‹ã«ãŠã„ã¦ã€ `HTMLResponse` ã‚’è¿”ã™ã¨ã€ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

{* ../../docs_src/custom_response/tutorial003.py hl[2,7,19] *}

/// warning | æ³¨æ„

*path operationé–¢æ•°* ã‹ã‚‰ç›´æ¥è¿”ã•ã‚Œã‚‹ `Response` ã¯ã€OpenAPIã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã•ã‚Œãš (ä¾‹ãˆã°ã€ `Content-Type` ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã•ã‚Œãªã„) ã€è‡ªå‹•çš„ãªå¯¾è©±çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰ã‚‚é–²è¦§ã§ãã¾ã›ã‚“ã€‚

///

/// info | æƒ…å ±

ã‚‚ã¡ã‚ã‚“ã€å®Ÿéš›ã® `Content-Type` ãƒ˜ãƒƒãƒ€ãƒ¼ã‚„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãªã©ã¯ã€è¿”ã•ã‚ŒãŸ `Response` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ç”±æ¥ã—ã¦ã„ã¾ã™ã€‚

///

### OpenAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ `Response` ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰

é–¢æ•°ã®ä¸­ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¤ã¤ã‚‚ã€OpenAPI ã«ã€Œãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã€ã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã—ãŸã„ãªã‚‰ã€ `response_class` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã„ã€ `Response` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚

`response_class` ã¯OpenAPIã® *path operation* ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã®ã¿ä½¿ç”¨ã•ã‚Œã¾ã™ãŒã€ `Response` ã¯ãã®ã¾ã¾ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

#### `HTMLResponse` ã‚’ç›´æ¥è¿”ã™

ä¾‹ãˆã°ã€ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

{* ../../docs_src/custom_response/tutorial004.py hl[7,21,23] *}

ã“ã®ä¾‹ã§ã¯ã€é–¢æ•° `generate_html_response()` ã¯ã€`str` ã®HTMLã‚’è¿”ã™ã®ã§ã¯ãªã `Response` ã‚’ç”Ÿæˆã—ã¦è¿”ã—ã¦ã„ã¾ã™ã€‚

`generate_html_response()` ã‚’å‘¼ã³å‡ºã—ãŸçµæœã‚’è¿”ã™ã“ã¨ã«ã‚ˆã‚Šã€**FastAPI** ã®æŒ¯ã‚‹èˆã„ã‚’ä¸Šæ›¸ãã™ã‚‹ `Response` ãŒæ—¢ã«è¿”ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€ä¸€æ–¹ã§ã¯ `response_class` ã« `HTMLResponse` ã‚’æ¸¡ã—ã¦ã„ã‚‹ãŸã‚ã€ **FastAPI** ã¯OpenAPIã‚„å¯¾è©±çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§HTMLã¨ã—ã¦ `text/html` ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã™ã‚‹æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã€‚

<img src="/img/tutorial/custom-response/image01.png">

## åˆ©ç”¨å¯èƒ½ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹

ä»¥ä¸‹ãŒåˆ©ç”¨å¯èƒ½ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ä¸€éƒ¨ã§ã™ã€‚

`Response` ã‚’ä½¿ã£ã¦ä»–ã®ä½•ã‹ã‚’è¿”ã›ã¾ã™ã—ã€ã‚«ã‚¹ã‚¿ãƒ ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã‚‚ä½œã‚Œã‚‹ã“ã¨ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚

/// note | æŠ€è¡“è©³ç´°

`from starlette.responses import HTMLResponse` ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚

**FastAPI** ã¯é–‹ç™ºè€…ã®åˆ©ä¾¿æ€§ã®ãŸã‚ã« `fastapi.responses` ã¨ã—ã¦ `starlette.responses` ã¨åŒã˜ã‚‚ã®ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€åˆ©ç”¨å¯èƒ½ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã»ã¨ã‚“ã©ã¯Starletteã‹ã‚‰ç›´æ¥æä¾›ã•ã‚Œã¾ã™ã€‚

///

### `Response`

ãƒ¡ã‚¤ãƒ³ã® `Response` ã‚¯ãƒ©ã‚¹ã§ã€ä»–ã®å…¨ã¦ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ã“ã‚Œã‚’ç¶™æ‰¿ã—ã¦ã„ã¾ã™ã€‚

ç›´æ¥è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘ä»˜ã‘ã¾ã™ã€‚

* `content` - `str` ã‹ `bytes`ã€‚
* `status_code` - `int` ã®HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã€‚
* `headers` - æ–‡å­—åˆ—ã® `dict` ã€‚
* `media_type` - ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã‚’ç¤ºã™ `str` ã€‚ä¾‹ãˆã° `"text/html"` ã€‚

FastAPI (å®Ÿéš›ã«ã¯Starlette) ã¯è‡ªå‹•çš„ã«Content-Lengthãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å«ã¿ã¾ã™ã€‚ã¾ãŸã€media_typeã«åŸºã¥ã„ãŸContent-Typeãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å«ã¿ã€ãƒ†ã‚­ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã®ãŸã‚ã«charsetã‚’è¿½åŠ ã—ã¾ã™ã€‚

{* ../../docs_src/response_directly/tutorial002.py hl[1,18] *}

### `HTMLResponse`

ä¸Šã§èª­ã‚“ã ã‚ˆã†ã«ã€ãƒ†ã‚­ã‚¹ãƒˆã‚„ãƒã‚¤ãƒˆã‚’å—ã‘å–ã‚Šã€HTMLãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚

### `PlainTextResponse`

ãƒ†ã‚­ã‚¹ãƒˆã‚„ãƒã‚¤ãƒˆã‚’å—ã‘å–ã‚Šã€ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚

{* ../../docs_src/custom_response/tutorial005.py hl[2,7,9] *}

### `JSONResponse`

ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ `application/json` ã¨ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚

ä¸Šã§èª­ã‚“ã ã‚ˆã†ã«ã€**FastAPI** ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚

### `ORJSONResponse`

ä¸Šã§èª­ã‚“ã ã‚ˆã†ã«ã€<a href="https://github.com/ijl/orjson" class="external-link" target="_blank">`orjson`</a>ã‚’ä½¿ã£ãŸã€é«˜é€Ÿãªä»£æ›¿ã®JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã™ã€‚

### `UJSONResponse`

<a href="https://github.com/ultrajson/ultrajson" class="external-link" target="_blank">`ujson`</a>ã‚’ä½¿ã£ãŸã€ä»£æ›¿ã®JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã™ã€‚

/// warning | æ³¨æ„

`ujson` ã¯ã€ã„ãã¤ã‹ã®ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦ã€Pythonã«ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã•ã‚ŒãŸå®Ÿè£…ã‚ˆã‚Šã‚‚ä½œã‚Šã“ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

///

{* ../../docs_src/custom_response/tutorial001.py hl[2,7] *}

/// tip | è±†çŸ¥è­˜

`ORJSONResponse` ã®ã»ã†ãŒé«˜é€Ÿãªä»£æ›¿ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

///

### `RedirectResponse`

HTTPãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯307ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ (Temporary Redirect) ã¨ãªã‚Šã¾ã™ã€‚

{* ../../docs_src/custom_response/tutorial006.py hl[2,9] *}

### `StreamingResponse`

éåŒæœŸãªã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‹é€šå¸¸ã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ»ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã—ã¾ã™ã€‚

{* ../../docs_src/custom_response/tutorial007.py hl[2,14] *}

#### `StreamingResponse` ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ãƒ©ã‚¤ã‚¯ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã¨ã‚‚ã«ä½¿ã†

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ©ã‚¤ã‚¯ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (ä¾‹ãˆã°ã€ `open()` ã§è¿”ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ) ãŒã‚ã‚‹å ´åˆã€ `StreamingResponse` ã«å«ã‚ã¦è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚Œã«ã¯ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã®é€£æºã‚„æ˜ åƒå‡¦ç†ãªã©ã€å¤šãã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

{* ../../docs_src/custom_response/tutorial008.py hl[2,10:12,14] *}

/// tip | è±†çŸ¥è­˜

ã“ã“ã§ã¯ `async` ã‚„ `await` ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„æ¨™æº–ã® `open()` ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€é€šå¸¸ã® `def` ã§path operationã‚’å®£è¨€ã—ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

///

### `FileResponse`

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’éåŒæœŸçš„ã«ã‚¹ãƒˆãƒªãƒ¼ãƒ ã—ã¾ã™ã€‚

ä»–ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã¨ã¯ç•°ãªã‚‹å¼•æ•°ã®ã‚»ãƒƒãƒˆã‚’å—ã‘å–ã‚Šã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¾ã™ã€‚

* `path` - ã‚¹ãƒˆãƒªãƒ¼ãƒ ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€‚
* `headers` - å«ã‚ãŸã„ä»»æ„ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ã®è¾æ›¸ã€‚
* `media_type` - ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã‚’ç¤ºã™æ–‡å­—åˆ—ã€‚ã‚»ãƒƒãƒˆã•ã‚Œãªã‹ã£ãŸå ´åˆã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«åã‚„ãƒ‘ã‚¹ã‹ã‚‰ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ãŒæ¨å¯Ÿã•ã‚Œã¾ã™ã€‚
* `filename` - ã‚»ãƒƒãƒˆã•ã‚ŒãŸå ´åˆã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® `Content-Disposition` ã«å«ã¾ã‚Œã¾ã™ã€‚

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã¯ã€é©åˆ‡ãª `Content-Length` ã€ `Last-Modified` ã€ `ETag` ãƒ˜ãƒƒãƒ€ãƒ¼ãŒå«ã¾ã‚Œã¾ã™ã€‚

{* ../../docs_src/custom_response/tutorial009.py hl[2,10] *}

## ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¯ãƒ©ã‚¹

**FastAPI** ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ `APIRouter` ã‚’ç”Ÿæˆã™ã‚‹ã¨ãã«ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¯ãƒ©ã‚¹ã‚’æŒ‡å®šã§ãã¾ã™ã€‚

å®šç¾©ã™ã‚‹ãŸã‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ `default_response_class` ã§ã™ã€‚

ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€ **FastAPI** ã¯ã€å…¨ã¦ã® *path operation* ã§ `JSONResponse` ã®ä»£ã‚ã‚Šã« `ORJSONResponse` ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦åˆ©ç”¨ã—ã¾ã™ã€‚

{* ../../docs_src/custom_response/tutorial010.py hl[2,4] *}

/// tip | è±†çŸ¥è­˜

å‰ã«è¦‹ãŸã‚ˆã†ã«ã€ *path operation* ã®ä¸­ã§ `response_class` ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã§ãã¾ã™ã€‚

///

## ãã®ä»–ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã¾ãŸã€OpenAPIã§ã¯ `responses` ã‚’ä½¿ã£ã¦ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã‚„ãã®ä»–ã®è©³ç´°ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™: [Additional Responses in OpenAPI](additional-responses.md){.internal-link target=_blank}


================================================
File: /docs/ja/docs/advanced/index.md
================================================
# é«˜åº¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰

## ã•ã‚‰ãªã‚‹æ©Ÿèƒ½

[ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](../tutorial/index.md){.internal-link target=_blank}ã«ã‚ˆã‚Šã€**FastAPI**ã®ä¸»è¦ãªæ©Ÿèƒ½ã¯ååˆ†ã«ç†è§£ã§ããŸã“ã¨ã§ã—ã‚‡ã†ã€‚

ä»¥é™ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯èª¬æ˜ã—ãã‚Œãªã‹ã£ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚„è¨­å®šã€ãŠã‚ˆã³æ©Ÿèƒ½ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

/// tip | è±†çŸ¥è­˜

ä»¥é™ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ **å¿…ãšã—ã‚‚"å¿œç”¨ç·¨"ã§ã¯ã‚ã‚Šã¾ã›ã‚“**ã€‚

ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ã‚ˆã£ã¦ã¯ã€ãã®ä¸­ã‹ã‚‰è§£æ±ºç­–ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

///

## å…ˆã«ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’èª­ã‚€

[ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](../tutorial/index.md){.internal-link target=_blank}ã®çŸ¥è­˜ãŒã‚ã‚Œã°ã€**FastAPI**ã®ä¸»è¦ãªæ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥é™ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ã™ã§ã«ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’èª­ã‚“ã§ã€ãã®ä¸»è¦ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç†è§£ã§ãã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®ã‚³ãƒ¼ã‚¹

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å†…å®¹ã‚’è£œå®Œã™ã‚‹ãŸã‚ã«è„±åˆå¿ƒè€…ç”¨ã‚³ãƒ¼ã‚¹ã‚’å—ã‘ãŸã„å ´åˆã¯ã€**TestDriven.io**ã«ã‚ˆã‚‹ã€<a href="https://testdriven.io/courses/tdd-fastapi/" class="external-link" target="_blank">Test-Driven Development with FastAPI and Docker</a>ã‚’ç¢ºèªã™ã‚‹ã®ãŒã‚ˆã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ç¾åœ¨ã€ã“ã®ã‚³ãƒ¼ã‚¹ã§å¾—ã‚‰ã‚ŒãŸåˆ©ç›Šã®10%ãŒ**FastAPI**ã®é–‹ç™ºã®ãŸã‚ã«å¯„ä»˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ğŸ‰ ğŸ˜„


================================================
File: /docs/ja/docs/advanced/path-operation-advanced-configuration.md
================================================
# Path Operationã®é«˜åº¦ãªè¨­å®š

## OpenAPI operationId

/// warning | æ³¨æ„

ã‚ãªãŸãŒOpenAPIã®ã€Œã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã€ã§ãªã‘ã‚Œã°ã€ã“ã‚Œã¯å¿…è¦ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

///

*path operation* ã§ `operation_id` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€OpenAPIã® `operationId` ã‚’è¨­å®šã§ãã¾ã™ã€‚

`operation_id` ã¯å„ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ä¸€æ„ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

{* ../../docs_src/path_operation_advanced_configuration/tutorial001.py hl[6] *}

### *path operationé–¢æ•°* ã®åå‰ã‚’operationIdã¨ã—ã¦ä½¿ç”¨ã™ã‚‹

APIã®é–¢æ•°åã‚’ `operationId` ã¨ã—ã¦åˆ©ç”¨ã—ãŸã„å ´åˆã€ã™ã¹ã¦ã®APIã®é–¢æ•°ã‚’ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã€å„ *path operation* ã® `operationId` ã‚’ `APIRoute.name` ã§ä¸Šæ›¸ãã™ã‚Œã°å¯èƒ½ã§ã™ã€‚

ãã†ã™ã‚‹å ´åˆã¯ã€ã™ã¹ã¦ã® *path operation* ã‚’è¿½åŠ ã—ãŸå¾Œã«è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

{* ../../docs_src/path_operation_advanced_configuration/tutorial002.py hl[2,12:21,24] *}

/// tip | è±†çŸ¥è­˜

`app.openapi()` ã‚’æ‰‹å‹•ã§ã‚³ãƒ¼ãƒ«ã™ã‚‹å ´åˆã€ãã®å‰ã«`operationId`ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

///

/// warning | æ³¨æ„

ã“ã®æ–¹æ³•ã‚’ã¨ã‚‹å ´åˆã€å„ *path operationé–¢æ•°* ãŒä¸€æ„ãªåå‰ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã‚Œã‚‰ãŒç•°ãªã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (Pythonãƒ•ã‚¡ã‚¤ãƒ«) ã«ã‚ã‚‹ã¨ã—ã¦ã‚‚ã§ã™ã€‚

///

## OpenAPIã‹ã‚‰é™¤å¤–ã™ã‚‹

ç”Ÿæˆã•ã‚Œã‚‹OpenAPIã‚¹ã‚­ãƒ¼ãƒ (ã¤ã¾ã‚Šã€è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã®ä»•çµ„ã¿) ã‹ã‚‰ *path operation* ã‚’é™¤å¤–ã™ã‚‹ã«ã¯ã€ `include_in_schema` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ `False` ã«ã—ã¾ã™ã€‚

{* ../../docs_src/path_operation_advanced_configuration/tutorial003.py hl[6] *}

## docstringã«ã‚ˆã‚‹èª¬æ˜ã®é«˜åº¦ãªè¨­å®š

*path operationé–¢æ•°* ã®docstringã‹ã‚‰OpenAPIã«ä½¿ç”¨ã™ã‚‹è¡Œã‚’åˆ¶é™ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`\f` (ã€Œæ›¸å¼é€ã‚Š (Form Feed)ã€ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ–‡å­—) ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§ã€**FastAPI** ã¯OpenAPIã«ä½¿ç”¨ã•ã‚Œã‚‹å‡ºåŠ›ã‚’ãã®ç®‡æ‰€ã¾ã§ã«åˆ¶é™ã—ã¾ã™ã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ãŒã€ä»–ã®ãƒ„ãƒ¼ãƒ« (ä¾‹ãˆã°Sphinx) ã§ã¯æ®‹ã‚Šã®éƒ¨åˆ†ã‚’åˆ©ç”¨ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚

{* ../../docs_src/path_operation_advanced_configuration/tutorial004.py hl[19:29] *}


================================================
File: /docs/ja/docs/advanced/response-directly.md
================================================
# ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç›´æ¥è¿”ã™

**FastAPI** ã® *path operation* ã§ã¯ã€é€šå¸¸ã¯ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™ã“ã¨ãŒã§ãã¾ã™: ä¾‹ãˆã°ã€ `dict`ã€`list`ã€Pydanticãƒ¢ãƒ‡ãƒ«ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ãªã©ã§ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€**FastAPI** ã¯ [JSONäº’æ›ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€](../tutorial/encoder.md){.internal-link target=_blank} ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ `jsonable_encoder` ã«ã‚ˆã‚Šã€è¿”ã™å€¤ã‚’è‡ªå‹•çš„ã«JSONã«å¤‰æ›ã—ã¾ã™ã€‚

ã“ã®ã¨ãèƒŒå¾Œã§ã¯ã€JSONäº’æ›ãªãƒ‡ãƒ¼ã‚¿ (ä¾‹ãˆã°`dict`) ã‚’ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸é€ä¿¡ã•ã‚Œã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦åˆ©ç”¨ã•ã‚Œã‚‹ `JSONResponse` ã®ä¸­ã«å«ã‚ã¾ã™ã€‚

ã—ã‹ã—ã€*path operation* ã‹ã‚‰ `JSONResponse` ã‚’ç›´æ¥è¿”ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã“ã‚Œã¯ä¾‹ãˆã°ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ã‚„cookieã‚’è¿”ã™ã¨ãã«ä¾¿åˆ©ã§ã™ã€‚

## `Response` ã‚’è¿”ã™

å®Ÿéš›ã¯ã€`Response` ã‚„ãã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã‚’è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

/// tip | è±†çŸ¥è­˜

`JSONResponse` ãã‚Œè‡ªä½“ã¯ã€ `Response` ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§ã™ã€‚

///

`Response` ã‚’è¿”ã—ãŸå ´åˆã¯ã€**FastAPI** ã¯ç›´æ¥ãã‚Œã‚’è¿”ã—ã¾ã™ã€‚

ãã‚Œã¯ã€Pydanticãƒ¢ãƒ‡ãƒ«ã®ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã‚„ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä»»æ„ã®å‹ã«å¤‰æ›ã—ãŸã‚Šãªã©ã¯ã—ã¾ã›ã‚“ã€‚

ã“ã‚Œã¯å¤šãã®æŸ”è»Ÿæ€§ã‚’æä¾›ã—ã¾ã™ã€‚ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿å‹ã‚’è¿”ã—ãŸã‚Šã€ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿å®£è¨€ã‚„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã§ãã¾ã™ã€‚

## `jsonable_encoder` ã‚’ `Response` ã®ä¸­ã§ä½¿ã†

**FastAPI** ã¯ã‚ãªãŸãŒè¿”ã™ `Response` ã«å¯¾ã—ã¦ä½•ã‚‚å¤‰æ›´ã‚’åŠ ãˆãªã„ã®ã§ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæº–å‚™ã§ãã¦ã„ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ä¾‹ãˆã°ã€Pydanticãƒ¢ãƒ‡ãƒ«ã‚’ `JSONResponse` ã«å«ã‚ã‚‹ã«ã¯ã€ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿å‹ (`datetime` ã‚„ `UUID` ãªã©) ã‚’JSONäº’æ›ã®å‹ã«å¤‰æ›ã•ã‚ŒãŸ `dict` ã«å¤‰æ›ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ã“ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚ã‚‹å‰ã« `jsonable_encoder` ã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›ã§ãã¾ã™ã€‚

{* ../../docs_src/response_directly/tutorial001.py hl[6:7,21:22] *}

/// note | æŠ€è¡“è©³ç´°

ã¾ãŸã€`from starlette.responses import JSONResponse` ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚

**FastAPI** ã¯é–‹ç™ºè€…ã®åˆ©ä¾¿æ€§ã®ãŸã‚ã« `fastapi.responses` ã¨ã„ã† `starlette.responses` ã¨åŒã˜ã‚‚ã®ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€åˆ©ç”¨å¯èƒ½ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã»ã¨ã‚“ã©ã¯Starletteã‹ã‚‰ç›´æ¥æä¾›ã•ã‚Œã¾ã™ã€‚

///

## ã‚«ã‚¹ã‚¿ãƒ  `Response` ã‚’è¿”ã™

ä¸Šè¨˜ã®ä¾‹ã§ã¯å¿…è¦ãªéƒ¨åˆ†ã‚’å…¨ã¦ç¤ºã—ã¦ã„ã¾ã™ãŒã€ã‚ã¾ã‚Šä¾¿åˆ©ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚`item` ã‚’ç›´æ¥è¿”ã™ã“ã¨ãŒã§ãã‚‹ã—ã€**FastAPI** ã¯ãã‚Œã‚’ `dict` ã«å¤‰æ›ã—ã¦ `JSONResponse`ã€€ã«å«ã‚ã¦ãã‚Œã‚‹ãªã©ã€‚ã™ã¹ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹•ä½œã§ã™ã€‚

ã§ã¯ã€ã“ã‚Œã‚’ä½¿ã£ã¦ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã©ã†è¿”ã™ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

<a href="https://en.wikipedia.org/wiki/XML" class="external-link" target="_blank">XML</a>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ãŸã„ã¨ã—ã¾ã—ã‚‡ã†ã€‚

XMLã‚’æ–‡å­—åˆ—ã«ã—ã€`Response` ã«å«ã‚ã€ãã‚Œã‚’è¿”ã—ã¾ã™ã€‚

{* ../../docs_src/response_directly/tutorial002.py hl[1,18] *}

## å‚™è€ƒ

`Response` ã‚’ç›´æ¥è¿”ã™å ´åˆã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã€å¤‰æ› (ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º) ã‚„ã€è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚

ã—ã‹ã—ã€[Additional Responses in OpenAPI](additional-responses.md){.internal-link target=_blank}ã«è¨˜è¼‰ã•ã‚ŒãŸã‚ˆã†ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚

å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€ã‚«ã‚¹ã‚¿ãƒ  `Response` ã‚’ä½¿ç”¨ãƒ»å®£è¨€ã—ãªãŒã‚‰ã€è‡ªå‹•çš„ãªãƒ‡ãƒ¼ã‚¿å¤‰æ›ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚


================================================
File: /docs/ja/docs/advanced/websockets.md
================================================
# WebSocket

**FastAPI**ã§<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" class="external-link" target="_blank">WebSocket</a>ãŒä½¿ç”¨ã§ãã¾ã™ã€‚

## `WebSockets`ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã¾ãš `WebSockets`ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã§ã™ã€‚

<div class="termy">

```console
$ pip install websockets

---> 100%
```

</div>

## WebSocket ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

### æœ¬ç•ªç’°å¢ƒ

æœ¬ç•ªç’°å¢ƒã§ã¯ã€Reactã€Vue.jsã€Angularãªã©ã®æœ€æ–°ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ä½œæˆã•ã‚ŒãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚

ãã—ã¦ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨WebSocketã‚’ä½¿ç”¨ã—ã¦é€šä¿¡ã™ã‚‹ãŸã‚ã«ã€ãŠãã‚‰ããƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

ã¾ãŸã¯ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‰ã§WebSocketãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ç›´æ¥é€šä¿¡ã™ã‚‹ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ä»–ã«ã‚‚ã€WebSocketã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨é€šä¿¡ã™ã‚‹æ–¹æ³•ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

---

ãŸã ã—ã€ã“ã®ä¾‹ã§ã¯éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ãªHTMLæ–‡æ›¸ã¨ã„ãã¤ã‹ã®JavaScriptã‚’ã€ã™ã¹ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä¸­ã«å…¥ã‚Œã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

ã‚‚ã¡ã‚ã‚“ã€ã“ã‚Œã¯æœ€é©ãªæ–¹æ³•ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã—ã€æœ¬ç•ªç’°å¢ƒã§ä½¿ã†ã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã€‚

æœ¬ç•ªç’°å¢ƒã§ã¯ã€ä¸Šè¨˜ã®æ–¹æ³•ã®ã„ãšã‚Œã‹ã®é¸æŠè‚¢ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

ã—ã‹ã—ã€ã“ã‚Œã¯WebSocketã®ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã«ç„¦ç‚¹ã‚’å½“ã¦ã€å®Ÿç”¨çš„ãªä¾‹ã‚’ç¤ºã™æœ€ã‚‚ç°¡å˜ãªæ–¹æ³•ã§ã™ã€‚

{* ../../docs_src/websockets/tutorial001.py hl[2,6:38,41:43] *}

## `websocket` ã‚’ä½œæˆã™ã‚‹

**FastAPI** ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã€`websocket` ã‚’ä½œæˆã—ã¾ã™ã€‚

{* ../../docs_src/websockets/tutorial001.py hl[1,46:47] *}

/// note | æŠ€è¡“è©³ç´°

`from starlette.websockets import WebSocket` ã‚’ä½¿ç”¨ã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“.

**FastAPI** ã¯é–‹ç™ºè€…ã®åˆ©ä¾¿æ€§ã®ãŸã‚ã«ã€åŒã˜ `WebSocket` ã‚’æä¾›ã—ã¾ã™ã€‚ã—ã‹ã—ã€ã“ã¡ã‚‰ã¯Starletteã‹ã‚‰ç›´æ¥æä¾›ã•ã‚Œã‚‹ã‚‚ã®ã§ã™ã€‚

///

## ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡

WebSocketãƒ«ãƒ¼ãƒˆã§ã¯ã€ `await` ã‚’ä½¿ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡ãŒã§ãã¾ã™ã€‚

{* ../../docs_src/websockets/tutorial001.py hl[48:52] *}

ãƒã‚¤ãƒŠãƒªã‚„ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã€JSONãƒ‡ãƒ¼ã‚¿ã‚’é€å—ä¿¡ã§ãã¾ã™ã€‚

## è©¦ã—ã¦ã¿ã‚‹

ãƒ•ã‚¡ã‚¤ãƒ«åãŒ `main.py` ã§ã‚ã‚‹å ´åˆã€ä»¥ä¸‹ã®æ–¹æ³•ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

ãƒ–ãƒ©ã‚¦ã‚¶ã§ <a href="http://127.0.0.1:8000" class="external-link" target="_blank">http://127.0.0.1:8000</a> ã‚’é–‹ãã¾ã™ã€‚

æ¬¡ã®ã‚ˆã†ãªã‚·ãƒ³ãƒ—ãƒ«ãªãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

<img src="/img/tutorial/websockets/image01.png">

å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦é€ä¿¡ã§ãã¾ã™ã€‚

<img src="/img/tutorial/websockets/image02.png">

ãã—ã¦ã€ WebSocketã‚’ä½¿ç”¨ã—ãŸ**FastAPI**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿œç­”ã—ã¾ã™ã€‚

<img src="/img/tutorial/websockets/image03.png">

è¤‡æ•°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ï¼ˆãŠã‚ˆã³å—ä¿¡ï¼‰ã§ãã¾ã™ã€‚

<img src="/img/tutorial/websockets/image04.png">

ãã—ã¦ã€ã“ã‚Œã‚‰ã®é€šä¿¡ã¯ã™ã¹ã¦åŒã˜WebSocketæ¥ç¶šã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

## ä¾å­˜é–¢ä¿‚

WebSocketã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã¯ã€`fastapi` ã‹ã‚‰ä»¥ä¸‹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚

* `Depends`
* `Security`
* `Cookie`
* `Header`
* `Path`
* `Query`

ã“ã‚Œã‚‰ã¯ã€ä»–ã®FastAPI ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ/*path operation* ã®å ´åˆã¨åŒã˜ã‚ˆã†ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚

{* ../../docs_src/websockets/tutorial002.py hl[58:65,68:83] *}

/// info | æƒ…å ±

WebSocket ã§ `HTTPException` ã‚’ç™ºç”Ÿã•ã›ã‚‹ã“ã¨ã¯ã‚ã¾ã‚Šæ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦ã€WebSocketã®æ¥ç¶šã‚’ç›´æ¥é–‰ã˜ã‚‹æ–¹ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚

ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã¯ã€<a href="https://tools.ietf.org/html/rfc6455#section-7.4.1" class="external-link" target="_blank">ä»•æ§˜ã§å®šç¾©ã•ã‚ŒãŸæœ‰åŠ¹ãªã‚³ãƒ¼ãƒ‰</a>ã®ä¸­ã‹ã‚‰ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

å°†æ¥çš„ã«ã¯ã€ã©ã“ã‹ã‚‰ã§ã‚‚ `raise` ã§ãã‚‹ `WebSocketException` ãŒç”¨æ„ã•ã‚Œã€å°‚ç”¨ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒ©ã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹äºˆå®šã§ã™ã€‚ã“ã‚Œã¯ã€Starlette ã® <a href="https://github.com/encode/starlette/pull/527" class="external-link" target="_blank">PR #527</a> ã«ä¾å­˜ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

///

### ä¾å­˜é–¢ä¿‚ã‚’ç”¨ã„ã¦WebSocketsã‚’è©¦ã—ã¦ã¿ã‚‹

ãƒ•ã‚¡ã‚¤ãƒ«åãŒ `main.py` ã§ã‚ã‚‹å ´åˆã€ä»¥ä¸‹ã®æ–¹æ³•ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

ãƒ–ãƒ©ã‚¦ã‚¶ã§ <a href="http://127.0.0.1:8000" class="external-link" target="_blank">http://127.0.0.1:8000</a> ã‚’é–‹ãã¾ã™ã€‚

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒè¨­å®šã§ãã‚‹é …ç›®ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

* ãƒ‘ã‚¹ã§ä½¿ç”¨ã•ã‚Œã‚‹ã€ŒItem IDã€
* ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹ã€ŒTokenã€

/// tip | è±†çŸ¥è­˜

ã‚¯ã‚¨ãƒª `token` ã¯ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

///

ã“ã‚Œã«ã‚ˆã‚Šã€WebSocketã«æ¥ç¶šã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€å—ä¿¡ã§ãã¾ã™ã€‚

<img src="/img/tutorial/websockets/image05.png">

## åˆ‡æ–­ã‚„è¤‡æ•°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®å¯¾å¿œ

WebSocketæ¥ç¶šãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã¨ã€ `await websocket.receive_text()` ã¯ä¾‹å¤– `WebSocketDisconnect` ã‚’ç™ºç”Ÿã•ã›ã€ã“ã®ä¾‹ã®ã‚ˆã†ã«ã‚­ãƒ£ãƒƒãƒã—ã¦å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

{* ../../docs_src/websockets/tutorial003.py hl[81:83] *}

è©¦ã—ã¦ã¿ã‚‹ã«ã¯ã€

* ã„ãã¤ã‹ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚¿ãƒ–ã§ã‚¢ãƒ—ãƒªã‚’é–‹ãã¾ã™ã€‚
* ãã‚Œã‚‰ã®ã‚¿ãƒ–ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚
* ãã—ã¦ã€ã‚¿ãƒ–ã®ã†ã¡1ã¤ã‚’é–‰ã˜ã¦ãã ã•ã„ã€‚

ã“ã‚Œã«ã‚ˆã‚Šä¾‹å¤– `WebSocketDisconnect` ãŒç™ºç”Ÿã—ã€ä»–ã®ã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯æ¬¡ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ã¾ã™ã€‚

```
Client #1596980209979 left the chat
```

/// tip | è±†çŸ¥è­˜

ä¸Šè¨˜ã®ã‚¢ãƒ—ãƒªã¯ã€è¤‡æ•°ã® WebSocket æ¥ç¶šã«å¯¾ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã—ã€ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹æ–¹æ³•ã‚’ç¤ºã™ãŸã‚ã®æœ€å°é™ã®ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã§ã™ã€‚

ã—ã‹ã—ã€ã™ã¹ã¦ã®æ¥ç¶šãŒãƒ¡ãƒ¢ãƒªå†…ã®å˜ä¸€ã®ãƒªã‚¹ãƒˆã§å‡¦ç†ã•ã‚Œã‚‹ãŸã‚ã€ãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿè¡Œä¸­ã«ã®ã¿æ©Ÿèƒ½ã—ã€å˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã®ã¿æ©Ÿèƒ½ã™ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

ã‚‚ã—FastAPIã¨ç°¡å˜ã«çµ±åˆã§ãã¦ã€Redisã‚„PostgreSQLãªã©ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã€ã‚ˆã‚Šå …ç‰¢ãªã‚‚ã®ãŒå¿…è¦ãªã‚‰ã€<a href="https://github.com/encode/broadcaster" class="external-link" target="_blank">encode/broadcaster</a> ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

///

## ãã®ä»–ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€Starletteã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

* <a href="https://www.starlette.io/websockets/" class="external-link" target="_blank"> `WebSocket` ã‚¯ãƒ©ã‚¹</a>
* <a href="https://www.starlette.io/endpoints/#websocketendpoint" class="external-link" target="_blank">ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ã®WebSocketå‡¦ç†</a>


================================================
File: /docs/ja/docs/deployment/concepts.md
================================================
# ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

**FastAPI**ã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ãã€ã‚‚ã—ãã¯ã©ã®ã‚ˆã†ãªã‚¿ã‚¤ãƒ—ã®Web APIã§ã‚ã£ã¦ã‚‚ã€ãŠãã‚‰ãæ°—ã«ãªã‚‹ã‚³ãƒ³ã‚»ãƒ—ãƒˆãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

ãã‚Œã‚‰ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’**ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®æœ€é©ãªæ–¹æ³•**ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

é‡è¦ãªã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ã„ãã¤ã‹ã‚’ç´¹ä»‹ã—ã¾ã™:

* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ - HTTPS
* èµ·å‹•æ™‚ã®å®Ÿè¡Œ
* å†èµ·å‹•
* ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼‰
* ãƒ¡ãƒ¢ãƒªãƒ¼
* é–‹å§‹å‰ã®äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—

ã“ã‚Œã‚‰ãŒ**ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ**ã«ã©ã®ã‚ˆã†ãªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

æœ€çµ‚çš„ãªç›®çš„ã¯ã€**å®‰å…¨ãªæ–¹æ³•ã§**APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«**ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›**ã—ã€**ä¸­æ–­ã‚’å›é¿**ã™ã‚‹ã ã‘ã§ãªãã€**è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹**ï¼ˆä¾‹ãˆã°ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼/ä»®æƒ³ãƒã‚·ãƒ³ï¼‰ã‚’å¯èƒ½ãªé™ã‚ŠåŠ¹ç‡çš„ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚ğŸš€

ã“ã®ç« ã§ã¯å‰è¿°ã—ãŸ**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**ã«ã¤ã„ã¦ãã‚Œãã‚Œèª¬æ˜ã—ã¾ã™ã€‚

ã“ã®èª¬æ˜ã‚’é€šã—ã¦ã€æ™®æ®µã¨ã¯éå¸¸ã«ç•°ãªã‚‹ç’°å¢ƒã‚„å­˜åœ¨ã—ãªã„ã§ã‚ã‚ã†**å°†æ¥ã®**ç’°å¢ƒã«å¯¾ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã®æ–¹æ³•ã‚’æ±ºã‚ã‚‹ä¸Šã§å¿…è¦ãª**ç›´æ„Ÿ**ã‚’ä¸ãˆã¦ãã‚Œã‚‹ã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’æ„è­˜ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€**ã‚ãªãŸè‡ªèº«ã®API**ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®æœ€é©ãªæ–¹æ³•ã‚’**è©•ä¾¡**ã—ã€**è¨­è¨ˆ**ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

æ¬¡ã®ç« ã§ã¯ã€FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®**å…·ä½“çš„ãªãƒ¬ã‚·ãƒ”**ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

ã—ã‹ã—ã€ä»Šã¯ã“ã‚Œã‚‰ã®é‡è¦ãª**ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«åŸºã¥ãã‚¢ã‚¤ãƒ‡ã‚¢**ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã‚‰ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯ã€ä»–ã®ã©ã®ã‚¿ã‚¤ãƒ—ã®Web APIã«ã‚‚å½“ã¦ã¯ã¾ã‚Šã¾ã™ã€‚ğŸ’¡

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ - HTTPS

<!-- NOTE: https.md written in Japanese does not exist, so it redirects to English one  -->
[å‰ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã®HTTPSã«ã¤ã„ã¦](https.md){.internal-link target=_blank}ã§ã¯ã€HTTPSãŒã©ã®ã‚ˆã†ã«APIã‚’æš—å·åŒ–ã™ã‚‹ã®ã‹ã«ã¤ã„ã¦å­¦ã³ã¾ã—ãŸã€‚

é€šå¸¸ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒã«ã¨ã£ã¦**å¤–éƒ¨ã®**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚‹**TLS Termination Proxy**ã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹ã“ã¨ãŒä¸€èˆ¬çš„ã§ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚­ã‚·ã¯é€šä¿¡ã®æš—å·åŒ–ã‚’æ‹…å½“ã—ã¾ã™ã€‚

ã•ã‚‰ã«ã‚»ã‚­ãƒ¥ã‚¢ãªé€šä¿¡ã«ãŠã„ã¦ã€HTTPSè¨¼æ˜æ›¸ã®å®šæœŸçš„ãªæ›´æ–°ã‚’è¡Œã„ã¾ã™ãŒã€ã“ã‚Œã¯TLS Termination Proxyã¨åŒã˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ‹…å½“ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Œã°ã€åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ‹…å½“ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

### HTTPS ç”¨ãƒ„ãƒ¼ãƒ«ã®ä¾‹
TLS Termination Proxyã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ï¼š

* Traefik
    * è¨¼æ˜æ›¸ã®æ›´æ–°ã‚’è‡ªå‹•çš„ã«å‡¦ç† âœ¨
* Caddy
    * è¨¼æ˜æ›¸ã®æ›´æ–°ã‚’è‡ªå‹•çš„ã«å‡¦ç† âœ¨
* Nginx
    * è¨¼æ˜æ›¸æ›´æ–°ã®ãŸã‚ã«Certbotã®ã‚ˆã†ãªå¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨
* HAProxy
    * è¨¼æ˜æ›¸æ›´æ–°ã®ãŸã‚ã«Certbotã®ã‚ˆã†ãªå¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨
* Nginx ã®ã‚ˆã†ãª Ingress Controller ã‚’æŒã¤ Kubernetes
    * è¨¼æ˜æ›¸ã®æ›´æ–°ã« cert-manager ã®ã‚ˆã†ãªå¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨
* ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒã‚µãƒ¼ãƒ“ã‚¹ã®ä¸€éƒ¨ã¨ã—ã¦å†…éƒ¨çš„ã«å‡¦ç†ï¼ˆä¸‹è¨˜ã‚’å‚ç…§ğŸ‘‡ï¼‰

ã‚‚ã†1ã¤ã®é¸æŠè‚¢ã¯ã€HTTPSã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’å«ã‚“ã ã‚ˆã‚Šå¤šãã®ä½œæ¥­ã‚’è¡Œã†**ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ã‚µãƒ¼ãƒ“ã‚¹**ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚ ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã¯åˆ¶é™ãŒã‚ã£ãŸã‚Šã€æ–™é‡‘ãŒé«˜ããªã£ãŸã‚Šã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ãã®å ´åˆã€TLS Termination Proxyã‚’è‡ªåˆ†ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹å¿…è¦ã¯ãªã„ã§ã™ã€‚

æ¬¡ã®ç« ã§å…·ä½“ä¾‹ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ã€‚

---

æ¬¡ã«è€ƒæ…®ã™ã¹ãã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯ã€å®Ÿéš›ã®APIã‚’å®Ÿè¡Œã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆä¾‹ï¼šUvicornï¼‰ã«é–¢é€£ã™ã‚‹ã‚‚ã®ã™ã¹ã¦ã§ã™ã€‚

## ãƒ—ãƒ­ã‚°ãƒ©ãƒ  ã¨ ãƒ—ãƒ­ã‚»ã‚¹

ç§ãŸã¡ã¯ã€Œ**ãƒ—ãƒ­ã‚»ã‚¹**ã€ã¨ã„ã†è¨€è‘‰ã«ã¤ã„ã¦ãŸãã•ã‚“è©±ã™ã®ã§ã€ãã®æ„å‘³ã‚„ã€Œ**ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã€ã¨ã„ã†è¨€è‘‰ã¨ã®é•ã„ã‚’æ˜ç¢ºã«ã—ã¦ãŠãã¨ä¾¿åˆ©ã§ã™ã€‚

### ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ã¯ä½•ã‹

**ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã¨ã„ã†è¨€è‘‰ã¯ã€ä¸€èˆ¬çš„ã«ã„ã‚ã„ã‚ãªã‚‚ã®ã‚’è¡¨ç¾ã™ã‚‹ã®ã«ä½¿ã‚ã‚Œã¾ã™ï¼š

* ãƒ—ãƒ­ã‚°ãƒ©ãƒãŒæ›¸ã**ã‚³ãƒ¼ãƒ‰**ã€**Pythonãƒ•ã‚¡ã‚¤ãƒ«**
* OSã«ã‚ˆã£ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹: `python`, `python.exe` or `uvicorn`ï¼‰
* OSä¸Šã§**å®Ÿè¡Œ**ã—ã¦ã„ã‚‹é–“ã€CPUã‚’ä½¿ç”¨ã—ã€ãƒ¡ãƒ¢ãƒªä¸Šã«ä½•ã‹ã‚’ä¿å­˜ã™ã‚‹ç‰¹å®šã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆ**ãƒ—ãƒ­ã‚»ã‚¹**ã¨ã‚‚å‘¼ã°ã‚Œã‚‹ï¼‰

### ãƒ—ãƒ­ã‚»ã‚¹ã¨ã¯ä½•ã‹

**ãƒ—ãƒ­ã‚»ã‚¹**ã¨ã„ã†è¨€è‘‰ã¯é€šå¸¸ã€ã‚ˆã‚Šå…·ä½“çš„ãªæ„å‘³ã§ä½¿ã‚ã‚Œã€OSã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã ã‘ã‚’æŒ‡ã—ã¾ã™ï¼ˆå…ˆã»ã©ã®æœ€å¾Œã®èª¬æ˜ã®ã‚ˆã†ã«ï¼‰ï¼š

* OSä¸Šã§**å®Ÿè¡Œ**ã—ã¦ã„ã‚‹ç‰¹å®šã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
    * ã“ã‚Œã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã‚³ãƒ¼ãƒ‰ã‚’æŒ‡ã™ã®ã§ã¯ãªãã€OSã«ã‚ˆã£ã¦**å®Ÿè¡Œ**ã•ã‚Œã€ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’æŒ‡ã—ã¾ã™ã€‚
* ã©ã‚“ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚„ã‚³ãƒ¼ãƒ‰ã‚‚ã€ãã‚ŒãŒ**å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã¨ãã«ã ã‘æ©Ÿèƒ½**ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€**ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã¨ãã ã‘**ã§ã™ã€‚
* ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ã‚‹ã„ã¯OSã«ã‚ˆã£ã¦ã€ **çµ‚äº†**ï¼ˆã‚ã‚‹ã„ã¯ "kill"ï¼‰ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®æ™‚ç‚¹ã§ã€ãƒ—ãƒ­ã‚»ã‚¹ã¯å®Ÿè¡Œ/å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’åœæ­¢ã—ã€ãã‚Œä»¥é™ã¯**ä½•ã‚‚ã§ããªããªã‚Šã¾ã™**ã€‚
* ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹å„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚„å„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãªã©ã€ãã®èƒŒå¾Œã«ã„ãã¤ã‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãã—ã¦é€šå¸¸ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒèµ·å‹•ã—ã¦ã„ã‚‹é–“ã€**å¤šãã®ãƒ—ãƒ­ã‚»ã‚¹ãŒ**åŒæ™‚ã«å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã™ã€‚
* **åŒã˜ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã®**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ãŒåŒæ™‚ã«å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

OSã®ã€Œã‚¿ã‚¹ã‚¯ãƒ»ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€ã‚„ã€Œã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒ¢ãƒ‹ã‚¿ãƒ¼ã€ï¼ˆã¾ãŸã¯åŒæ§˜ã®ãƒ„ãƒ¼ãƒ«ï¼‰ã‚’ç¢ºèªã™ã‚Œã°ã€ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚»ã‚¹ã®å¤šããŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã®è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚

ä¾‹ãˆã°ã€åŒã˜ãƒ–ãƒ©ã‚¦ã‚¶ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆFirefoxã€Chromeã€Edgeãªã©ï¼‰ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãŒè¤‡æ•°ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚é€šå¸¸ã€1ã¤ã®ã‚¿ãƒ–ã«ã¤ã1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒå®Ÿè¡Œã•ã‚Œã€ã•ã‚‰ã«ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚‚å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

<img class="shadow" src="/img/deployment/concepts/image01.png">

---

ã•ã¦ã€**ãƒ—ãƒ­ã‚»ã‚¹**ã¨**ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã¨ã„ã†ç”¨èªã®é•ã„ã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦è©±ã‚’ç¶šã‘ã¾ã™ã€‚

## èµ·å‹•æ™‚ã®å®Ÿè¡Œ

ã»ã¨ã‚“ã©ã®å ´åˆã€Web APIã‚’ä½œæˆã™ã‚‹ã¨ãã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã„ã¤ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã€**å¸¸ã«**ä¸­æ–­ã•ã‚Œã‚‹ã“ã¨ãªã**å®Ÿè¡Œã•ã‚Œã‚‹**ã“ã¨ã‚’æœ›ã¿ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ç‰¹å®šã®çŠ¶æ³ã§ã®ã¿å®Ÿè¡Œã•ã›ãŸã„ç‰¹åˆ¥ãªç†ç”±ãŒã‚ã‚‹å ´åˆã¯åˆ¥ã§ã™ãŒã€ãã®æ™‚é–“ã®ã»ã¨ã‚“ã©ã¯ã€å¸¸ã«å®Ÿè¡Œã•ã‚Œã€**åˆ©ç”¨å¯èƒ½**ã§ã‚ã‚‹ã“ã¨ã‚’æœ›ã¿ã¾ã™ã€‚

### ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ä¸Šã§ã®å®Ÿè¡Œ

ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã€ä»®æƒ³ãƒã‚·ãƒ³ãªã©ï¼‰ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ãã«ã§ãã‚‹æœ€ã‚‚ç°¡å˜ãªã“ã¨ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã™ã‚‹ã¨ãã¨åŒã˜ã‚ˆã†ã«ã€Uvicornï¼ˆã¾ãŸã¯åŒæ§˜ã®ã‚‚ã®ï¼‰ã‚’æ‰‹å‹•ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã™ã€‚ ã“ã®æ–¹æ³•ã¯**é–‹ç™ºä¸­**ã«ã¯å½¹ã«ç«‹ã¤ã¨æ€ã‚ã‚Œã¾ã™ã€‚

ã—ã‹ã—ã€ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šãŒåˆ‡ã‚ŒãŸå ´åˆã€**å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹**ã¯ãŠãã‚‰ããƒ€ã‚¦ãƒ³ã—ã¦ã—ã¾ã†ã§ã—ã‚‡ã†ã€‚

ãã—ã¦ã‚µãƒ¼ãƒãƒ¼ãŒå†èµ·å‹•ã•ã‚ŒãŸå ´åˆï¼ˆã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚„ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‹ã‚‰ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å¾Œãªã©ï¼‰ã€ãŠãã‚‰ãã‚ãªãŸã¯ãã‚Œã«**æ°—ã¥ã‹ãªã„ã§ã—ã‚‡ã†**ã€‚ãã®ãŸã‚ã€ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ‰‹å‹•ã§å†èµ·å‹•ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ã™ã‚‰æ°—ã¥ã‹ãªã„ã§ã—ã‚‡ã†ã€‚ã¤ã¾ã‚Šã€APIã¯ãƒ€ã‚¦ãƒ³ã—ãŸã¾ã¾ãªã®ã§ã™ã€‚ğŸ˜±

### èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«å®Ÿè¡Œ

ä¸€èˆ¬çš„ã«ã€ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆUvicornãªã©ï¼‰ã¯ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«é–‹å§‹ã•ã‚Œã€**äººã®ä»‹å…¥**ã‚’å¿…è¦ã¨ã›ãšã«ã€APIã¨ä¸€ç·’ã«ãƒ—ãƒ­ã‚»ã‚¹ãŒå¸¸ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸã„ã¨æ€ã‚ã‚Œã¾ã™ï¼ˆUvicornãŒFastAPIã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã™ã‚‹ãªã©ï¼‰ã€‚

### åˆ¥ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ç”¨æ„

ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€é€šå¸¸ã¯**åˆ¥ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã‚’ç”¨æ„ã—ã€èµ·å‹•æ™‚ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ãã—ã¦å¤šãã®å ´åˆã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ä¾‹ãˆã°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚‚å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

### èµ·å‹•æ™‚ã«å®Ÿè¡Œã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®ä¾‹

å®Ÿè¡Œã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®ä¾‹ã‚’ã„ãã¤ã‹æŒ™ã’ã¾ã™:

* Docker
* Kubernetes
* Docker Compose
* Swarm ãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ Docker
* Systemd
* Supervisor
* ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒã‚µãƒ¼ãƒ“ã‚¹ã®ä¸€éƒ¨ã¨ã—ã¦å†…éƒ¨çš„ã«å‡¦ç†
* ãã®ã»ã‹...

æ¬¡ã®ç« ã§ã€ã‚ˆã‚Šå…·ä½“çš„ãªä¾‹ã‚’æŒ™ã’ã¦ã„ãã¾ã™ã€‚

## å†èµ·å‹•

èµ·å‹•æ™‚ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã®ã¨åŒæ§˜ã«ã€å¤±æ•—å¾Œã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒ**å†èµ·å‹•**ã•ã‚Œã‚‹ã“ã¨ã‚‚ç¢ºèªã—ãŸã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚

### æˆ‘ã€…ã¯é–“é•ã„ã‚’çŠ¯ã™

ç§ãŸã¡äººé–“ã¯å¸¸ã«**é–“é•ã„**ã‚’çŠ¯ã—ã¾ã™ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã«ã¯ã€ã»ã¨ã‚“ã©å¸¸ã«**ãƒã‚°**ãŒã‚ã‚‰ã‚†ã‚‹ç®‡æ‰€ã«éš ã•ã‚Œã¦ã„ã¾ã™ã€‚ğŸ›

### å°ã•ãªã‚¨ãƒ©ãƒ¼ã¯è‡ªå‹•çš„ã«å‡¦ç†ã•ã‚Œã‚‹

FastAPIã§Web APIã‚’æ§‹ç¯‰ã™ã‚‹éš›ã«ã€ã‚³ãƒ¼ãƒ‰ã«ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆã€FastAPIã¯é€šå¸¸ã€ã‚¨ãƒ©ãƒ¼ã‚’å¼•ãèµ·ã“ã—ãŸå˜ä¸€ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã‚¨ãƒ©ãƒ¼ã‚’å«ã‚ã¾ã™ã€‚ğŸ›¡

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã¦**500 Internal Server Error**ã‚’å—ã‘å–ã‚Šã¾ã™ãŒã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯å®Œå…¨ã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã®ã§ã¯ãªãã€æ¬¡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãŸã‚ã«å‹•ä½œã‚’ç¶šã‘ã¾ã™ã€‚

### é‡å¤§ãªã‚¨ãƒ©ãƒ¼ - ã‚¯ãƒ©ãƒƒã‚·ãƒ¥

ã—ã‹ã—ãªãŒã‚‰ã€**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã•ã›ã‚‹ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦**Uvicornã¨Pythonã‚’ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã•ã›ã‚‹ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ğŸ’¥

ãã‚Œã§ã‚‚ã€ã‚ã‚‹ç®‡æ‰€ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‹ã‚‰ã¨ã„ã£ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ã•ã›ãŸã¾ã¾ã«ã—ãŸããªã„ã§ã—ã‚‡ã†ã€‚ å°‘ãªãã¨ã‚‚å£Šã‚Œã¦ã„ãªã„*ãƒ‘ã‚¹ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³*ã«ã¤ã„ã¦ã¯ã€**å®Ÿè¡Œã—ç¶šã‘ãŸã„**ã¯ãšã§ã™ã€‚

### ã‚¯ãƒ©ãƒƒã‚·ãƒ¥å¾Œã®å†èµ·å‹•

ã—ã‹ã—ã€å®Ÿè¡Œä¸­ã®**ãƒ—ãƒ­ã‚»ã‚¹**ã‚’ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã•ã›ã‚‹ã‚ˆã†ãªæœ¬å½“ã«ã²ã©ã„ã‚¨ãƒ©ãƒ¼ã®å ´åˆã€å°‘ãªãã¨ã‚‚2ã€œ3å›ã»ã©ãƒ—ãƒ­ã‚»ã‚¹ã‚’**å†èµ·å‹•**ã•ã›ã‚‹å¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã—ã‚‡ã†ã€‚

/// tip

...ã¨ã¯ã„ãˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ãŒ**ã™ãã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹**ã®ã§ã‚ã‚Œã°ã€ã„ã¤ã¾ã§ã‚‚å†èµ·å‹•ã—ç¶šã‘ã‚‹ã®ã¯æ„å‘³ãŒãªã„ã§ã—ã‚‡ã†ã€‚ã—ã‹ã—ã€ãã®å ´åˆã¯ãŠãã‚‰ãé–‹ç™ºä¸­ã‹å°‘ãªãã¨ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ç›´å¾Œã«æ°—ã¥ãã¨æ€ã‚ã‚Œã¾ã™ã€‚

ãã“ã§ã€**å°†æ¥**ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã€ãã‚Œã§ã‚‚å†ã‚¹ã‚¿ãƒ¼ãƒˆã•ã›ã‚‹ã“ã¨ã«æ„å‘³ãŒã‚ã‚‹ã‚ˆã†ãªã€ä¸»ãªã‚±ãƒ¼ã‚¹ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã¿ã¾ã™ã€‚

///

ã‚ãªãŸã¯ãŠãã‚‰ã**å¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å†èµ·å‹•ã‚’æ‹…å½“ã™ã‚‹ã“ã¨ã‚’æœ›ã‚€ã¨è€ƒãˆã¾ã™ã€‚ ãªãœãªã‚‰ã€ãã®æ™‚ç‚¹ã§Uvicornã¨Pythonã‚’ä½¿ã£ãŸåŒã˜ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã™ã§ã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¦ãŠã‚Šã€åŒã˜ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŒã˜ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ä½•ã‚‚ã§ããªã„ãŸã‚ã§ã™ã€‚

### è‡ªå‹•çš„ã«å†èµ·å‹•ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®ä¾‹

ã»ã¨ã‚“ã©ã®å ´åˆã€å‰è¿°ã—ãŸ**èµ·å‹•æ™‚ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹**ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã¯ã€è‡ªå‹•ã§**å†èµ·å‹•**ã™ã‚‹ã“ã¨ã«ã‚‚åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚

ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ï¼š

* Docker
* Kubernetes
* Docker Compose
* Swarm ãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ Docker
* Systemd
* Supervisor
* ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒã‚µãƒ¼ãƒ“ã‚¹ã®ä¸€éƒ¨ã¨ã—ã¦å†…éƒ¨çš„ã«å‡¦ç†
* ãã®ã»ã‹...

## ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ - ãƒ—ãƒ­ã‚»ã‚¹ã¨ãƒ¡ãƒ¢ãƒªãƒ¼

FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€Uvicorn ã®ã‚ˆã†ãªã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½¿ç”¨ã—ã€**1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹**ã§1åº¦ã«è¤‡æ•°ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«åŒæ™‚ã«å¯¾å¿œã§ãã¾ã™ã€‚

ã—ã‹ã—ã€å¤šãã®å ´åˆã€è¤‡æ•°ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã‚’åŒæ™‚ã«å®Ÿè¡Œã—ãŸã„ã¨è€ƒãˆã‚‹ã§ã—ã‚‡ã†ã€‚

### è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ - Worker

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ•°ãŒå˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹ã§å‡¦ç†ã§ãã‚‹æ•°ã‚’è¶…ãˆã¦ãŠã‚Šï¼ˆãŸã¨ãˆã°ä»®æƒ³ãƒã‚·ãƒ³ãŒãã‚Œã»ã©å¤§ãããªã„å ´åˆï¼‰ã€ã‹ã¤ã‚µãƒ¼ãƒãƒ¼ã® CPU ã«**è¤‡æ•°ã®ã‚³ã‚¢**ãŒã‚ã‚‹å ´åˆã€åŒã˜ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§åŒæ™‚ã«**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’å®Ÿè¡Œã•ã›ã€ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åˆ†æ•£ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

åŒã˜APIãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã€ãã‚Œã‚‰ã¯ä¸€èˆ¬çš„ã«**Workerï¼ãƒ¯ãƒ¼ã‚«ãƒ¼**ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

### ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ ã¨ ãƒãƒ¼ãƒˆ
<!-- NOTE: https.md written in Japanese does not exist, so it redirects to English one  -->

[HTTPSã«ã¤ã„ã¦](https.md){.internal-link target=_blank}ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã€1ã¤ã®ã‚µãƒ¼ãƒãƒ¼ã§1ã¤ã®ãƒãƒ¼ãƒˆã¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®çµ„ã¿åˆã‚ã›ã§ãƒªãƒƒã‚¹ãƒ³ã§ãã‚‹ã®ã¯1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹ã ã‘ã§ã‚ã‚‹ã“ã¨ã‚’è¦šãˆã¦ã„ã¾ã™ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã“ã‚Œã¯ã„ã¾ã ã«åŒã˜ã§ã™ã€‚

ãã®ãŸã‚ã€**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’åŒæ™‚ã«æŒã¤ã«ã¯**ãƒãƒ¼ãƒˆã§ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ã‚‹å˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹**ãŒå¿…è¦ã§ã‚ã‚Šã€ãã‚ŒãŒä½•ã‚‰ã‹ã®æ–¹æ³•ã§å„ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã«é€šä¿¡ã‚’é€ä¿¡ã™ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

### ãƒ—ãƒ­ã‚»ã‚¹ã‚ãŸã‚Šã®ãƒ¡ãƒ¢ãƒªãƒ¼

ã•ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒãƒ¡ãƒ¢ãƒªã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«ã¯ã€ä¾‹ãˆã°æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚„å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’å¤‰æ•°ã«å…¥ã‚ŒãŸã‚Šã™ã‚‹å ´åˆã§ã¯ã€**ã‚µãƒ¼ãƒãƒ¼ã®ãƒ¡ãƒ¢ãƒªï¼ˆRAMï¼‰**ã‚’å°‘ã—æ¶ˆè²»ã—ã¾ã™ã€‚

ãã—ã¦è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯é€šå¸¸ã€**ãƒ¡ãƒ¢ãƒªã‚’å…±æœ‰ã—ã¾ã›ã‚“**ã€‚ã“ã‚Œã¯ã€å®Ÿè¡Œä¸­ã®å„ãƒ—ãƒ­ã‚»ã‚¹ãŒãã‚Œãã‚Œç‹¬è‡ªã®å¤‰æ•°ã‚„ãƒ¡ãƒ¢ãƒªç­‰ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€ã‚³ãƒ¼ãƒ‰å†…ã§å¤§é‡ã®ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã—ã¦ã„ã‚‹å ´åˆã€**å„ãƒ—ãƒ­ã‚»ã‚¹**ã¯åŒç­‰ã®é‡ã®ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

### ã‚µãƒ¼ãƒãƒ¼ãƒ¡ãƒ¢ãƒªãƒ¼

ä¾‹ãˆã°ã€ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ãŒ **1GBã®ã‚µã‚¤ã‚ºã®æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«**ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å ´åˆã€APIã§1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å°‘ãªãã¨ã‚‚1GBã®RAMã‚’æ¶ˆè²»ã—ã¾ã™ã€‚

ã¾ãŸã€**4ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹**ï¼ˆ4ã¤ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ï¼‰ã‚’èµ·å‹•ã™ã‚‹ã¨ã€ãã‚Œãã‚ŒãŒ1GBã®RAMã‚’æ¶ˆè²»ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€åˆè¨ˆã§APIã¯**4GBã®RAM**ã‚’æ¶ˆè²»ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã‚„ä»®æƒ³ãƒã‚·ãƒ³ã®RAMãŒ3GBã—ã‹ãªã„å ´åˆã€4GBä»¥ä¸Šã®RAMã‚’ãƒ­ãƒ¼ãƒ‰ã—ã‚ˆã†ã¨ã™ã‚‹ã¨å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚ğŸš¨

### è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ - ä¾‹

ã“ã®ä¾‹ã§ã¯ã€2ã¤ã®**ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ã‚’èµ·å‹•ã—åˆ¶å¾¡ã™ã‚‹**ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ» ãƒ—ãƒ­ã‚»ã‚¹**ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ» ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€ãŠãã‚‰ãIPã®**ãƒãƒ¼ãƒˆ**ã§ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚ãã—ã¦ã€ã™ã¹ã¦ã®é€šä¿¡ã‚’ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã«è»¢é€ã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**ã‚’å—ã‘ã¦**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**ã‚’è¿”ã™ãŸã‚ã®ä¸»è¦ãªè¨ˆç®—ã‚’è¡Œã„ã€ã‚ãªãŸãŒå¤‰æ•°ã«å…¥ã‚ŒãŸã‚‚ã®ã¯ä½•ã§ã‚‚RAMã«ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

<img src="/img/deployment/concepts/process-ram.svg">

ãã—ã¦ã‚‚ã¡ã‚ã‚“ã€åŒã˜ãƒã‚·ãƒ³ã§ã¯ã€ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã¯åˆ¥ã«ã€**ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚‚å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚

èˆˆå‘³æ·±ã„ã“ã¨ã«ã€å„ãƒ—ãƒ­ã‚»ã‚¹ãŒä½¿ç”¨ã™ã‚‹**CPU**ã®å‰²åˆã¯æ™‚é–“ã¨ã¨ã‚‚ã«å¤§ãã**å¤‰å‹•**ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€**ãƒ¡ãƒ¢ãƒªï¼ˆRAMï¼‰**ã¯é€šå¸¸ã€å¤šã‹ã‚Œå°‘ãªã‹ã‚Œ**å®‰å®š**ã—ã¾ã™ã€‚

æ¯å›åŒç¨‹åº¦ã®è¨ˆç®—ã‚’è¡Œã†APIãŒã‚ã‚Šã€å¤šãã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã„ã‚‹ã®ã§ã‚ã‚Œã°ã€**CPUä½¿ç”¨ç‡**ã‚‚ãŠãã‚‰ã**å®‰å®š**ã™ã‚‹ã§ã—ã‚‡ã†ï¼ˆå¸¸ã«æ€¥æ¿€ã«ä¸Šä¸‹ã™ã‚‹ã®ã§ã¯ãªãï¼‰ã€‚

### ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒ„ãƒ¼ãƒ«ã¨æˆ¦ç•¥ã®ä¾‹

ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ã„ãã¤ã‹ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã‚ã‚Šã¾ã™ãŒã€å…·ä½“çš„ãªæˆ¦ç•¥ã«ã¤ã„ã¦ã¯æ¬¡ã®ç« (Dockerã‚„ã‚³ãƒ³ãƒ†ãƒŠã®ç« ãªã©)ã§è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

è€ƒæ…®ã™ã¹ãä¸»ãªåˆ¶ç´„ã¯ã€**ãƒ‘ãƒ–ãƒªãƒƒã‚¯IP**ã®**ãƒãƒ¼ãƒˆ**ã‚’å‡¦ç†ã™ã‚‹**å˜ä¸€ã®**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå­˜åœ¨ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ãã—ã¦ã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ãƒˆã•ã‚ŒãŸ**ãƒ—ãƒ­ã‚»ã‚¹/ãƒ¯ãƒ¼ã‚«ãƒ¼**ã«é€šä¿¡ã‚’**é€ä¿¡**ã™ã‚‹æ–¹æ³•ã‚’æŒã¤å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

è€ƒãˆã‚‰ã‚Œã‚‹çµ„ã¿åˆã‚ã›ã¨æˆ¦ç•¥ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ï¼š

* **Gunicorn**ãŒ**Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼**ã‚’ç®¡ç†
    * Gunicornã¯**IP**ã¨**ãƒãƒ¼ãƒˆ**ã‚’ãƒªãƒƒã‚¹ãƒ³ã™ã‚‹**ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£**ã§ã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯**è¤‡æ•°ã®Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ã‚’æŒã¤ã“ã¨ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã‚‹ã€‚
* **Uvicorn**ãŒ**Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼**ã‚’ç®¡ç†
    * 1ã¤ã®Uvicornã®**ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**ãŒ**IP**ã¨**ãƒãƒ¼ãƒˆ**ã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã€**è¤‡æ•°ã®Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ã‚’èµ·å‹•ã™ã‚‹ã€‚
* **Kubernetes**ã‚„ãã®ä»–ã®åˆ†æ•£**ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚·ã‚¹ãƒ†ãƒ **
    * **Kubernetes**ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä½•ã‹ãŒ**IP**ã¨**ãƒãƒ¼ãƒˆ**ã‚’ãƒªãƒƒã‚¹ãƒ³ã™ã‚‹ã€‚ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€**è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã«ãã‚Œãã‚Œ**1ã¤ã®Uvicornãƒ—ãƒ­ã‚»ã‚¹**ã‚’å®Ÿè¡Œã•ã›ã‚‹ã“ã¨ã§è¡Œã‚ã‚Œã‚‹ã€‚
* **ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ã‚µãƒ¼ãƒ“ã‚¹**ã«ã‚ˆã‚‹ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    * ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã¯ãŠãã‚‰ã**ã‚ãªãŸã®ãŸã‚ã«ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‡¦ç†**ã—ã¾ã™ã€‚**å®Ÿè¡Œã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹**ã‚„ä½¿ç”¨ã™ã‚‹**ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸**ã‚’å®šç¾©ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã„ãšã‚Œã«ã›ã‚ˆã€ãã‚Œã¯ãŠãã‚‰ã**å˜ä¸€ã®Uvicornãƒ—ãƒ­ã‚»ã‚¹**ã§ã‚ã‚Šã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã¯ãã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ‹…å½“ã™ã‚‹ã§ã—ã‚‡ã†ã€‚

/// tip

ã“ã‚Œã‚‰ã®**ã‚³ãƒ³ãƒ†ãƒŠ**ã‚„Dockerãã—ã¦Kubernetesã«é–¢ã™ã‚‹é …ç›®ãŒã€ã¾ã ã‚ã¾ã‚Šæ„å‘³ã‚’ãªã—ã¦ã„ãªãã¦ã‚‚å¿ƒé…ã—ãªã„ã§ãã ã•ã„ã€‚
<!-- NOTE: the current version of docker.md is outdated compared to English one. -->

ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã€Dockerã€Kubernetesãªã©ã«ã¤ã„ã¦ã¯ã€æ¬¡ã®ç« ã§è©³ã—ãèª¬æ˜ã—ã¾ã™: [ã‚³ãƒ³ãƒ†ãƒŠå†…ã®FastAPI - Docker](docker.md){.internal-link target=_blank}.

///

## é–‹å§‹å‰ã®äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’**é–‹å§‹ã™ã‚‹å‰**ã«ã€ã„ãã¤ã‹ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆãŒå¤šãã‚ã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** ã‚’å®Ÿè¡Œã—ãŸã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã—ã‹ã—ã»ã¨ã‚“ã©ã®å ´åˆã€ã“ã‚Œã‚‰ã®æ‰‹é †ã‚’**1åº¦**ã«å®Ÿè¡Œã—ãŸã„ã¨è€ƒãˆã‚‹ã§ã—ã‚‡ã†ã€‚

ãã®ãŸã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã™ã‚‹å‰ã®**äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—**ã‚’å®Ÿè¡Œã™ã‚‹**å˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’ç”¨æ„ã—ãŸã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚

ãã—ã¦ã€ãã‚Œã‚‰ã®äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã®ãŒå˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã“ã¨ã¯ãã®å¾Œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ã®ãŸã‚ã«**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ï¼ˆè¤‡æ•°ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ï¼‰ã‚’èµ·å‹•ã—ãŸå ´åˆã‚‚åŒæ§˜ã§ã™ã€‚

ã“ã‚Œã‚‰ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒ**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ã«ã‚ˆã£ã¦å®Ÿè¡Œã•ã‚ŒãŸå ´åˆã€**ä¸¦åˆ—**ã«å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦ä½œæ¥­ãŒ**é‡è¤‡**ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ãã—ã¦ã€ã‚‚ã—ãã®ã‚¹ãƒ†ãƒƒãƒ—ãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ˆã†ãªç¹Šç´°ãªã‚‚ã®ã§ã‚ã£ãŸå ´åˆã€äº’ã„ã«ç«¶åˆã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã‚‚ã¡ã‚ã‚“ã€äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ä½•åº¦ã‚‚å®Ÿè¡Œã—ã¦ã‚‚å•é¡ŒãŒãªã„å ´åˆã‚‚ã‚ã‚Šã€ãã®éš›ã¯å¯¾å‡¦ãŒã‹ãªã‚Šæ¥½ã«ãªã‚Šã¾ã™ã€‚

/// tip

ã¾ãŸã€ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«ã‚ˆã£ã¦ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã™ã‚‹å‰ã®**äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—**ãŒå¿…è¦ãªã„å ´åˆã‚‚ã‚ã‚‹ã“ã¨ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚

ãã®å ´åˆã¯ã€ã“ã®ã‚ˆã†ãªã“ã¨ã‚’å¿ƒé…ã™ã‚‹å¿…è¦ã¯ãªã„ã§ã™ã€‚ğŸ¤·

///

### äº‹å‰ã‚¹ãƒ†ãƒƒãƒ—ã®æˆ¦ç•¥ä¾‹

ã“ã‚Œã¯**ã‚·ã‚¹ãƒ†ãƒ ã‚’**ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³•ã«**å¤§ããä¾å­˜**ã™ã‚‹ã ã‚ã†ã—ã€ãŠãã‚‰ããƒ—ãƒ­ã‚°ãƒ©ãƒ ã®èµ·å‹•æ–¹æ³•ã‚„å†èµ·å‹•ã®å‡¦ç†ãªã©ã«ã‚‚é–¢ä¿‚ã—ã¦ãã‚‹ã§ã—ã‚‡ã†ã€‚

è€ƒãˆã‚‰ã‚Œã‚‹ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ã„ãã¤ã‹æŒ™ã’ã¦ã¿ã¾ã™ï¼š

* ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒŠã®å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹Kubernetesã®Initã‚³ãƒ³ãƒ†ãƒŠ
* äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã™ã‚‹bashã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    * åˆ©ç”¨ã™ã‚‹bashã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èµ·å‹•ï¼å†èµ·å‹•ã—ãŸã‚Šã€ã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡ºã—ãŸã‚Šã™ã‚‹æ–¹æ³•ã¯ä»¥å‰ã¨ã—ã¦å¿…è¦ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

/// tip

<!-- NOTE: the current version of docker.md is outdated compared to English one. -->
ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ã£ãŸå…·ä½“çš„ãªä¾‹ã«ã¤ã„ã¦ã¯ã€æ¬¡ã®ç« ã§ç´¹ä»‹ã—ã¾ã™: [ã‚³ãƒ³ãƒ†ãƒŠå†…ã®FastAPI - Docker](docker.md){.internal-link target=_blank}.

///

## ãƒªã‚½ãƒ¼ã‚¹ã®åˆ©ç”¨

ã‚ãªãŸã®ã‚µãƒ¼ãƒãƒ¼ã¯**ãƒªã‚½ãƒ¼ã‚¹**ã§ã‚ã‚Šã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—CPUã®è¨ˆç®—æ™‚é–“ã‚„åˆ©ç”¨å¯èƒ½ãªRAMãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã¾ãŸã¯**åˆ©ç”¨**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã‚’ã©ã‚Œãã‚‰ã„æ¶ˆè²»ï¼åˆ©ç”¨ã—ãŸã„ã§ã™ã‹ï¼Ÿ ã€Œå°‘ãªã„æ–¹ãŒè‰¯ã„ã€ã¨è€ƒãˆã‚‹ã®ã¯ç°¡å˜ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ãŒã€å®Ÿéš›ã«ã¯ã€**ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã›ãšã«å¯èƒ½ãªé™ã‚Š**æœ€å¤§é™ã«æ´»ç”¨ã—ãŸã„ã§ã—ã‚‡ã†ã€‚

3å°ã®ã‚µãƒ¼ãƒãƒ¼ã«ãŠé‡‘ã‚’æ‰•ã£ã¦ã„ã‚‹ã«ã‚‚é–¢ã‚ã‚‰ãšã€ãã®RAMã¨CPUã‚’å°‘ã—ã—ã‹ä½¿ã£ã¦ã„ãªã„ã¨ã—ãŸã‚‰ã€ãŠãã‚‰ã**ãŠé‡‘ã‚’ç„¡é§„ã«ã—ã¦ã„ã‚‹** ğŸ’¸ã€ãŠãã‚‰ã**ã‚µãƒ¼ãƒãƒ¼ã®é›»åŠ›ã‚’ç„¡é§„ã«ã—ã¦ã„ã‚‹** ğŸŒã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

ãã®å ´åˆã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚’2å°ã ã‘ã«ã—ã¦ã€ãã®ãƒªã‚½ãƒ¼ã‚¹ï¼ˆCPUã€ãƒ¡ãƒ¢ãƒªã€ãƒ‡ã‚£ã‚¹ã‚¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¸¯åŸŸå¹…ãªã©ï¼‰ã‚’ã‚ˆã‚Šé«˜ã„å‰²åˆã§ä½¿ç”¨ã™ã‚‹æ–¹ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚

ä¸€æ–¹ã€2å°ã®ã‚µãƒ¼ãƒãƒ¼ãŒã‚ã‚Šã€ãã®CPUã¨RAMã®**100%ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹**å ´åˆã€ã‚ã‚‹æ™‚ç‚¹ã§1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒã‚ˆã‚Šå¤šãã®ãƒ¡ãƒ¢ãƒªã‚’è¦æ±‚ã—ã€ã‚µãƒ¼ãƒãƒ¼ã¯ãƒ‡ã‚£ã‚¹ã‚¯ã‚’ã€Œãƒ¡ãƒ¢ãƒªã€ã¨ã—ã¦ä½¿ç”¨ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚ï¼ˆä½•åƒå€ã‚‚é…ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ï¼‰
ã‚‚ã—ãã¯**ã‚¯ãƒ©ãƒƒã‚·ãƒ¥**ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Œã°ã€ã‚ã‚‹ã„ã¯ã‚ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãŒä½•ã‚‰ã‹ã®è¨ˆç®—ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãã—ã¦CPUãŒå†ã³ç©ºãã¾ã§å¾…ãŸãªã‘ã‚Œã°ãªã‚‰ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã“ã®å ´åˆã€**1ã¤ä½™åˆ†ãªã‚µãƒ¼ãƒãƒ¼**ã‚’ç”¨æ„ã—ã€ãã®ä¸Šã§ã„ãã¤ã‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿè¡Œã—ã€ã™ã¹ã¦ã®ã‚µãƒ¼ãƒãƒ¼ãŒ**ååˆ†ãªRAMã¨CPUæ™‚é–“ã‚’æŒã¤ã‚ˆã†ã«ã™ã‚‹**ã®ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚

ã¾ãŸã€ä½•ã‚‰ã‹ã®ç†ç”±ã§APIã®åˆ©ç”¨ãŒæ€¥å¢—ã™ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ã€‚ã‚‚ã—ã‹ã—ãŸã‚‰ãã‚ŒãŒæµè¡Œã£ãŸã®ã‹ã‚‚ã—ã‚Œãªã„ã—ã€ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚„ãƒœãƒƒãƒˆãŒä½¿ã„å§‹ã‚ãŸã®ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚ãã®ã‚ˆã†ãªå ´åˆã«å‚™ãˆã¦ã€ä½™åˆ†ãªãƒªã‚½ãƒ¼ã‚¹ã‚’ç”¨æ„ã—ã¦ãŠãã¨å®‰å¿ƒã§ã—ã‚‡ã†ã€‚

ä¾‹ãˆã°ã€ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ç‡ã®**50%ã‹ã‚‰90%ã®ç¯„å›²**ã§**ä»»æ„ã®æ•°å­—**ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

é‡è¦ãªã®ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’å¾®èª¿æ•´ã™ã‚‹ãŸã‚ã«ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’è¨­å®šã—æ¸¬å®šã™ã‚‹ã“ã¨ãŒã€ãŠãã‚‰ãä½¿ç”¨ã—ãŸã„ä¸»è¦ãªè¦ç´ ã§ã‚ã‚‹ã“ã¨ã§ã™ã€‚

`htop`ã®ã‚ˆã†ãªå˜ç´”ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã€ã‚µãƒ¼ãƒãƒ¼ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹CPUã‚„RAMã€ã‚ã‚‹ã„ã¯å„ãƒ—ãƒ­ã‚»ã‚¹ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹é‡ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚ã‚‹ã„ã¯ã€ã‚ˆã‚Šè¤‡é›‘ãªç›£è¦–ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã€ã‚µãƒ¼ãƒã«åˆ†æ•£ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

## ã¾ã¨ã‚

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã‚’æ±ºå®šã™ã‚‹éš›ã«ã€è€ƒæ…®ã™ã¹ãã§ã‚ã‚ã†ä¸»è¦ãªã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ã„ãã¤ã‹ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã—ãŸï¼š

* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ - HTTPS
* èµ·å‹•æ™‚ã®å®Ÿè¡Œ
* å†èµ·å‹•
* ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼‰
* ãƒ¡ãƒ¢ãƒªãƒ¼
* é–‹å§‹å‰ã®äº‹å‰ã‚¹ãƒ†ãƒƒãƒ—

ã“ã‚Œã‚‰ã®è€ƒãˆæ–¹ã¨ãã®é©ç”¨æ–¹æ³•ã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’è¨­å®šã—ãŸã‚Šèª¿æ•´ã—ãŸã‚Šã™ã‚‹éš›ã«å¿…è¦ãªç›´æ„Ÿçš„ãªåˆ¤æ–­ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã¯ãšã§ã™ã€‚ğŸ¤“

æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚ãªãŸãŒå–ã‚Šå¾—ã‚‹æˆ¦ç•¥ã«ã¤ã„ã¦ã€ã‚ˆã‚Šå…·ä½“çš„ãªä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚ğŸš€


================================================
File: /docs/ja/docs/deployment/docker.md
================================================
# ã‚³ãƒ³ãƒ†ãƒŠå†…ã®FastAPI - Docker

FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆã€ä¸€èˆ¬çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯**Linuxã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸**ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã“ã¨ã§ã™ã€‚

åŸºæœ¬çš„ã«ã¯ <a href="https://www.docker.com/" class="external-link" target="_blank">**Docker**</a>ã‚’ç”¨ã„ã¦è¡Œã‚ã‚Œã¾ã™ã€‚ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€ã„ãã¤ã‹ã®æ–¹æ³•ã®ã„ãšã‚Œã‹ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

Linuxã‚³ãƒ³ãƒ†ãƒŠã®ä½¿ç”¨ã«ã¯ã€**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**ã€**åå¾©å¯èƒ½æ€§ï¼ˆãƒ¬ãƒ—ãƒªã‚«ãƒ“ãƒªãƒ†ã‚£ï¼‰**ã€**ã‚·ãƒ³ãƒ—ãƒªã‚·ãƒ†ã‚£**ãªã©ã€ã„ãã¤ã‹ã®åˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

/// tip

TODO: ãªãœã‹é·ç§»ã§ããªã„
ãŠæ€¥ãã§ã€ã™ã§ã«ã“ã‚Œã‚‰ã®æƒ…å ±ã‚’ã”å­˜ã˜ã§ã™ã‹ï¼Ÿ [ä»¥ä¸‹ã®`Dockerfile`ã®ç®‡æ‰€ğŸ‘‡](#build-a-docker-image-for-fastapi)ã¸ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¦ãã ã•ã„ã€‚

///

<details>
<summary>Dockerfile ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ ğŸ‘€</summary>

```Dockerfile
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

COPY ./app /code/app

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80"]

# If running behind a proxy like Nginx or Traefik add --proxy-headers
# CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80", "--proxy-headers"]
```

</details>

## ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯ä½•ã‹

ã‚³ãƒ³ãƒ†ãƒŠï¼ˆä¸»ã«Linuxã‚³ãƒ³ãƒ†ãƒŠï¼‰ã¯ã€åŒã˜ã‚·ã‚¹ãƒ†ãƒ å†…ã®ä»–ã®ã‚³ãƒ³ãƒ†ãƒŠï¼ˆä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ã‹ã‚‰éš”é›¢ã•ã‚ŒãŸçŠ¶æ…‹ã‚’ä¿ã¡ãªãŒã‚‰ã€ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ã‚„å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã™ã‚‹éå¸¸ã«**è»½é‡**ãªæ–¹æ³•ã§ã™ã€‚

Linuxã‚³ãƒ³ãƒ†ãƒŠã¯ã€ãƒ›ã‚¹ãƒˆï¼ˆãƒã‚·ãƒ³ã€ä»®æƒ³ãƒã‚·ãƒ³ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒãƒ¼ãªã©ï¼‰ã®åŒã˜Linuxã‚«ãƒ¼ãƒãƒ«ã‚’ä½¿ç”¨ã—ã¦å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€ï¼ˆOSå…¨ä½“ã‚’ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹å®Œå…¨ãªä»®æƒ³ãƒã‚·ãƒ³ã¨æ¯”ã¹ã¦ï¼‰éå¸¸ã«è»½é‡ã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ã€ã‚³ãƒ³ãƒ†ãƒŠã¯**ãƒªã‚½ãƒ¼ã‚¹ã‚’ã»ã¨ã‚“ã©æ¶ˆè²»ã—ã¾ã›ã‚“**ãŒã€ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç›´æ¥å®Ÿè¡Œã™ã‚‹ã®ã«åŒ¹æ•µã™ã‚‹é‡ã§ã™ï¼ˆä»®æƒ³ãƒã‚·ãƒ³ã¯ã‚‚ã£ã¨æ¶ˆè²»ã—ã¾ã™ï¼‰ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã¯ã¾ãŸã€ç‹¬è‡ªã®**åˆ†é›¢ã•ã‚ŒãŸ**å®Ÿè¡Œãƒ—ãƒ­ã‚»ã‚¹ï¼ˆé€šå¸¸ã¯1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹ã®ã¿ï¼‰ã‚„ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’æŒã¡ã¾ã™ã€‚ ã“ã®ã“ã¨ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€é–‹ç™ºãªã©ã‚’ç°¡ç´ åŒ–ã•ã›ã¾ã™ã€‚

## ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã¯ä½•ã‹

**ã‚³ãƒ³ãƒ†ãƒŠ**ã¯ã€**ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸**ã‹ã‚‰å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã«å­˜åœ¨ã™ã¹ãã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ç’°å¢ƒå¤‰æ•°ã€ãã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚³ãƒãƒ³ãƒ‰/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’**é™çš„ã«**ãƒãƒ¼ã‚¸ãƒ§ãƒ³åŒ–ã—ãŸã‚‚ã®ã§ã™ã€‚ ã“ã“ã§ã®**é™çš„**ã¨ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠ**ã‚¤ãƒ¡ãƒ¼ã‚¸**ã¯å®Ÿè¡Œã•ã‚Œã¦ãŠã‚‰ãšã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã¿ã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

ä¿å­˜ã•ã‚ŒãŸé™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ã‚ã‚‹ã€Œ**ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸**ã€ã¨ã¯å¯¾ç…§çš„ã«ã€ã€Œ**ã‚³ãƒ³ãƒ†ãƒŠ**ã€ã¯é€šå¸¸ã€å®Ÿè¡Œä¸­ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€ã¤ã¾ã‚Š**å®Ÿè¡Œ**ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’æŒ‡ã—ã¾ã™ã€‚

**ã‚³ãƒ³ãƒ†ãƒŠ**ãŒèµ·å‹•ã•ã‚Œå®Ÿè¡Œã•ã‚Œã‚‹ã¨ãï¼ˆ**ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸**ã‹ã‚‰èµ·å‹•ã•ã‚Œã‚‹ã¨ãï¼‰ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ç’°å¢ƒå¤‰æ•°ãªã©ãŒä½œæˆã•ã‚ŒãŸã‚Šå¤‰æ›´ã•ã‚ŒãŸã‚Šã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã‚‰ã®å¤‰æ›´ã¯ãã®ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã®ã¿å­˜åœ¨ã—ã¾ã™ãŒã€åŸºç›¤ã¨ãªã‚‹ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¯æ®‹ã‚Šã¾ã›ã‚“ï¼ˆãƒ‡ã‚£ã‚¹ã‚¯ã«ä¿å­˜ã•ã‚Œã¾ã›ã‚“ï¼‰ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ **ãƒ—ãƒ­ã‚°ãƒ©ãƒ ** ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãã®å†…å®¹ã€ä¾‹ãˆã° `python` ã¨ `main.py` ãƒ•ã‚¡ã‚¤ãƒ«ã«åŒ¹æ•µã—ã¾ã™ã€‚

ãã—ã¦ã€**ã‚³ãƒ³ãƒ†ãƒŠ**è‡ªä½“ã¯ï¼ˆ**ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸**ã¨ã¯å¯¾ç…§çš„ã«ï¼‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã‚‚ã¨ã«ã—ãŸå®Ÿéš›ã®å®Ÿè¡Œä¸­ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚Šã€**ãƒ—ãƒ­ã‚»ã‚¹**ã«åŒ¹æ•µã—ã¾ã™ã€‚

å®Ÿéš›ã€ã‚³ãƒ³ãƒ†ãƒŠãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€**ãƒ—ãƒ­ã‚»ã‚¹ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹**ã¨ãã ã‘ã§ã™ï¼ˆé€šå¸¸ã¯å˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹ã ã‘ã§ã™ï¼‰ã€‚ ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒãªã„å ´åˆã€ã‚³ãƒ³ãƒ†ãƒŠã¯åœæ­¢ã—ã¾ã™ã€‚

## ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸

Dockerã¯ã€**ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸**ã¨**ã‚³ãƒ³ãƒ†ãƒŠ**ã‚’ä½œæˆãƒ»ç®¡ç†ã™ã‚‹ãŸã‚ã®ä¸»è¦ãªãƒ„ãƒ¼ãƒ«ã®1ã¤ã§ã™ã€‚

ãã—ã¦ã€Dockerã«ã¯Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆã‚³ãƒ³ãƒ†ãƒŠï¼‰ã‚’å…±æœ‰ã™ã‚‹<a href="https://hub.docker.com/" class="external-link" target="_blank">Docker Hub</a>ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

Docker Hubã¯ å¤šãã®ãƒ„ãƒ¼ãƒ«ã‚„ç’°å¢ƒã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾å¿œã—ã¦ã„ã‚‹äºˆã‚ä½œæˆã•ã‚ŒãŸ**å…¬å¼ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸**ã‚’ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã«æä¾›ã—ã¦ã„ã¾ã™ã€‚

ä¾‹ãˆã°ã€å…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸ã®1ã¤ã«<a href="https://hub.docker.com/_/python" class="external-link" target="_blank">Python Image</a>ãŒã‚ã‚Šã¾ã™ã€‚

ãã®ä»–ã«ã‚‚ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãªã©ã•ã¾ã–ã¾ãªã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™ï¼š

* <a href="https://hub.docker.com/_/postgres" class="external-link" target="_blank">PostgreSQL</a>
* <a href="https://hub.docker.com/_/mysql" class="external-link" target="_blank">MySQL</a>
* <a href="https://hub.docker.com/_/mongo" class="external-link" target="_blank">MongoDB</a>
* <a href="https://hub.docker.com/_/redis" class="external-link" target="_blank">Redis</a>, etc.

äºˆã‚ä½œæˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ç•°ãªã‚‹ãƒ„ãƒ¼ãƒ«ã‚’**çµ„ã¿åˆã‚ã›ã¦**ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒéå¸¸ã«ç°¡å˜ã«ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’è©¦ã™å ´åˆã«ç‰¹ã«ä¾¿åˆ©ã§ã™ã€‚ã»ã¨ã‚“ã©ã®å ´åˆã€**å…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸**ã‚’ä½¿ã„ã€ç’°å¢ƒå¤‰æ•°ã§è¨­å®šã™ã‚‹ã ã‘ã§è‰¯ã„ã§ã™ã€‚

ãã†ã™ã‚Œã°å¤šãã®å ´åˆã€ã‚³ãƒ³ãƒ†ãƒŠã¨Dockerã«ã¤ã„ã¦å­¦ã³ã€ãã®çŸ¥è­˜ã‚’ã•ã¾ã–ã¾ãªãƒ„ãƒ¼ãƒ«ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚ˆã£ã¦å†åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¤ã¾ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€Pythonã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€Reactãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‚™ãˆãŸã‚¦ã‚§ãƒ–ãƒ»ã‚µãƒ¼ãƒãƒ¼ãªã©ã€ã•ã¾ã–ã¾ãªã‚‚ã®ã‚’**è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã§å®Ÿè¡Œã—ã€ãã‚Œã‚‰ã‚’å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã§æ¥ç¶šã—ã¾ã™ã€‚

ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆDockerã‚„Kubernetesãªã©ï¼‰ã«ã¯ã€ã“ã†ã—ãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°æ©Ÿèƒ½ãŒçµ±åˆã•ã‚Œã¦ã„ã¾ã™ã€‚

## ã‚³ãƒ³ãƒ†ãƒŠã¨ãƒ—ãƒ­ã‚»ã‚¹

é€šå¸¸ã€**ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸**ã¯ãã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã«**ã‚³ãƒ³ãƒ†ãƒŠ**ã®èµ·å‹•æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¾ãŸã¯ã‚³ãƒãƒ³ãƒ‰ã¨ã€ãã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«æ¸¡ã•ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å«ã¿ã¾ã™ã€‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã®æ“ä½œã¨ã‚ˆãä¼¼ã¦ã„ã¾ã™ã€‚

**ã‚³ãƒ³ãƒ†ãƒŠ**ãŒèµ·å‹•ã•ã‚Œã‚‹ã¨ã€ãã®ã‚³ãƒãƒ³ãƒ‰/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ï¼ˆãŸã ã—ã€åˆ¥ã®ã‚³ãƒãƒ³ãƒ‰/ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦å®Ÿè¡Œã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼‰ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã¯ã€**ãƒ¡ã‚¤ãƒ³ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ï¼ˆã‚³ãƒãƒ³ãƒ‰ã¾ãŸã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼‰ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹é™ã‚Šå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã¯é€šå¸¸**1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’æŒã¡ã¾ã™ãŒã€ãƒ¡ã‚¤ãƒ³ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰ã‚µãƒ–ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã‚’èµ·å‹•ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã€ãã†ã™ã‚Œã°åŒã˜ã‚³ãƒ³ãƒ†ãƒŠå†…ã«**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’æŒã¤ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€**å°‘ãªãã¨ã‚‚1ã¤ã®å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹**ãŒãªã‘ã‚Œã°ã€å®Ÿè¡Œä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’æŒã¤ã“ã¨ã¯ã§ããªã„ã§ã™ã€‚ãƒ¡ã‚¤ãƒ³ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ãŒåœæ­¢ã™ã‚Œã°ã€ã‚³ãƒ³ãƒ†ãƒŠã‚‚åœæ­¢ã—ã¾ã™ã€‚

## Build a Docker Image for FastAPI

ã¨ã„ã†ã“ã¨ã§ã€ä½•ã‹ä½œã‚Šã¾ã—ã‚‡ã†ï¼ğŸš€

FastAPIç”¨ã®**Dockerã‚¤ãƒ¡ãƒ¼ã‚¸**ã‚’ã€**å…¬å¼Python**ã‚¤ãƒ¡ãƒ¼ã‚¸ã«åŸºã¥ã„ã¦**ã‚¼ãƒ­ã‹ã‚‰**ãƒ“ãƒ«ãƒ‰ã™ã‚‹æ–¹æ³•ã‚’ãŠè¦‹ã›ã—ã¾ã™ã€‚

ã“ã‚Œã¯**ã»ã¨ã‚“ã©ã®å ´åˆ**ã«ã‚„ã‚ŠãŸã„ã“ã¨ã§ã™ã€‚ä¾‹ãˆã°ï¼š

* **Kubernetes**ã¾ãŸã¯åŒæ§˜ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ
* **Raspberry Pi**ã§å®Ÿè¡Œã™ã‚‹å ´åˆ
* ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å®Ÿè¡Œã—ã¦ãã‚Œã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ãªã©ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¦ä»¶ï¼ˆpackage requirementsï¼‰

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¦ä»¶**ã¯é€šå¸¸ã€ä½•ã‚‰ã‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¦ä»¶ã¯ä¸»ã«**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã«ä¾å­˜ã™ã‚‹ã§ã—ã‚‡ã†ã€‚

æœ€ã‚‚ä¸€èˆ¬çš„ãªæ–¹æ³•ã¯ã€`requirements.txt` ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¨ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ 1 è¡Œãšã¤æ›¸ãã“ã¨ã§ã™ã€‚

ã‚‚ã¡ã‚ã‚“ã€[FastAPI ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦](versions.md){.internal-link target=_blank}ã§èª­ã‚“ã ã®ã¨åŒã˜ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ä½¿ç”¨ã—ã¦ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¯„å›²ã‚’è¨­å®šã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€`requirements.txt` ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

```
fastapi>=0.68.0,<0.69.0
pydantic>=1.8.0,<2.0.0
uvicorn>=0.15.0,<0.16.0
```

ãã—ã¦é€šå¸¸ã€ä¾‹ãˆã° `pip` ã‚’ä½¿ã£ã¦ã“ã‚Œã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š

<div class="termy">

```console
$ pip install -r requirements.txt
---> 100%
Successfully installed fastapi pydantic uvicorn
```

</div>

/// info

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©ã—ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚„ãƒ„ãƒ¼ãƒ«ã¯ä»–ã«ã‚‚ã‚ã‚Šã¾ã™ã€‚

Poetryã‚’ä½¿ã£ãŸä¾‹ã¯ã€å¾Œè¿°ã™ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã”ç´¹ä»‹ã—ã¾ã™ã€‚ğŸ‘‡

///

### **FastAPI**ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹

* `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã®ä¸­ã«å…¥ã‚Šã¾ã™
* ç©ºã®ãƒ•ã‚¡ã‚¤ãƒ« `__init__.py` ã‚’ä½œæˆã—ã¾ã™
* `main.py` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼š

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

### Dockerfile

åŒã˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`Dockerfile`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼š

```{ .dockerfile .annotate }
# (1)
FROM python:3.9

# (2)
WORKDIR /code

# (3)
COPY ./requirements.txt /code/requirements.txt

# (4)
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (5)
COPY ./app /code/app

# (6)
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80"]
```

1. å…¬å¼ã®Pythonãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰å§‹ã‚ã¾ã™

2. ç¾åœ¨ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ `/code` ã«è¨­å®šã—ã¾ã™

    ã“ã“ã« `requirements.txt` ãƒ•ã‚¡ã‚¤ãƒ«ã¨ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç½®ãã¾ã™ã€‚

3. è¦ä»¶ãŒæ›¸ã‹ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `/code` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™

    æ®‹ã‚Šã®ã‚³ãƒ¼ãƒ‰ã§ã¯ãªãã€æœ€åˆã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚

    ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯**é »ç¹ã«ã¯å¤‰æ›´ã•ã‚Œãªã„**ã®ã§ã€Dockerã¯ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ãã‚Œã‚’æ¤œçŸ¥ã—**ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã‚’ä½¿ç”¨ã—ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚

4. è¦ä»¶ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™
    `--no-cache-dir` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ãªã„ã‚ˆã†ã« `pip` ã«æŒ‡ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã¯ã€åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã« `pip` ã‚’å†åº¦å®Ÿè¡Œã™ã‚‹å ´åˆã«ã®ã¿æœ‰åŠ¹ã§ã™ãŒã€ã‚³ãƒ³ãƒ†ãƒŠã§ä½œæ¥­ã™ã‚‹å ´åˆã¯ãã†ã§ã¯ãªã„ã§ã™ã€‚

    /// note

    `--no-cache-dir`ã¯`pip`ã«é–¢é€£ã—ã¦ã„ã‚‹ã ã‘ã§ã€Dockerã‚„ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯ä½•ã®é–¢ä¿‚ã‚‚ãªã„ã§ã™ã€‚

    ///

    `--upgrade` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆã€`pip` ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã‚ˆã†ã«æŒ‡ç¤ºã—ã¾ã™ã€‚

    ä½•æ•…ãªã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯**Dockerã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã«ã‚ˆã£ã¦æ¤œå‡ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã§ã‚ã‚Šã€ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚‚åˆ©ç”¨å¯èƒ½ãªå ´åˆã¯**Dockerã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

    ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€é–‹ç™ºä¸­ã«ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½•åº¦ã‚‚ãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã«ã€**æ¯å›**ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ã‚’**ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹**ä»£ã‚ã‚Šã«å¤šãã®**æ™‚é–“**ã‚’**ç¯€ç´„**ã§ãã¾ã™ã€‚

5. ./app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ `/code` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚

    ã“ã‚Œã«ã¯**æœ€ã‚‚é »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹**ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€Dockerã®**ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã¯**ã“ã‚Œä»¥é™ã®ã‚¹ãƒ†ãƒƒãƒ—**ã«ç°¡å˜ã«ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

    ãã®ãŸã‚ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’æœ€é©åŒ–ã™ã‚‹ãŸã‚ã«ã€`Dockerfile`ã® **æœ€å¾Œ** ã«ã“ã‚Œã‚’ç½®ãã“ã¨ãŒé‡è¦ã§ã™ã€‚

6. `uvicorn`ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®**ã‚³ãƒãƒ³ãƒ‰**ã‚’è¨­å®šã—ã¾ã™

    `CMD` ã¯æ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã‚’å–ã‚Šã€ãã‚Œãã‚Œã®æ–‡å­—åˆ—ã¯ã‚¹ãƒšãƒ¼ã‚¹ã§åŒºåˆ‡ã‚‰ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã«å…¥åŠ›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

    ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ **ç¾åœ¨ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**ã‹ã‚‰å®Ÿè¡Œã•ã‚Œã€ä¸Šè¨˜ã® `WORKDIR /code` ã«ã¦è¨­å®šã—ãŸ `/code` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨åŒã˜ã§ã™ã€‚

    ãã®ãŸã‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ `/code` ã§é–‹å§‹ã—ãã®ä¸­ã«ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ `./app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã‚ã‚‹ã®ã§ã€**Uvicorn** ã¯ `app.main` ã‹ã‚‰ `app` ã‚’å‚ç…§ã—ã€**ã‚¤ãƒ³ãƒãƒ¼ãƒˆ** ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

/// tip

ã‚³ãƒ¼ãƒ‰å†…ã®"+"ã®å¹ãå‡ºã—ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€å„è¡ŒãŒä½•ã‚’ã™ã‚‹ã®ã‹ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„ã€‚ğŸ‘†

///

ã“ã‚Œã§ã€æ¬¡ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ãªã‚‹ã¯ãšã§ã™ï¼š

```
.
â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ main.py
â”œâ”€â”€ Dockerfile
â””â”€â”€ requirements.txt
```

#### TLS Termination Proxyã®è£å´

Nginx ã‚„ Traefik ã®ã‚ˆã†ãª TLS Termination Proxy (ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µ) ã®å¾Œã‚ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã—ã¦ã„ã‚‹å ´åˆã¯ã€`--proxy-headers`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚

ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€Uvicornã«ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§HTTPSã§å‹•ä½œã—ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦ã€é€ä¿¡ã•ã‚Œã‚‹ãƒ˜ãƒƒãƒ€ã‚’ä¿¡é ¼ã™ã‚‹ã‚ˆã†æŒ‡ç¤ºã—ã¾ã™ã€‚

```Dockerfile
CMD ["uvicorn", "app.main:app", "--proxy-headers", "--host", "0.0.0.0", "--port", "80"]
```

#### Dockerã‚­ãƒ£ãƒƒã‚·ãƒ¥

ã“ã®`Dockerfile`ã«ã¯é‡è¦ãªãƒˆãƒªãƒƒã‚¯ãŒã‚ã‚Šã€ã¾ãš**ä¾å­˜é–¢ä¿‚ã ã‘ã®ãƒ•ã‚¡ã‚¤ãƒ«**ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚ãã®ç†ç”±ã‚’èª¬æ˜ã—ã¾ã™ã€‚

```Dockerfile
COPY ./requirements.txt /code/requirements.txt
```

Dockerã‚„ä»–ã®ãƒ„ãƒ¼ãƒ«ã¯ã€ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’**æ®µéšçš„ã«**ãƒ“ãƒ«ãƒ‰ã—ã€**1ã¤ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä»–ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä¸Šã«**è¿½åŠ ã—ã¾ã™ã€‚`Dockerfile`ã®å…ˆé ­ã‹ã‚‰é–‹å§‹ã—ã€`Dockerfile`ã®å„å‘½ä»¤ã«ã‚ˆã£ã¦ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚

Dockerã‚„åŒæ§˜ã®ãƒ„ãƒ¼ãƒ«ã¯ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã«**å†…éƒ¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã‚‚ä½¿ç”¨ã—ã¾ã™ã€‚å‰å›ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ§‹ç¯‰ã—ãŸã¨ãã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚Œã¦ã„ãªã„å ´åˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†åº¦ã‚³ãƒ”ãƒ¼ã—ã¦ã‚¼ãƒ­ã‹ã‚‰æ–°ã—ã„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä½œæˆã™ã‚‹ä»£ã‚ã‚Šã«ã€**å‰å›ä½œæˆã—ãŸåŒã˜ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å†åˆ©ç”¨**ã—ã¾ã™ã€‚

ãŸã ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼ã‚’é¿ã‘ã‚‹ã ã‘ã§ã¯ã‚ã¾ã‚Šæ”¹å–„ã•ã‚Œã¾ã›ã‚“ãŒã€ãã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨ã—ãŸãŸã‚ã€**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å‘½ä»¤ã®ãŸã‚ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ï¼š

```Dockerfile
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt
```

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¦ä»¶ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯**é »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“**ã€‚ãã®ãŸã‚ã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã“ã¨ã§ã€Dockerã¯ãã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯**ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã—ã¦ã€Dockerã¯**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ãŸã‚ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã‚’ä½¿ç”¨ã—ã€ãã‚Œã‚‰ã®ä¾å­˜é–¢ä¿‚ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã—ã¦ã€ã“ã“ã§**å¤šãã®æ™‚é–“ã‚’ç¯€ç´„**ã—ã¾ã™ã€‚âœ¨ ...ãã—ã¦é€€å±ˆãªå¾…ã¡æ™‚é–“ã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ğŸ˜ªğŸ˜†

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯**æ•°åˆ†**ã‹ã‹ã‚Šã¾ã™ãŒã€**ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã‚’ä½¿ãˆã°**ã›ã„ãœã„æ•°ç§’**ã§ã™ã€‚

åŠ ãˆã¦ã€é–‹ç™ºä¸­ã«ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½•åº¦ã‚‚ãƒ“ãƒ«ãƒ‰ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ã«ãªã‚‹ãŸã‚ã€å¤šãã®æ™‚é–“ã‚’ç¯€ç´„ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã—ã¦`Dockerfile`ã®æœ€çµ‚è¡Œã®è¿‘ãã§ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚ã“ã®ç†ç”±ã¯ã€**æœ€ã‚‚é »ç¹ã«**å¤‰æ›´ã•ã‚Œã‚‹ã‚‚ã®ãªã®ã§ã€ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å¾Œã«ã‚ã‚‹ã‚‚ã®ã¯ã»ã¨ã‚“ã©ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ããªã„ã®ãŸã‚ã§ã™ã€‚

```Dockerfile
COPY ./app /code/app
```

### Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹

ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæƒã£ãŸã®ã§ã€ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã—ã‚‡ã†ã€‚

* ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ï¼ˆ`Dockerfile`ãŒã‚ã‚‹å ´æ‰€ã§ã€`app`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã‚ã‚Šã¾ã™ï¼‰
* FastAPI ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ï¼š

<div class="termy">

```console
$ docker build -t myimage .

---> 100%
```

</div>

/// tip

æœ«å°¾ã® `.` ã«æ³¨ç›®ã—ã¦ã»ã—ã„ã§ã™ã€‚ã“ã‚Œã¯ `./` ã¨åŒã˜æ„å‘³ã§ã™ã€‚ ã“ã‚Œã¯Dockerã«ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã«ä½¿ç”¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡ç¤ºã—ã¾ã™ã€‚

ã“ã®å ´åˆã€åŒã˜ã‚«ãƒ¬ãƒ³ãƒˆãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª(`.`)ã§ã™ã€‚

///

### Dockerã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ã™ã‚‹

* ã‚¤ãƒ¡ãƒ¼ã‚¸ã«åŸºã¥ã„ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

<div class="termy">

```console
$ docker run -d --name mycontainer -p 80:80 myimage
```

</div>

## ç¢ºèªã™ã‚‹

Dockerã‚³ãƒ³ãƒ†ãƒŠã®<a href="http://192.168.99.100/items/5?q=somequery" class="external-link" target="_blank">http://192.168.99.100/items/5?q=somequery</a> ã‚„ <a href="http://127.0.0.1/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1/items/5?q=somequery</a> (ã¾ãŸã¯ãã‚Œã«ç›¸å½“ã™ã‚‹Dockerãƒ›ã‚¹ãƒˆã‚’ä½¿ç”¨ã—ãŸã‚‚ã®ï¼‰ã¨ã„ã£ãŸURLã§ç¢ºèªã§ãã‚‹ã¯ãšã§ã™ã€‚

ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```JSON
{"item_id": 5, "q": "somequery"}
```

## ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã“ã‚Œã‚‰ã®URLã«ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™:  <a href="http://192.168.99.100/docs" class="external-link" target="_blank">http://192.168.99.100/docs</a> ã‚„ <a href="http://127.0.0.1/docs" class="external-link" target="_blank">http://127.0.0.1/docs</a> (ã¾ãŸã¯ãã‚Œã«ç›¸å½“ã™ã‚‹Dockerãƒ›ã‚¹ãƒˆã‚’ä½¿ç”¨ã—ãŸã‚‚ã®ï¼‰

ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€è‡ªå‹•å¯¾è©±å‹APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ<a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>ãŒæä¾›ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

## ä»£æ›¿ã®APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã¾ãŸã€<a href="http://192.168.99.100/redoc" class="external-link" target="_blank">http://192.168.99.100/redoc</a> ã‚„ <a href="http://127.0.0.1/redoc" class="external-link" target="_blank">http://127.0.0.1/redoc</a> (ã¾ãŸã¯ãã‚Œã«ç›¸å½“ã™ã‚‹Dockerãƒ›ã‚¹ãƒˆã‚’ä½¿ç”¨ã—ãŸã‚‚ã®ï¼‰ã«ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

ä»£æ›¿ã®è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ<a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>ã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã®FastAPIã§Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹

FastAPI ãŒå˜ä¸€ã®ãƒ•ã‚¡ã‚¤ãƒ«ã€ä¾‹ãˆã° `./app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãªã„ `main.py` ã®å ´åˆã€ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š
```
.
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ main.py
â””â”€â”€ requirements.txt
```

ãã†ã™ã‚Œã°ã€`Dockerfile`ã®ä¸­ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ãŸã‚ã«ã€å¯¾å¿œã™ã‚‹ãƒ‘ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã‚ˆã„ã§ã™ï¼š

```{ .dockerfile .annotate hl_lines="10  13" }
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (1)
COPY ./main.py /code/

# (2)
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "80"]
```

1. main.py`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `/code` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç›´æ¥ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚

2. Uvicornã‚’å®Ÿè¡Œã—ã€`main`ã‹ã‚‰`app`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«æŒ‡ç¤ºã—ã¾ã™ï¼ˆ`app.main`ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã®ã§ã¯ãªãï¼‰ã€‚

æ¬¡ã«Uvicornã‚³ãƒãƒ³ãƒ‰ã‚’èª¿æ•´ã—ã¦ã€`app.main` ã®ä»£ã‚ã‚Šã«æ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« `main` ã‚’ä½¿ç”¨ã—ã€FastAPIã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ `app` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

ã‚³ãƒ³ãƒ†ãƒŠã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã€[ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ](concepts.md){.internal-link target=_blank}ã«å…±é€šã™ã‚‹ã„ãã¤ã‹ã«ã¤ã„ã¦ã€ã‚‚ã†ä¸€åº¦èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã¯ä¸»ã«ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®**ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤**ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç°¡ç´ åŒ–ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ã“ã‚Œã‚‰ã®**ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**ã‚’æ‰±ã†ãŸã‚ã®ç‰¹å®šã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å¼·åˆ¶ã™ã‚‹ã‚‚ã®ã§ã¯ãªã„ã§ã™ã€‚

**è‰¯ã„ãƒ‹ãƒ¥ãƒ¼ã‚¹**ã¯ã€ãã‚Œãã‚Œã®ç•°ãªã‚‹æˆ¦ç•¥ã«ã¯ã€ã™ã¹ã¦ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ã‚«ãƒãƒ¼ã™ã‚‹æ–¹æ³•ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ğŸ‰

ã“ã‚Œã‚‰ã®**ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**ã‚’ã‚³ãƒ³ãƒ†ãƒŠã®è¦³ç‚¹ã‹ã‚‰è¦‹ç›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ - HTTPS
* èµ·å‹•æ™‚ã®å®Ÿè¡Œ
* å†èµ·å‹•
* **ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼‰**
* ãƒ¡ãƒ¢ãƒª
* é–‹å§‹å‰ã®äº‹å‰ã‚¹ãƒ†ãƒƒãƒ—

## HTTPS

FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã® **ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸**ï¼ˆãŠã‚ˆã³å¾Œã§å®Ÿè¡Œä¸­ã® **ã‚³ãƒ³ãƒ†ãƒŠ**ï¼‰ã ã‘ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹ã¨ã€é€šå¸¸ã€HTTPSã¯åˆ¥ã®ãƒ„ãƒ¼ãƒ«ã‚’ç”¨ã„ã¦**å¤–éƒ¨ã§**å‡¦ç†ã•ã‚Œã¾ã™ã€‚

ä¾‹ãˆã°<a href="https://traefik.io/" class="external-link" target="_blank">Traefik</a>ã®ã‚ˆã†ã«ã€**HTTPS**ã¨**è¨¼æ˜æ›¸**ã®**è‡ªå‹•**å–å¾—ã‚’æ‰±ã†åˆ¥ã®ã‚³ãƒ³ãƒ†ãƒŠã§ã‚ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ã€‚

/// tip

Traefikã¯Dockerã‚„Kubernetesãªã©ã¨çµ±åˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚³ãƒ³ãƒ†ãƒŠç”¨ã®HTTPSã®è¨­å®šã‚„æ§‹æˆã¯ã¨ã¦ã‚‚ç°¡å˜ã§ã™ã€‚

///

ã‚ã‚‹ã„ã¯ã€ï¼ˆã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ãªãŒã‚‰ï¼‰ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒã‚µãƒ¼ãƒ“ã‚¹ã®1ã¤ã¨ã—ã¦HTTPSã‚’å‡¦ç†ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

## èµ·å‹•æ™‚ãŠã‚ˆã³å†èµ·å‹•æ™‚ã®å®Ÿè¡Œ

é€šå¸¸ã€ã‚³ãƒ³ãƒ†ãƒŠã®**èµ·å‹•ã¨å®Ÿè¡Œ**ã‚’æ‹…å½“ã™ã‚‹åˆ¥ã®ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚

ãã‚Œã¯ç›´æ¥**Docker**ã§ã‚ã£ãŸã‚Šã€**Docker Compose**ã§ã‚ã£ãŸã‚Šã€**Kubernetes**ã§ã‚ã£ãŸã‚Šã€**ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹**ã§ã‚ã£ãŸã‚Šã—ã¾ã™ã€‚

ã»ã¨ã‚“ã©ã®å ´åˆï¼ˆã¾ãŸã¯ã™ã¹ã¦ã®å ´åˆï¼‰ã€èµ·å‹•æ™‚ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã—ã€å¤±æ•—æ™‚ã«å†èµ·å‹•ã‚’æœ‰åŠ¹ã«ã™ã‚‹ç°¡å˜ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°Dockerã§ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®`--restart`ãŒè©²å½“ã—ã¾ã™ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ã‚ãªã‘ã‚Œã°ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•æ™‚ã‚„å†èµ·å‹•æ™‚ã«å®Ÿè¡Œã•ã›ã‚‹ã®ã¯é¢å€’ã§é›£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ã€**ã‚³ãƒ³ãƒ†ãƒŠ**ã§ä½œæ¥­ã™ã‚‹å ´åˆã€ã»ã¨ã‚“ã©ã®ã‚±ãƒ¼ã‚¹ã§ãã®æ©Ÿèƒ½ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚âœ¨

## ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ - ãƒ—ãƒ­ã‚»ã‚¹æ•°

**Kubernetes** ã‚„ Docker Swarm ãƒ¢ãƒ¼ãƒ‰ã€Nomadã€ã‚ã‚‹ã„ã¯è¤‡æ•°ã®ãƒã‚·ãƒ³ä¸Šã§åˆ†æ•£ã‚³ãƒ³ãƒ†ãƒŠã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®åŒæ§˜ã®è¤‡é›‘ãªã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ã£ã¦ãƒã‚·ãƒ³ã®<abbr title="ä½•ã‚‰ã‹ã®æ–¹æ³•ã§æ¥ç¶šã•ã‚Œã€ä¸€ç·’ã«å‹•ä½œã™ã‚‹ã‚ˆã†ã«æ§‹æˆã•ã‚ŒãŸãƒã‚·ãƒ³ã®ã‚°ãƒ«ãƒ¼ãƒ—">ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼</abbr>ã‚’æ§‹æˆã—ã¦ã„ã‚‹å ´åˆã€ å„ã‚³ãƒ³ãƒ†ãƒŠã§ï¼ˆWorkerã‚’æŒã¤Gunicornã®ã‚ˆã†ãªï¼‰**ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£**ã‚’ä½¿ç”¨ã™ã‚‹ä»£ã‚ã‚Šã«ã€**ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãƒ»ãƒ¬ãƒ™ãƒ«**ã§**ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’å‡¦ç†ã—ãŸã„ã¨æ€ã†ã§ã—ã‚‡ã†ã€‚

Kubernetesã®ã‚ˆã†ãªåˆ†æ•£ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®1ã¤ã¯é€šå¸¸ã€å…¥ã£ã¦ãã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®**ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°**ã‚’ã‚µãƒãƒ¼ãƒˆã—ãªãŒã‚‰ã€**ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’å‡¦ç†ã™ã‚‹çµ±åˆã•ã‚ŒãŸæ–¹æ³•ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã“ã®ã“ã¨ã¯ã™ã¹ã¦**ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¬ãƒ™ãƒ«**ã«ã¦ã§ã™ã€‚

ãã®ã‚ˆã†ãªå ´åˆã€Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ã§Gunicornã®ã‚ˆã†ãªã‚‚ã®ã‚’å®Ÿè¡Œã™ã‚‹ã®ã§ã¯ãªãã€[ä¸Šè¨˜ã®èª¬æ˜](#dockerfile)ã®ã‚ˆã†ã«**Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã‚¼ãƒ­ã‹ã‚‰**ãƒ“ãƒ«ãƒ‰ã—ã€ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€**å˜ä¸€ã®Uvicornãƒ—ãƒ­ã‚»ã‚¹**ã‚’å®Ÿè¡Œã—ãŸã„ã§ã—ã‚‡ã†ã€‚

### ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼

ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€é€šå¸¸ã¯ãƒ¡ã‚¤ãƒ³ãƒ»ãƒãƒ¼ãƒˆ**ã§ãƒªã‚¹ãƒ‹ãƒ³ã‚°**ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã¯ãšã§ã™ã€‚ãã‚Œã¯ãŠãã‚‰ãã€**HTTPS**ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã®**TLS Termination Proxy**ã§ã‚‚ã‚ã‚‹åˆ¥ã®ã‚³ãƒ³ãƒ†ãƒŠã§ã‚ã£ãŸã‚Šã€åŒæ§˜ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã£ãŸã‚Šã™ã‚‹ã§ã—ã‚‡ã†ã€‚

ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã® **è² è·** ã‚’å—ã‘ã€ (ã†ã¾ãã„ã‘ã°) ãã®è² è·ã‚’**ãƒãƒ©ãƒ³ã‚¹ã‚ˆã** ãƒ¯ãƒ¼ã‚«ãƒ¼ã«åˆ†é…ã™ã‚‹ã®ã§ã€ä¸€èˆ¬ã« **ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µ** ã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚

/// tip

HTTPSã«ä½¿ã‚ã‚Œã‚‹ã‚‚ã®ã¨åŒã˜**TLS Termination Proxy**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ãŠãã‚‰ã**ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼**ã«ã‚‚ãªã‚‹ã§ã—ã‚‡ã†ã€‚

///

ãã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã§ä½œæ¥­ã™ã‚‹å ´åˆã€ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ã¨ç®¡ç†ã«ä½¿ç”¨ã™ã‚‹åŒã˜ã‚·ã‚¹ãƒ†ãƒ ã«ã¯ã€**ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼**ï¼ˆ**TLS Termination Proxy**ã®å¯èƒ½æ€§ã‚‚ã‚ã‚‹ï¼‰ã‹ã‚‰**ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡**ï¼ˆHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã©ï¼‰ã‚’ã‚¢ãƒ—ãƒªã®ã‚ã‚‹ã‚³ãƒ³ãƒ†ãƒŠï¼ˆè¤‡æ•°å¯ï¼‰ã«é€ä¿¡ã™ã‚‹ãŸã‚ã®å†…éƒ¨ãƒ„ãƒ¼ãƒ«ãŒæ—¢ã«ã‚ã‚‹ã¯ãšã§ã™ã€‚

### 1ã¤ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ - è¤‡æ•°ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠãƒ¼

**Kubernetes**ã‚„åŒæ§˜ã®åˆ†æ•£ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ä½œæ¥­ã™ã‚‹å ´åˆã€ãã®å†…éƒ¨ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ¡ã‚¤ãƒ³ã®**ãƒãƒ¼ãƒˆ**ã§ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ã‚‹å˜ä¸€ã®**ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼**ãŒã€ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹**è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã«é€šä¿¡ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ã‚’é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã™ã‚‹ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒ†ãƒŠã«ã¯ã€é€šå¸¸**1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹**ï¼ˆãŸã¨ãˆã°ã€FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹Uvicornãƒ—ãƒ­ã‚»ã‚¹ï¼‰ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ã™ã¹ã¦**åŒä¸€ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã§ã‚ã‚ŠåŒã˜ã‚‚ã®ã‚’å®Ÿè¡Œã—ã¾ã™ãŒã€ãã‚Œãã‚ŒãŒç‹¬è‡ªã®ãƒ—ãƒ­ã‚»ã‚¹ã‚„ãƒ¡ãƒ¢ãƒªãªã©ã‚’æŒã¡ã¾ã™ã€‚ãã†ã™ã‚‹ã“ã¨ã§ã€CPUã®**ç•°ãªã‚‹ã‚³ã‚¢**ã€ã‚ã‚‹ã„ã¯**ç•°ãªã‚‹ãƒã‚·ãƒ³**ã§ã®**ä¸¦åˆ—åŒ–**ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

ãã—ã¦ã€**ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼**ã‚’å‚™ãˆãŸåˆ†æ•£ã‚³ãƒ³ãƒ†ãƒŠã‚·ã‚¹ãƒ†ãƒ ã¯ã€**é †ç•ªã«**ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã‚’å«ã‚€å„ã‚³ãƒ³ãƒ†ãƒŠã«**ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åˆ†é…**ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã€ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹è¤‡æ•°ã®**ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ãƒˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒŠ**ã®1ã¤ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã¾ã™ã€‚

ãã—ã¦é€šå¸¸ã€ã“ã®**ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼**ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®*ä»–ã®*ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä¾‹ãˆã°ã€ç•°ãªã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚„ç•°ãªã‚‹URLãƒ‘ã‚¹ã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®é…ä¸‹ï¼‰ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã€ãã®é€šä¿¡ã‚’ã‚¯ãƒ©ã‚¹ã‚¿å†…ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹*ä»–ã®*ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã®é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒŠã«é€ä¿¡ã—ã¾ã™ã€‚

### 1ã‚³ãƒ³ãƒ†ãƒŠã«ã¤ã1ãƒ—ãƒ­ã‚»ã‚¹

ã“ã®ç¨®ã®ã‚·ãƒŠãƒªã‚ªã§ã¯ã€ã™ã§ã«ã‚¯ãƒ©ã‚¹ã‚¿ãƒ»ãƒ¬ãƒ™ãƒ«ã§ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‡¦ç†ã—ã¦ã„ã‚‹ãŸã‚ã€ãŠãã‚‰ãã‚³ãƒ³ãƒ†ãƒŠã”ã¨ã«**å˜ä¸€ã®ï¼ˆUvicornï¼‰ãƒ—ãƒ­ã‚»ã‚¹**ã‚’æŒã¡ãŸã„ã§ã—ã‚‡ã†ã€‚

ã“ã®å ´åˆã€Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’æŒã¤Gunicornã®ã‚ˆã†ãªãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚„ã€Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’ä½¿ã†Uvicornã¯**é¿ã‘ãŸã„**ã§ã—ã‚‡ã†ã€‚**ã‚³ãƒ³ãƒ†ãƒŠã”ã¨ã«Uvicornã®ãƒ—ãƒ­ã‚»ã‚¹ã¯1ã¤ã ã‘**ã«ã—ãŸã„ã§ã—ã‚‡ã†ï¼ˆãŠãã‚‰ãè¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠãŒå¿…è¦ã§ã—ã‚‡ã†ï¼‰ã€‚

ï¼ˆGunicornã‚„UvicornãŒUvicornãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’ç®¡ç†ã™ã‚‹ã‚ˆã†ã«ï¼‰ã‚³ãƒ³ãƒ†ãƒŠå†…ã«åˆ¥ã®ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’æŒã¤ã“ã¨ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã§ã«å¯¾å‡¦ã—ã¦ã„ã‚‹ã§ã‚ã‚ã†**ä¸è¦ãªè¤‡é›‘ã•**ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã™ã€‚

### Containers with Multiple Processes and Special Cases

ã‚‚ã¡ã‚ã‚“ã€**ç‰¹æ®Šãªã‚±ãƒ¼ã‚¹**ã¨ã—ã¦ã€**Gunicornãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£**ã‚’æŒã¤**ã‚³ãƒ³ãƒ†ãƒŠ**å†…ã§è¤‡æ•°ã®**Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹**ã‚’èµ·å‹•ã•ã›ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ã‚ˆã†ãªå ´åˆã€**å…¬å¼ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸**ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¯ã€è¤‡æ•°ã®**Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹**ã‚’å®Ÿè¡Œã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ã¨ã—ã¦**Gunicorn**ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ç¾åœ¨ã®CPUã‚³ã‚¢ã«åŸºã¥ã„ã¦ãƒ¯ãƒ¼ã‚«ãƒ¼ã®æ•°ã‚’è‡ªå‹•çš„ã«èª¿æ•´ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒã„ãã¤ã‹å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚è©³ã—ãã¯å¾Œè¿°ã®[Gunicornã«ã‚ˆã‚‹å…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ - Uvicorn](#gunicorndocker-uvicorn)ã§èª¬æ˜ã—ã¾ã™ã€‚

ä»¥ä¸‹ã¯ã€ãã‚ŒãŒç†ã«ã‹ãªã£ã¦ã„ã‚‹å ´åˆã®ä¾‹ã§ã™ï¼š

#### ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’**ã‚·ãƒ³ãƒ—ãƒ«**ãªå½¢ã§å®Ÿè¡Œã™ã‚‹å ´åˆã€ãƒ—ãƒ­ã‚»ã‚¹æ•°ã®ç´°ã‹ã„èª¿æ•´ãŒå¿…è¦ãªã„å ´åˆã€è‡ªå‹•åŒ–ã•ã‚ŒãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã ã‘ã§ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãŒå¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä¾‹ãˆã°ã€å…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­å®šãŒå¯èƒ½ã§ã™ã€‚

#### Docker Compose

Docker Composeã§**ã‚·ãƒ³ã‚°ãƒ«ã‚µãƒ¼ãƒ**ï¼ˆã‚¯ãƒ©ã‚¹ã‚¿ã§ã¯ãªã„ï¼‰ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã®ã§ã€å…±æœ‰ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨**ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°**ã‚’ç¶­æŒã—ãªãŒã‚‰ï¼ˆDocker Composeã§ï¼‰ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ç°¡å˜ãªæ–¹æ³•ã¯ãªã„ã§ã—ã‚‡ã†ã€‚

ãã®å ´åˆã€**å˜ä¸€ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã§ã€**ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£**ãŒå†…éƒ¨ã§**è¤‡æ•°ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹**ã‚’èµ·å‹•ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

#### Prometheusã¨ãã®ä»–ã®ç†ç”±

ã¾ãŸã€**1ã¤ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã«**1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’æŒãŸã›ã‚‹ã®ã§ã¯ãªãã€**1ã¤ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã«**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’æŒãŸã›ã‚‹æ–¹ãŒç°¡å˜ã ã¨ã„ã†**ä»–ã®ç†ç”±**ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚

ä¾‹ãˆã°ã€(ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒ)Prometheusã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’åŒã˜ã‚³ãƒ³ãƒ†ãƒŠå†…ã«æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®å ´åˆã€**è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠ**ãŒã‚ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€PrometheusãŒ**ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’**èª­ã¿ã«æ¥ãŸã¨ãã€ã™ã¹ã¦ã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ãƒˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒŠã®**è“„ç©ã•ã‚ŒãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹**ã‚’å–å¾—ã™ã‚‹ã®ã§ã¯ãªãã€æ¯å›**å˜ä¸€ã®ã‚³ãƒ³ãƒ†ãƒŠ**ï¼ˆãã®ç‰¹å®šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã—ãŸã‚³ãƒ³ãƒ†ãƒŠï¼‰ã®ã‚‚ã®ã‚’å–å¾—ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ãã®å ´åˆã€**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’æŒã¤**1ã¤ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã‚’ç”¨æ„ã—ã€åŒã˜ã‚³ãƒ³ãƒ†ãƒŠä¸Šã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ„ãƒ¼ãƒ«ï¼ˆä¾‹ãˆã°Prometheusã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ï¼‰ãŒã™ã¹ã¦ã®å†…éƒ¨ãƒ—ãƒ­ã‚»ã‚¹ã®Prometheusãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ã€ãã®1ã¤ã®ã‚³ãƒ³ãƒ†ãƒŠä¸Šã§ãã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å…¬é–‹ã™ã‚‹æ–¹ãŒã‚·ãƒ³ãƒ—ãƒ«ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

---

é‡è¦ãªã®ã¯ã€ç›²ç›®çš„ã«å¾“ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„æ™®éã®ãƒ«ãƒ¼ãƒ«ã¯ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ã“ã‚Œã‚‰ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€**ã‚ãªãŸè‡ªèº«ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹**ã‚’è©•ä¾¡ã—ã€ã‚ãªãŸã®ã‚·ã‚¹ãƒ†ãƒ ã«æœ€é©ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ - HTTPS
* èµ·å‹•æ™‚ã®å®Ÿè¡Œ
* å†èµ·å‹•
* **ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼‰**
* ãƒ¡ãƒ¢ãƒª
* é–‹å§‹å‰ã®äº‹å‰ã‚¹ãƒ†ãƒƒãƒ—

## ãƒ¡ãƒ¢ãƒªãƒ¼

ã‚³ãƒ³ãƒ†ãƒŠã”ã¨ã«**å˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹**ã¨ã€ãã‚Œã‚‰ã®ã‚³ãƒ³ãƒ†ãƒŠï¼ˆãƒ¬ãƒ—ãƒªã‚±ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å ´åˆã¯1ã¤ä»¥ä¸Šï¼‰ã«ã‚ˆã£ã¦æ¶ˆè²»ã•ã‚Œã‚‹å¤šã‹ã‚Œå°‘ãªã‹ã‚Œæ˜ç¢ºã«å®šç¾©ã•ã‚ŒãŸã€å®‰å®šã—åˆ¶é™ã•ã‚ŒãŸé‡ã®ãƒ¡ãƒ¢ãƒªã‚’æŒã¤ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ãã—ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ**Kubernetes**ãªã©ï¼‰ã®è¨­å®šã§ã€åŒã˜ãƒ¡ãƒ¢ãƒªåˆ¶é™ã¨è¦ä»¶ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã†ã™ã‚Œã°ã€ã‚³ãƒ³ãƒ†ãƒŠãŒå¿…è¦ã¨ã™ã‚‹ãƒ¡ãƒ¢ãƒªé‡ã¨ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ãƒã‚·ãƒ³ã§åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªé‡ã‚’è€ƒæ…®ã—ã¦ã€**åˆ©ç”¨å¯èƒ½ãªãƒã‚·ãƒ³**ã«**ã‚³ãƒ³ãƒ†ãƒŠ**ã‚’ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒ**ã‚·ãƒ³ãƒ—ãƒ«**ãªã‚‚ã®ã§ã‚ã‚Œã°ã€ã“ã‚Œã¯ãŠãã‚‰ã**å•é¡Œã«ã¯ãªã‚‰ãªã„**ã§ã—ã‚‡ã†ã—ã€ãƒãƒ¼ãƒ‰ãªãƒ¡ãƒ¢ãƒªåˆ¶é™ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ã¯ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚

ã—ã‹ã—ã€**å¤šãã®ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨**ã—ã¦ã„ã‚‹å ´åˆï¼ˆãŸã¨ãˆã°**æ©Ÿæ¢°å­¦ç¿’**ãƒ¢ãƒ‡ãƒ«ãªã©ï¼‰ã€ã©ã‚Œã ã‘ã®ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã€**å„ãƒã‚·ãƒ³ã§å®Ÿè¡Œã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã®æ•°**ã‚’èª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆãã—ã¦ãŠãã‚‰ãã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒã‚·ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ï¼‰ã€‚

**ã‚³ãƒ³ãƒ†ãƒŠã”ã¨ã«è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’å®Ÿè¡Œã™ã‚‹å ´åˆï¼ˆãŸã¨ãˆã°å…¬å¼ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã§ï¼‰ã€èµ·å‹•ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã®æ•°ãŒ**åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªä»¥ä¸Šã«æ¶ˆè²»ã—ãªã„**ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## é–‹å§‹å‰ã®äº‹å‰ã‚¹ãƒ†ãƒƒãƒ—ã¨ã‚³ãƒ³ãƒ†ãƒŠ

ã‚³ãƒ³ãƒ†ãƒŠï¼ˆDockerã‚„Kubernetesãªã©ï¼‰ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€ä¸»ã«2ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã‚ã‚Šã¾ã™ã€‚

### è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠ

è¤‡æ•°ã®**ã‚³ãƒ³ãƒ†ãƒŠ**ãŒã‚ã‚Šã€ãŠãã‚‰ããã‚Œãã‚ŒãŒ**å˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹**ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹å ´åˆï¼ˆ**Kubernetes**ã‚¯ãƒ©ã‚¹ã‚¿ãªã©ï¼‰ã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ãƒˆã•ã‚ŒãŸãƒ¯ãƒ¼ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹**å‰ã«**ã€å˜ä¸€ã®ã‚³ãƒ³ãƒ†ãƒŠã§**äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—**ã®ä½œæ¥­ã‚’è¡Œã†**åˆ¥ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã‚’æŒã¡ãŸã„ã¨æ€ã†ã§ã—ã‚‡ã†ã€‚

/// info

ã‚‚ã—Kubernetesã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ, ã“ã‚Œã¯ãŠãã‚‰ã<a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/" class="external-link" target="_blank">Init ã‚³ãƒ³ãƒ†ãƒŠ</a>ã§ã—ã‚‡ã†ã€‚

///

ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒäº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’**ä¸¦åˆ—ã§è¤‡æ•°å›**å®Ÿè¡Œã™ã‚‹ã®ã«å•é¡ŒãŒãªã„å ´åˆï¼ˆä¾‹ï¼šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æº–å‚™ãƒã‚§ãƒƒã‚¯ï¼‰ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ãã‚Œã‚‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å„ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚Œã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

### å˜ä¸€ã‚³ãƒ³ãƒ†ãƒŠ

å˜ç´”ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ã€**å˜ä¸€ã®ã‚³ãƒ³ãƒ†ãƒŠ**ã§è¤‡æ•°ã®**ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ï¼ˆã¾ãŸã¯1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹ã®ã¿ï¼‰ã‚’èµ·å‹•ã™ã‚‹å ´åˆã€ã‚¢ãƒ—ãƒªã§ãƒ—ãƒ­ã‚»ã‚¹ã‚’é–‹å§‹ã™ã‚‹ç›´å‰ã«ã€åŒã˜ã‚³ãƒ³ãƒ†ãƒŠã§äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚å…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€å†…éƒ¨çš„ã«ã“ã‚Œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

## Gunicornã«ã‚ˆã‚‹å…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ - Uvicorn

å‰ã®ç« ã§è©³ã—ãèª¬æ˜ã—ãŸã‚ˆã†ã«ã€Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ã§å‹•ä½œã™ã‚‹Gunicornã‚’å«ã‚€å…¬å¼ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™ï¼š [Server Workers - Gunicorn ã¨ Uvicorn](server-workers.md){.internal-link target=_blank}ã§è©³ã—ãèª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

ã“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€ä¸»ã«ä¸Šè¨˜ã§èª¬æ˜ã—ãŸçŠ¶æ³ã§å½¹ã«ç«‹ã¤ã§ã—ã‚‡ã†ï¼š [è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ç‰¹æ®Šãªã‚±ãƒ¼ã‚¹ã‚’æŒã¤ã‚³ãƒ³ãƒ†ãƒŠï¼ˆContainers with Multiple Processes and Special Casesï¼‰](#containers-with-multiple-processes-and-special-cases)

* <a href="https://github.com/tiangolo/uvicorn-gunicorn-fastapi-docker" class="external-link" target="_blank">tiangolo/uvicorn-gunicorn-fastapi</a>.

/// warning

ã“ã®ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚„é¡ä¼¼ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯**å¿…è¦ãªã„**å¯èƒ½æ€§ãŒé«˜ã„ã®ã§ã€[ä¸Šè¨˜ã®: FastAPIç”¨ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ï¼ˆBuild a Docker Image for FastAPIï¼‰](#build-a-docker-image-for-fastapi)ã®ã‚ˆã†ã«ã‚¼ãƒ­ã‹ã‚‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹æ–¹ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚

///

ã“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¯ã€åˆ©ç”¨å¯èƒ½ãªCPUã‚³ã‚¢ã«åŸºã¥ã„ã¦**ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã®æ•°**ã‚’è¨­å®šã™ã‚‹**ã‚ªãƒ¼ãƒˆãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°**ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã¯**è³¢æ˜ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ã‚’å‚™ãˆã¦ã„ã¾ã™ãŒã€**ç’°å¢ƒå¤‰æ•°**ã‚„è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã™ã¹ã¦ã®è¨­å®šã‚’å¤‰æ›´ã—ãŸã‚Šæ›´æ–°ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§<a href="https://github.com/tiangolo/uvicorn-gunicorn-fastapi-docker#pre_start_path" class="external-link" target="_blank">**é–‹å§‹å‰ã®äº‹å‰ã‚¹ãƒ†ãƒƒãƒ—**</a>ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€‚

/// tip

ã™ã¹ã¦ã®è¨­å®šã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¦‹ã‚‹ã«ã¯ã€Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„: <a href="https://github.com/tiangolo/uvicorn-gunicorn-fastapi-docker" class="external-link" target="_blank">tiangolo/uvicorn-gunicorn-fastapi</a>

///

### å…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ—ãƒ­ã‚»ã‚¹æ•°

ã“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã®**ãƒ—ãƒ­ã‚»ã‚¹æ•°**ã¯ã€åˆ©ç”¨å¯èƒ½ãªCPU**ã‚³ã‚¢**ã‹ã‚‰**è‡ªå‹•çš„ã«è¨ˆç®—**ã•ã‚Œã¾ã™ã€‚

ã¤ã¾ã‚Šã€CPUã‹ã‚‰å¯èƒ½ãªé™ã‚Š**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**ã‚’**å¼•ãå‡ºãã†**ã¨ã—ã¾ã™ã€‚

ã¾ãŸã€**ç’°å¢ƒå¤‰æ•°**ãªã©ã‚’ä½¿ã£ãŸè¨­å®šã§èª¿æ•´ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã—ã‹ã—ã€ãƒ—ãƒ­ã‚»ã‚¹ã®æ•°ã¯ã‚³ãƒ³ãƒ†ãƒŠãŒå®Ÿè¡Œã—ã¦ã„ã‚‹CPUã«ä¾å­˜ã™ã‚‹ãŸã‚ã€**æ¶ˆè²»ã•ã‚Œã‚‹ãƒ¡ãƒ¢ãƒªã®é‡**ã‚‚ãã‚Œã«ä¾å­˜ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã€ï¼ˆæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ãªã©ã§ï¼‰å¤§é‡ã®ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã€ã‚µãƒ¼ãƒãƒ¼ã®CPUã‚³ã‚¢ãŒå¤šã„ãŒ**ãƒ¡ãƒ¢ãƒªãŒå°‘ãªã„**å ´åˆã€ã‚³ãƒ³ãƒ†ãƒŠã¯åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã‚ˆã‚Šã‚‚å¤šãã®ãƒ¡ãƒ¢ãƒªã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ãã®çµæœã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå¤§å¹…ã«ä½ä¸‹ã™ã‚‹ï¼ˆã‚ã‚‹ã„ã¯ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ï¼‰å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ğŸš¨

### Dockerfileã‚’ä½œæˆã™ã‚‹

ã“ã®ç”»åƒã«åŸºã¥ã„ã¦`Dockerfile`ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ï¼š

```Dockerfile
FROM tiangolo/uvicorn-gunicorn-fastapi:python3.9

COPY ./requirements.txt /app/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /app/requirements.txt

COPY ./app /app
```

### ã‚ˆã‚Šå¤§ããªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

[è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒã¤å¤§ããªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³](../tutorial/bigger-applications.md){.internal-link target=_blank}ã‚’ä½œæˆã™ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å¾“ã£ãŸå ´åˆã€`Dockerfile`ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

```Dockerfile hl_lines="7"
FROM tiangolo/uvicorn-gunicorn-fastapi:python3.9

COPY ./requirements.txt /app/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /app/requirements.txt

COPY ./app /app/app
```

### ã„ã¤ä½¿ã†ã®ã‹

ãŠãã‚‰ãã€**Kubernetes**ï¼ˆã¾ãŸã¯ä»–ã®ã‚‚ã®ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã¦ã€ã™ã§ã«ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¬ãƒ™ãƒ«ã§è¤‡æ•°ã®**ã‚³ãƒ³ãƒ†ãƒŠ**ã§**ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’è¨­å®šã—ã¦ã„ã‚‹å ´åˆã¯ã€ã“ã®å…¬å¼ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆã¾ãŸã¯ä»–ã®é¡ä¼¼ã®ã‚‚ã®ï¼‰ã¯**ä½¿ç”¨ã™ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“**ã€‚

ãã®ã‚ˆã†ãªå ´åˆã¯ã€ä¸Šè¨˜ã®ã‚ˆã†ã«**ã‚¼ãƒ­ã‹ã‚‰**ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹ãŒã‚ˆã„ã§ã—ã‚‡ã†ï¼š [FastAPIç”¨ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ï¼ˆBuild a Docker Image for FastAPIï¼‰](#build-a-docker-image-for-fastapi) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ã“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€ä¸»ã«ä¸Šè¨˜ã®[è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ç‰¹æ®Šãªã‚±ãƒ¼ã‚¹ã‚’æŒã¤ã‚³ãƒ³ãƒ†ãƒŠï¼ˆContainers with Multiple Processes and Special Casesï¼‰](#containers-with-multiple-processes-and-special-cases)ã§èª¬æ˜ã—ãŸã‚ˆã†ãªç‰¹æ®Šãªã‚±ãƒ¼ã‚¹ã§å½¹ã«ç«‹ã¡ã¾ã™ã€‚

ä¾‹ãˆã°ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒ**ã‚·ãƒ³ãƒ—ãƒ«**ã§ã€CPUã«å¿œã˜ãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ—ãƒ­ã‚»ã‚¹æ•°ã‚’è¨­å®šã™ã‚Œã°ã†ã¾ãã„ãå ´åˆã‚„ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¬ãƒ™ãƒ«ã§ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ‰‹å‹•ã§è¨­å®šã™ã‚‹æ‰‹é–“ã‚’çœããŸã„å ´åˆã€ã‚¢ãƒ—ãƒªã§è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã—ãªã„å ´åˆãªã©ã§ã™ã€‚

ã¾ãŸã¯ã€**Docker Compose**ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€å˜ä¸€ã®ã‚µãƒ¼ãƒã§å®Ÿè¡Œã—ã¦ã„ã‚‹å ´åˆãªã©ã§ã™ã€‚

## ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

ã‚³ãƒ³ãƒ†ãƒŠï¼ˆDockerï¼‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ‰‹ã«å…¥ã‚ŒãŸå¾Œã€ãã‚Œã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã«ã¯ã„ãã¤ã‹ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ä»¥ä¸‹ã®ãƒªã‚¹ãƒˆã®æ–¹æ³•ã§ã™:

* å˜ä¸€ã‚µãƒ¼ãƒãƒ¼ã®**Docker Compose**
* **Kubernetes**ã‚¯ãƒ©ã‚¹ã‚¿
* Docker Swarmãƒ¢ãƒ¼ãƒ‰ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼
* Nomadã®ã‚ˆã†ãªåˆ¥ã®ãƒ„ãƒ¼ãƒ«
* ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ã‚µãƒ¼ãƒ“ã‚¹

## Poetryã‚’åˆ©ç”¨ã—ãŸDockerã‚¤ãƒ¡ãƒ¼ã‚¸

ã‚‚ã—ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«<a href="https://python-poetry.org/" class="external-link" target="_blank">Poetry</a>ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã€ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã‚’ä½¿ã†ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

```{ .dockerfile .annotate }
# (1)
FROM python:3.9 as requirements-stage

# (2)
WORKDIR /tmp

# (3)
RUN pip install poetry

# (4)
COPY ./pyproject.toml ./poetry.lock* /tmp/

# (5)
RUN poetry export -f requirements.txt --output requirements.txt --without-hashes

# (6)
FROM python:3.9

# (7)
WORKDIR /code

# (8)
COPY --from=requirements-stage /tmp/requirements.txt /code/requirements.txt

# (9)
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (10)
COPY ./app /code/app

# (11)
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80"]
```

1. ã“ã‚Œã¯æœ€åˆã®ã‚¹ãƒ†ãƒ¼ã‚¸ã§ã€`requirements-stage`ã¨åä»˜ã‘ã‚‰ã‚Œã¾ã™
2. `/tmp` ã‚’ç¾åœ¨ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¨­å®šã—ã¾ã™
    ã“ã“ã§ `requirements.txt` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

3. ã“ã®Dockerã‚¹ãƒ†ãƒ¼ã‚¸ã«Poetryã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

4. pyproject.toml`ã¨`poetry.lock`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`/tmp` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™

    `./poetry.lock*`ï¼ˆæœ«å°¾ã«`*`ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã¾ã åˆ©ç”¨ã§ããªã„å ´åˆã§ã‚‚ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã¯ãªã„ã§ã™ã€‚
5. requirements.txt`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™

6. ã“ã‚Œã¯æœ€å¾Œã®ã‚¹ãƒ†ãƒ¼ã‚¸ã§ã‚ã‚Šã€ã“ã“ã«ã‚ã‚‹ã‚‚ã®ã¯ã™ã¹ã¦æœ€çµ‚çš„ãªã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã¾ã™
7. ç¾åœ¨ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ `/code` ã«è¨­å®šã—ã¾ã™
8. `requirements.txt`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `/code` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™
    ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‰ã®Dockerã‚¹ãƒ†ãƒ¼ã‚¸ã«ã—ã‹å­˜åœ¨ã—ãªã„ãŸã‚ã€`--from-requirements-stage`ã‚’ä½¿ã£ã¦ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚
9. ç”Ÿæˆã•ã‚ŒãŸ `requirements.txt` ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™
10. app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ `/code` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™
11. uvicorn` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€`app.main` ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸ `app` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«æŒ‡ç¤ºã—ã¾ã™
/// tip

"+"ã®å¹ãå‡ºã—ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã‚Œãã‚Œã®è¡ŒãŒä½•ã‚’ã™ã‚‹ã®ã‹ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™

///

**Dockerã‚¹ãƒ†ãƒ¼ã‚¸**ã¯`Dockerfile`ã®ä¸€éƒ¨ã§ã€**ä¸€æ™‚çš„ãªã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸**ã¨ã—ã¦å‹•ä½œã—ã¾ã™ã€‚

æœ€åˆã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¯ **Poetryã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**ã¨ Poetry ã® `pyproject.toml` ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã‚’å«ã‚€**`requirements.txt`ã‚’ç”Ÿæˆ**ã™ã‚‹ãŸã‚ã ã‘ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

ã“ã® `requirements.txt` ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¾ŒåŠã® **æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸**ã§ `pip` ã¨å…±ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

æœ€çµ‚çš„ãªã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã¯ã€**æœ€çµ‚ã‚¹ãƒ†ãƒ¼ã‚¸**ã®ã¿ãŒä¿å­˜ã•ã‚Œã¾ã™ã€‚å‰ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¯ç ´æ£„ã•ã‚Œã¾ã™ã€‚

Poetryã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€**Dockerãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰**ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ç†ã«ã‹ãªã£ã¦ã„ã¾ã™ã€‚

ãªãœãªã‚‰ã€æœ€çµ‚çš„ãªã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã«Poetryã¨ãã®ä¾å­˜é–¢ä¿‚ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ã¯ãªãã€**å¿…è¦ãªã®ã¯**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã«ç”Ÿæˆã•ã‚ŒãŸ `requirements.txt` ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã ã‹ã‚‰ã§ã™ã€‚

ãã—ã¦æ¬¡ã®ï¼ˆãã—ã¦æœ€çµ‚çš„ãªï¼‰ã‚¹ãƒ†ãƒ¼ã‚¸ã§ã¯ã€å‰è¿°ã¨ã»ã¼åŒã˜æ–¹æ³•ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

### TLS Termination Proxyã®è£å´ - Poetry

ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€Nginxã‚„Traefikã®ã‚ˆã†ãªTLS Termination Proxyï¼ˆãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ï¼‰ã®å¾Œã‚ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã—ã¦ã„ã‚‹å ´åˆã¯ã€`--proxy-headers`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚³ãƒãƒ³ãƒ‰ã«è¿½åŠ ã—ã¾ã™ï¼š

```Dockerfile
CMD ["uvicorn", "app.main:app", "--proxy-headers", "--host", "0.0.0.0", "--port", "80"]
```

## ã¾ã¨ã‚

ã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚·ã‚¹ãƒ†ãƒ ï¼ˆä¾‹ãˆã°**Docker**ã‚„**Kubernetes**ãªã©ï¼‰ã‚’ä½¿ãˆã°ã€ã™ã¹ã¦ã®**ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**ã‚’æ‰±ã†ã®ãŒã‹ãªã‚Šç°¡å˜ã«ãªã‚Šã¾ã™ï¼š

* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ - HTTPS
* èµ·å‹•æ™‚ã®å®Ÿè¡Œ
* å†èµ·å‹•
* **ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼‰**
* ãƒ¡ãƒ¢ãƒª
* é–‹å§‹å‰ã®äº‹å‰ã‚¹ãƒ†ãƒƒãƒ—

ã»ã¨ã‚“ã©ã®å ´åˆã€ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä½¿ç”¨ã›ãšã€å…¬å¼ã®Python Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸ**ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ“ãƒ«ãƒ‰**ã—ã¾ã™ã€‚

`Dockerfile`ã¨**Dockerã‚­ãƒ£ãƒƒã‚·ãƒ¥**å†…ã®å‘½ä»¤ã®**é †ç•ª**ã«æ³¨æ„ã™ã‚‹ã“ã¨ã§ã€**ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’æœ€å°åŒ–**ã™ã‚‹ã“ã¨ãŒã§ãã€ç”Ÿç”£æ€§ã‚’æœ€å¤§åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆãã—ã¦é€€å±ˆã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼‰ã€‚ğŸ˜

ç‰¹åˆ¥ãªã‚±ãƒ¼ã‚¹ã§ã¯ã€FastAPIç”¨ã®å…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã„ãŸã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ğŸ¤“


================================================
File: /docs/ja/docs/deployment/https.md
================================================
# HTTPS ã«ã¤ã„ã¦

HTTPSã¯å˜ã«ã€Œæœ‰åŠ¹ã€ã‹ã€Œç„¡åŠ¹ã€ã‹ã§æ±ºã¾ã‚‹ã‚‚ã®ã ã¨æ€ã„ãŒã¡ã§ã™ã€‚

ã—ã‹ã—ã€ãã‚Œã‚ˆã‚Šã‚‚ã¯ã‚‹ã‹ã«è¤‡é›‘ã§ã™ã€‚

/// tip

ã‚‚ã—æ€¥ã„ã§ã„ãŸã‚Šã€HTTPSã®ä»•çµ„ã¿ã«ã¤ã„ã¦æ°—ã«ã—ãªã„ã®ã§ã‚ã‚Œã°ã€æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«é€²ã¿ã€ã•ã¾ã–ã¾ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ã£ã¦ã™ã¹ã¦ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ãƒ»ãƒã‚¤ãƒ»ã‚¹ãƒ†ãƒƒãƒ—ã®æ‰‹é †ã‚’ã”è¦§ãã ã•ã„ã€‚

///

åˆ©ç”¨è€…ã®è¦–ç‚¹ã‹ã‚‰ **HTTPS ã®åŸºæœ¬ã‚’å­¦ã¶**ã«å½“ãŸã£ã¦ã¯ã€æ¬¡ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™: <a href="https://howhttps.works/" class="external-link" target="_blank">https://howhttps.works/</a>.

ã•ã¦ã€**é–‹ç™ºè€…ã®è¦–ç‚¹**ã‹ã‚‰ã€HTTPSã«ã¤ã„ã¦è€ƒãˆã‚‹éš›ã«å¿µé ­ã«ç½®ãã¹ãã“ã¨ã‚’ã„ãã¤ã‹ã¿ã¦ã„ãã¾ã—ã‚‡ã†ï¼š

* HTTPSã®å ´åˆã€**ã‚µãƒ¼ãƒ**ã¯**ç¬¬ä¸‰è€…**ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸ**ã€Œè¨¼æ˜æ›¸ã€ã‚’æŒã¤**å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
    * ã“ã‚Œã‚‰ã®è¨¼æ˜æ›¸ã¯ã€Œç”Ÿæˆã€ã•ã‚ŒãŸã‚‚ã®ã§ã¯ãªãã€å®Ÿéš›ã«ã¯ç¬¬ä¸‰è€…ã‹ã‚‰**å–å¾—**ã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚
* è¨¼æ˜æ›¸ã«ã¯**æœ‰åŠ¹æœŸé™**ãŒã‚ã‚Šã¾ã™ã€‚
    * ã¤ã¾ã‚Šã„ãšã‚Œå¤±åŠ¹ã—ã¾ã™ã€‚
    * ãã®ãŸã‚**æ›´æ–°**ã‚’ã—ã€ç¬¬ä¸‰è€…ã‹ã‚‰**å†åº¦å–å¾—**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
* æ¥ç¶šã®æš—å·åŒ–ã¯**TCPãƒ¬ãƒ™ãƒ«**ã§è¡Œã‚ã‚Œã¾ã™ã€‚
    * ãã‚Œã¯**HTTPã®1ã¤ä¸‹**ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚
    * ã¤ã¾ã‚Šã€**è¨¼æ˜æ›¸ã¨æš—å·åŒ–**ã®å‡¦ç†ã¯ã€**HTTPã®å‰**ã«è¡Œã‚ã‚Œã¾ã™ã€‚
* **TCPã¯ "ãƒ‰ãƒ¡ã‚¤ãƒ³ "ã«ã¤ã„ã¦çŸ¥ã‚Šã¾ã›ã‚“**ã€‚IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã¤ã„ã¦ã®ã¿çŸ¥ã£ã¦ã„ã¾ã™ã€‚
    * è¦æ±‚ã•ã‚ŒãŸ**ç‰¹å®šã®ãƒ‰ãƒ¡ã‚¤ãƒ³**ã«é–¢ã™ã‚‹æƒ…å ±ã¯ã€**HTTPãƒ‡ãƒ¼ã‚¿**ã«å…¥ã‚Šã¾ã™ã€‚
* **HTTPSè¨¼æ˜æ›¸**ã¯ã€**ç‰¹å®šã®ãƒ‰ãƒ¡ã‚¤ãƒ³**ã‚’ã€Œè¨¼æ˜ã€ã—ã¾ã™ãŒã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨æš—å·åŒ–ã¯TCPãƒ¬ãƒ™ãƒ«ã§è¡Œã‚ã‚Œã€ã©ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæ‰±ã‚ã‚Œã¦ã„ã‚‹ã‹ã‚’**çŸ¥ã‚‹å‰**ã«è¡Œã‚ã‚Œã¾ã™ã€‚
* **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯**ã€**IPã‚¢ãƒ‰ãƒ¬ã‚¹ã”ã¨ã«1ã¤ã®HTTPSè¨¼æ˜æ›¸**ã—ã‹æŒã¦ãªã„ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
    * ã“ã‚Œã¯ã€ã‚µãƒ¼ãƒãƒ¼ã®è¦æ¨¡ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¦æ¨¡ã«å¯„ã‚Šã¾ã›ã‚“ã€‚
    * ã—ã‹ã—ã€ã“ã‚Œã«ã¯**è§£æ±ºç­–**ãŒã‚ã‚Šã¾ã™ã€‚
* **TLS**ãƒ—ãƒ­ãƒˆã‚³ãƒ«(HTTPã®å‰ã«ã€TCPãƒ¬ãƒ™ãƒ«ã§æš—å·åŒ–ã‚’å‡¦ç†ã™ã‚‹ã‚‚ã®)ã«ã¯ã€**<a href="https://en.wikipedia.org/wiki/Server_Name_Indication" class="external-link" target="_blank"><abbr title="ã‚µãƒ¼ãƒãƒ¼åè¡¨ç¤º">SNI</abbr></a>**ã¨å‘¼ã°ã‚Œã‚‹**æ‹¡å¼µ**ãŒã‚ã‚Šã¾ã™ã€‚
    * ã“ã®SNIæ‹¡å¼µæ©Ÿèƒ½ã«ã‚ˆã‚Šã€1ã¤ã®ã‚µãƒ¼ãƒãƒ¼ï¼ˆ**å˜ä¸€ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹**ã‚’æŒã¤ï¼‰ãŒ**è¤‡æ•°ã®HTTPSè¨¼æ˜æ›¸**ã‚’æŒã¡ã€**è¤‡æ•°ã®HTTPSãƒ‰ãƒ¡ã‚¤ãƒ³/ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
    * ã“ã‚ŒãŒæ©Ÿèƒ½ã™ã‚‹ãŸã‚ã«ã¯ã€**ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã‚¢ãƒ‰ãƒ¬ã‚¹**ã§ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ã‚‹ã€ã‚µãƒ¼ãƒãƒ¼ä¸Šã§å‹•ä½œã—ã¦ã„ã‚‹**å˜ä¸€ã®**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ(ãƒ—ãƒ­ã‚°ãƒ©ãƒ )ãŒã€ã‚µãƒ¼ãƒãƒ¼å†…ã®**ã™ã¹ã¦ã®HTTPSè¨¼æ˜æ›¸**ã‚’æŒã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

* ã‚»ã‚­ãƒ¥ã‚¢ãªæ¥ç¶šã‚’å–å¾—ã—ãŸ**å¾Œ**ã§ã‚‚ã€é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯**HTTPã®ã¾ã¾**ã§ã™ã€‚
    * ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯**HTTPãƒ—ãƒ­ãƒˆã‚³ãƒ«**ã§é€ä¿¡ã•ã‚Œã¦ã„ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€**æš—å·åŒ–**ã•ã‚Œã¦ã„ã¾ã™ã€‚


ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒã‚·ãƒ³ã€ãƒ›ã‚¹ãƒˆãªã©ï¼‰ä¸Šã§**1ã¤ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ /HTTPã‚µãƒ¼ãƒãƒ¼**ã‚’å®Ÿè¡Œã•ã›ã€**HTTPSã«é–¢ã™ã‚‹å…¨ã¦ã®ã“ã¨**ã‚’ç®¡ç†ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚

**æš—å·åŒ–ã•ã‚ŒãŸ HTTPS ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** ã‚’å—ä¿¡ã—ã€**å¾©å·åŒ–ã•ã‚ŒãŸ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** ã‚’åŒã˜ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹å®Ÿéš›ã® HTTP ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã“ã®å ´åˆã¯ **FastAPI** ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã«é€ä¿¡ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ **HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹** ã‚’å—ã‘å–ã‚Šã€é©åˆ‡ãª **HTTPS è¨¼æ˜æ›¸** ã‚’ä½¿ç”¨ã—ã¦ **æš—å·åŒ–** ã—ã€ãã—ã¦**HTTPS** ã‚’ä½¿ç”¨ã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ã‚Šè¿”ã—ã¾ã™ã€‚

ã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯ã—ã°ã—ã° **<a href="https://en.wikipedia.org/wiki/TLS_termination_proxy" class="external-link" target="_blank">TLS Termination Proxy</a>**ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

TLS Termination Proxyã¨ã—ã¦ä½¿ãˆã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ï¼š

* Traefikï¼ˆè¨¼æ˜æ›¸ã®æ›´æ–°ã‚‚å¯¾å¿œï¼‰
* Caddy (è¨¼æ˜æ›¸ã®æ›´æ–°ã‚‚å¯¾å¿œ)
* Nginx
* HAProxy


## Let's Encrypt

Let's Encryptä»¥å‰ã¯ã€ã“ã‚Œã‚‰ã®**HTTPSè¨¼æ˜æ›¸**ã¯ä¿¡é ¼ã§ãã‚‹ç¬¬ä¸‰è€…ã«ã‚ˆã£ã¦è²©å£²ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

ã“ã‚Œã‚‰ã®è¨¼æ˜æ›¸ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®æ‰‹ç¶šãã¯é¢å€’ã§ã€ã‹ãªã‚Šã®æ›¸é¡ã‚’å¿…è¦ã¨ã—ã€è¨¼æ˜æ›¸ã¯ã‹ãªã‚Šé«˜ä¾¡ãªã‚‚ã®ã§ã—ãŸã€‚

ã—ã‹ã—ãã®å¾Œã€**<a href="https://letsencrypt.org/" class="external-link" target="_blank">Let's Encrypt</a>** ãŒä½œã‚‰ã‚Œã¾ã—ãŸã€‚

ã“ã‚Œã¯Linux Foundationã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ç”Ÿã¾ã‚ŒãŸã‚‚ã®ã§ã™ã€‚ è‡ªå‹•åŒ–ã•ã‚ŒãŸæ–¹æ³•ã§ã€**HTTPSè¨¼æ˜æ›¸ã‚’ç„¡æ–™ã§**æä¾›ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®è¨¼æ˜æ›¸ã¯ã€ã™ã¹ã¦ã®æ¨™æº–çš„ãªæš—å·åŒ–ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã€ã¾ãŸçŸ­å‘½ï¼ˆç´„3ãƒ¶æœˆï¼‰ã§ã™ãŒã€ã“ã†ã„ã£ãŸå¯¿å‘½ã®çŸ­ã•ã«ã‚ˆã£ã¦ã€**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¯å®Ÿéš›ã«å„ªã‚Œã¦ã„ã¾ã™**ã€‚

ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯å®‰å…¨ã«æ¤œè¨¼ã•ã‚Œã€è¨¼æ˜æ›¸ã¯è‡ªå‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚ã¾ãŸã€è¨¼æ˜æ›¸ã®æ›´æ–°ã‚‚è‡ªå‹•åŒ–ã•ã‚Œã¾ã™ã€‚

ã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€ã“ã‚Œã‚‰ã®è¨¼æ˜æ›¸ã®å–å¾—ã¨æ›´æ–°ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ã§ã€**å®‰å…¨ãªHTTPSã‚’ã€ç„¡æ–™ã§ã€æ°¸é ã«**åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚

## é–‹ç™ºè€…ã®ãŸã‚ã® HTTPS

ã“ã“ã§ã¯ã€HTTPS APIãŒã©ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ã‹ã®ä¾‹ã‚’ã€ä¸»ã«é–‹ç™ºè€…ã«ã¨ã£ã¦é‡è¦ãªã‚¢ã‚¤ãƒ‡ã‚¢ã«æ³¨æ„ã‚’æ‰•ã„ãªãŒã‚‰ã€ã‚¹ãƒ†ãƒƒãƒ—ãƒ»ãƒã‚¤ãƒ»ã‚¹ãƒ†ãƒƒãƒ—ã§èª¬æ˜ã—ã¾ã™ã€‚

### ãƒ‰ãƒ¡ã‚¤ãƒ³å

ã‚¹ãƒ†ãƒƒãƒ—ã®åˆã‚ã¯ã€**ãƒ‰ãƒ¡ã‚¤ãƒ³å**ã‚’**å–å¾—ã™ã‚‹ã“ã¨**ã‹ã‚‰å§‹ã¾ã‚‹ã§ã—ã‚‡ã†ã€‚ãã®å¾Œã€DNSã‚µãƒ¼ãƒãƒ¼ï¼ˆãŠãã‚‰ãåŒã˜ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼‰ã«è¨­å®šã—ã¾ã™ã€‚

ãŠãã‚‰ãã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒãƒ¼ï¼ˆä»®æƒ³ãƒã‚·ãƒ³ï¼‰ã‹ãã‚Œã«é¡ã™ã‚‹ã‚‚ã®ã‚’æ‰‹ã«å…¥ã‚Œã€<abbr title="å¤‰ã‚ã‚‰ãªã„">å›ºå®šã®</abbr> **ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã‚¢ãƒ‰ãƒ¬ã‚¹**ã‚’æŒã¤ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

DNSã‚µãƒ¼ãƒãƒ¼ã§ã¯ã€**å–å¾—ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³**ã‚’ã‚ãªãŸã®ã‚µãƒ¼ãƒãƒ¼ã®ãƒ‘ãƒ—ãƒªãƒƒã‚¯**IPã‚¢ãƒ‰ãƒ¬ã‚¹**ã«å‘ã‘ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼ˆã€Œ`Aãƒ¬ã‚³ãƒ¼ãƒ‰`ã€ï¼‰ã‚’è¨­å®šã—ã¾ã™ã€‚

ã“ã‚Œã¯ãŠãã‚‰ãã€æœ€åˆã®1å›ã ã‘ã‚ã‚Šã€ã™ã¹ã¦ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ãã«è¡Œã†ã§ã—ã‚‡ã†ã€‚

/// tip

ãƒ‰ãƒ¡ã‚¤ãƒ³åã®è©±ã¯HTTPSã«é–¢ã™ã‚‹è©±ã®ã¯ã‚‹ã‹å‰ã«ã‚ã‚Šã¾ã™ãŒã€ã™ã¹ã¦ãŒãƒ‰ãƒ¡ã‚¤ãƒ³ã¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ä¾å­˜ã™ã‚‹ãŸã‚ã€ã“ã“ã§è¨€åŠã™ã‚‹ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚

///

### DNS

ã§ã¯ã€å®Ÿéš›ã®HTTPSã®éƒ¨åˆ†ã«æ³¨ç›®ã—ã¦ã¿ã‚ˆã†ã€‚

ã¾ãšã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯**DNSã‚µãƒ¼ãƒãƒ¼**ã«**ãƒ‰ãƒ¡ã‚¤ãƒ³ã«å¯¾ã™ã‚‹IP**ãŒä½•ã§ã‚ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚ä»Šå›ã¯ã€`someapp.example.com`ã¨ã—ã¾ã™ã€‚

DNSã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«ç‰¹å®šã®**IPã‚¢ãƒ‰ãƒ¬ã‚¹**ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«æŒ‡ç¤ºã—ã¾ã™ã€‚ã“ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ã€DNSã‚µãƒ¼ãƒãƒ¼ã§è¨­å®šã—ãŸã€ã‚ãªãŸã®ã‚µãƒ¼ãƒãƒ¼ãŒä½¿ç”¨ã™ã‚‹ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ãªã‚Šã¾ã™ã€‚

<img src="/img/deployment/https/https01.svg">

### TLS Handshake ã®é–‹å§‹

ãƒ–ãƒ©ã‚¦ã‚¶ã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨**ãƒãƒ¼ãƒˆ443**ï¼ˆHTTPSãƒãƒ¼ãƒˆï¼‰ã§é€šä¿¡ã—ã¾ã™ã€‚

é€šä¿¡ã®æœ€åˆã®éƒ¨åˆ†ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼é–“ã®æ¥ç¶šã‚’ç¢ºç«‹ã—ã€ä½¿ç”¨ã™ã‚‹æš—å·éµãªã©ã‚’æ±ºã‚ã‚‹ã ã‘ã§ã™ã€‚

<img src="/img/deployment/https/https02.svg">

TLSæ¥ç¶šã‚’ç¢ºç«‹ã™ã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼é–“ã®ã“ã®ã‚„ã‚Šã¨ã‚Šã¯ã€**TLSãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯**ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

### SNIæ‹¡å¼µæ©Ÿèƒ½ä»˜ãã®TLS

ã‚µãƒ¼ãƒãƒ¼å†…ã®**1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹**ã ã‘ãŒã€ç‰¹å®š ã®**IPã‚¢ãƒ‰ãƒ¬ã‚¹**ã®ç‰¹å®šã®**ãƒãƒ¼ãƒˆ** ã§å¾…ã¡å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

åŒã˜IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä»–ã®ãƒãƒ¼ãƒˆã§ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ãŒã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒãƒ¼ãƒˆã®çµ„ã¿åˆã‚ã›ã”ã¨ã«1ã¤ã ã‘ã§ã™ã€‚

TLSï¼ˆHTTPSï¼‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`443`ã¨ã„ã†ç‰¹å®šã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã€‚ã¤ã¾ã‚Šã€ã“ã‚ŒãŒå¿…è¦ãªãƒãƒ¼ãƒˆã§ã™ã€‚

ã“ã®ãƒãƒ¼ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã§ãã‚‹ã®ã¯1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹ã ã‘ãªã®ã§ã€ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã¯**TLS Termination Proxy**ã¨ãªã‚Šã¾ã™ã€‚

TLS Termination Proxyã¯ã€1ã¤ä»¥ä¸Šã®**TLSè¨¼æ˜æ›¸**ï¼ˆHTTPSè¨¼æ˜æ›¸ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

å‰è¿°ã—ãŸ**SNIæ‹¡å¼µæ©Ÿèƒ½**ã‚’ä½¿ç”¨ã—ã¦ã€TLS Termination Proxy ã¯ã€åˆ©ç”¨å¯èƒ½ãªTLS (HTTPS)è¨¼æ˜æ›¸ã®ã©ã‚Œã‚’æ¥ç¶šå…ˆã¨ã—ã¦ä½¿ç”¨ã™ã¹ãã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒæœŸå¾…ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ä»Šå›ã¯ã€`someapp.example.com`ã®è¨¼æ˜æ›¸ã‚’ä½¿ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

<img src="/img/deployment/https/https03.svg">

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã€ãã®TLSè¨¼æ˜æ›¸ã‚’ç”Ÿæˆã—ãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆã“ã®å ´åˆã¯Let's Encryptã§ã™ãŒã€ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¿°ã—ã¾ã™ï¼‰ã‚’ã™ã§ã«**ä¿¡é ¼**ã—ã¦ã„ã‚‹ãŸã‚ã€ãã®è¨¼æ˜æ›¸ãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’**æ¤œè¨¼**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

æ¬¡ã«è¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨TLS Termination Proxy ã¯ã€ **TCPé€šä¿¡**ã®æ®‹ã‚Šã‚’**ã©ã®ã‚ˆã†ã«æš—å·åŒ–ã™ã‚‹ã‹ã‚’æ±ºå®š**ã—ã¾ã™ã€‚ã“ã‚Œã§**TLSãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯**ã®éƒ¨åˆ†ãŒå®Œäº†ã—ã¾ã™ã€‚

ã“ã®å¾Œã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼ã¯**æš—å·åŒ–ã•ã‚ŒãŸTCPæ¥ç¶š**ã‚’æŒã¡ã¾ã™ã€‚ãã—ã¦ã€ãã®æ¥ç¶šã‚’ä½¿ã£ã¦å®Ÿéš›ã®**HTTPé€šä¿¡**ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚ŒãŒ**HTTPS**ã§ã‚ã‚Šã€ç´”ç²‹ãªï¼ˆæš—å·åŒ–ã•ã‚Œã¦ã„ãªã„ï¼‰TCPæ¥ç¶šã§ã¯ãªãã€**ã‚»ã‚­ãƒ¥ã‚¢ãªTLSæ¥ç¶š**ã®ä¸­ã«**HTTP**ãŒã‚ã‚‹ã ã‘ã§ã™ã€‚

/// tip

é€šä¿¡ã®æš—å·åŒ–ã¯ã€HTTPãƒ¬ãƒ™ãƒ«ã§ã¯ãªãã€**TCPãƒ¬ãƒ™ãƒ«**ã§è¡Œã‚ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

///

### HTTPS ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

ã“ã‚Œã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼ï¼ˆå…·ä½“çš„ã«ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã¨TLS Termination Proxyï¼‰ã¯**æš—å·åŒ–ã•ã‚ŒãŸTCPæ¥ç¶š**ã‚’æŒã¤ã“ã¨ã«ãªã‚Šã€**HTTPé€šä¿¡**ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã“ã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯**HTTPSãƒªã‚¯ã‚¨ã‚¹ãƒˆ**ã‚’é€ä¿¡ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€æš—å·åŒ–ã•ã‚ŒãŸTLSã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’ä»‹ã—ãŸå˜ãªã‚‹HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã™ã€‚

<img src="/img/deployment/https/https04.svg">

### ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å¾©å·åŒ–

TLS Termination Proxy ã¯ã€åˆæ„ãŒå–ã‚Œã¦ã„ã‚‹æš—å·åŒ–ã‚’ä½¿ç”¨ã—ã¦ã€**ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å¾©å·åŒ–**ã—ã€**ãƒ—ãƒ¬ãƒ¼ãƒ³ (å¾©å·åŒ–ã•ã‚ŒãŸ) HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ (ä¾‹ãˆã°ã€FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ Uvicorn ã‚’æŒã¤ãƒ—ãƒ­ã‚»ã‚¹) ã«é€ä¿¡ã—ã¾ã™ã€‚

<img src="/img/deployment/https/https05.svg">

### HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã—ã€**ãƒ—ãƒ¬ãƒ¼ãƒ³(æš—å·åŒ–ã•ã‚Œã¦ã„ãªã„)HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹** ã‚’TLS Termination Proxyã«é€ä¿¡ã—ã¾ã™ã€‚

<img src="/img/deployment/https/https06.svg">

### HTTPS ãƒ¬ã‚¹ãƒãƒ³ã‚¹

TLS Termination Proxyã¯æ¬¡ã«ã€äº‹å‰ã«åˆæ„ãŒå–ã‚Œã¦ã„ã‚‹æš—å·(`someapp.example.com`ã®è¨¼æ˜æ›¸ã‹ã‚‰å§‹ã¾ã‚‹)ã‚’ä½¿ã£ã¦**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æš—å·åŒ–ã—**ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«é€ã‚Šè¿”ã™ã€‚

ãã®å¾Œãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒæœ‰åŠ¹ã§æ­£ã—ã„æš—å·ã‚­ãƒ¼ã§æš—å·åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãªã©ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚ãã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’**å¾©å·åŒ–**ã—ã¦å‡¦ç†ã—ã¾ã™ã€‚

<img src="/img/deployment/https/https07.svg">

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒæ­£ã—ã„ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰æ¥ãŸã“ã¨ã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ ãªãœãªã‚‰ã€ãã®ã‚µãƒ¼ãƒãƒ¼ã¯ã€ä»¥å‰ã«**HTTPSè¨¼æ˜æ›¸**ã‚’ä½¿ã£ã¦åˆæ„ã—ãŸæš—å·ã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚

### è¤‡æ•°ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

åŒã˜ã‚µãƒ¼ãƒãƒ¼ï¼ˆã¾ãŸã¯è¤‡æ•°ã®ã‚µãƒ¼ãƒãƒ¼ï¼‰ã«ã€ä¾‹ãˆã°ä»–ã®APIãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãªã©ã€**è¤‡æ•°ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ãŒå­˜åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ç‰¹å®šã®IPã¨ãƒãƒ¼ãƒˆï¼ˆã“ã®ä¾‹ã§ã¯TLS Termination Proxyï¼‰ã‚’æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã®ã¯1ã¤ã®ãƒ—ãƒ­ã‚»ã‚¹ã ã‘ã§ã™ãŒã€ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³/ãƒ—ãƒ­ã‚»ã‚¹ã‚‚ã€åŒã˜**ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã¨ãƒãƒ¼ãƒˆ**ã®çµ„ã¿åˆã‚ã›ã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã—ãªã„é™ã‚Šã€ã‚µãƒ¼ãƒãƒ¼ä¸Šã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

<img src="/img/deployment/https/https08.svg">

ãã†ã™ã‚Œã°ã€TLS Termination Proxy ã¯ã€**è¤‡æ•°ã®ãƒ‰ãƒ¡ã‚¤ãƒ³**ã‚„è¤‡æ•°ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®HTTPSã¨è¨¼æ˜æ›¸ã‚’å‡¦ç†ã—ã€ãã‚Œãã‚Œã®ã‚±ãƒ¼ã‚¹ã§é©åˆ‡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### è¨¼æ˜æ›¸ã®æ›´æ–°

å°†æ¥ã®ã‚ã‚‹æ™‚ç‚¹ã§ã€å„è¨¼æ˜æ›¸ã¯ï¼ˆå–å¾—å¾Œç´„3ãƒ¶æœˆã§ï¼‰**å¤±åŠ¹**ã—ã¾ã™ã€‚

ãã®å¾Œã€Let's Encryptã¨é€šä¿¡ã™ã‚‹åˆ¥ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆåˆ¥ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚ã‚‹å ´åˆã‚‚ã‚ã‚Œã°ã€åŒã˜TLS Termination Proxyã§ã‚ã‚‹å ´åˆã‚‚ã‚ã‚‹ï¼‰ã«ã‚ˆã£ã¦ã€è¨¼æ˜æ›¸ã‚’æ›´æ–°ã—ã¾ã™ã€‚

<img src="/img/deployment/https/https.svg">

**TLSè¨¼æ˜æ›¸**ã¯ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã¯ãªãã€**ãƒ‰ãƒ¡ã‚¤ãƒ³åã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦**ã„ã¾ã™ã€‚

ã—ãŸãŒã£ã¦ã€è¨¼æ˜æ›¸ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã«ã€æ›´æ–°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€èªè¨¼å±€ï¼ˆLet's Encryptï¼‰ã«å¯¾ã—ã¦ã€**ãã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæœ¬å½“ã«ã€Œæ‰€æœ‰ã€ã—ã€ç®¡ç†ã—ã¦ã„ã‚‹**ã“ã¨ã‚’**è¨¼æ˜**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã«ã€ã¾ãŸã•ã¾ã–ã¾ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã™ã‚‹ãŸã‚ã«ã€ã„ãã¤ã‹ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ã‚ˆãä½¿ã‚ã‚Œã‚‹æ–¹æ³•ã¨ã—ã¦ã¯:

* **ã„ãã¤ã‹ã®DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¾ã™ã€‚**
    * ã“ã‚Œã‚’ã™ã‚‹ãŸã‚ã«ã¯ã€æ›´æ–°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯DNSãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®APIã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ä½¿ç”¨ã—ã¦ã„ã‚‹DNSãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã‚ˆã£ã¦ã¯ã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒä½¿ãˆã‚‹å ´åˆã‚‚ã‚ã‚Œã°ã€ä½¿ãˆãªã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚
* ãƒ‰ãƒ¡ã‚¤ãƒ³ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ä¸Šã§ã€ï¼ˆå°‘ãªãã¨ã‚‚è¨¼æ˜æ›¸å–å¾—ãƒ—ãƒ­ã‚»ã‚¹ä¸­ã¯ï¼‰**ã‚µãƒ¼ãƒãƒ¼**ã¨ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚
    * ä¸Šã§è¿°ã¹ãŸã‚ˆã†ã«ã€ç‰¹å®šã®IPã¨ãƒãƒ¼ãƒˆã§ãƒªãƒƒã‚¹ãƒ³ã§ãã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã¯1ã¤ã ã‘ã§ã™ã€‚
    * ã“ã‚Œã¯ã€åŒã˜TLS Termination ProxyãŒè¨¼æ˜æ›¸ã®æ›´æ–°å‡¦ç†ã‚‚è¡Œã†å ´åˆã«éå¸¸ã«ä¾¿åˆ©ãªç†ç”±ã®1ã¤ã§ã™ã€‚
    * ãã†ã§ãªã‘ã‚Œã°ã€TLS Termination Proxyã‚’ä¸€æ™‚çš„ã«åœæ­¢ã—ã€è¨¼æ˜æ›¸ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«æ›´æ–°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’èµ·å‹•ã—ã€TLS Termination Proxyã§è¨¼æ˜æ›¸ã‚’è¨­å®šã—ã€TLS Termination Proxyã‚’å†èµ·å‹•ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚TLS Termination ProxyãŒåœæ­¢ã—ã¦ã„ã‚‹é–“ã¯ã‚¢ãƒ—ãƒªãŒåˆ©ç”¨ã§ããªããªã‚‹ãŸã‚ã€ã“ã‚Œã¯ç†æƒ³çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚


ã‚¢ãƒ—ãƒªã‚’æä¾›ã—ãªãŒã‚‰ã“ã®ã‚ˆã†ãªæ›´æ–°å‡¦ç†ã‚’è¡Œã†ã“ã¨ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚µãƒ¼ãƒãƒ¼ï¼ˆUvicornãªã©ï¼‰ã§TLSè¨¼æ˜æ›¸ã‚’ç›´æ¥ä½¿ç”¨ã™ã‚‹ã®ã§ã¯ãªãã€TLS Termination Proxyã‚’ä½¿ç”¨ã—ã¦**HTTPSã‚’å‡¦ç†ã™ã‚‹åˆ¥ã®ã‚·ã‚¹ãƒ†ãƒ **ã‚’ç”¨æ„ã—ãŸããªã‚‹ä¸»ãªç†ç”±ã®1ã¤ã§ã™ã€‚

## ã¾ã¨ã‚

**HTTPS**ã‚’æŒã¤ã“ã¨ã¯éå¸¸ã«é‡è¦ã§ã‚ã‚Šã€ã»ã¨ã‚“ã©ã®å ´åˆã€ã‹ãªã‚Š**ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«**ã§ã™ã€‚é–‹ç™ºè€…ã¨ã—ã¦ HTTPS ã«é–¢ã‚ã‚‹åŠ´åŠ›ã®ã»ã¨ã‚“ã©ã¯ã€ã“ã‚Œã‚‰ã®**æ¦‚å¿µã¨ãã®ä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹**ã“ã¨ã§ã™ã€‚

ã—ã‹ã—ã€ã²ã¨ãŸã³**é–‹ç™ºè€…å‘ã‘HTTPS**ã®åŸºæœ¬çš„ãªæƒ…å ±ã‚’çŸ¥ã‚Œã°ã€ç°¡å˜ãªæ–¹æ³•ã§ã™ã¹ã¦ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«ã€ã•ã¾ã–ã¾ãªãƒ„ãƒ¼ãƒ«ã‚’çµ„ã¿åˆã‚ã›ã¦è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

æ¬¡ã®ç« ã§ã¯ã€**FastAPI** ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã« **HTTPS** ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã€ã„ãã¤ã‹ã®å…·ä½“ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ğŸ”’


================================================
File: /docs/ja/docs/deployment/index.md
================================================
# ãƒ‡ãƒ—ãƒ­ã‚¤

**FastAPI** è£½ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯æ¯”è¼ƒçš„å®¹æ˜“ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚„ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦ã„ãã¤ã‹ã®æ–¹æ³•ã«åˆ†ã‹ã‚Œã¾ã™ã€‚

æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚ˆã‚Šè©³ã—ããã‚Œã‚‰ã®æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚


================================================
File: /docs/ja/docs/deployment/manually.md
================================================
# æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤

**FastAPI** ã‚’æ‰‹å‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ä»¥ä¸‹ã®æ§˜ãªASGIå¯¾å¿œã®ã‚µãƒ¼ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:

//// tab | Uvicorn

* <a href="https://www.uvicorn.org/" class="external-link" target="_blank">Uvicorn</a>, uvloopã¨httptoolsã‚’åŸºã«ã—ãŸé«˜é€ŸãªASGIã‚µãƒ¼ãƒã€‚

<div class="termy">

```console
$ pip install "uvicorn[standard]"

---> 100%
```

</div>

////

/// tip | è±†çŸ¥è­˜

`standard` ã‚’åŠ ãˆã‚‹ã“ã¨ã§ã€UvicornãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€ã„ãã¤ã‹ã®æ¨å¥¨ã•ã‚Œã‚‹ä¾å­˜é–¢ä¿‚ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã“ã‚Œã«ã¯ã€`asyncio` ã®é«˜æ€§èƒ½ãªå®Œå…¨äº’æ›å“ã§ã‚ã‚‹ `uvloop` ãŒå«ã¾ã‚Œã€ä¸¦è¡Œå‡¦ç†ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå¤§å¹…ã«å‘ä¸Šã—ã¾ã™ã€‚

///

//// tab | Hypercorn

* <a href="https://github.com/pgjones/hypercorn" class="external-link" target="_blank">Hypercorn</a>, HTTP/2ã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ASGIã‚µãƒ¼ãƒã€‚

<div class="termy">

```console
$ pip install hypercorn

---> 100%
```

</div>

...ã¾ãŸã¯ã€ã“ã‚Œã‚‰ä»¥å¤–ã®ASGIã‚µãƒ¼ãƒã€‚

////

ãã—ã¦ã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¨åŒæ§˜ãªæ–¹æ³•ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã¦ä¸‹ã•ã„ã€‚ãŸã ã—ã€ä»¥ä¸‹ã®æ§˜ã«`--reload` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä½¿ç”¨ã—ãªã„ã§ä¸‹ã•ã„:

//// tab | Uvicorn

<div class="termy">

```console
$ uvicorn main:app --host 0.0.0.0 --port 80

<span style="color: green;">INFO</span>:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
```

</div>

////

//// tab | Hypercorn

<div class="termy">

```console
$ hypercorn main:app --bind 0.0.0.0:80

Running on 0.0.0.0:8080 over http (CTRL + C to quit)
```

</div>

////

åœæ­¢ã—ãŸå ´åˆã«è‡ªå‹•çš„ã«å†èµ·å‹•ã•ã›ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’è¨­å®šã—ãŸã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã•ã‚‰ã«ã€<a href="https://gunicorn.org/" class="external-link" target="_blank">Gunicorn</a>ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦<a href="https://www.uvicorn.org/#running-with-gunicorn" class="external-link" target="_blank">Uvicornã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã—ã¦ä½¿ç”¨ã—ãŸã‚Š</a>ã€è¤‡æ•°ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã§Hypercornã‚’ä½¿ç”¨ã—ãŸã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°ãªã©ã®å¾®èª¿æ•´ã‚‚è¡Œã„ãŸã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã—ã‹ã—ã“ã‚Œã‚‰å…¨ã¦ã‚’ã‚„ã‚ã†ã¨ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã“ã‚Œã‚‰ã‚’è¡Œã†Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã†æ–¹ãŒæ¥½ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚


================================================
File: /docs/ja/docs/deployment/server-workers.md
================================================
# Server Workers - Gunicorn ã¨ Uvicorn

å‰å›ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’æŒ¯ã‚Šè¿”ã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ - HTTPS
* èµ·å‹•æ™‚ã®å®Ÿè¡Œ
* å†èµ·å‹•
* **ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼‰**
* ãƒ¡ãƒ¢ãƒª
* é–‹å§‹å‰ã®äº‹å‰ã‚¹ãƒ†ãƒƒãƒ—

ã“ã“ã¾ã§ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ãŠãã‚‰ãUvicornã®ã‚ˆã†ãª**ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ **ã‚’**å˜ä¸€ã®ãƒ—ãƒ­ã‚»ã‚¹**ã§å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã«ã¯ã€**è¤‡æ•°ã®ã‚³ã‚¢**ã‚’åˆ©ç”¨ã—ã€ãã—ã¦ã‚ˆã‚Šå¤šãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€ãƒ—ãƒ­ã‚»ã‚¹ã®**ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’æŒã¤ã“ã¨ã‚’æœ›ã‚€ã§ã—ã‚‡ã†ã€‚

å‰ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§ã‚ã‚‹[ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ](concepts.md){.internal-link target=_blank}ã«ã¦è¦‹ã¦ããŸã‚ˆã†ã«ã€æœ‰åŠ¹ãªæˆ¦ç•¥ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

ã“ã“ã§ã¯<a href="https://gunicorn.org/" class="external-link" target="_blank">**Gunicorn**</a>ãŒ**Uvicornã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ã‚’ç®¡ç†ã™ã‚‹å ´åˆã®ä½¿ã„æ–¹ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

/// info

<!-- NOTE: the current version of docker.md is outdated compared to English one.  -->
Dockerã‚„Kubernetesãªã©ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€æ¬¡ã®ç« ã§è©³ã—ãèª¬æ˜ã—ã¾ã™ï¼š [ã‚³ãƒ³ãƒ†ãƒŠå†…ã®FastAPI - Docker](docker.md){.internal-link target=_blank}

ç‰¹ã«**Kubernetes**ä¸Šã§å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã€ãŠãã‚‰ã**Gunicornã‚’ä½¿ç”¨ã›ãš**ã€**ã‚³ãƒ³ãƒ†ãƒŠã”ã¨ã«å˜ä¸€ã®Uvicornãƒ—ãƒ­ã‚»ã‚¹**ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ãŒã€ãã‚Œã«ã¤ã„ã¦ã¯ã“ã®ç« ã®å¾ŒåŠã§èª¬æ˜ã—ã¾ã™ã€‚

///

## Gunicornã«ã‚ˆã‚‹Uvicornã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã®ç®¡ç†

**Gunicorn**ã¯**WSGIæ¨™æº–**ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚ã“ã®ã“ã¨ã¯ã€Gunicornã¯Flaskã‚„Djangoã®ã‚ˆã†ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã§ãã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚Gunicornãã‚Œè‡ªä½“ã¯**FastAPI**ã¨äº’æ›æ€§ãŒãªã„ã§ã™ãŒã€ã¨ã„ã†ã®ã‚‚FastAPIã¯æœ€æ–°ã®**<a href="https://asgi.readthedocs.io/en/latest/" class="external-link" target="_blank">ASGI æ¨™æº–</a>**ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚

ã—ã‹ã—ã€Gunicornã¯**ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**ã¨ã—ã¦å‹•ä½œã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç‰¹å®šã®**ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã‚¯ãƒ©ã‚¹**ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«æŒ‡ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã™ã‚‹ã¨Gunicornã¯ãã®ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã„1ã¤ä»¥ä¸Šã®**ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ã‚’é–‹å§‹ã—ã¾ã™ã€‚

ãã—ã¦**Uvicorn**ã«ã¯**Gunicornäº’æ›ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹**ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®çµ„ã¿åˆã‚ã›ã§ã€Gunicornã¯**ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**ã¨ã—ã¦å‹•ä½œã—ã€**ãƒãƒ¼ãƒˆ**ã¨**IP**ã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¾ã™ã€‚ãã—ã¦ã€**Uvicornã‚¯ãƒ©ã‚¹**ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã«é€šä¿¡ã‚’**è»¢é€**ã—ã¾ã™ã€‚

ãã—ã¦ã€Gunicornäº’æ›ã®**Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼**ã‚¯ãƒ©ã‚¹ãŒã€FastAPIãŒä½¿ãˆã‚‹ã‚ˆã†ã«ã€Gunicornã‹ã‚‰é€ã‚‰ã‚Œã¦ããŸãƒ‡ãƒ¼ã‚¿ã‚’ASGIæ¨™æº–ã«å¤‰æ›ã™ã‚‹å½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚

## Gunicornã¨Uvicornã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

<div class="termy">

```console
$ pip install "uvicorn[standard]" gunicorn

---> 100%
```

</div>

ã“ã‚Œã«ã‚ˆã‚ŠUvicornã¨ï¼ˆé«˜æ€§èƒ½ã‚’å¾—ã‚‹ãŸã‚ã®ï¼‰æ¨™æº–ï¼ˆ`standard`ï¼‰ã®è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨Gunicornã®ä¸¡æ–¹ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚

## Uvicornã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã¨ã¨ã‚‚ã«Gunicornã‚’å®Ÿè¡Œã™ã‚‹

Gunicornã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«èµ·å‹•ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™:

<div class="termy">

```console
$ gunicorn main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:80

[19499] [INFO] Starting gunicorn 20.1.0
[19499] [INFO] Listening at: http://0.0.0.0:80 (19499)
[19499] [INFO] Using worker: uvicorn.workers.UvicornWorker
[19511] [INFO] Booting worker with pid: 19511
[19513] [INFO] Booting worker with pid: 19513
[19514] [INFO] Booting worker with pid: 19514
[19515] [INFO] Booting worker with pid: 19515
[19511] [INFO] Started server process [19511]
[19511] [INFO] Waiting for application startup.
[19511] [INFO] Application startup complete.
[19513] [INFO] Started server process [19513]
[19513] [INFO] Waiting for application startup.
[19513] [INFO] Application startup complete.
[19514] [INFO] Started server process [19514]
[19514] [INFO] Waiting for application startup.
[19514] [INFO] Application startup complete.
[19515] [INFO] Started server process [19515]
[19515] [INFO] Waiting for application startup.
[19515] [INFO] Application startup complete.
```

</div>

ãã‚Œãã‚Œã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ„å‘³ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

* `main:app`ï¼š `main`ã¯"`main`"ã¨ã„ã†åå‰ã®Pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã¤ã¾ã‚Šãƒ•ã‚¡ã‚¤ãƒ«`main.py`ã‚’æ„å‘³ã—ã¾ã™ã€‚ãã—ã¦ `app` ã¯ **FastAPI** ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å¤‰æ•°åã§ã™ã€‚
    * main:app`ã¯Pythonã®`import`æ–‡ã¨åŒã˜ã‚ˆã†ãªã‚‚ã®ã ã¨æƒ³åƒã§ãã¾ã™ï¼š

        ```Python
        from main import app
        ```

    * ã¤ã¾ã‚Šã€`main:app`ã®ã‚³ãƒ­ãƒ³ã¯ã€`from main import app`ã®Pythonã®`import`ã®éƒ¨åˆ†ã¨åŒã˜ã«ãªã‚Šã¾ã™ã€‚

* `--workers`ï¼š ä½¿ç”¨ã™ã‚‹ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã®æ•°ã§ã€ãã‚Œãã‚ŒãŒUvicornã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

* `--worker-class`ï¼š ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã§ä½¿ç”¨ã™ã‚‹Gunicornäº’æ›ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã§ã™ã€‚
    * ã“ã“ã§ã¯GunicornãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ä½¿ç”¨ã§ãã‚‹ã‚¯ãƒ©ã‚¹ã‚’æ¸¡ã—ã¾ã™ï¼š

        ```Python
        import uvicorn.workers.UvicornWorker
        ```

* `--bind`ï¼š Gunicornã«ãƒªãƒƒã‚¹ãƒ³ã™ã‚‹IPã¨ãƒãƒ¼ãƒˆã‚’ä¼ãˆã¾ã™ã€‚ã‚³ãƒ­ãƒ³(`:`)ã§IPã¨ãƒãƒ¼ãƒˆã‚’åŒºåˆ‡ã‚Šã¾ã™ã€‚
    * Uvicornã‚’ç›´æ¥å®Ÿè¡Œã—ã¦ã„ã‚‹å ´åˆã¯ã€`--bind 0.0.0.0:80` ï¼ˆGunicornã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã®ä»£ã‚ã‚Šã«ã€`--host 0.0.0.0`ã¨ `--port 80`ã‚’ä½¿ã„ã¾ã™ã€‚

å‡ºåŠ›ã§ã¯ã€å„ãƒ—ãƒ­ã‚»ã‚¹ã®**PID**ï¼ˆãƒ—ãƒ­ã‚»ã‚¹IDï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ï¼ˆå˜ãªã‚‹æ•°å­—ã§ã™ï¼‰ã€‚

ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

* Gunicornã®**ãƒ—ãƒ­ã‚»ã‚¹ãƒ»ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**ã¯PID `19499`ï¼ˆã‚ãªãŸã®å ´åˆã¯é•ã†ç•ªå·ã§ã—ã‚‡ã†ï¼‰ã§å§‹ã¾ã‚Šã¾ã™ã€‚
* æ¬¡ã«ã€`Listening at: http://0.0.0.0:80`ã‚’é–‹å§‹ã—ã¾ã™ã€‚
* ãã‚Œã‹ã‚‰ `uvicorn.workers.UvicornWorker` ã§ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ¤œå‡ºã—ã¾ã™ã€‚
* ãã—ã¦ã€**4ã¤ã®ãƒ¯ãƒ¼ã‚«ãƒ¼**ã‚’èµ·å‹•ã—ã¾ã™ã€‚ãã‚Œãã‚Œã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã®PIDã¯ã€`19511`ã€`19513`ã€`19514`ã€`19515`ã§ã™ã€‚

Gunicornã¯ã¾ãŸã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã®æ•°ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã‚ã‚Œã°ã€**ãƒ€ã‚¦ãƒ³ã—ãŸãƒ—ãƒ­ã‚»ã‚¹**ã‚’ç®¡ç†ã—ã€**æ–°ã—ã„ãƒ—ãƒ­ã‚»ã‚¹ã‚’**å†èµ·å‹•**ã•ã›ã¾ã™ã€‚ãã®ãŸã‚ã€ä¸Šè¨˜ã®ãƒªã‚¹ãƒˆã«ã‚ã‚‹**å†èµ·å‹•**ã®æ¦‚å¿µã«ä¸€éƒ¨å½¹ç«‹ã¡ã¾ã™ã€‚

ã—ã‹ã—ãªãŒã‚‰ã€å¿…è¦ã§ã‚ã‚Œã°Gunicornã‚’**å†èµ·å‹•**ã•ã›ã€**èµ·å‹•æ™‚ã«å®Ÿè¡Œ**ã•ã›ã‚‹ãªã©ã€å¤–éƒ¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒãŸã›ã‚‹ã“ã¨ã‚‚å¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

## Uvicornã¨ãƒ¯ãƒ¼ã‚«ãƒ¼

Uvicornã«ã¯è¤‡æ•°ã®**ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ã‚’èµ·å‹•ã—å®Ÿè¡Œã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã¨ã¯ã„ã†ã‚‚ã®ã®ã€ä»Šã®ã¨ã“ã‚Uvicornã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ‰±ã†æ©Ÿèƒ½ã¯Gunicornã‚ˆã‚Šã‚‚åˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã®ãƒ¬ãƒ™ãƒ«ï¼ˆPythonãƒ¬ãƒ™ãƒ«ï¼‰ã§ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’æŒã¡ãŸã„ã®ã§ã‚ã‚Œã°ã€Gunicornã‚’ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã—ã¦ä½¿ã£ã¦ã¿ãŸæ–¹ãŒè³¢æ˜ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚

ã©ã‚“ãªå ´åˆã§ã‚ã‚Œã€ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ï¼š

<div class="termy">

```console
$ uvicorn main:app --host 0.0.0.0 --port 8080 --workers 4
<font color="#A6E22E">INFO</font>:     Uvicorn running on <b>http://0.0.0.0:8080</b> (Press CTRL+C to quit)
<font color="#A6E22E">INFO</font>:     Started parent process [<font color="#A1EFE4"><b>27365</b></font>]
<font color="#A6E22E">INFO</font>:     Started server process [<font color="#A1EFE4">27368</font>]
<font color="#A6E22E">INFO</font>:     Waiting for application startup.
<font color="#A6E22E">INFO</font>:     Application startup complete.
<font color="#A6E22E">INFO</font>:     Started server process [<font color="#A1EFE4">27369</font>]
<font color="#A6E22E">INFO</font>:     Waiting for application startup.
<font color="#A6E22E">INFO</font>:     Application startup complete.
<font color="#A6E22E">INFO</font>:     Started server process [<font color="#A1EFE4">27370</font>]
<font color="#A6E22E">INFO</font>:     Waiting for application startup.
<font color="#A6E22E">INFO</font>:     Application startup complete.
<font color="#A6E22E">INFO</font>:     Started server process [<font color="#A1EFE4">27367</font>]
<font color="#A6E22E">INFO</font>:     Waiting for application startup.
<font color="#A6E22E">INFO</font>:     Application startup complete.
```

</div>

ã“ã“ã§å”¯ä¸€ã®æ–°ã—ã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ `--workers` ã§ã€Uvicornã«4ã¤ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã‚’èµ·å‹•ã™ã‚‹ã‚ˆã†ã«æŒ‡ç¤ºã—ã¦ã„ã¾ã™ã€‚

å„ãƒ—ãƒ­ã‚»ã‚¹ã® **PID** ãŒè¡¨ç¤ºã•ã‚Œã€è¦ªãƒ—ãƒ­ã‚»ã‚¹ã® `27365` (ã“ã‚Œã¯ **ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£**) ã¨ã€å„ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ã® **PID** ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š `27368`ã€`27369`ã€`27370`ã€`27367`ã«ãªã‚Šã¾ã™ã€‚

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

ã“ã“ã§ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã‚’**ä¸¦åˆ—åŒ–**ã—ã€CPUã®**ãƒãƒ«ãƒã‚³ã‚¢**ã‚’æ´»ç”¨ã—ã€**ã‚ˆã‚Šå¤šãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**ã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€**Gunicorn**ï¼ˆã¾ãŸã¯Uvicornï¼‰ã‚’ä½¿ç”¨ã—ã¦**Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ—ãƒ­ã‚»ã‚¹**ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚’è¦‹ã¦ã„ãã¾ã—ãŸã€‚

ä¸Šè¨˜ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ãƒªã‚¹ãƒˆã‹ã‚‰ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’ä½¿ã†ã“ã¨ã¯ä¸»ã«**ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã®éƒ¨åˆ†ã¨ã€**å†èµ·å‹•**ã‚’å°‘ã—åŠ©ã‘ã¦ãã‚Œã¾ã™ï¼š

* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ - HTTPS
* èµ·å‹•æ™‚ã®å®Ÿè¡Œ
* å†èµ·å‹•
* ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼‰
* ãƒ¡ãƒ¢ãƒªãƒ¼
* é–‹å§‹å‰ã®äº‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—


## ã‚³ãƒ³ãƒ†ãƒŠã¨Docker
<!-- NOTE: the current version of docker.md is outdated compared to English one.  -->
æ¬¡ç« ã®[ã‚³ãƒ³ãƒ†ãƒŠå†…ã®FastAPI - Docker](docker.md){.internal-link target=_blank}ã§ã¯ã€ãã®ä»–ã®**ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**ã‚’æ‰±ã†ãŸã‚ã«å®Ÿæ–½ã™ã‚‹ã§ã‚ã‚ã†æˆ¦ç•¥ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ã€‚

ã¾ãŸã€**Gunicornã¨Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼**ã‚’å«ã‚€**å…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸**ã¨ã€ç°¡å˜ãªã‚±ãƒ¼ã‚¹ã«å½¹ç«‹ã¤ã„ãã¤ã‹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚‚ç´¹ä»‹ã—ã¾ã™ã€‚

ã¾ãŸã€(Gunicornã‚’ä½¿ã‚ãšã«)Uvicornãƒ—ãƒ­ã‚»ã‚¹ã‚’1ã¤ã ã‘å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã€**ã‚¼ãƒ­ã‹ã‚‰ç‹¬è‡ªã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’**æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚‚ç´¹ä»‹ã—ã¾ã™ã€‚ã“ã‚Œã¯ç°¡å˜ãªãƒ—ãƒ­ã‚»ã‚¹ã§ã€ãŠãã‚‰ã**Kubernetes**ã®ã‚ˆã†ãªåˆ†æ•£ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ã†ã¨ãã«ã‚„ã‚ŠãŸã„ã“ã¨ã§ã—ã‚‡ã†ã€‚

## ã¾ã¨ã‚

Uvicornãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’ä½¿ã£ãŸãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ã¨ã—ã¦**Gunicorn**ï¼ˆã¾ãŸã¯Uvicornï¼‰ã‚’ä½¿ãˆã°ã€**ãƒãƒ«ãƒã‚³ã‚¢CPU**ã‚’æ´»ç”¨ã—ã¦**è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä¸¦åˆ—å®Ÿè¡Œ**ã§ãã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€**ã‚ãªãŸè‡ªèº«ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚·ã‚¹ãƒ†ãƒ **ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãªãŒã‚‰ã€ä»–ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’è‡ªåˆ†ã§è¡Œã†å ´åˆã«ã‚‚ä½¿ãˆã¾ã™ã€‚

æ¬¡ã®ç« ã§ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠï¼ˆDockerã‚„Kubernetesãªã©ï¼‰ã‚’ä½¿ã£ãŸ**FastAPI**ã«ã¤ã„ã¦å­¦ã‚“ã§ã„ãã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã«ã¯ã€ä»–ã®**ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**ã‚‚è§£æ±ºã™ã‚‹ç°¡å˜ãªæ–¹æ³•ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã§ã—ã‚‡ã†ã€‚âœ¨


================================================
File: /docs/ja/docs/deployment/versions.md
================================================
# FastAPIã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦

**FastAPI** ã¯æ—¢ã«å¤šãã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚·ã‚¹ãƒ†ãƒ ã«æœ¬ç•ªç’°å¢ƒã§ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€100%ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç¶­æŒã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€æ´»ç™ºãªé–‹ç™ºãŒç¶šã„ã¦ã„ã¾ã™ã€‚

é«˜é »åº¦ã§æ–°æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã€å®šæœŸçš„ã«ãƒã‚°ãŒä¿®æ­£ã•ã‚Œã€å®Ÿè£…ã¯ç¶™ç¶šçš„ã«æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚ŒãŒç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã„ã¾ã ã« `0.x.x` ãªç†ç”±ã§ã‚ã‚Šã€ãã‚Œãã‚Œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ç ´å£Šçš„ãªå¤‰æ›´ãŒãªã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€<a href="https://semver.org/" class="external-link" target="_blank">ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°</a>ã®è¦å‰‡ã«å‰‡ã£ã¦ã„ã¾ã™ã€‚

**FastAPI** ã‚’ä½¿ç”¨ã™ã‚‹ã¨æœ¬ç•ªç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã™ãã«ä½œæˆã§ãã¾ã™ãŒ (ã™ã§ã«ä½•åº¦ã‚‚çµŒé¨“ã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒ)ã€æ®‹ã‚Šã®ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã®ã‹ç¢ºèªã—ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚

## `fastapi` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®š

æœ€åˆã«ã™ã¹ãã“ã¨ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ **FastAPI** ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã™ã‚‹ã“ã¨ã§ã™ã€‚

ä¾‹ãˆã°ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ `0.45.0` ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚

`requirements.txt` ã‚’ä½¿ã£ã¦ã„ã‚‹ãªã‚‰ã€ä»¥ä¸‹ã®æ§˜ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã§ãã¾ã™:

```txt
fastapi==0.45.0
```

ã“ã‚Œã¯ã€å³å¯†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ `0.45.0` ã ã‘ã‚’ä½¿ã†ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

ã¾ãŸã¯ã€ä»¥ä¸‹ã®æ§˜ã«å›ºå®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™:

```txt
fastapi>=0.45.0,<0.46.0
```

ã“ã‚Œã¯ `0.45.0` ä»¥ä¸Šã€`0.46.0` æœªæº€ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã†ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ `0.45.2` ã¯ä½¿ç”¨å¯èƒ½ã§ã™ã€‚

Poetryã‚„Pipenvãªã©ã€ä»–ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã§ã‚‚ã€ãã‚Œãã‚Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

## åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³

[Release Notes](../release-notes.md){.internal-link target=_blank}ã§åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç¢ºèªã§ãã¾ã™ (ç¾åœ¨ã®æœ€æ–°ç‰ˆã®ç¢ºèªãªã©ã®ãŸã‚)ã€‚

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦

ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã®è¦ç´„ã«å¾“ã£ã¦ã€`1.0.0` æœªæº€ã®å…¨ã¦ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ç ´å£Šçš„ãªå¤‰æ›´ãŒåŠ ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

FastAPIã§ã¯ã€Œãƒ‘ãƒƒãƒã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ãƒã‚°ä¿®æ­£ã¨éç ´å£Šçš„ãªå¤‰æ›´ã«ç•™ã‚ã‚‹ã¨ã„ã†è¦ç´„ã«å¾“ã£ã¦ã„ã¾ã™ã€‚

/// tip | è±†çŸ¥è­˜

ã€Œãƒ‘ãƒƒãƒã€ã¯æœ€å¾Œã®æ•°å­—ã‚’æŒ‡ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€`0.2.3` ã§ã¯ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ `3` ã§ã™ã€‚

///

å¾“ã£ã¦ã€ä»¥ä¸‹ã®æ§˜ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å›ºå®šãŒæœ›ã¾ã—ã„ã§ã™:

```txt
fastapi>=0.45.0,<0.46.0
```

ç ´å£Šçš„ãªå¤‰æ›´ã¨æ–°æ©Ÿèƒ½å®Ÿè£…ã¯ã€Œãƒã‚¤ãƒŠãƒ¼ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§åŠ ãˆã‚‰ã‚Œã¾ã™ã€‚

/// tip | è±†çŸ¥è­˜

ã€Œãƒã‚¤ãƒŠãƒ¼ã€ã¯çœŸã‚“ä¸­ã®æ•°å­—ã§ã™ã€‚ä¾‹ãˆã°ã€`0.2.3` ã§ã¯ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ `2` ã§ã™ã€‚

///

## FastAPIã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ†ã‚¹ãƒˆã‚’åŠ ãˆã‚‹ã¹ãã§ã™ã€‚

**FastAPI** ã§ã¯éå¸¸ã«ç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ (Starletteã®ãŠã‹ã’ã§)ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ä¸‹ã•ã„: [ãƒ†ã‚¹ãƒˆ](../tutorial/testing.md){.internal-link target=_blank}

ãƒ†ã‚¹ãƒˆã‚’åŠ ãˆãŸå¾Œã§ã€**FastAPI** ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚ˆã‚Šæœ€æ–°ã®ã‚‚ã®ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã€ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§å…¨ã¦ã®ã‚³ãƒ¼ãƒ‰ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‹ç¢ºèªã§ãã¾ã™ã€‚

å…¨ã¦ãŒå‹•ä½œã™ã‚‹ã‹ã€ä¿®æ­£ã‚’è¡Œã£ãŸä¸Šã§å…¨ã¦ã®ãƒ†ã‚¹ãƒˆã‚’é€šéã—ãŸå ´åˆã€ä½¿ç”¨ã—ã¦ã„ã‚‹`fastapi` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚ˆã‚Šæœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å›ºå®šã§ãã¾ã™ã€‚

## Starletteã«ã¤ã„ã¦

`Starlette` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯å›ºå®šã™ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

**FastAPI** ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯ã«Starletteã®ã‚ˆã‚Šæ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ã‚ˆã£ã¦ã€æœ€é©ãªStarletteã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³é¸æŠã‚’**FastAPI** ã«ä»»ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## Pydanticã«ã¤ã„ã¦

Pydanticã¯è‡ªèº«ã®ãƒ†ã‚¹ãƒˆã ã‘ã§ãªã**FastAPI** ã®ãŸã‚ã®ãƒ†ã‚¹ãƒˆã‚’å«ã‚“ã§ã„ã¾ã™ã€‚ãªã®ã§ã€Pydanticã®æ–°ãŸãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ ( `1.0.0` ä»¥é™) ã¯å…¨ã¦FastAPIã¨æ•´åˆæ€§ãŒã‚ã‚Šã¾ã™ã€‚

Pydanticã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã€å‹•ä½œãŒä¿è¨¼ã§ãã‚‹`1.0.0`ä»¥é™ã®ã„ãšã‚Œã‹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰`2.0.0` æœªæº€ã®é–“ã«å›ºå®šã§ãã¾ã™ã€‚

ä¾‹ãˆã°:

```txt
pydantic>=1.2.0,<2.0.0
```


================================================
File: /docs/ja/docs/how-to/conditional-openapi.md
================================================
# æ¡ä»¶ä»˜ã OpenAPI

å¿…è¦ã§ã‚ã‚Œã°ã€è¨­å®šã¨ç’°å¢ƒå¤‰æ•°ã‚’åˆ©ç”¨ã—ã¦ã€ç’°å¢ƒã«å¿œã˜ã¦æ¡ä»¶ä»˜ãã§OpenAPIã‚’æ§‹æˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ã¾ãŸã€å®Œå…¨ã«OpenAPIã‚’ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨APIã€ãŠã‚ˆã³ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦

æœ¬ç•ªç’°å¢ƒã«ãŠã„ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®UIã‚’éè¡¨ç¤ºã«ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€APIã‚’ä¿è­·ã—ã‚ˆã†ã¨ *ã™ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“*ã€‚

ãã‚Œã¯ã€APIã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å¼·åŒ–ã«ã¯ãªã‚‰ãšã€*path operations* ã¯ä¾ç„¶ã¨ã—ã¦åˆ©ç”¨å¯èƒ½ã§ã™ã€‚

ã‚‚ã—ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ¬ é™¥ãŒã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã‚ã‚‹ãªã‚‰ã°ã€ãã‚Œã¯å­˜åœ¨ã—ãŸã¾ã¾ã§ã™ã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹ã®ã¯ã€å˜ã«ã‚ãªãŸã®APIã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’é›£è§£ã«ã™ã‚‹ã ã‘ã§ãªãã€åŒæ™‚ã«ã‚ãªãŸè‡ªèº«ã®æœ¬ç•ªç’°å¢ƒã§ã®APIã®ãƒ‡ãƒãƒƒã‚°ã‚’å›°é›£ã«ã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å˜ç´”ã«ã€ <a href="https://en.wikipedia.org/wiki/Security_through_obscurity" class="external-link" target="_blank">Security through obscurity</a> ã®ä¸€ã¤ã®å½¢æ…‹ã¨ã—ã¦è€ƒãˆã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚

ã‚‚ã—ã‚ãªãŸã®APIã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·åŒ–ã—ãŸã„ãªã‚‰ã€ã„ãã¤ã‹ã®ã‚ˆã‚Šã‚ˆã„æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ã‚’ç¤ºã™ã¨ã€

* ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãŸã‚ã®Pydanticãƒ¢ãƒ‡ãƒ«ã®å®šç¾©ã‚’è¦‹ç›´ã™ã€‚
* ä¾å­˜é–¢ä¿‚ã«åŸºã¥ãã™ã¹ã¦ã®å¿…è¦ãªãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã¨ãƒ­ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹ã€‚
* ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’çµ¶å¯¾ã«å¹³æ–‡ã§ä¿å­˜ã—ãªã„ã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ã®ã¿ã‚’ä¿å­˜ã™ã‚‹ã€‚
* Passlibã‚„JWTãƒˆãƒ¼ã‚¯ãƒ³ã«ä»£è¡¨ã•ã‚Œã‚‹ã€ã‚ˆãçŸ¥ã‚‰ã‚ŒãŸæš—å·åŒ–ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦å®Ÿè£…ã™ã‚‹ã€‚
* ãã—ã¦å¿…è¦ãªã¨ã“ã‚ã§ã¯ã€ã‚‚ã£ã¨ç´°ã‹ã„ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³åˆ¶å¾¡ã‚’OAuth2ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½¿ã£ã¦è¡Œã†ã€‚
* ãªã©

ãã‚Œã§ã‚‚ã€ä¾‹ãˆã°æœ¬ç•ªç’°å¢ƒã®ã‚ˆã†ãªç‰¹å®šã®ç’°å¢ƒã®ã¿ã§ã€ã‚ã‚‹ã„ã¯ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã«ã‚ˆã£ã¦APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã©ã†ã—ã¦ã‚‚ç„¡åŠ¹ã«ã—ãŸã„ã¨ã„ã†ã€éå¸¸ã«ç‰¹æ®Šãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

## è¨­å®šã¨ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æ¡ä»¶ä»˜ã OpenAPI

ç”Ÿæˆã™ã‚‹OpenAPIã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆUIã®æ§‹æˆã¯ã€å…±é€šã®Pydanticã®è¨­å®šã‚’ä½¿ç”¨ã—ã¦ç°¡å˜ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚

ä¾‹ãˆã°ã€

{* ../../docs_src/conditional_openapi/tutorial001.py hl[6,11] *}

ã“ã“ã§ã¯ `openapi_url` ã®è¨­å®šã‚’ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® `"/openapi.json"` ã®ã¾ã¾å®£è¨€ã—ã¦ã„ã¾ã™ã€‚

ãã—ã¦ã€ã“ã‚Œã‚’ `FastAPI` appã‚’ä½œã‚‹éš›ã«ä½¿ã„ã¾ã™ã€‚

ãã‚Œã‹ã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `OPENAPI_URL` ã¨ã„ã†ç’°å¢ƒå¤‰æ•°ã‚’ç©ºæ–‡å­—åˆ—ã«è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦OpenAPI (UIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å«ã‚€) ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

<div class="termy">

```console
$ OPENAPI_URL= uvicorn main:app

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `/openapi.json`, `/docs`, `/redoc` ã®ã©ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚ã€ `404 Not Found` ã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```JSON
{
    "detail": "Not Found"
}
```


================================================
File: /docs/ja/docs/learn/index.md
================================================
# å­¦ç¿’

ã“ã“ã§ã¯ã€**FastAPI** ã‚’å­¦ç¿’ã™ã‚‹ãŸã‚ã®å…¥é–€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¨ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

ã“ã‚Œã¯ã€FastAPIã‚’å­¦ç¿’ã™ã‚‹ã«ã‚ãŸã£ã¦ã®**æ›¸ç±**ã‚„**ã‚³ãƒ¼ã‚¹**ã§ã‚ã‚Šã€**å…¬å¼**ã‹ã¤æ¨å¥¨ã•ã‚Œã‚‹æ–¹æ³•ã¨ã¿ãªã™ã“ã¨ãŒã§ãã¾ã™ ğŸ˜


================================================
File: /docs/ja/docs/tutorial/background-tasks.md
================================================
# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ãŸ *å¾Œã«* å®Ÿè¡Œã•ã‚Œã‚‹ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã§ãã¾ã™ã€‚

ã“ã‚Œã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¾Œã«å‡¦ç†ã‚’é–‹å§‹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ã‘å–ã‚‹å‰ã«å‡¦ç†ã‚’çµ‚ãˆã‚‹å¿…è¦ã®ãªã„æ“ä½œã«å½¹ç«‹ã¡ã¾ã™ã€‚

ã“ã‚Œã«ã¯ã€ãŸã¨ãˆã°æ¬¡ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¾ã™ã€‚

* ä½œæ¥­å®Ÿè¡Œå¾Œã®ãƒ¡ãƒ¼ãƒ«é€šçŸ¥:
    * ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã¨ãƒ¡ãƒ¼ãƒ«ã®é€ä¿¡ã¯ã€Œé…ã„ã€(æ•°ç§’) å‚¾å‘ãŒã‚ã‚‹ãŸã‚ã€ã™ãã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãŒã§ãã¾ã™ã€‚
* ãƒ‡ãƒ¼ã‚¿å‡¦ç†:
    * ãŸã¨ãˆã°ã€æ™‚é–“ã®ã‹ã‹ã‚‹å‡¦ç†ã‚’å¿…è¦ã¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å—ä¿¡æ™‚ã«ã¯ã€ã€Œå—ä¿¡æ¸ˆã¿ã€(HTTP 202) ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å‡¦ç†ã§ãã¾ã™ã€‚

## `BackgroundTasks` ã®ä½¿ç”¨

ã¾ãšåˆã‚ã«ã€`BackgroundTasks` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€` BackgroundTasks` ã®å‹å®£è¨€ã¨å…±ã«ã€*path operation é–¢æ•°* ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å®šç¾©ã—ã¾ã™:

{* ../../docs_src/background_tasks/tutorial001.py hl[1,13] *}

**FastAPI** ã¯ã€`BackgroundTasks` å‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ãã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«æ¸¡ã—ã¾ã™ã€‚

## ã‚¿ã‚¹ã‚¯é–¢æ•°ã®ä½œæˆ

ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°ã‚’ä½œæˆã—ã¾ã™ã€‚

ã“ã‚Œã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã‚‹å˜ãªã‚‹æ¨™æº–çš„ãªé–¢æ•°ã§ã™ã€‚

ã“ã‚Œã¯ `async def` ã¾ãŸã¯é€šå¸¸ã® `def` é–¢æ•°ã§ã‚ã‚Šã€**FastAPI** ã¯ã“ã‚Œã‚’æ­£ã—ãå‡¦ç†ã—ã¾ã™ã€‚

ã“ã“ã§ã€ã‚¿ã‚¹ã‚¯é–¢æ•°ã¯ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿ã‚’å®Ÿè¡Œã—ã¾ã™ (ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)ã€‚

ã¾ãŸã€æ›¸ãè¾¼ã¿æ“ä½œã§ã¯ `async` ã¨ `await` ã‚’ä½¿ç”¨ã—ãªã„ãŸã‚ã€é€šå¸¸ã® `def` ã§é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚

{* ../../docs_src/background_tasks/tutorial001.py hl[6:9] *}

## ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã®è¿½åŠ 

*path operations é–¢æ•°* å†…ã§ã€`.add_task()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã‚¿ã‚¹ã‚¯é–¢æ•°ã‚’ *background tasks* ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ¸¡ã—ã¾ã™ã€‚

{* ../../docs_src/background_tasks/tutorial001.py hl[14] *}

`.add_task()` ã¯ä»¥ä¸‹ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã¾ã™:

* ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚¿ã‚¹ã‚¯é–¢æ•° (`write_notification`)ã€‚
* ã‚¿ã‚¹ã‚¯é–¢æ•°ã«é †ç•ªã«æ¸¡ã™å¿…è¦ã®ã‚ã‚‹å¼•æ•°ã®åˆ— (`email`)ã€‚
* ã‚¿ã‚¹ã‚¯é–¢æ•°ã«æ¸¡ã™å¿…è¦ã®ã‚ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•° (`message="some notification"`)ã€‚

## ä¾å­˜æ€§æ³¨å…¥

`BackgroundTasks` ã®ä½¿ç”¨ã¯ä¾å­˜æ€§æ³¨å…¥ã‚·ã‚¹ãƒ†ãƒ ã§ã‚‚æ©Ÿèƒ½ã—ã€æ§˜ã€…ãªéšå±¤ (*path operations é–¢æ•°*ã€ä¾å­˜æ€§ (ä¾å­˜å¯èƒ½æ€§)ã€ã‚µãƒ–ä¾å­˜æ€§ãªã©) ã§ `BackgroundTasks` å‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å®£è¨€ã§ãã¾ã™ã€‚

**FastAPI** ã¯ã€ãã‚Œãã‚Œã®å ´åˆã®å‡¦ç†â€‹â€‹æ–¹æ³•ã¨åŒã˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†åˆ©ç”¨æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹ãŸã‚ã€ã™ã¹ã¦ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ãŒãƒãƒ¼ã‚¸ã•ã‚Œã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å¾Œã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

{* ../../docs_src/background_tasks/tutorial002.py hl[13,15,22,25] *}

ã“ã®ä¾‹ã§ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒé€ä¿¡ã•ã‚ŒãŸ *å¾Œ* ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ `log.txt` ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¾ã‚Œã¾ã™ã€‚

ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã‚¯ã‚¨ãƒªãŒã‚ã£ãŸå ´åˆã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã§ãƒ­ã‚°ã«æ›¸ãè¾¼ã¾ã‚Œã¾ã™ã€‚

ãã—ã¦ã€*path operations é–¢æ•°* ã§ç”Ÿæˆã•ã‚ŒãŸåˆ¥ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã¯ã€`email` ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›¸ãè¾¼ã¿ã¾ã™ã€‚

## æŠ€è¡“çš„ãªè©³ç´°

`BackgroundTasks` ã‚¯ãƒ©ã‚¹ã¯ã€<a href="https://www.starlette.io/background/" class="external-link" target="_blank">`starlette.background`</a>ã‹ã‚‰ç›´æ¥å–å¾—ã•ã‚Œã¾ã™ã€‚

ã“ã‚Œã¯ã€FastAPI ã«ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãŸã‚ã€`fastapi` ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãã‚‹ä¸Šã«ã€`starlette.background`ã‹ã‚‰åˆ¥ã® `BackgroundTask` (æœ«å°¾ã« `s` ãŒãªã„) ã‚’èª¤ã£ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚’å›é¿ã§ãã¾ã™ã€‚

`BackgroundTasks`ã®ã¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ (`BackgroundTask` ã§ã¯ãªã)ã€`Request` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›´æ¥ä½¿ç”¨ã™ã‚‹å ´åˆã¨åŒæ§˜ã«ã€ãã‚Œã‚’ *path operations é–¢æ•°* ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦ä½¿ç”¨ã—ã€**FastAPI** ã«æ®‹ã‚Šã®å‡¦ç†ã‚’ä»»ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã‚Œã§ã‚‚ã€FastAPI ã§ `BackgroundTask` ã‚’å˜ç‹¬ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰å†…ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ãã‚Œã‚’å«ã‚€Starlette `Response` ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

è©³ç´°ã«ã¤ã„ã¦ã¯ã€<a href="https://www.starlette.io/background/" class="external-link" target="_blank">ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã«é–¢ã™ã‚‹ Starlette ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’å‚ç…§ã—ã¦ä¸‹ã•ã„ã€‚

## è­¦å‘Š

å¤§é‡ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰è¨ˆç®—ãŒå¿…è¦ã§ã‚ã‚Šã€å¿…ãšã—ã‚‚åŒã˜ãƒ—ãƒ­ã‚»ã‚¹ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒãªã„å ´åˆ (ãŸã¨ãˆã°ã€ãƒ¡ãƒ¢ãƒªã‚„å¤‰æ•°ãªã©ã‚’å…±æœ‰ã™ã‚‹å¿…è¦ãŒãªã„å ´åˆ)ã€<a href="https://www.celeryproject.org/" class="external-link" target="_blank">Celery</a> ã®ã‚ˆã†ãªã‚ˆã‚Šå¤§ããªä»–ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã¯ã€ã‚ˆã‚Šè¤‡é›‘ãªæ§‹æˆã€RabbitMQ ã‚„ Redis ãªã©ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/ã‚¸ãƒ§ãƒ–ã‚­ãƒ¥ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’å¿…è¦ã¨ã™ã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ãŒã€è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã€ç‰¹ã«è¤‡æ•°ã®ã‚µãƒ¼ãƒãƒ¼ã§ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

ãŸã ã—ã€åŒã˜ **FastAPI** ã‚¢ãƒ—ãƒªã‹ã‚‰å¤‰æ•°ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã€ã¾ãŸã¯å°ã•ãªãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ (é›»å­ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã®é€ä¿¡ãªã©) ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€å˜ã« `BackgroundTasks` ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

## ã¾ã¨ã‚

`BackgroundTasks` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€*path operations é–¢æ•°* ã‚„ä¾å­˜é–¢ä¿‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã« `BackgroundTasks`ã‚’ä½¿ç”¨ã—ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¦ä¸‹ã•ã„ã€‚


================================================
File: /docs/ja/docs/tutorial/body-fields.md
================================================
# ãƒœãƒ‡ã‚£ - ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

`Query`ã‚„`Path`ã€`Body`ã‚’ä½¿ã£ã¦ *path operationé–¢æ•°* ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«è¿½åŠ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å®£è¨€ã™ã‚‹ã®ã¨åŒã˜ã‚ˆã†ã«ã€Pydanticã®`Field`ã‚’ä½¿ã£ã¦Pydanticãƒ¢ãƒ‡ãƒ«ã®å†…éƒ¨ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## `Field`ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

ã¾ãšã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™:

{* ../../docs_src/body_fields/tutorial001.py hl[4] *}

/// warning | æ³¨æ„

`Field`ã¯ä»–ã®å…¨ã¦ã®ã‚‚ã®ï¼ˆ`Query`ã€`Path`ã€`Body`ãªã©ï¼‰ã¨ã¯é•ã„ã€`fastapi`ã‹ã‚‰ã§ã¯ãªãã€`pydantic`ã‹ã‚‰ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

///

## ãƒ¢ãƒ‡ãƒ«ã®å±æ€§ã®å®£è¨€

ä»¥ä¸‹ã®ã‚ˆã†ã«`Field`ã‚’ãƒ¢ãƒ‡ãƒ«ã®å±æ€§ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_fields/tutorial001.py hl[11,12,13,14] *}

`Field`ã¯`Query`ã‚„`Path`ã€`Body`ã¨åŒã˜ã‚ˆã†ã«å‹•ä½œã—ã€å…¨ãåŒæ§˜ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã©ã‚’æŒã¡ã¾ã™ã€‚

/// note | æŠ€è¡“è©³ç´°

å®Ÿéš›ã«ã¯æ¬¡ã«è¦‹ã‚‹`Query`ã‚„`Path`ãªã©ã¯ã€å…±é€šã®`Param`ã‚¯ãƒ©ã‚¹ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ãŒã€ãã‚Œè‡ªä½“ã¯Pydanticã®`FieldInfo`ã‚¯ãƒ©ã‚¹ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§ã™ã€‚

ã¾ãŸã€Pydanticã®`Field`ã¯`FieldInfo`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚‚è¿”ã—ã¾ã™ã€‚

`Body`ã¯`FieldInfo`ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›´æ¥è¿”ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ãã—ã¦ã€ä»–ã«ã‚‚`Body`ã‚¯ãƒ©ã‚¹ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§ã‚ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

`fastapi`ã‹ã‚‰`Query`ã‚„`Path`ãªã©ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹å ´åˆã€ã“ã‚Œã‚‰ã¯å®Ÿéš›ã«ã¯ç‰¹æ®Šãªã‚¯ãƒ©ã‚¹ã‚’è¿”ã™é–¢æ•°ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

///

/// tip | è±†çŸ¥è­˜

å‹ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã€`Field`ã‚’æŒã¤å„ãƒ¢ãƒ‡ãƒ«ã®å±æ€§ãŒã€`Path`ã‚„`Query`ã€`Body`ã®ä»£ã‚ã‚Šã«`Field`ã‚’æŒã¤ã€*path operation é–¢æ•°ã®*ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨åŒã˜æ§‹é€ ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚

///

## è¿½åŠ æƒ…å ±ã®è¿½åŠ 

è¿½åŠ æƒ…å ±ã¯`Field`ã‚„`Query`ã€`Body`ãªã©ã§å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã—ã¦ãã‚Œã¯ç”Ÿæˆã•ã‚ŒãŸJSONã‚¹ã‚­ãƒ¼ãƒã«å«ã¾ã‚Œã¾ã™ã€‚

å¾Œã«ä¾‹ã‚’ç”¨ã„ã¦å®£è¨€ã‚’å­¦ã¶éš›ã«ã€è¿½åŠ æƒ…å ±ã‚’å¥æ‚ªæ–¹æ³•ã‚’å­¦ã¹ã¾ã™ã€‚

## ã¾ã¨ã‚

Pydanticã®`Field`ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ¢ãƒ‡ãƒ«ã®å±æ€§ã«è¿½åŠ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

è¿½åŠ ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã‚’ä½¿ç”¨ã—ã¦ã€è¿½åŠ ã®JSONã‚¹ã‚­ãƒ¼ãƒã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚


================================================
File: /docs/ja/docs/tutorial/body-multiple-params.md
================================================
# ãƒœãƒ‡ã‚£ - è¤‡æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ã“ã‚Œã¾ã§`Path`ã¨`Query`ã‚’ã©ã†ä½¿ã†ã‹ã‚’è¦‹ã¦ãã¾ã—ãŸãŒã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã®å®£è¨€ã®ã‚ˆã‚Šé«˜åº¦ãªä½¿ã„æ–¹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

## `Path`ã€`Query`ã¨ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ··ãœã‚‹

ã¾ãšã€ã‚‚ã¡ã‚ã‚“ã€`Path`ã¨`Query`ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å®£è¨€ã¯è‡ªç”±ã«æ··ãœã‚‹ã“ã¨ãŒã§ãã€ **FastAPI** ã¯ä½•ã‚’ã™ã‚‹ã¹ãã‹ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®`None`ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™:

{* ../../docs_src/body_multiple_params/tutorial001.py hl[19,20,21] *}

/// note | å‚™è€ƒ

ã“ã®å ´åˆã€ãƒœãƒ‡ã‚£ã‹ã‚‰å–å¾—ã™ã‚‹`item`ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯`None`ã§ã™ã€‚

///

## è¤‡æ•°ã®ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ä¸Šè¿°ã®ä¾‹ã§ã¯ã€*path operations*ã¯`item`ã®å±æ€§ã‚’æŒã¤ä»¥ä¸‹ã®ã‚ˆã†ãªJSONãƒœãƒ‡ã‚£ã‚’æœŸå¾…ã—ã¦ã„ã¾ã—ãŸ:

```JSON
{
    "name": "Foo",
    "description": "The pretender",
    "price": 42.0,
    "tax": 3.2
}
```

ã—ã‹ã—ã€`item`ã¨`user`ã®ã‚ˆã†ã«è¤‡æ•°ã®ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™:

{* ../../docs_src/body_multiple_params/tutorial002.py hl[22] *}

ã“ã®å ´åˆã€**FastAPI**ã¯é–¢æ•°å†…ã«è¤‡æ•°ã®ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPydanticãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ï¼’ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰ãŒã‚ã‚‹ã“ã¨ã«æ°—ä»˜ãã¾ã™ã€‚

ãã®ãŸã‚ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã‚’ãƒœãƒ‡ã‚£ã®ã‚­ãƒ¼ï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åï¼‰ã¨ã—ã¦ä½¿ç”¨ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒœãƒ‡ã‚£ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™:

```JSON
{
    "item": {
        "name": "Foo",
        "description": "The pretender",
        "price": 42.0,
        "tax": 3.2
    },
    "user": {
        "username": "dave",
        "full_name": "Dave Grohl"
    }
}
```

/// note | å‚™è€ƒ

ä»¥å‰ã¨åŒã˜ã‚ˆã†ã«`item`ãŒå®£è¨€ã•ã‚Œã¦ã„ãŸã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€`item`ã¯ã‚­ãƒ¼`item`ã‚’æŒã¤ãƒœãƒ‡ã‚£ã®å†…éƒ¨ã«ã‚ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

///

**FastAPI** ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰è‡ªå‹•ã§å¤‰æ›ã‚’è¡Œã„ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿`item`ãŒç‰¹å®šã®å†…å®¹ã‚’å—ã‘å–ã‚Šã€`user`ã‚‚åŒã˜ã‚ˆã†ã«ç‰¹å®šã®å†…å®¹ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚

è¤‡åˆãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã‚’è¡Œã„ã€OpenAPIã‚¹ã‚­ãƒ¼ãƒã‚„è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚ˆã†ã«æ–‡æ›¸åŒ–ã—ã¦ãã‚Œã¾ã™ã€‚

## ãƒœãƒ‡ã‚£å†…ã®å˜æ•°å€¤

ã‚¯ã‚¨ãƒªã¨ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¿½åŠ ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã® `Query` ã¨ `Path` ãŒã‚ã‚‹ã®ã¨åŒã˜ã‚ˆã†ã«ã€ **FastAPI** ã¯åŒç­‰ã® `Body` ã‚’æä¾›ã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€å‰ã®ãƒ¢ãƒ‡ãƒ«ã‚’æ‹¡å¼µã—ã¦ã€åŒã˜ãƒœãƒ‡ã‚£ã« `item` ã¨ `user` ã®ä»–ã«ã‚‚ã†ä¸€ã¤ã®ã‚­ãƒ¼ `importance` ã‚’å…¥ã‚ŒãŸã„ã¨æ±ºã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

å˜æ•°å€¤ãªã®ã§ãã®ã¾ã¾å®£è¨€ã™ã‚‹ã¨ã€**FastAPI** ã¯ãã‚ŒãŒã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚‹ã¨ã¿ãªã—ã¾ã™ã€‚

ã—ã‹ã—ã€`Body`ã‚’ä½¿ç”¨ã—ã¦ã€**FastAPI** ã«åˆ¥ã®ãƒœãƒ‡ã‚£ã‚­ãƒ¼ã¨ã—ã¦æ‰±ã†ã‚ˆã†ã«æŒ‡ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:


{* ../../docs_src/body_multiple_params/tutorial003.py hl[23] *}

ã“ã®å ´åˆã€**FastAPI** ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒœãƒ‡ã‚£ã‚’æœŸå¾…ã—ã¾ã™:


```JSON
{
    "item": {
        "name": "Foo",
        "description": "The pretender",
        "price": 42.0,
        "tax": 3.2
    },
    "user": {
        "username": "dave",
        "full_name": "Dave Grohl"
    },
    "importance": 5
}
```

ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€ãƒ‡ãƒ¼ã‚¿å‹ã®å¤‰æ›ã€æ¤œè¨¼ã€æ–‡æ›¸åŒ–ãªã©ã‚’è¡Œã„ã¾ã™ã€‚

## è¤‡æ•°ã®ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã‚¯ã‚¨ãƒª

ã‚‚ã¡ã‚ã‚“ã€ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åŠ ãˆã¦ã€å¿…è¦ã«å¿œã˜ã¦è¿½åŠ ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€å˜æ•°å€¤ã¯ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹ã®ã§ã€æ˜ç¤ºçš„ã« `Query` ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

```Python
q: str = None
```

ä»¥ä¸‹ã«ãŠã„ã¦:

{* ../../docs_src/body_multiple_params/tutorial004.py hl[27] *}

/// info | æƒ…å ±

`Body`ã‚‚ã¾ãŸã€å¾Œè¿°ã™ã‚‹ `Query` ã‚„ `Path` ãªã©ã¨åŒæ§˜ã«ã€ã™ã¹ã¦ã®æ¤œè¨¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

///

## å˜ä¸€ã®ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åŸ‹ã‚è¾¼ã¿

Pydanticãƒ¢ãƒ‡ãƒ«`Item`ã®ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿`item`ã‚’1ã¤ã ã‘æŒã£ã¦ã„ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€**FastAPI**ã¯ãã®ãƒœãƒ‡ã‚£ã‚’ç›´æ¥æœŸå¾…ã—ã¾ã™ã€‚

ã—ã‹ã—ã€è¿½åŠ ã®ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®£è¨€ã—ãŸã¨ãã®ã‚ˆã†ã«ã€ã‚­ãƒ¼ `item` ã‚’æŒã¤ JSON ã¨ãã®ä¸­ã®ãƒ¢ãƒ‡ãƒ«ã®å†…å®¹ã‚’æœŸå¾…ã—ãŸã„å ´åˆã¯ã€ç‰¹åˆ¥ãª `Body` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `embed` ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™:

```Python
item: Item = Body(..., embed=True)
```

ä»¥ä¸‹ã«ãŠã„ã¦:

{* ../../docs_src/body_multiple_params/tutorial005.py hl[17] *}

ã“ã®å ´åˆã€**FastAPI** ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒœãƒ‡ã‚£ã‚’æœŸå¾…ã—ã¾ã™:

```JSON hl_lines="2"
{
    "item": {
        "name": "Foo",
        "description": "The pretender",
        "price": 42.0,
        "tax": 3.2
    }
}
```

ä»¥ä¸‹ã®ä»£ã‚ã‚Šã«:

```JSON
{
    "name": "Foo",
    "description": "The pretender",
    "price": 42.0,
    "tax": 3.2
}
```

## ã¾ã¨ã‚

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå˜ä¸€ã®ãƒœãƒ‡ã‚£ã—ã‹æŒã¦ãªã„å ´åˆã§ã‚‚ã€*path operationé–¢æ•°*ã«è¤‡æ•°ã®ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã—ã‹ã—ã€**FastAPI** ã¯ãã‚Œã‚’å‡¦ç†ã—ã€é–¢æ•°å†…ã®æ­£ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’ä¸ãˆã€*path operation*å†…ã®æ­£ã—ã„ã‚¹ã‚­ãƒ¼ãƒã‚’æ¤œè¨¼ã—ã€æ–‡æ›¸åŒ–ã—ã¾ã™ã€‚

ã¾ãŸã€ãƒœãƒ‡ã‚£ã®ä¸€éƒ¨ã¨ã—ã¦å—ã‘å–ã‚‹å˜æ•°å€¤ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã¾ãŸã€å˜ä¸€ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã—ã‹å®£è¨€ã•ã‚Œã¦ã„ãªã„å ´åˆã§ã‚‚ã€ãƒœãƒ‡ã‚£ã‚’ã‚­ãƒ¼ã«åŸ‹ã‚è¾¼ã‚€ã‚ˆã†ã« **FastAPI** ã«æŒ‡ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚


================================================
File: /docs/ja/docs/tutorial/body-nested-models.md
================================================
# ãƒœãƒ‡ã‚£ - ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«

**FastAPI** ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€æ·±ããƒã‚¹ãƒˆã•ã‚ŒãŸä»»æ„ã®ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ã€æ¤œè¨¼ã€æ–‡æ›¸åŒ–ã€ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆPydanticã®ãŠã‹ã’ã§ã™ï¼‰ã€‚

## ãƒªã‚¹ãƒˆã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

å±æ€§ã‚’ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã¨ã—ã¦å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€Pythonã®`list`ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial001.py hl[12] *}

ã“ã‚Œã«ã‚ˆã‚Šã€å„é …ç›®ã®å‹ã¯å®£è¨€ã•ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€`tags`ã¯ã‚ã‚‹é …ç›®ã®ãƒªã‚¹ãƒˆã«ãªã‚Šã¾ã™ã€‚

## ã‚¿ã‚¤ãƒ—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã¤ãƒªã‚¹ãƒˆã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

ã—ã‹ã—ã€Pythonã«ã¯å‹ã‚„ã€Œã‚¿ã‚¤ãƒ—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ã‚’ä½¿ã£ã¦ãƒªã‚¹ãƒˆã‚’å®£è¨€ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™:

### typingã®`List`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

ã¾ãšã€Pythonã®æ¨™æº–ã®`typing`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰`List`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™:

{* ../../docs_src/body_nested_models/tutorial002.py hl[1] *}

### ã‚¿ã‚¤ãƒ—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã¤`List`ã®å®£è¨€

`list`ã‚„`dict`ã€`tuple`ã®ã‚ˆã†ãªã‚¿ã‚¤ãƒ—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆå†…éƒ¨ã®å‹ï¼‰ã‚’æŒã¤å‹ã‚’å®£è¨€ã™ã‚‹ã«ã¯:

* `typing`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ãã‚Œã‚‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
* è§’æ‹¬å¼§ï¼ˆ`[`ã¨`]`ï¼‰ã‚’ä½¿ã£ã¦ã€Œã‚¿ã‚¤ãƒ—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ã¨ã—ã¦å†…éƒ¨ã®å‹ã‚’æ¸¡ã—ã¾ã™:

```Python
from typing import List

my_list: List[str]
```

å‹å®£è¨€ã®æ¨™æº–çš„ãªPythonã®æ§‹æ–‡ã¯ã“ã‚Œã ã‘ã§ã™ã€‚

å†…éƒ¨ã®å‹ã‚’æŒã¤ãƒ¢ãƒ‡ãƒ«ã®å±æ€§ã«ã‚‚åŒã˜æ¨™æº–ã®æ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

ãã®ãŸã‚ã€ä»¥ä¸‹ã®ä¾‹ã§ã¯`tags`ã‚’å…·ä½“çš„ãªã€Œæ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã€ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial002.py hl[14] *}

## ã‚»ãƒƒãƒˆå‹

ã—ã‹ã—ã€ã‚ˆãè€ƒãˆã¦ã¿ã‚‹ã¨ã€ã‚¿ã‚°ã¯ç¹°ã‚Šè¿”ã™ã¹ãã§ã¯ãªãã€ãŠãã‚‰ããƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ–‡å­—åˆ—ã«ãªã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ°—ä»˜ã„ãŸã¨ã—ã¾ã™ã€‚

ãã—ã¦ã€Pythonã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªé …ç›®ã®ã‚»ãƒƒãƒˆã®ãŸã‚ã®ç‰¹åˆ¥ãªãƒ‡ãƒ¼ã‚¿å‹`set`ãŒã‚ã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`Set`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦`str`ã®`set`ã¨ã—ã¦`tags`ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial003.py hl[1,14] *}

ã“ã‚Œã‚’ä½¿ãˆã°ã€ãƒ‡ãƒ¼ã‚¿ãŒé‡è¤‡ã—ã¦ã„ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ãŸå ´åˆã§ã‚‚ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªé …ç›®ã®ã‚»ãƒƒãƒˆã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚

ãã—ã¦ã€ãã®ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºåŠ›ã™ã‚‹ã¨ã€ãŸã¨ãˆã‚½ãƒ¼ã‚¹ã«é‡è¤‡ãŒã‚ã£ãŸã¨ã—ã¦ã‚‚ã€å›ºæœ‰ã®é …ç›®ã®ã‚»ãƒƒãƒˆã¨ã—ã¦å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

ã¾ãŸã€ãã‚Œã«å¿œã˜ã¦æ³¨é‡ˆã‚’ã¤ã‘ãŸã‚Šã€æ–‡æ›¸åŒ–ã—ãŸã‚Šã—ã¾ã™ã€‚

## ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«

Pydanticãƒ¢ãƒ‡ãƒ«ã®å„å±æ€§ã«ã¯å‹ãŒã‚ã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€ãã®å‹ã¯ãã‚Œè‡ªä½“ãŒåˆ¥ã®Pydanticãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã€ç‰¹å®šã®å±æ€§åã€å‹ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã€æ·±ããƒã‚¹ãƒˆã—ãŸJSON`object`ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã™ã¹ã¦ã¯ã€ä»»æ„ã®ãƒã‚¹ãƒˆã«ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚µãƒ–ãƒ¢ãƒ‡ãƒ«ã®å®šç¾©

ä¾‹ãˆã°ã€`Image`ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial004.py hl[9,10,11] *}

### ã‚µãƒ–ãƒ¢ãƒ‡ãƒ«ã‚’å‹ã¨ã—ã¦ä½¿ç”¨

ãã—ã¦ã€ãã‚Œã‚’å±æ€§ã®å‹ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial004.py hl[20] *}

ã“ã‚Œã¯ **FastAPI** ãŒä»¥ä¸‹ã®ã‚ˆã†ãªãƒœãƒ‡ã‚£ã‚’æœŸå¾…ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™:

```JSON
{
    "name": "Foo",
    "description": "The pretender",
    "price": 42.0,
    "tax": 3.2,
    "tags": ["rock", "metal", "bar"],
    "image": {
        "url": "http://example.com/baz.jpg",
        "name": "The Foo live"
    }
}
```

ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€**FastAPI** ã‚’ä½¿ç”¨ã—ã¦ã€ãã®å®£è¨€ã‚’è¡Œã†ã ã‘ã§ä»¥ä¸‹ã®ã‚ˆã†ãªæ©æµã‚’å—ã‘ã‚‰ã‚Œã¾ã™:

* ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã§ã‚‚å¯¾å¿œå¯èƒ½ãªã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆï¼ˆè£œå®Œãªã©ï¼‰
* ãƒ‡ãƒ¼ã‚¿å¤‰æ›
* ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
* è‡ªå‹•æ–‡æ›¸åŒ–

## ç‰¹æ®Šãªå‹ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

`str`ã‚„`int`ã€`float`ã®ã‚ˆã†ãªé€šå¸¸ã®å˜æ•°å‹ã®ä»–ã«ã‚‚ã€`str`ã‚’ç¶™æ‰¿ã—ãŸã‚ˆã‚Šè¤‡é›‘ãªå˜æ•°å‹ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã™ã¹ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¿ã‚‹ã«ã¯ã€<a href="https://docs.pydantic.dev/latest/concepts/types/" class="external-link" target="_blank">Pydanticã®ã‚¨ã‚­ã‚¾ãƒãƒƒã‚¯ ãªå‹</a>ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚æ¬¡ã®ç« ã§ã„ãã¤ã‹ã®ä¾‹ã‚’ã¿ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€`Image`ãƒ¢ãƒ‡ãƒ«ã®ã‚ˆã†ã«`url`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹å ´åˆã€`str`ã®ä»£ã‚ã‚Šã«Pydanticã®`HttpUrl`ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial005.py hl[4,10] *}

æ–‡å­—åˆ—ã¯æœ‰åŠ¹ãªURLã§ã‚ã‚‹ã“ã¨ãŒç¢ºèªã•ã‚Œã€ãã®ã‚ˆã†ã«JSONã‚¹ã‚­ãƒ¼ãƒãƒ»OpenAPIã§æ–‡æ›¸åŒ–ã•ã‚Œã¾ã™ã€‚

## ã‚µãƒ–ãƒ¢ãƒ‡ãƒ«ã®ãƒªã‚¹ãƒˆã‚’æŒã¤å±æ€§

Pydanticãƒ¢ãƒ‡ãƒ«ã‚’`list`ã‚„`set`ãªã©ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial006.py hl[20] *}

ã“ã‚Œã¯ã€æ¬¡ã®ã‚ˆã†ãªJSONãƒœãƒ‡ã‚£ã‚’æœŸå¾…ã—ã¾ã™ï¼ˆå¤‰æ›ã€æ¤œè¨¼ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãªã©ï¼‰:

```JSON hl_lines="11"
{
    "name": "Foo",
    "description": "The pretender",
    "price": 42.0,
    "tax": 3.2,
    "tags": [
        "rock",
        "metal",
        "bar"
    ],
    "images": [
        {
            "url": "http://example.com/baz.jpg",
            "name": "The Foo live"
        },
        {
            "url": "http://example.com/dave.jpg",
            "name": "The Baz"
        }
    ]
}
```

/// info | æƒ…å ±

`images`ã‚­ãƒ¼ãŒç”»åƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚¹ãƒˆã‚’æŒã¤ã‚ˆã†ã«ãªã£ãŸã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚

///

## æ·±ããƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«

æ·±ããƒã‚¹ãƒˆã•ã‚ŒãŸä»»æ„ã®ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial007.py hl[9,14,20,23,27] *}

/// info | æƒ…å ±

`Offer`ã¯`Item`ã®ãƒªã‚¹ãƒˆã§ã‚ã‚Šã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®`Image`ã®ãƒªã‚¹ãƒˆã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚

///

## ç´”ç²‹ãªãƒªã‚¹ãƒˆã®ãƒœãƒ‡ã‚£

æœŸå¾…ã™ã‚‹JSONãƒœãƒ‡ã‚£ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®å€¤ãŒJSON`array`ï¼ˆPythonã®`list`ï¼‰ã§ã‚ã‚Œã°ã€Pydanticãƒ¢ãƒ‡ãƒ«ã¨åŒã˜ã‚ˆã†ã«ã€é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å‹ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

```Python
images: List[Image]
```

ä»¥ä¸‹ã®ã‚ˆã†ã«:

{* ../../docs_src/body_nested_models/tutorial008.py hl[15] *}

## ã‚ã‚‰ã‚†ã‚‹å ´æ‰€ã§ã®ã‚¨ãƒ‡ã‚£ã‚¿ã‚µãƒãƒ¼ãƒˆ

ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã‚‚ã©ã“ã§ã‚‚å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒªã‚¹ãƒˆã®ä¸­ã®é …ç›®ã§ã‚‚:

<img src="https://fastapi.tiangolo.com/img/tutorial/body-nested-models/image01.png">

Pydanticãƒ¢ãƒ‡ãƒ«ã§ã¯ãªãã€`dict`ã‚’ç›´æ¥ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã“ã®ã‚ˆã†ãªã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆã¯å¾—ã‚‰ã‚Œã¾ã›ã‚“ã€‚

ã—ã‹ã—ã€ãã‚Œã‚‰ã«ã¤ã„ã¦å¿ƒé…ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å…¥åŠ›ã•ã‚ŒãŸè¾æ›¸ã¯è‡ªå‹•çš„ã«å¤‰æ›ã•ã‚Œã€å‡ºåŠ›ã‚‚è‡ªå‹•çš„ã«JSONã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚

## ä»»æ„ã®`dict`ã®ãƒœãƒ‡ã‚£

ã¾ãŸã€ã‚ã‚‹å‹ã®ã‚­ãƒ¼ã¨åˆ¥ã®å‹ã®å€¤ã‚’æŒã¤`dict`ã¨ã—ã¦ãƒœãƒ‡ã‚£ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

æœ‰åŠ¹ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ»å±æ€§åã‚’äº‹å‰ã«çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ï¼ˆPydanticãƒ¢ãƒ‡ãƒ«ã®å ´åˆã®ã‚ˆã†ã«ï¼‰ã€‚

ã“ã‚Œã¯ã€ã¾ã çŸ¥ã‚‰ãªã„ã‚­ãƒ¼ã‚’å—ã‘å–ã‚ŠãŸã„ã¨ãã«ä¾¿åˆ©ã ã¨æ€ã„ã¾ã™ã€‚

---

ä»–ã«ã‚‚ã€`int`ã®ã‚ˆã†ã«ä»–ã®å‹ã®ã‚­ãƒ¼ã‚’æŒã¡ãŸã„å ´åˆãªã©ã«ä¾¿åˆ©ã§ã™ã€‚

ãã‚Œã‚’ã“ã“ã§è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ã“ã®å ´åˆã€`int`ã®ã‚­ãƒ¼ã¨`float`ã®å€¤ã‚’æŒã¤ã‚‚ã®ã§ã‚ã‚Œã°ã€ã©ã‚“ãª`dict`ã§ã‚‚å—ã‘å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_nested_models/tutorial009.py hl[15] *}

/// tip | è±†çŸ¥è­˜

JSONã¯ã‚­ãƒ¼ã¨ã—ã¦`str`ã—ã‹ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

ã—ã‹ã—Pydanticã«ã¯è‡ªå‹•ãƒ‡ãƒ¼ã‚¿å¤‰æ›æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã¯ã€APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚­ãƒ¼ã¨ã—ã¦æ–‡å­—åˆ—ã—ã‹é€ä¿¡ã§ããªãã¦ã‚‚ã€ãã‚Œã‚‰ã®æ–‡å­—åˆ—ã«ç´”ç²‹ãªæ•´æ•°ãŒå«ã¾ã‚Œã¦ã„ã‚‹é™ã‚Šã€PydanticãŒå¤‰æ›ã—ã¦æ¤œè¨¼ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

ãã—ã¦ã€`weights`ã¨ã—ã¦å—ã‘å–ã‚‹`dict`ã¯ã€å®Ÿéš›ã«ã¯`int`ã®ã‚­ãƒ¼ã¨`float`ã®å€¤ã‚’æŒã¤ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

///

## ã¾ã¨ã‚

**FastAPI** ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Pydanticãƒ¢ãƒ‡ãƒ«ãŒæä¾›ã™ã‚‹æœ€å¤§é™ã®æŸ”è»Ÿæ€§ã‚’æŒã¡ãªãŒã‚‰ã€ã‚³ãƒ¼ãƒ‰ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«çŸ­ãã€ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆã«ä¿ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™:

* ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µãƒãƒ¼ãƒˆï¼ˆã©ã“ã§ã‚‚è£œå®Œï¼ï¼‰
* ãƒ‡ãƒ¼ã‚¿å¤‰æ›ï¼ˆåˆ¥åï¼šæ§‹æ–‡è§£æãƒ»ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼‰
* ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
* ã‚¹ã‚­ãƒ¼ãƒæ–‡æ›¸
* è‡ªå‹•æ–‡æ›¸åŒ–


================================================
File: /docs/ja/docs/tutorial/body-updates.md
================================================
# ãƒœãƒ‡ã‚£ - æ›´æ–°

## `PUT`ã«ã‚ˆã‚‹ç½®æ›ã§ã®æ›´æ–°

é …ç›®ã‚’æ›´æ–°ã™ã‚‹ã«ã¯<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PUT" class="external-link" target="_blank">HTTPã®`PUT`</a>æ“ä½œã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`jsonable_encoder`ã‚’ç”¨ã„ã¦ã€å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã§ä¿å­˜ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆä¾‹ï¼šNoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰ã€‚ä¾‹ãˆã°ã€`datetime`ã‚’`str`ã«å¤‰æ›ã—ã¾ã™ã€‚

{* ../../docs_src/body_updates/tutorial001.py hl[30,31,32,33,34,35] *}

æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç½®ãæ›ãˆã‚‹ã¹ããƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ãŸã‚ã«`PUT`ã¯ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

### ç½®æ›ã«ã¤ã„ã¦ã®æ³¨æ„

ã¤ã¾ã‚Šã€`PUT`ã‚’ä½¿ç”¨ã—ã¦ä»¥ä¸‹ã®ãƒœãƒ‡ã‚£ã§é …ç›®`bar`ã‚’æ›´æ–°ã—ãŸã„å ´åˆã¯:

```Python
{
    "name": "Barz",
    "price": 3,
    "description": None,
}
```

ã™ã§ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹å±æ€§`"tax": 20.2`ã‚’å«ã¾ãªã„ãŸã‚ã€å…¥åŠ›ãƒ¢ãƒ‡ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯`"tax": 10.5`ã§ã™ã€‚

ãã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã¯ãã®ã€Œæ–°ã—ã„ã€`10.5`ã®`tax`ã¨å…±ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

## `PATCH`ã«ã‚ˆã‚‹éƒ¨åˆ†çš„ãªæ›´æ–°

ã¾ãŸã€<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PATCH" class="external-link" target="_blank">HTTPã®`PATCH`</a>æ“ä½œã§ãƒ‡ãƒ¼ã‚¿ã‚’*éƒ¨åˆ†çš„ã«*æ›´æ–°ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã¤ã¾ã‚Šã€æ›´æ–°ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã ã‘ã‚’é€ä¿¡ã—ã¦ã€æ®‹ã‚Šã¯ãã®ã¾ã¾ã«ã—ã¦ãŠãã“ã¨ãŒã§ãã¾ã™ã€‚

/// note | å‚™è€ƒ

`PATCH`ã¯`PUT`ã‚ˆã‚Šã‚‚ã‚ã¾ã‚Šä½¿ã‚ã‚Œã¦ãŠã‚‰ãšã€çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ã¾ãŸã€å¤šãã®ãƒãƒ¼ãƒ ã¯éƒ¨åˆ†çš„ãªæ›´æ–°ã§ã‚ã£ã¦ã‚‚`PUT`ã ã‘ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

**FastAPI** ã¯ã©ã‚“ãªåˆ¶é™ã‚‚èª²ã‘ã¦ã„ãªã„ã®ã§ã€ãã‚Œã‚‰ã‚’ä½¿ã†ã®ã¯ **è‡ªç”±** ã§ã™ã€‚

ã—ã‹ã—ã€ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ãã‚Œã‚‰ãŒã©ã®ã‚ˆã†ã«ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ã‚’æ„å›³ã—ã¦ã„ã‚‹ã‹ã‚’å¤šã‹ã‚Œå°‘ãªã‹ã‚Œã€ç¤ºã—ã¦ã„ã¾ã™ã€‚

///

### Pydanticã®`exclude_unset`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä½¿ç”¨

éƒ¨åˆ†çš„ãªæ›´æ–°ã‚’å—ã‘å–ã‚ŠãŸã„å ´åˆã¯ã€Pydanticãƒ¢ãƒ‡ãƒ«ã®`.dict()`ã®`exclude_unset`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã¨éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚

`item.dict(exclude_unset=True)`ã®ã‚ˆã†ã«ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€`item`ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆæ™‚ã«è¨­å®šã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’æŒã¤`dict`ãŒç”Ÿæˆã•ã‚Œã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯é™¤å¤–ã•ã‚Œã¾ã™ã€‚

ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’çœç•¥ã—ã¦ã€è¨­å®šã•ã‚ŒãŸï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã§é€ã‚‰ã‚ŒãŸï¼‰ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å«ã‚€`dict`ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/body_updates/tutorial002.py hl[34] *}

### Pydanticã®`update`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ã“ã“ã§ã€`.copy()`ã‚’ç”¨ã„ã¦æ—¢å­˜ã®ãƒ¢ãƒ‡ãƒ«ã®ã‚³ãƒ”ãƒ¼ã‚’ä½œæˆã—ã€`update`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«æ›´æ–°ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€`dict`ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

`stored_item_model.copy(update=update_data)`ã®ã‚ˆã†ã«:

{* ../../docs_src/body_updates/tutorial002.py hl[35] *}

### éƒ¨åˆ†çš„æ›´æ–°ã®ã¾ã¨ã‚

ã¾ã¨ã‚ã‚‹ã¨ã€éƒ¨åˆ†çš„ãªæ›´æ–°ã‚’é©ç”¨ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™:

* (ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§)`PUT`ã®ä»£ã‚ã‚Šã«`PATCH`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
* ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚
* ãã®ãƒ‡ãƒ¼ã‚¿ã‚’Pydanticãƒ¢ãƒ‡ãƒ«ã«ã„ã‚Œã¾ã™ã€‚
* å…¥åŠ›ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å«ã¾ãªã„`dict`ã‚’ç”Ÿæˆã—ã¾ã™ï¼ˆ`exclude_unset`ã‚’ä½¿ç”¨ã—ã¾ã™ï¼‰ã€‚
    * ã“ã®æ–¹æ³•ã§ã¯ã€ãƒ¢ãƒ‡ãƒ«å†…ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã™ã§ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹å€¤ã‚’ä¸Šæ›¸ãã™ã‚‹ã®ã§ã¯ãªãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿéš›ã«è¨­å®šã—ãŸå€¤ã®ã¿ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
* ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã®ã‚³ãƒ”ãƒ¼ã‚’ä½œæˆã—ã€å—ã‘å–ã£ãŸéƒ¨åˆ†çš„ãªæ›´æ–°ã§å±æ€§ã‚’æ›´æ–°ã—ã¾ã™ï¼ˆ`update`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™ï¼‰ã€‚
* ã‚³ãƒ”ãƒ¼ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’DBã«ä¿å­˜ã§ãã‚‹ã‚‚ã®ã«å¤‰æ›ã—ã¾ã™ï¼ˆä¾‹ãˆã°ã€`jsonable_encoder`ã‚’ä½¿ç”¨ã—ã¾ã™ï¼‰ã€‚
    * ã“ã‚Œã¯ãƒ¢ãƒ‡ãƒ«ã®`.dict()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å†åº¦åˆ©ç”¨ã™ã‚‹ã“ã¨ã«åŒ¹æ•µã—ã¾ã™ãŒã€å€¤ã‚’JSONã«å¤‰æ›ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿å‹ã€ä¾‹ãˆã°`datetime`ã‚’`str`ã«å¤‰æ›ã—ã¾ã™ã€‚
* ãƒ‡ãƒ¼ã‚¿ã‚’DBã«ä¿å­˜ã—ã¾ã™ã€‚
* æ›´æ–°ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã‚’è¿”ã—ã¾ã™ã€‚

{* ../../docs_src/body_updates/tutorial002.py hl[30,31,32,33,34,35,36,37] *}

/// tip | è±†çŸ¥è­˜

å®Ÿéš›ã«ã¯ã€HTTPã®`PUT`æ“ä½œã§ã‚‚åŒã˜ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã—ã‹ã—ã€ã“ã‚Œã‚‰ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ãŸã‚ã«ä½œæˆã•ã‚ŒãŸã®ã§ã€ã“ã“ã§ã®ä¾‹ã§ã¯`PATCH`ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

///

/// note | å‚™è€ƒ

å…¥åŠ›ãƒ¢ãƒ‡ãƒ«ãŒã¾ã æ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚

ãã®ãŸã‚ã€ã™ã¹ã¦ã®å±æ€§ã‚’çœç•¥ã§ãã‚‹éƒ¨åˆ†çš„ãªå¤‰æ›´ã‚’å—ã‘å–ã‚ŠãŸã„å ´åˆã¯ã€ã™ã¹ã¦ã®å±æ€§ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ãƒãƒ¼ã‚¯ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¾ãŸã¯`None`ã‚’ä½¿ç”¨ã—ã¦ï¼‰ã€‚

**æ›´æ–°** ã®ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³å€¤ãŒã™ã¹ã¦è¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã¨ã€**ä½œæˆ** ã®ãŸã‚ã®å¿…é ˆå€¤ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’åŒºåˆ¥ã™ã‚‹ã«ã¯ã€[è¿½åŠ ãƒ¢ãƒ‡ãƒ«](extra-models.md){.internal-link target=_blank}ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹è€ƒãˆæ–¹ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

///


================================================
File: /docs/ja/docs/tutorial/body.md
================================================
# ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (ãƒ–ãƒ©ã‚¦ã‚¶ãªã©) ã‹ã‚‰APIã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã€ãƒ‡ãƒ¼ã‚¿ã‚’ **ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ (request body)** ã¨ã—ã¦é€ã‚Šã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** ãƒœãƒ‡ã‚£ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã‚ˆã£ã¦APIã¸é€ã‚‰ã‚Œã¾ã™ã€‚**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** ãƒœãƒ‡ã‚£ã¯APIãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ã‚‹ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚

APIã¯ã»ã¨ã‚“ã©ã®å ´åˆ **ãƒ¬ã‚¹ãƒãƒ³ã‚¹** ãƒœãƒ‡ã‚£ã‚’é€ã‚‰ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯å¿…ãšã—ã‚‚ **ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** ãƒœãƒ‡ã‚£ã‚’é€ã‚‰ãªã‘ã‚Œã°ã„ã‘ãªã„ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** ãƒœãƒ‡ã‚£ã‚’å®£è¨€ã™ã‚‹ãŸã‚ã« <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãã—ã¦ã€ãã®å…¨ã¦ã®ãƒ‘ãƒ¯ãƒ¼ã¨ãƒ¡ãƒªãƒƒãƒˆã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

/// info | æƒ…å ±

ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹ã«ã¯ã€`POST` (ã‚‚ã£ã¨ã‚‚ã‚ˆãä½¿ã‚ã‚Œã‚‹)ã€`PUT`ã€`DELETE` ã¾ãŸã¯ `PATCH` ã‚’ä½¿ã†ã¹ãã§ã™ã€‚

GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒœãƒ‡ã‚£ã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã¯ã€ä»•æ§˜ã§ã¯æœªå®šç¾©ã®å‹•ä½œã§ã™ãŒã€FastAPI ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€éå¸¸ã«è¤‡é›‘ãªï¼ˆæ¥µç«¯ãªï¼‰ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

éæ¨å¥¨ãªã®ã§ã€Swagger UIã‚’ä½¿ã£ãŸå¯¾è©±å‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯GETã®ãƒœãƒ‡ã‚£æƒ…å ±ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚ã•ã‚‰ã«ã€ä¸­ç¶™ã™ã‚‹ãƒ—ãƒ­ã‚­ã‚·ãŒå¯¾å¿œã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

///

## Pydanticã® `BaseModel` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

ã¾ã™åˆã‚ã«ã€ `pydantic` ã‹ã‚‰ `BaseModel` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:

{* ../../docs_src/body/tutorial001.py hl[2] *}

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ

ãã—ã¦ã€`BaseModel` ã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã‚’å®£è¨€ã—ã¾ã™ã€‚

ã™ã¹ã¦ã®å±æ€§ã«pythonæ¨™æº–ã®å‹ã‚’ä½¿ç”¨ã—ã¾ã™:

{* ../../docs_src/body/tutorial001.py hl[5:9] *}

ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å®£è¨€ã¨åŒæ§˜ã«ã€ãƒ¢ãƒ‡ãƒ«å±æ€§ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ã‚‚ã¤ã¨ãã€å¿…é ˆãªå±æ€§ã§ã¯ãªããªã‚Šã¾ã™ã€‚ãã‚Œä»¥å¤–ã¯å¿…é ˆã«ãªã‚Šã¾ã™ã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªå±æ€§ã«ã—ãŸã„å ´åˆã¯ `None` ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

ä¾‹ãˆã°ã€ä¸Šè¨˜ã®ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®æ§˜ãªJSONã€Œ`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ`ã€(ã‚‚ã—ãã¯Pythonã® `dict` ) ã‚’å®£è¨€ã—ã¦ã„ã¾ã™:

```JSON
{
    "name": "Foo",
    "description": "An optional description",
    "price": 45.2,
    "tax": 3.5
}
```

...`description` ã¨ `tax` ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ« (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ `None`) ãªã®ã§ã€ä»¥ä¸‹ã®JSONã€Œ`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ`ã€ã‚‚æœ‰åŠ¹ã§ã™:

```JSON
{
    "name": "Foo",
    "price": 45.2
}
```

## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦å®£è¨€

*ãƒ‘ã‚¹ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³* ã«åŠ ãˆã‚‹ãŸã‚ã«ã€ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨åŒã˜æ§˜ã«å®£è¨€ã—ã¾ã™:

{* ../../docs_src/body/tutorial001.py hl[16] *}

...ãã—ã¦ã€ä½œæˆã—ãŸãƒ¢ãƒ‡ãƒ« `Item` ã§å‹ã‚’å®£è¨€ã—ã¾ã™ã€‚

## çµæœ

ãã®Pythonã®å‹å®£è¨€ã ã‘ã§ **FastAPI** ã¯ä»¥ä¸‹ã®ã“ã¨ã‚’è¡Œã„ã¾ã™:

* ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’JSONã¨ã—ã¦èª­ã¿å–ã‚Šã¾ã™ã€‚
* é©å½“ãªå‹ã«å¤‰æ›ã—ã¾ã™ï¼ˆå¿…è¦ãªå ´åˆï¼‰ã€‚
* ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚
    * ãƒ‡ãƒ¼ã‚¿ãŒç„¡åŠ¹ãªå ´åˆã¯ã€æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ãŒè¿”ã•ã‚Œã€ã©ã“ãŒä¸æ­£ãªãƒ‡ãƒ¼ã‚¿ã§ã‚ã£ãŸã‹ã‚’ç¤ºã—ã¾ã™ã€‚
* å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `item` ã«å¤‰æ›ã—ã¾ã™ã€‚
    * é–¢æ•°å†…ã§ `Item` å‹ã§ã‚ã‚‹ã¨å®£è¨€ã—ãŸã®ã§ã€ã™ã¹ã¦ã®å±æ€§ã¨ãã®å‹ã«å¯¾ã™ã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ã‚µãƒãƒ¼ãƒˆï¼ˆè£œå®Œãªã©ï¼‰ã‚’ã™ã¹ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚
* ãƒ¢ãƒ‡ãƒ«ã®<a href="http://json-schema.org" class="external-link" target="_blank">JSONã‚¹ã‚­ãƒ¼ãƒ</a>å®šç¾©ã‚’ç”Ÿæˆã—ã€å¥½ããªå ´æ‰€ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
* ã“ã‚Œã‚‰ã®ã‚¹ã‚­ãƒ¼ãƒã¯ã€ç”Ÿæˆã•ã‚ŒãŸOpenAPIã‚¹ã‚­ãƒ¼ãƒã®ä¸€éƒ¨ã¨ãªã‚Šã€è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®<abbr title = "User Interfaces">UI</abbr>ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

## è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ

ãƒ¢ãƒ‡ãƒ«ã®JSONã‚¹ã‚­ãƒ¼ãƒã¯OpenAPIã§ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚­ãƒ¼ãƒã®ä¸€éƒ¨ã«ãªã‚Šã€å¯¾è©±çš„ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¡¨ç¤ºã•ã‚Œã¾ã™:

<img src="/img/tutorial/body/image01.png">

ãã—ã¦ã€ãã‚Œã‚‰ãŒä½¿ã‚ã‚Œã‚‹ *ãƒ‘ã‚¹ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³* ã®ãã‚Œãã‚Œã®APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚‚è¡¨ç¤ºã•ã‚Œã¾ã™:

<img src="/img/tutorial/body/image02.png">

## ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚µãƒãƒ¼ãƒˆ

ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«ã‚ˆã‚‹å‹ãƒ’ãƒ³ãƒˆã¨è£œå®ŒãŒé–¢æ•°å†…ã§åˆ©ç”¨ã§ãã¾ã™ (Pydanticãƒ¢ãƒ‡ãƒ«ã§ã¯ãªã `dict` ã‚’å—ã‘å–ã‚‹ã¨ã€åŒã˜ã‚µãƒãƒ¼ãƒˆã¯å—ã‘ã‚‰ã‚Œã¾ã›ã‚“):

<img src="/img/tutorial/body/image03.png">

å‹ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ã‚‚å¯èƒ½ã§ã™:

<img src="/img/tutorial/body/image04.png">

ã“ã‚Œã¯å¶ç„¶ã§ã¯ãªãã€ã“ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã«åŸºã¥ã„ã¦ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

å…¨ã¦ã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§æ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€å®Ÿè£…å‰ã®è¨­è¨ˆæ™‚ã«å¾¹åº•çš„ã«ãƒ†ã‚¹ãƒˆã—ã¾ã—ãŸã€‚

ã“ã‚Œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«Pydanticè‡ªä½“ã«ã‚‚ã„ãã¤ã‹ã®å¤‰æ›´ãŒã‚ã‚Šã¾ã—ãŸã€‚

ä¸Šè¨˜ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¯<a href="https://code.visualstudio.com" class="external-link" target="_blank">Visual Studio Code</a>ã‚’æ’®ã£ãŸã‚‚ã®ã§ã™ã€‚

ã—ã‹ã—ã€<a href="https://www.jetbrains.com/pycharm/" class="external-link" target="_blank">PyCharm</a>ã‚„ã»ã¨ã‚“ã©ã®Pythonã‚¨ãƒ‡ã‚£ã‚¿ã§ã‚‚åŒæ§˜ãªã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ã‚‰ã‚Œã¾ã™:

<img src="/img/tutorial/body/image05.png">

/// tip | è±†çŸ¥è­˜

<a href="https://www.jetbrains.com/pycharm/" class="external-link" target="_blank">PyCharm</a>ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€<a href="https://github.com/koxudaxi/pydantic-pycharm-plugin/" class="external-link" target="_blank">Pydantic PyCharm Plugin</a>ãŒä½¿ç”¨å¯èƒ½ã§ã™ã€‚

ä»¥ä¸‹ã®ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚µãƒãƒ¼ãƒˆãŒå¼·åŒ–ã•ã‚Œã¾ã™:

* è‡ªå‹•è£œå®Œ
* å‹ãƒã‚§ãƒƒã‚¯
* ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
* æ¤œç´¢
* ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚·ãƒ§ãƒ³

///

## ãƒ¢ãƒ‡ãƒ«ã®ä½¿ç”¨

é–¢æ•°å†…éƒ¨ã§ã€ãƒ¢ãƒ‡ãƒ«ã®å…¨ã¦ã®å±æ€§ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™:

{* ../../docs_src/body/tutorial002.py hl[19] *}

## ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ + ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’åŒæ™‚ã«å®£è¨€ã§ãã¾ã™ã€‚

**FastAPI** ã¯ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚‹é–¢æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯**ãƒ‘ã‚¹ã‹ã‚‰å—ã‘å–ã‚Š**ã€Pydanticãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã£ã¦å®£è¨€ã•ã‚ŒãŸé–¢æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‹ã‚‰å—ã‘å–ã‚‹**ã¨ã„ã†ã“ã¨ã‚’èªè­˜ã—ã¾ã™ã€‚

{* ../../docs_src/body/tutorial003.py hl[15:16] *}

## ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ + ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ + ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ã¾ãŸã€**ãƒœãƒ‡ã‚£**ã¨**ãƒ‘ã‚¹**ã¨**ã‚¯ã‚¨ãƒª**ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚åŒæ™‚ã«å®£è¨€ã§ãã¾ã™ã€‚

**FastAPI** ã¯ãã‚Œãã‚Œã‚’èªè­˜ã—ã€é©åˆ‡ãªå ´æ‰€ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚

{* ../../docs_src/body/tutorial004.py hl[16] *}

é–¢æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®æ§˜ã«èªè­˜ã•ã‚Œã¾ã™:

* ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ**ãƒ‘ã‚¹**ã§å®£è¨€ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€å„ªå…ˆçš„ã«ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚
* ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ**å˜æ•°å‹** (`int`ã€`float`ã€`str`ã€`bool` ãªã©)ã®å ´åˆã¯**ã‚¯ã‚¨ãƒª**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è§£é‡ˆã•ã‚Œã¾ã™ã€‚
* ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ **Pydantic ãƒ¢ãƒ‡ãƒ«**å‹ã§å®£è¨€ã•ã‚ŒãŸå ´åˆã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**ãƒœãƒ‡ã‚£**ã¨ã—ã¦è§£é‡ˆã•ã‚Œã¾ã™ã€‚

/// note | å‚™è€ƒ

FastAPIã¯ã€`= None`ãŒã‚ã‚‹ãŠã‹ã’ã§ã€`q`ãŒã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã ã¨ã‚ã‹ã‚Šã¾ã™ã€‚

`Optional[str]` ã®`Optional` ã¯FastAPIã§ã¯ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼ˆFastAPIã¯`str`ã®éƒ¨åˆ†ã®ã¿ä½¿ç”¨ã—ã¾ã™ï¼‰ã€‚ã—ã‹ã—ã€`Optional[str]` ã¯ã‚¨ãƒ‡ã‚£ã‚¿ãŒã‚³ãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ã‚’è¦‹ã¤ã‘ã‚‹ã®ã‚’åŠ©ã‘ã¦ãã‚Œã¾ã™ã€‚

///

## Pydanticã‚’ä½¿ã‚ãªã„æ–¹æ³•

ã‚‚ã—Pydanticãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ãŸããªã„å ´åˆã¯ã€**Body**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚[Body - Multiple Parameters: Singular values in body](body-multiple-params.md#_2){.internal-link target=_blank}ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚


================================================
File: /docs/ja/docs/tutorial/cookie-params.md
================================================
# ã‚¯ãƒƒã‚­ãƒ¼ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ã‚¯ãƒƒã‚­ãƒ¼ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€`Query`ã‚„`Path`ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã™ã‚‹ã®ã¨åŒã˜æ–¹æ³•ã§å®šç¾©ã§ãã¾ã™ã€‚

## `Cookie`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

ã¾ãšã€`Cookie`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™:

{* ../../docs_src/cookie_params/tutorial001.py hl[3] *}

## `Cookie`ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®£è¨€

æ¬¡ã«ã€`Path`ã‚„`Query`ã¨åŒã˜æ§‹é€ ã‚’ä½¿ã£ã¦ã‚¯ãƒƒã‚­ãƒ¼ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®£è¨€ã—ã¾ã™ã€‚

æœ€åˆã®å€¤ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã€è¿½åŠ ã®æ¤œè¨¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„æ³¨é‡ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã™ã¹ã¦æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™:

{* ../../docs_src/cookie_params/tutorial001.py hl[9] *}

/// note | æŠ€è¡“è©³ç´°

`Cookie`ã¯`Path`ã¨`Query`ã®ã€Œå§‰å¦¹ã€ã‚¯ãƒ©ã‚¹ã§ã™ã€‚ã¾ãŸã€åŒã˜å…±é€šã®`Param`ã‚¯ãƒ©ã‚¹ã‚’ç¶™æ‰¿ã—ã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€`fastapi`ã‹ã‚‰`Query`ã‚„`Path`ã€`Cookie`ãªã©ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹å ´åˆã€ãã‚Œã‚‰ã¯å®Ÿéš›ã«ã¯ç‰¹æ®Šãªã‚¯ãƒ©ã‚¹ã‚’è¿”ã™é–¢æ•°ã§ã‚ã‚‹ã“ã¨ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚

///

/// info | æƒ…å ±

ã‚¯ãƒƒã‚­ãƒ¼ã‚’å®£è¨€ã™ã‚‹ã«ã¯ã€`Cookie`ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãªãœãªã‚‰ã€ãã†ã—ãªã„ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚¯ã‚¨ãƒªã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è§£é‡ˆã•ã‚Œã¦ã—ã¾ã†ã‹ã‚‰ã§ã™ã€‚

///

## ã¾ã¨ã‚

ã‚¯ãƒƒã‚­ãƒ¼ã¯`Cookie`ã‚’ä½¿ã£ã¦å®£è¨€ã—ã€`Query`ã‚„`Path`ã¨åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã€‚


================================================
File: /docs/ja/docs/tutorial/cors.md
================================================
# CORS (ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚½ãƒ¼ã‚¹å…±æœ‰)

<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" class="external-link" target="_blank">CORSã¾ãŸã¯ã€Œã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚½ãƒ¼ã‚¹å…±æœ‰ã€</a> ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨é€šä¿¡ã™ã‚‹JavaScriptã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã€ãã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã¯ç•°ãªã‚‹ã€Œã‚ªãƒªã‚¸ãƒ³ã€ã«ã‚ã‚‹çŠ¶æ³ã‚’æŒ‡ã—ã¾ã™ã€‚

## ã‚ªãƒªã‚¸ãƒ³

ã‚ªãƒªã‚¸ãƒ³ã¯ãƒ—ãƒ­ãƒˆã‚³ãƒ« (`http`ã€`https`) ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ (`myapp.com`ã€`localhost`ã€`localhost.tiangolo.com`) ã¨ãƒãƒ¼ãƒˆ (`80`ã€`443`ã€`8080`) ã®çµ„ã¿åˆã‚ã›ã§ã™ã€‚

ã—ãŸãŒã£ã¦ã€ä»¥ä¸‹ã¯ã™ã¹ã¦ç•°ãªã‚‹ã‚ªãƒªã‚¸ãƒ³ã§ã™:

* `http://localhost`
* `https://localhost`
* `http://localhost:8080`

ã™ã¹ã¦ `localhost` ã§ã‚ã£ã¦ã‚‚ã€ç•°ãªã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚„ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã€ç•°ãªã‚‹ã€Œã‚ªãƒªã‚¸ãƒ³ã€ã§ã™ã€‚

## ã‚¹ãƒ†ãƒƒãƒ—

ãã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (`http://localhost:8080`) ãŒã‚ã‚Šã€ãã®JavaScriptãŒ `http://localhost` ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨é€šä¿¡ã™ã‚‹ã¨ã—ã¾ã™ã€‚(ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã—ã¦ã„ãªã„ã®ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®`80`ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™)

æ¬¡ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯HTTPã® `OPTIONS` ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«é€ä¿¡ã—ã¾ã™ã€‚ãã—ã¦ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒã“ã®ç•°ãªã‚‹ã‚ªãƒªã‚¸ãƒ³ (`http://localhost:8080`) ã‹ã‚‰ã®é€šä¿¡ã‚’è¨±å¯ã™ã‚‹é©åˆ‡ãªãƒ˜ãƒƒãƒ€ãƒ¼ã‚’é€ä¿¡ã™ã‚‹ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®JavaScriptã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã•ã›ã¾ã™ã€‚

ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã€Œè¨±å¯ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³ã€ã®ãƒªã‚¹ãƒˆãŒãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ã“ã®å ´åˆã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’æ­£ã—ãæ©Ÿèƒ½ã•ã›ã‚‹ã«ã¯ã€ãã®ãƒªã‚¹ãƒˆã« `http://localhost:8080` ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰

ãƒªã‚¹ãƒˆã‚’ `"*"` (ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰) ã¨å®£è¨€ã—ã¦ã€ã™ã¹ã¦ã‚’è¨±å¯ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ãŸã ã—ã€Bearer Tokenã§ä½¿ç”¨ã•ã‚Œã‚‹ã‚ˆã†ãªèªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼ã‚„Cookieãªã©ã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æƒ…å ±ã«é–¢ã™ã‚‹ã‚‚ã®ã‚’é™¤ã„ã¦ã€ç‰¹å®šã®ç¨®é¡ã®é€šä¿¡ã®ã¿ãŒè¨±å¯ã•ã‚Œã¾ã™ã€‚

ã—ãŸãŒã£ã¦ã€ã™ã¹ã¦ã‚’æ­£ã—ãæ©Ÿèƒ½ã•ã›ã‚‹ãŸã‚ã«ã€è¨±å¯ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³ã®æ˜ç¤ºçš„ãªæŒ‡å®šã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

## `CORSMiddleware` ã®ä½¿ç”¨

**FastAPI** ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ `CORSMiddleware` ã‚’ä½¿ç”¨ã—ã¦ã€CORSã«é–¢ã™ã‚‹è¨­å®šãŒã§ãã¾ã™ã€‚

* `CORSMiddleware`ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
* è¨±å¯ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³ã®ãƒªã‚¹ãƒˆã‚’ (æ–‡å­—åˆ—ã¨ã—ã¦) ä½œæˆã—ã¾ã™ã€‚
* ã“ã‚Œã‚’ã€ŒãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã€ã¨ã—ã¦ **FastAPI** ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã—ã¾ã™ã€‚

ä»¥ä¸‹ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«è¨±å¯ã•ã›ã‚‹ã‹ã©ã†ã‹æŒ‡å®šã§ãã¾ã™:

* ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«æƒ…å ± (èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼ã€Cookieãªã©) ã€‚
* ç‰¹å®šã®HTTPãƒ¡ã‚½ãƒƒãƒ‰ (`POST`ã€`PUT`) ã¾ãŸã¯ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ `"*"` ã‚’ä½¿ç”¨ã—ã¦ã™ã¹ã¦è¨±å¯ã€‚
* ç‰¹å®šã®HTTPãƒ˜ãƒƒãƒ€ãƒ¼ã€ã¾ãŸã¯ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ `"*"`ã‚’ä½¿ç”¨ã—ã¦ã™ã¹ã¦è¨±å¯ã€‚

{* ../../docs_src/cors/tutorial001.py hl[2,6:11,13:19] *}

`CORSMiddleware` å®Ÿè£…ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯CORSã«é–¢ã—ã¦åˆ¶é™ã‚’ä¸ãˆã‚‹ã‚‚ã®ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è·¨ã„ã§ç‰¹å®šã®ã‚ªãƒªã‚¸ãƒ³ã€ãƒ¡ã‚½ãƒƒãƒ‰ã€ã¾ãŸã¯ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ã¯ã€ãã‚Œã‚‰ã‚’æ˜ç¤ºçš„ã«æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™

ä»¥ä¸‹ã®å¼•æ•°ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™:

* `allow_origins` - ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¨±å¯ã™ã‚‹ã‚ªãƒªã‚¸ãƒ³ã®ãƒªã‚¹ãƒˆã€‚ä¾‹ãˆã°ã€`['https://example.org', 'https://www.example.org']`ã€‚`['*']`ã‚’ä½¿ç”¨ã—ã¦ä»»æ„ã®ã‚ªãƒªã‚¸ãƒ³ã‚’è¨±å¯ã§ãã¾ã™ã€‚
* `allow_origin_regex` - ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¨±å¯ã™ã‚‹ã‚ªãƒªã‚¸ãƒ³ã®æ­£è¦è¡¨ç¾æ–‡å­—åˆ—ã€‚ä¾‹ãˆã°ã€`'https://.*\.example\.org'`ã€‚
* `allow_methods` - ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§è¨±å¯ã™ã‚‹HTTPãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒªã‚¹ãƒˆã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `['GET']` ã§ã™ã€‚`['*']`ã‚’ä½¿ç”¨ã—ã¦ã™ã¹ã¦ã®æ¨™æº–ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¨±å¯ã§ãã¾ã™ã€‚
* `allow_headers` - ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒªã‚¹ãƒˆã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `[]` ã§ã™ã€‚`['*']`ã‚’ä½¿ç”¨ã—ã¦ã€ã™ã¹ã¦ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¨±å¯ã§ãã¾ã™ã€‚CORSãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã¯ã€ `Accept` ã€ `Accept-Language` ã€ `Content-Language` ã€ `Content-Type` ãƒ˜ãƒƒãƒ€ãƒ¼ãŒå¸¸ã«è¨±å¯ã•ã‚Œã¾ã™ã€‚
* `allow_credentials` - ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§Cookieã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `False` ã§ã™ã€‚
* `expose_headers` - ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç¤ºã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `[]` ã§ã™ã€‚
* `max_age` - ãƒ–ãƒ©ã‚¦ã‚¶ãŒCORSãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹æœ€å¤§æ™‚é–“ã‚’ç§’å˜ä½ã§è¨­å®šã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `600` ã§ã™ã€‚

ã“ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¯2ç¨®é¡ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿œç­”ã—ã¾ã™...

### CORSãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ

ã“ã‚Œã‚‰ã¯ã€ `Origin` ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ `Access-Control-Request-Method` ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’æŒã¤ `OPTIONS` ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã™ã€‚

ã“ã®å ´åˆã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¨ªå–ã‚Šã—ã€é©åˆ‡ãªCORSãƒ˜ãƒƒãƒ€ãƒ¼ã¨å…±ã«æƒ…å ±æä¾›ã®ãŸã‚ã« `200` ã¾ãŸã¯ `400` ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚

### ã‚·ãƒ³ãƒ—ãƒ«ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ

`Origin` ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‚ã“ã®å ´åˆã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¯é€šå¸¸ã©ãŠã‚Šãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä½•ã‚‚ã—ãªã„ã§ã™ãŒã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«é©åˆ‡ãªCORSãƒ˜ãƒƒãƒ€ãƒ¼ã‚’åŠ ãˆã¾ã™ã€‚

## ã‚ˆã‚Šè©³ã—ã„æƒ…å ±

<abbr title="Cross-Origin Resource Sharing (ã‚ªãƒªã‚¸ãƒ³é–“ãƒªã‚½ãƒ¼ã‚¹å…±æœ‰)">CORS</abbr>ã«ã¤ã„ã¦ã‚ˆã‚Šè©³ã—ã„æƒ…å ±ã¯ã€<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" class="external-link" target="_blank">Mozilla CORS documentation</a> ã‚’å‚ç…§ã—ã¦ä¸‹ã•ã„ã€‚

/// note | æŠ€è¡“è©³ç´°

`from starlette.middleware.cors import CORSMiddleware` ã‚‚ä½¿ç”¨ã§ãã¾ã™ã€‚

**FastAPI** ã¯ã€é–‹ç™ºè€…ã®åˆ©ä¾¿æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã€`fastapi.middleware` ã§ã„ãã¤ã‹ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æä¾›ã—ã¾ã™ã€‚åˆ©ç”¨å¯èƒ½ãªãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ã»ã¨ã‚“ã©ã¯ã€Starletteã‹ã‚‰ç›´æ¥æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

///


================================================
File: /docs/ja/docs/tutorial/debugging.md
================================================
# ãƒ‡ãƒãƒƒã‚°

Visual Studio Codeã‚„PyCharmãªã©ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ä¸Šã§ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã¨é€£æºã§ãã¾ã™ã€‚

## `uvicorn` ã®å®Ÿè¡Œ

FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸Šã§ã€`uvicorn` ã‚’ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦å®Ÿè¡Œã—ã¾ã™:

{* ../../docs_src/debugging/tutorial001.py hl[1,15] *}

### `__name__ == "__main__"` ã«ã¤ã„ã¦

`__name__ == "__main__"` ã®ä¸»ãªç›®çš„ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§å‘¼ã³å‡ºã•ã‚ŒãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç”¨æ„ã™ã‚‹ã“ã¨ã§ã™:

<div class="termy">

```console
$ python myapp.py
```

</div>

ãŸã ã—ã€æ¬¡ã®ã‚ˆã†ã«ã€åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã¨ãã«ã¯å‘¼ã³å‡ºã•ã‚Œã¾ã›ã‚“:

```Python
from myapp import app
```

#### ã‚ˆã‚Šè©³ã—ã„èª¬æ˜

ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ãŒ `myapp.py` ã ã¨ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®æ§˜ã«å®Ÿè¡Œã™ã‚‹å ´åˆ:

<div class="termy">

```console
$ python myapp.py
```

</div>

Pythonã«ã‚ˆã£ã¦è‡ªå‹•çš„ã«ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«å†…ã®å†…éƒ¨å¤‰æ•° `__name__` ã¯ã€å€¤ã¨ã—ã¦æ–‡å­—åˆ— `"__main__"` ã‚’æŒã¡ã¾ã™ã€‚

ãªã®ã§ã€ä»¥ä¸‹:

```Python
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

ã¯å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

---

ãã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (ãƒ•ã‚¡ã‚¤ãƒ«) ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸå ´åˆã¯ã€ã“ã†ã¯ãªã‚Šã¾ã›ã‚“ã€‚

ã—ãŸãŒã£ã¦ã€æ¬¡ã®ã‚ˆã†ãªã‚‚ã†ä¸€ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ« `importer.py` ãŒã‚ã‚‹å ´åˆ:

```Python
from myapp import app

# Some more code
```

`myapp.py` å†…ã®è‡ªå‹•å¤‰æ•°ã«ã¯ã€å€¤ãŒ `"__main __"` ã®å¤‰æ•° `__name__` ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã—ãŸãŒã£ã¦ã€ä»¥ä¸‹ã®è¡Œ:

```Python
